<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>outrankingDigraphs &mdash; Digraph3 3.13.2 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/tooltipster.custom.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/tooltipster.bundle.min.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/tooltipster-sideTip-shadow.min.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/tooltipster-sideTip-punk.min.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/tooltipster-sideTip-noir.min.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/tooltipster-sideTip-light.min.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/tooltipster-sideTip-borderless.min.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/micromodal.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/sphinx_rtd_theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=f92f4e34"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=15d7cbb8"></script>
        <script src="../_static/js/hoverxref.js?v=4352a7d3"></script>
        <script src="../_static/js/tooltipster.bundle.min.js?v=18bf091b"></script>
        <script src="../_static/js/micromodal.min.js?v=04d6302d"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Digraph3
              <img src="../_static/htmlLogo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                Python 3.13
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">1. Digraph3 Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../techDoc.html">2. Technical Reference of the Digraph3 modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pearls.html">3. Pearls of bipolar-valued epistemic logic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../adtLectures.html">4. Algorithmic Decision Theory Lectures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../compStatLectures.html">5. Computational Statistics Lectures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../digraph3Archives.html">6. Digraph3 Archives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../errataList.html">7. Digraph3 Book Errata List</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Digraph3</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Module code</a></li>
      <li class="breadcrumb-item active">outrankingDigraphs</li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for outrankingDigraphs</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python3</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Python3 implementation of outranking digraphs.</span>
<span class="sd">Copyright (C) 2006-2025  Raymond Bisdorff</span>

<span class="sd">    This program is free software; you can redistribute it and/or modify</span>
<span class="sd">    it under the terms of the GNU General Public License as published by</span>
<span class="sd">    the Free Software Foundation; either version 3 of the License, or</span>
<span class="sd">    (at your option) any later version.</span>

<span class="sd">    This program is distributed in the hope that it will be useful,</span>
<span class="sd">    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="sd">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="sd">    GNU General Public License for more details.</span>

<span class="sd">    You should have received a copy of the GNU General Public License along</span>
<span class="sd">    with this program; if not, write to the Free Software Foundation, Inc.,</span>
<span class="sd">    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;Revision: Py3.13.2&quot;</span>

<span class="kn">from</span> <span class="nn">digraphsTools</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">digraphs</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">xmlrpc.client</span> <span class="kn">import</span> <span class="n">ServerProxy</span>
<span class="kn">from</span> <span class="nn">outrankingDigraphs</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span><span class="p">,</span> <span class="n">deepcopy</span>
<span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>
<span class="kn">from</span> <span class="nn">pickle</span> <span class="kn">import</span> <span class="n">Pickler</span><span class="p">,</span> <span class="n">dumps</span><span class="p">,</span> <span class="n">loads</span><span class="p">,</span> <span class="n">load</span>
<span class="c1">#from multiprocessing import Process, Lock,\</span>
<span class="c1">#                        active_children, cpu_count</span>
<span class="kn">import</span> <span class="nn">multiprocessing</span> <span class="k">as</span> <span class="nn">mp</span>
<span class="c1"># mpctx = mp.get_context(&#39;spawn&#39;)</span>
<span class="c1"># Process = mpctx.Process</span>
<span class="c1"># active_children = mpctx.active_children</span>
<span class="c1"># cpu_count = mpctx.cpu_count</span>

<span class="c1">#-------------------------------------------</span>
        
<div class="viewcode-block" id="OutrankingDigraph">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">OutrankingDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">,</span><span class="n">PerformanceTableau</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract root class for **outranking digraphs** inheritating methods both from the generic :py:class:`digraphs.Digraph`</span>
<span class="sd">    and from the generic :py:class:`perfTabs.PerformanceTableau` root classes.</span>
<span class="sd">    As such, our genuine outranking digraph model is a hybrid object appearing on the one side as digraph with a</span>
<span class="sd">    nodes set (the decision alternatives) and a binary relation (outranking situations) and, on the other side, as</span>
<span class="sd">    a performance tableau with a set of decision alternatives, performance criteria and a table of performance measurements.</span>

<span class="sd">    Provides common methods to all specialized models of outranking digraphs, the standard outranking digraph model being provided</span>
<span class="sd">    by the :py:class:`outrankingDigraphs.BipolarOutrankingDigraph` class. </span>

<span class="sd">    A given object of this class consists at least in:</span>

<span class="sd">    1. a potential set of decision **actions** : an (ordered) dictionary describing the potential decision actions or alternatives with &#39;name&#39; and &#39;comment&#39; attributes,</span>
<span class="sd">    2. a coherent family of **criteria**: an (ordered) dictionary of criteria functions used for measuring the performance of each potential decision action with respect to the preference dimension captured by each criterion,</span>
<span class="sd">    3. the **evaluations**: a dictionary of performance evaluations for each decision action or alternative on each criterion function. </span>
<span class="sd">    4. the digraph **valuationdomain**, a dictionary with three entries: the *minimum* (-100, means certainly no link), the *median* (0, means missing information) and the *maximum* characteristic value (+100, means certainly a link),</span>
<span class="sd">    5. the **outranking relation** : a double dictionary defined on the Cartesian product of the set of decision alternatives capturing the credibility of the pairwise *outranking situation* computed on the basis of the performance differences observed between couples of decision alternatives on the given family if criteria functions.   </span>


<span class="sd">    .. warning::</span>

<span class="sd">        Cannot be called directly ! No __init__(self,...) method defined.</span>
<span class="sd">        </span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="OutrankingDigraph.computeMarginalObjectiveCorrelation">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.computeMarginalObjectiveCorrelation">[docs]</a>
    <span class="k">def</span> <span class="nf">computeMarginalObjectiveCorrelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">args</span><span class="p">,</span><span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                    <span class="n">nbrOfCPUs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                    <span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the ordinal correlation coefficient between</span>
<span class="sd">        the marginal criterion relation and a </span>
<span class="sd">        given normalized outranking relation.</span>

<span class="sd">        args = (objective,relation)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">objective</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">gc</span> <span class="o">=</span> <span class="n">BipolarOutrankingDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Normalized</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                          <span class="c1">#coalition=[criterion],</span>
                                          <span class="n">objectivesSubset</span><span class="o">=</span><span class="p">[</span><span class="n">objective</span><span class="p">],</span>
                                          <span class="n">CopyPerfTab</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                          <span class="n">Threading</span><span class="o">=</span><span class="n">Threading</span><span class="p">,</span>
                                          <span class="n">nbrCores</span><span class="o">=</span><span class="n">nbrOfCPUs</span><span class="p">,</span>
                                          <span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
        <span class="n">corr</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">computeOrdinalCorrelationMP</span><span class="p">(</span><span class="n">relation</span><span class="p">,</span>
                                              <span class="n">Threading</span><span class="o">=</span><span class="n">Threading</span><span class="p">,</span>
                                              <span class="n">nbrOfCPUs</span><span class="o">=</span><span class="n">nbrOfCPUs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">corr</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">corr</span></div>


<div class="viewcode-block" id="OutrankingDigraph.computeMarginalCorrelation">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.computeMarginalCorrelation">[docs]</a>
    <span class="k">def</span> <span class="nf">computeMarginalCorrelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">args</span><span class="p">,</span><span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                    <span class="n">nbrOfCPUs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                    <span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the ordinal correlation coefficient between</span>
<span class="sd">        the marginal criterion relation and a </span>
<span class="sd">        given normalized outranking relation.</span>

<span class="sd">        args = (criterion,relation)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">criterion</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">gc</span> <span class="o">=</span> <span class="n">BipolarOutrankingDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Normalized</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                          <span class="n">coalition</span><span class="o">=</span><span class="p">[</span><span class="n">criterion</span><span class="p">],</span>
                                          <span class="n">CopyPerfTab</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                          <span class="n">Threading</span><span class="o">=</span><span class="n">Threading</span><span class="p">,</span>
                                          <span class="n">nbrCores</span><span class="o">=</span><span class="n">nbrOfCPUs</span><span class="p">,</span>
                                          <span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
        <span class="n">corr</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">computeOrdinalCorrelationMP</span><span class="p">(</span><span class="n">relation</span><span class="p">,</span>
                                              <span class="n">Threading</span><span class="o">=</span><span class="n">Threading</span><span class="p">,</span>
                                              <span class="n">nbrOfCPUs</span><span class="o">=</span><span class="n">nbrOfCPUs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">corr</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">corr</span></div>


<div class="viewcode-block" id="OutrankingDigraph.showOutrankingConsensusQuality">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.showOutrankingConsensusQuality">[docs]</a>
    <span class="k">def</span> <span class="nf">showOutrankingConsensusQuality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Sorted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">ValuedCorrelation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                          <span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">nbrCores</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                          <span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Show method for the computeOutrankingConsensusQuality() method.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">computeOutrankingConsensusQuality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Sorted</span><span class="o">=</span><span class="n">Sorted</span><span class="p">,</span>
                                               <span class="n">ValuedCorrelation</span><span class="o">=</span><span class="n">ValuedCorrelation</span><span class="p">,</span>
                                          <span class="n">Threading</span><span class="o">=</span><span class="n">Threading</span><span class="p">,</span><span class="n">nbrCores</span><span class="o">=</span><span class="n">nbrCores</span><span class="p">,</span>
                                          <span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="OutrankingDigraph.computeOutrankingConsensusQuality">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.computeOutrankingConsensusQuality">[docs]</a>
    <span class="k">def</span> <span class="nf">computeOutrankingConsensusQuality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Sorted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">ValuedCorrelation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                          <span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">nbrCores</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                          <span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the marginal criteria correlations with the corresponding global outranking relation with summary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span>
        <span class="c1"># self is an OutrankingDigraph object</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">marginalCorrelations</span><span class="o">=</span>\
            <span class="bp">self</span><span class="o">.</span><span class="n">computeMarginalVersusGlobalOutrankingCorrelations</span><span class="p">(</span>
                <span class="n">Sorted</span><span class="o">=</span><span class="n">Sorted</span><span class="p">,</span>
                <span class="n">ValuedCorrelation</span><span class="o">=</span><span class="n">ValuedCorrelation</span><span class="p">,</span>
                <span class="n">Threading</span><span class="o">=</span><span class="n">Threading</span><span class="p">,</span><span class="n">nbrCores</span><span class="o">=</span><span class="n">nbrCores</span><span class="p">,</span>
                <span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">ncrit</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">marginalCorrelations</span><span class="p">)))</span>
        <span class="n">meanMarginalCorrelation</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="n">varMarginalCorrelation</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="n">sumWeights</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">cg</span> <span class="ow">in</span> <span class="n">marginalCorrelations</span><span class="p">:</span>
            <span class="c1">#if cg[0] &lt; Decimal(&#39;0&#39;):</span>
            <span class="n">sumWeights</span> <span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">cg</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">cg</span> <span class="ow">in</span> <span class="n">marginalCorrelations</span><span class="p">:</span>
            <span class="c1">#if cg[0] &lt; Decimal(&#39;0&#39;):</span>
            <span class="n">cgw</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">cg</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span><span class="o">/</span><span class="n">sumWeights</span>
            <span class="n">meanMarginalCorrelation</span> <span class="o">+=</span> <span class="n">cg</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">cgw</span>
        <span class="k">for</span> <span class="n">cg</span> <span class="ow">in</span> <span class="n">marginalCorrelations</span><span class="p">:</span>
            <span class="c1">#if cg[0] &lt; Decimal(&#39;0&#39;):</span>
            <span class="n">cgw</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">cg</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span><span class="o">/</span><span class="n">sumWeights</span>
            <span class="n">varMarginalCorrelation</span> <span class="o">+=</span> <span class="p">((</span><span class="n">cg</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">meanMarginalCorrelation</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">cgw</span>
            <span class="c1">#varMarginalCorrelation += (cg[0]**2)*cgw</span>
        <span class="c1"># #meanMarginalCriteriaCorrelation /= ncrit</span>
        <span class="c1"># #varMarginalCriteriaCorrelation /= ncrit</span>
        <span class="c1"># #varMarginalCorrelation -= meanMarginalCorrelation*meanMarginalCriteriaCorrelation</span>
        <span class="n">sdMarginalCorrelation</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">varMarginalCorrelation</span><span class="p">)</span> 
        <span class="c1"># # showing the results</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Consensus quality of global outranking:&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ValuedCorrelation</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;criterion (weight): valued correlation&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--------------------------------------&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;criterion (weight): correlation&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-------------------------------&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">cg</span> <span class="ow">in</span> <span class="n">marginalCorrelations</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> (</span><span class="si">%.3f</span><span class="s1">): </span><span class="si">%+.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">cg</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">cg</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span><span class="o">/</span><span class="n">sumWeights</span><span class="p">,</span><span class="n">cg</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Summary:&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Weighted mean marginal correlation (a): </span><span class="si">%+.3f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                  <span class="n">meanMarginalCorrelation</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Standard deviation (b)                : </span><span class="si">%+.3f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                  <span class="n">sdMarginalCorrelation</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Ranking fairness (a)-(b)              : </span><span class="si">%+.3f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                  <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">meanMarginalCorrelation</span><span class="p">)</span> <span class="o">-</span> <span class="n">sdMarginalCorrelation</span><span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">marginalCorrelations</span><span class="p">,</span>
                <span class="n">meanMarginalCorrelation</span><span class="p">,</span>
                <span class="n">sdMarginalCorrelation</span><span class="p">)</span></div>


<span class="c1">#-----------------</span>

<div class="viewcode-block" id="OutrankingDigraph.showMarginalObjectivesVersusGlobalRankingCorrelations">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.showMarginalObjectivesVersusGlobalRankingCorrelations">[docs]</a>
    <span class="k">def</span> <span class="nf">showMarginalObjectivesVersusGlobalRankingCorrelations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ranking</span><span class="p">,</span>
                        <span class="n">Sorted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">ValuedCorrelation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">nbrCores</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Corresponding compute method with Comments = True flag.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">computeMarginalObjectivesVersusGlobalRankingCorrelations</span><span class="p">(</span>
                    <span class="n">ranking</span><span class="p">,</span><span class="n">Sorted</span><span class="o">=</span><span class="n">Sorted</span><span class="p">,</span><span class="n">ValuedCorrelation</span><span class="o">=</span><span class="n">ValuedCorrelation</span><span class="p">,</span>
                    <span class="n">Threading</span><span class="o">=</span><span class="n">Threading</span><span class="p">,</span><span class="n">nbrCores</span><span class="o">=</span><span class="n">nbrCores</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="OutrankingDigraph.computeMarginalObjectivesVersusGlobalRankingCorrelations">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.computeMarginalObjectivesVersusGlobalRankingCorrelations">[docs]</a>
    <span class="k">def</span> <span class="nf">computeMarginalObjectivesVersusGlobalRankingCorrelations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ranking</span><span class="p">,</span>
                                                           <span class="n">Sorted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">ValuedCorrelation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                                          <span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">nbrCores</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                                                 <span class="n">startMethod</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                                          <span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method for computing correlations between each individual objective&#39;s outranking relation and the given global ranking relation.</span>
<span class="sd">        </span>
<span class="sd">        Returns a list of tuples (correlation,objectiveKey) sorted by default in decreasing order of the correlation.</span>

<span class="sd">        If Threading is True, a multiprocessing Pool class is used with a parallel equivalent of the built-in map function.</span>

<span class="sd">        If nbrCores is not set, the os.cpu_count() function is used to determine the number of available cores.</span>

<span class="sd">        *Usage example*:</span>

<span class="sd">        &gt;&gt;&gt; from outrankingDigraphs import *</span>
<span class="sd">        &gt;&gt;&gt; t = Random3ObjectivesPerformanceTableau(</span>
<span class="sd">                                   numberOfActions=21,</span>
<span class="sd">                                   numberOfCriteria=17,</span>
<span class="sd">                                   vetoProbability=0.2,</span>
<span class="sd">                                   seed=12)</span>
<span class="sd">        &gt;&gt;&gt; g = BipolarOutrankingDigraph(t)</span>
<span class="sd">        &gt;&gt;&gt; ranking = g.computeNetFlowsRanking()</span>
<span class="sd">        &gt;&gt;&gt; g.computeMarginalObjectivesVersusGlobalRankingCorrelations(</span>
<span class="sd">                          ranking,Threading=False,Comments=True)</span>
<span class="sd">         Marginal objective ordinal correlation with given ranking</span>
<span class="sd">         -------------------------------------------------</span>
<span class="sd">         Given ranking: [&#39;p04&#39;, &#39;p09&#39;, &#39;p01&#39;, &#39;p08&#39;, &#39;p16&#39;, &#39;p03&#39;, </span>
<span class="sd">                         &#39;p13&#39;, &#39;p20&#39;, &#39;p15&#39;, &#39;p10&#39;, &#39;p18&#39;, &#39;p19&#39;, </span>
<span class="sd">                         &#39;p06&#39;, &#39;p02&#39;, &#39;p07&#39;, &#39;p11&#39;, &#39;p05&#39;, &#39;p12&#39;, </span>
<span class="sd">                         &#39;p14&#39;, &#39;p21&#39;, &#39;p17&#39;]</span>
<span class="sd">         Objective (weight): correlation</span>
<span class="sd">         Soc (135.00): 	 +0.473</span>
<span class="sd">         Eco (135.00): 	 +0.457</span>
<span class="sd">         Env (135.00): 	 +0.326</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">objectives</span> <span class="o">=</span> <span class="p">[</span><span class="n">obj</span> <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No objectives deined in this performance tableau!&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>
        <span class="n">preorder</span> <span class="o">=</span> <span class="n">ranking2preorder</span><span class="p">(</span><span class="n">ranking</span><span class="p">)</span>
        <span class="n">preorderRelation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computePreorderRelation</span><span class="p">(</span><span class="n">preorder</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span> <span class="ow">or</span>\
           <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">):</span>
            <span class="n">origValuationdomain</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">Normalizing</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Normalizing</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">Threading</span><span class="p">:</span>
            <span class="c1">#from multiprocessing import Pool</span>
            <span class="c1">#from os import cpu_count</span>
            <span class="kn">import</span> <span class="nn">multiprocessing</span> <span class="k">as</span> <span class="nn">mp</span>
            <span class="k">if</span> <span class="n">startMethod</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">startMethod</span> <span class="o">=</span> <span class="s1">&#39;spawn&#39;</span>
            <span class="n">mpctx</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">startMethod</span><span class="p">)</span>
            <span class="n">Pool</span> <span class="o">=</span> <span class="n">mpctx</span><span class="o">.</span><span class="n">Pool</span>
            <span class="n">cpu_count</span> <span class="o">=</span> <span class="n">mpctx</span><span class="o">.</span><span class="n">cpu_count</span>

            <span class="k">if</span> <span class="n">nbrCores</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">nbrCores</span><span class="o">=</span> <span class="n">cpu_count</span><span class="p">()</span>
                
            <span class="n">argsList</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span><span class="n">preorderRelation</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span><span class="p">]</span>
            <span class="k">with</span> <span class="n">Pool</span><span class="p">(</span><span class="n">nbrCores</span><span class="p">)</span> <span class="k">as</span> <span class="n">proc</span><span class="p">:</span>   
                <span class="n">correlations</span> <span class="o">=</span> <span class="n">proc</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">computeMarginalObjectiveCorrelation</span><span class="p">,</span><span class="n">argsList</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ValuedCorrelation</span><span class="p">:</span>
                <span class="n">objectivesCorrelation</span> <span class="o">=</span> <span class="p">[(</span><span class="n">correlations</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;correlation&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">correlations</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;determination&#39;</span><span class="p">],</span><span class="n">argsList</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">argsList</span><span class="p">))]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">objectivesCorrelation</span> <span class="o">=</span> <span class="p">[(</span><span class="n">correlations</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;correlation&#39;</span><span class="p">],</span><span class="n">argsList</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">argsList</span><span class="p">))]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">objectives</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span><span class="p">]</span>
            <span class="n">objectivesCorrelation</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">objectives</span><span class="p">:</span>
                <span class="n">corr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeMarginalObjectiveCorrelation</span><span class="p">((</span><span class="n">c</span><span class="p">,</span><span class="n">preorderRelation</span><span class="p">),</span><span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ValuedCorrelation</span><span class="p">:</span>
                    <span class="n">objectivesCorrelation</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;correlation&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;determination&#39;</span><span class="p">],</span><span class="n">c</span><span class="p">))</span>            
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">objectivesCorrelation</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;correlation&#39;</span><span class="p">],</span><span class="n">c</span><span class="p">))</span>            
        <span class="k">if</span> <span class="n">Sorted</span><span class="p">:</span>
            <span class="n">objectivesCorrelation</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">Normalizing</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="n">origValuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">],</span><span class="n">origValuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">objectivesCorrelation</span> <span class="o">!=</span> <span class="p">[]:</span>
                <span class="k">if</span> <span class="n">ValuedCorrelation</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Marginal objective valued correlation with given ranking&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Marginal objective ordinal correlation with given ranking&quot;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-------------------------------------------------&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Given ranking:&#39;</span><span class="p">,</span><span class="n">ranking</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Objective (weight): correlation&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">objectivesCorrelation</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">ValuedCorrelation</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> (</span><span class="si">%.2f</span><span class="s1">): </span><span class="se">\t</span><span class="s1"> </span><span class="si">%+.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">item</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">objectives</span><span class="p">[</span><span class="n">item</span><span class="p">[</span><span class="mi">2</span><span class="p">]][</span><span class="s1">&#39;weight&#39;</span><span class="p">],</span>
                            <span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span> <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> (</span><span class="si">%.2f</span><span class="s1">): </span><span class="se">\t</span><span class="s1"> </span><span class="si">%+.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">objectives</span><span class="p">[</span><span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="s1">&#39;weight&#39;</span><span class="p">],</span>
                            <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No objectives defined !&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">objectivesCorrelation</span>   </div>


    <span class="k">def</span> <span class="nf">showMarginalVersusGlobalOutrankingCorrelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Sorted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">ValuedCorrelation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                                      <span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                                      <span class="n">nbrOfCPUs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show method for computeCriterionCorrelation results.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span> <span class="ow">or</span>\
           <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">):</span>
            <span class="n">origValuationdomain</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">Normalizing</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Normalizing</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">criteriaCorrelation</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">totCorrelation</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="n">corr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeCriterionCorrelation</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">Threading</span><span class="o">=</span><span class="n">Threading</span><span class="p">,</span><span class="n">nbrOfCPUs</span><span class="o">=</span><span class="n">nbrOfCPUs</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ValuedCorrelation</span><span class="p">:</span>
                <span class="n">totCorrelation</span> <span class="o">+=</span> <span class="n">corr</span><span class="p">[</span><span class="s1">&#39;correlation&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;determination&#39;</span><span class="p">]</span>
                <span class="n">criteriaCorrelation</span><span class="o">.</span><span class="n">append</span><span class="p">(((</span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;correlation&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;determination&#39;</span><span class="p">]),</span><span class="n">c</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">totCorrelation</span> <span class="o">+=</span> <span class="n">corr</span><span class="p">[</span><span class="s1">&#39;correlation&#39;</span><span class="p">]</span>
                <span class="n">criteriaCorrelation</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;correlation&#39;</span><span class="p">],</span><span class="n">c</span><span class="p">))</span>                
        <span class="k">if</span> <span class="n">Sorted</span><span class="p">:</span>
            <span class="n">criteriaCorrelation</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ValuedCorrelation</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Marginal versus global outranking valued correlation&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Marginal versus global outranking correlation&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;criterion | weight</span><span class="se">\t</span><span class="s1"> correlation&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;----------|---------------------------&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">criteriaCorrelation</span><span class="p">:</span>
                <span class="n">c</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%9s</span><span class="s1"> |  </span><span class="si">%.2f</span><span class="s1"> </span><span class="se">\t</span><span class="s1"> </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">c</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">],</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Sum(Correlations) : </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">totCorrelation</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Determinateness   : </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;determination&#39;</span><span class="p">]))</span>
        <span class="k">if</span> <span class="n">Normalizing</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="n">origValuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">],</span>
                                 <span class="n">origValuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">criteriaCorrelation</span>

<span class="c1">#---------------</span>
<div class="viewcode-block" id="OutrankingDigraph.computeMarginalVersusGlobalRankingCorrelations">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.computeMarginalVersusGlobalRankingCorrelations">[docs]</a>
    <span class="k">def</span> <span class="nf">computeMarginalVersusGlobalRankingCorrelations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                    <span class="n">ranking</span><span class="p">,</span>
                    <span class="n">Sorted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">ValuedCorrelation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">nbrCores</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                    <span class="n">startMethod</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                    <span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method for computing correlations between each individual criterion relation with the corresponding global ranking relation.</span>
<span class="sd">        </span>
<span class="sd">        Returns a list of tuples (correlation,criterionKey) sorted by default in decreasing order of the correlation.</span>

<span class="sd">        If Threading is True, a multiprocessing Pool class is used with a parallel equivalent of the built-in map function.</span>

<span class="sd">        If nbrCores is not set, the os.cpu_count() function is used to determine the number ofavailable cores.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>
        <span class="n">preorder</span> <span class="o">=</span> <span class="n">ranking2preorder</span><span class="p">(</span><span class="n">ranking</span><span class="p">)</span>
        <span class="n">preorderRelation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computePreorderRelation</span><span class="p">(</span><span class="n">preorder</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span> <span class="ow">or</span>\
           <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">):</span>
            <span class="n">origValuationdomain</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">Normalizing</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Normalizing</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">Threading</span><span class="p">:</span>
            <span class="c1">#from multiprocessing import Pool</span>
            <span class="c1">#from os import cpu_count</span>
            <span class="kn">import</span> <span class="nn">multiprocessing</span> <span class="k">as</span> <span class="nn">mp</span>
            <span class="k">if</span> <span class="n">startMethod</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">startMethod</span> <span class="o">=</span> <span class="s1">&#39;spawn&#39;</span>
            <span class="n">mpctx</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">startMethod</span><span class="p">)</span>
            <span class="n">Pool</span> <span class="o">=</span> <span class="n">mpctx</span><span class="o">.</span><span class="n">Pool</span>
            <span class="n">cpu_count</span> <span class="o">=</span> <span class="n">mpctx</span><span class="o">.</span><span class="n">cpu_count</span>

            <span class="k">if</span> <span class="n">nbrCores</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">nbrCores</span><span class="o">=</span> <span class="n">cpu_count</span><span class="p">()</span>
                
            <span class="n">argsList</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span><span class="n">preorderRelation</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
            <span class="k">with</span> <span class="n">Pool</span><span class="p">(</span><span class="n">nbrCores</span><span class="p">)</span> <span class="k">as</span> <span class="n">proc</span><span class="p">:</span>   
                <span class="n">correlations</span> <span class="o">=</span> <span class="n">proc</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">computeMarginalCorrelation</span><span class="p">,</span><span class="n">argsList</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ValuedCorrelation</span><span class="p">:</span>
                <span class="n">criteriaCorrelation</span> <span class="o">=</span> <span class="p">[(</span><span class="n">correlations</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;correlation&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">correlations</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;determination&#39;</span><span class="p">],</span><span class="n">argsList</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">argsList</span><span class="p">))]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">criteriaCorrelation</span> <span class="o">=</span> <span class="p">[(</span><span class="n">correlations</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;correlation&#39;</span><span class="p">],</span><span class="n">argsList</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">argsList</span><span class="p">))]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#criteriaList = [x for x in self.criteria]</span>
            <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
            <span class="n">criteriaCorrelation</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">criteria</span><span class="p">):</span>
                <span class="n">corr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeMarginalCorrelation</span><span class="p">((</span><span class="n">c</span><span class="p">,</span><span class="n">preorderRelation</span><span class="p">),</span><span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ValuedCorrelation</span><span class="p">:</span>
                    <span class="n">criteriaCorrelation</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;correlation&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;determination&#39;</span><span class="p">],</span><span class="n">c</span><span class="p">))</span>            
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">criteriaCorrelation</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;correlation&#39;</span><span class="p">],</span><span class="n">c</span><span class="p">))</span>            
        <span class="k">if</span> <span class="n">Sorted</span><span class="p">:</span>
            <span class="n">criteriaCorrelation</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">Normalizing</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="n">origValuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">],</span><span class="n">origValuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">criteriaCorrelation</span>   </div>


<div class="viewcode-block" id="OutrankingDigraph.computeCriterionCorrelation">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.computeCriterionCorrelation">[docs]</a>
    <span class="k">def</span> <span class="nf">computeCriterionCorrelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">criterion</span><span class="p">,</span><span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                    <span class="n">nbrOfCPUs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                    <span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the ordinal correlation coefficient between</span>
<span class="sd">        the global outranking and the marginal criterion relation.</span>

<span class="sd">        Uses the digraphs.computeOrdinalCorrelationMP().</span>

<span class="sd">        .. note::</span>

<span class="sd">             Renders a dictionary with the key &#39;correlation&#39; containing the actual bipolar correlation index and the key &#39;determination&#39; containing the minimal determination level D of the self outranking and the marginal criterion relation.</span>

<span class="sd">             D = sum_{x != y} min(abs(self.relation(x,y)),abs(marginalCriterionRelation(x,y)) / n(n-1)</span>

<span class="sd">             where n is the number of actions considered.</span>

<span class="sd">             The correlation index with a completely indeterminate relation</span>
<span class="sd">             is by convention 0.0 at determination level 0.0 .</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">gc</span> <span class="o">=</span> <span class="n">BipolarOutrankingDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Normalized</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">coalition</span><span class="o">=</span><span class="p">[</span><span class="n">criterion</span><span class="p">],</span><span class="n">CopyPerfTab</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                      <span class="n">Threading</span><span class="o">=</span><span class="n">Threading</span><span class="p">,</span><span class="n">nbrCores</span><span class="o">=</span><span class="n">nbrOfCPUs</span><span class="p">,</span>
                                      <span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
        <span class="n">corr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeOrdinalCorrelationMP</span><span class="p">(</span><span class="n">gc</span><span class="p">,</span><span class="n">Threading</span><span class="o">=</span><span class="n">Threading</span><span class="p">,</span><span class="n">nbrOfCPUs</span><span class="o">=</span><span class="n">nbrOfCPUs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">corr</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">corr</span></div>


<div class="viewcode-block" id="OutrankingDigraph.computeMarginalVersusGlobalOutrankingCorrelations">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.computeMarginalVersusGlobalOutrankingCorrelations">[docs]</a>
    <span class="k">def</span> <span class="nf">computeMarginalVersusGlobalOutrankingCorrelations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Sorted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">ValuedCorrelation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                                          <span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">nbrCores</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                                          <span class="n">startMethod</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                                          <span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method for computing correlations between each individual criterion relation with the corresponding</span>
<span class="sd">        global outranking relation.</span>
<span class="sd">        </span>
<span class="sd">        Returns a list of tuples (correlation,criterionKey) sorted by default in decreasing order of the correlation.</span>

<span class="sd">        If Threading is True, a multiprocessing Pool class is used with a parallel equivalent of the built-in map function.</span>

<span class="sd">        If nbrCores is not set, the os.cpu_count() function is used to determine the number of</span>
<span class="sd">        available cores.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span> <span class="ow">or</span>\
           <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">):</span>
            <span class="n">origValuationdomain</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">Normalizing</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Normalizing</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">Threading</span><span class="p">:</span>
            <span class="c1">#from multiprocessing import Pool</span>
            <span class="c1">#from os import cpu_count</span>
            <span class="kn">import</span> <span class="nn">multiprocessing</span> <span class="k">as</span> <span class="nn">mp</span>
            <span class="k">if</span> <span class="n">startMethod</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">startMethod</span> <span class="o">=</span> <span class="s1">&#39;spawn&#39;</span>
            <span class="n">mpctx</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">startMethod</span><span class="p">)</span>
            <span class="n">Pool</span> <span class="o">=</span> <span class="n">mpctx</span><span class="o">.</span><span class="n">Pool</span>
            <span class="n">cpu_count</span> <span class="o">=</span> <span class="n">mpctx</span><span class="o">.</span><span class="n">cpu_count</span>

            <span class="k">if</span> <span class="n">nbrCores</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">nbrCores</span><span class="o">=</span> <span class="n">cpu_count</span><span class="p">()</span>
            <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
            <span class="k">with</span> <span class="n">Pool</span><span class="p">(</span><span class="n">nbrCores</span><span class="p">)</span> <span class="k">as</span> <span class="n">proc</span><span class="p">:</span>   
                <span class="n">correlations</span> <span class="o">=</span> <span class="n">proc</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">computeCriterionCorrelation</span><span class="p">,</span><span class="n">criteriaList</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ValuedCorrelation</span><span class="p">:</span>
                <span class="n">criteriaCorrelation</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">(</span><span class="n">correlations</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;correlation&#39;</span><span class="p">]</span>\
                      <span class="o">*</span> <span class="n">correlations</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;determination&#39;</span><span class="p">],</span>
                     <span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">))]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">criteriaCorrelation</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">(</span><span class="n">correlations</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;correlation&#39;</span><span class="p">],</span>
                     <span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">))]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#criteriaList = [x for x in self.criteria]</span>
            <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
            <span class="n">criteriaCorrelation</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">criteria</span><span class="p">):</span>
                <span class="n">corr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeCriterionCorrelation</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ValuedCorrelation</span><span class="p">:</span>
                    <span class="n">criteriaCorrelation</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="p">(</span> <span class="p">(</span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;correlation&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;determination&#39;</span><span class="p">])</span> <span class="p">,</span><span class="n">c</span><span class="p">)</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">criteriaCorrelation</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;correlation&#39;</span><span class="p">],</span><span class="n">c</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">Sorted</span><span class="p">:</span>
            <span class="n">criteriaCorrelation</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">Normalizing</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="n">origValuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">],</span>
                                 <span class="n">origValuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">criteriaCorrelation</span>   </div>


<div class="viewcode-block" id="OutrankingDigraph.showMarginalVersusGlobalOutrankingCorrelation">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.showMarginalVersusGlobalOutrankingCorrelation">[docs]</a>
    <span class="k">def</span> <span class="nf">showMarginalVersusGlobalOutrankingCorrelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                        <span class="n">Sorted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">ValuedCorrelation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">nbrOfCPUs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show method for computeCriterionCorrelation results.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span> <span class="ow">or</span>\
           <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">):</span>
            <span class="n">origValuationdomain</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">Normalizing</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Normalizing</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">criteriaCorrelation</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">totCorrelation</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="n">corr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeCriterionCorrelation</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">Threading</span><span class="o">=</span><span class="n">Threading</span><span class="p">,</span><span class="n">nbrOfCPUs</span><span class="o">=</span><span class="n">nbrOfCPUs</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ValuedCorrelation</span><span class="p">:</span>
                <span class="n">totCorrelation</span> <span class="o">+=</span> <span class="n">corr</span><span class="p">[</span><span class="s1">&#39;correlation&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;determination&#39;</span><span class="p">]</span>
                <span class="n">criteriaCorrelation</span><span class="o">.</span><span class="n">append</span><span class="p">(((</span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;correlation&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;determination&#39;</span><span class="p">]),</span><span class="n">c</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">totCorrelation</span> <span class="o">+=</span> <span class="n">corr</span><span class="p">[</span><span class="s1">&#39;correlation&#39;</span><span class="p">]</span>
                <span class="n">criteriaCorrelation</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;correlation&#39;</span><span class="p">],</span><span class="n">c</span><span class="p">))</span>                
        <span class="k">if</span> <span class="n">Sorted</span><span class="p">:</span>
            <span class="n">criteriaCorrelation</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ValuedCorrelation</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Marginal versus global outranking valued correlation&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Marginal versus global outranking correlation&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;criterion | weight</span><span class="se">\t</span><span class="s1"> correlation&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;----------|---------------------------&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">criteriaCorrelation</span><span class="p">:</span>
                <span class="n">c</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%9s</span><span class="s1"> |  </span><span class="si">%.2f</span><span class="s1"> </span><span class="se">\t</span><span class="s1"> </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">c</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">],</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Sum(Correlations) : </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">totCorrelation</span><span class="p">)</span> <span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Determinateness   : </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;determination&#39;</span><span class="p">])</span> <span class="p">)</span>
        <span class="k">if</span> <span class="n">Normalizing</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span>
                <span class="n">origValuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">],</span><span class="n">origValuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">criteriaCorrelation</span></div>


<div class="viewcode-block" id="OutrankingDigraph.computeQuantileSortRelation">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.computeQuantileSortRelation">[docs]</a>
    <span class="k">def</span> <span class="nf">computeQuantileSortRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the bipolar-valued relation obtained from</span>
<span class="sd">        the self quantile sorting result.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">quantileSorting</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeQuantileSort</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">quantileSorting</span><span class="p">)</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">rankingRelation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">rankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">rrx</span> <span class="o">=</span> <span class="n">rankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="n">rrx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">quantileSorting</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">quantileSorting</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">quantileSorting</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">quantileSorting</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">quantileSorting</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">quantileSorting</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="n">rankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                    <span class="n">rankingRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                <span class="k">elif</span> <span class="n">quantileSorting</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">quantileSorting</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="n">rankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                    <span class="n">rankingRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">rankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                    <span class="n">rankingRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">rankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="n">rankingRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">rankingRelation</span>        </div>


<div class="viewcode-block" id="OutrankingDigraph.showCriterionRelationTable">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.showCriterionRelationTable">[docs]</a>
    <span class="k">def</span> <span class="nf">showCriterionRelationTable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">criterion</span><span class="p">,</span> <span class="n">actionsSubset</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        prints the relation valuation in actions X actions table format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">actionsSubset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="n">actionsSubset</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* ---- Criterion </span><span class="si">%s</span><span class="s1"> Relation Table -----</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                          <span class="n">criterion</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; S   | &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="c1">#actions = [x for x in actions]</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">]</span>

        <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="o">+</span><span class="n">x</span><span class="o">+</span><span class="s2">&quot;&#39;, &quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">-----|------------------------------------------------------------&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="o">+</span><span class="n">x</span><span class="o">+</span><span class="s2">&quot;&#39; | &quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="c1">#print &#39;%2.2f &#39; % (self.relation[x[1]][y[1]]),</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%2.2f</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">computeCriterionRelation</span><span class="p">(</span><span class="n">criterion</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="OutrankingDigraph.computeAMPLData">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.computeAMPLData">[docs]</a>
    <span class="k">def</span> <span class="nf">computeAMPLData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">OldValuation</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders the ampl data list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeCriterionRelation</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">OldValuation</span><span class="p">:</span>                        
                        <span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">value</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;1.0&quot;</span><span class="p">))</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;2.0&quot;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeCriterionRelation</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.1f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">value</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">()</span>         </div>


<div class="viewcode-block" id="OutrankingDigraph.computeCriterionRelation">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.computeCriterionRelation">[docs]</a>
    <span class="k">def</span> <span class="nf">computeCriterionRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        compute the outranking characteristic for actions x and y</span>
<span class="sd">        on criterion c.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">NA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NA</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">NA</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-999&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;1.0&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span><span class="p">:</span>		
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">indx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">indy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">ind</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">wpx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">wpy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">px</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">py</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                    <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">ind</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localConcordance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localConcordance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.5&quot;</span><span class="p">)</span></div>



<div class="viewcode-block" id="OutrankingDigraph.computeSingletonRanking">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.computeSingletonRanking">[docs]</a>
    <span class="k">def</span> <span class="nf">computeSingletonRanking</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">Debug</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the sorted bipolar net determinatation of outrankingness</span>
<span class="sd">        minus outrankedness credibilities of all singleton choices.</span>

<span class="sd">        res = ((netdet,singleton,dom,absorb)+)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">copy</span>
        <span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>
        <span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">100.0</span><span class="p">)</span>
        

        <span class="n">sigs</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">singletons</span><span class="p">()]</span>

        <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sigs</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">sigs</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">domin</span><span class="p">(</span><span class="n">sigs</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">absorb</span><span class="p">(</span><span class="n">sigs</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
            <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">domin</span><span class="p">(</span><span class="n">sigs</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">absorb</span><span class="p">(</span><span class="n">sigs</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span><span class="n">sigs</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">domin</span><span class="p">(</span><span class="n">sigs</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span><span class="bp">self</span><span class="o">.</span><span class="n">absorb</span><span class="p">(</span><span class="n">sigs</span><span class="p">[</span><span class="n">i</span><span class="p">])))</span>

        <span class="n">res</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

    
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">res</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;{</span><span class="si">%s</span><span class="s2">} : </span><span class="si">%.3f</span><span class="s2"> &quot;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="p">[</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="mf">100.0</span><span class="p">)</span><span class="o">/</span><span class="mf">2.0</span> <span class="p">))</span>

        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">],</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">res</span></div>


<div class="viewcode-block" id="OutrankingDigraph.showSingletonRanking">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.showSingletonRanking">[docs]</a>
    <span class="k">def</span> <span class="nf">showSingletonRanking</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">Debug</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calls self.computeSingletonRanking(comments=True,Debug = False).</span>
<span class="sd">        Renders and prints the sorted bipolar net determinatation of outrankingness</span>
<span class="sd">        minus outrankedness credibilities of all singleton choices.</span>
<span class="sd">        res = ((netdet,sigleton,dom,absorb)+)</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeSingletonRanking</span><span class="p">(</span><span class="n">Comments</span><span class="p">,</span><span class="n">Debug</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span> </div>

    

<div class="viewcode-block" id="OutrankingDigraph.defaultDiscriminationThresholds">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.defaultDiscriminationThresholds">[docs]</a>
    <span class="k">def</span> <span class="nf">defaultDiscriminationThresholds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">quantile</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ind&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="s1">&#39;pref&#39;</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">:</span><span class="mi">60</span><span class="p">,</span><span class="s1">&#39;veto&#39;</span><span class="p">:</span><span class="mi">80</span><span class="p">},</span> <span class="n">Debug</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">comments</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        updates the discrimination thresholds with the percentiles</span>
<span class="sd">        from the performance differences.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            quantile = {&#39;ind&#39;: 10, &#39;pref&#39;: 20, &#39;weakVeto&#39;: 60, &#39;veto: 80}.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">computeDefaultDiscriminationThresholds</span><span class="p">(</span><span class="n">quantile</span><span class="p">,</span><span class="n">Debug</span><span class="p">,</span><span class="n">comments</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructRelation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">)</span></div>


<div class="viewcode-block" id="OutrankingDigraph.computeWeightsConcentrationIndex">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.computeWeightsConcentrationIndex">[docs]</a>
    <span class="k">def</span> <span class="nf">computeWeightsConcentrationIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the Gini concentration index of the weight distribution</span>

<span class="sd">        Based on the triangle summation formula.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">copy</span>
        <span class="n">weightSum</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="n">p</span><span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
        <span class="c1">#p = Decimal(str(len(self.criteria)))</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">))</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
            <span class="n">criteria</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="s1">&#39;weight&#39;</span><span class="p">],</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
        <span class="n">criteria</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
            <span class="n">weightSum</span> <span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">weightSum</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
            <span class="n">Q</span> <span class="o">=</span> <span class="p">[</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">p</span><span class="p">)]</span>
            <span class="n">F</span> <span class="o">=</span> <span class="p">[</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">p</span><span class="p">)]</span>
            <span class="n">F</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">Q</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">criteria</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">weightSum</span>           
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>
                <span class="n">qi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">criteria</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">weightSum</span>
                <span class="n">Q</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">Q</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">qi</span>
                <span class="n">fi</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>
                <span class="n">F</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">F</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">fi</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">gini</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">p</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">gini</span> <span class="o">+=</span> <span class="p">(</span><span class="n">F</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">Q</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span> <span class="o">-</span> <span class="p">(</span><span class="n">Q</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">F</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">gini</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">gini</span></div>


    <span class="k">def</span> <span class="nf">_constructRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">criteria</span><span class="p">,</span><span class="n">evaluation</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters:</span>
<span class="sd">            PerfTab.criteria, PerfTab.evaluation.</span>

<span class="sd">        Renders the biploar valued outranking relation from the data</span>
<span class="sd">        of a given performance tableau instantiation PerfTab.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">NA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NA</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]))</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]))</span>
        <span class="n">totalweight</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
            <span class="n">totalweight</span> <span class="o">=</span> <span class="n">totalweight</span> <span class="o">+</span> <span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
        <span class="n">vetos</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">nc</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">criteria</span><span class="p">)</span>
                    <span class="n">counter</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                    <span class="n">veto</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
                    <span class="n">abvetos</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span> <span class="ow">and</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span><span class="p">:</span>		
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">ax</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">ay</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="n">ind</span> <span class="o">=</span> <span class="n">ax</span> <span class="o">+</span> <span class="n">ay</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">ind</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">ax</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">ay</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="n">wp</span> <span class="o">=</span> <span class="n">ax</span> <span class="o">+</span> <span class="n">ay</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">bx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">by</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="n">p</span> <span class="o">=</span> <span class="n">bx</span> <span class="o">+</span> <span class="n">by</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">vx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">vy</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="n">v</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">v</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                                <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
                            <span class="n">lc0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localConcordance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
                            <span class="n">counter</span> <span class="o">=</span> <span class="n">counter</span> <span class="o">+</span> <span class="p">(</span><span class="n">lc0</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]))</span>
                            <span class="n">testveto</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localVeto</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                                <span class="n">veto</span> <span class="o">=</span> <span class="n">veto</span> <span class="o">+</span> <span class="n">testveto</span>
                                <span class="k">if</span> <span class="n">testveto</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">):</span>
                                    <span class="n">abvetos</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">c</span><span class="p">,</span><span class="n">v</span><span class="p">,</span><span class="n">d</span><span class="p">))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">counter</span> <span class="o">=</span> <span class="n">counter</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.5&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
                    <span class="n">concordindex</span> <span class="o">=</span> <span class="p">((</span><span class="n">counter</span> <span class="o">/</span> <span class="n">totalweight</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">Max</span><span class="o">-</span><span class="n">Min</span><span class="p">))</span> <span class="o">+</span> <span class="n">Min</span>
                    <span class="n">discordindex</span> <span class="o">=</span> <span class="n">Min</span>
                    <span class="k">if</span> <span class="n">veto</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">concordindex</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">discordindex</span>
                        <span class="n">vetos</span><span class="o">.</span><span class="n">append</span><span class="p">(([</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">concordindex</span><span class="p">],</span><span class="n">abvetos</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vetos</span> <span class="o">=</span> <span class="n">vetos</span>
        <span class="k">return</span> <span class="n">relation</span>

<div class="viewcode-block" id="OutrankingDigraph.computePairwiseOddsMatrix">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.computePairwiseOddsMatrix">[docs]</a>
    <span class="k">def</span> <span class="nf">computePairwiseOddsMatrix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            renders a double dictionary with odds:</span>
<span class="sd">            (positive chaacteristics, negative characteristics)</span>
<span class="sd">            per actions pair.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span>
            <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
            <span class="n">oddsMatrix</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="n">oddsMatrix</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span>
                        <span class="n">oddsMatrix</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">),</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>               
                        <span class="n">plusOdds</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                        <span class="n">minusOdds</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                            <span class="n">cab</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criterionCharacteristicFunction</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">cab</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                                <span class="n">plusOdds</span> <span class="o">+=</span> <span class="n">cab</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">minusOdds</span> <span class="o">+=</span> <span class="o">-</span><span class="n">cab</span>
                            <span class="c1">#print(c,plusodds,minusodds)</span>
                        <span class="n">oddsMatrix</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">plusOdds</span><span class="p">,</span><span class="n">minusOdds</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">oddsMatrix</span></div>


<div class="viewcode-block" id="OutrankingDigraph.computePairwiseCompleteComparison">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.computePairwiseCompleteComparison">[docs]</a>
    <span class="k">def</span> <span class="nf">computePairwiseCompleteComparison</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders pairwise complete comparison parameters for actions a and b</span>
<span class="sd">        on criterion c.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Debug</span> <span class="o">=</span> <span class="kc">False</span>
        
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">NA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NA</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>

        <span class="c1"># initialize Degenne vector</span>
        <span class="n">pairwiseComparison</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;v&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;wv&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;lt&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;leq&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;eq&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;geq&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;gt&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;gwvt&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;gvt&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>

        <span class="c1"># main loop</span>
        <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span> <span class="ow">or</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span><span class="p">:</span>
            <span class="c1"># compute discrimination thresholds</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">indx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">indy</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">ind</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">wpx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">wpy</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>                           
            <span class="k">except</span><span class="p">:</span>
                <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">px</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">py</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">wvx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">wvy</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">wv</span> <span class="o">=</span> <span class="n">wvx</span> <span class="o">+</span> <span class="n">wvy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">wv</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">vx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">vy</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">v</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">v</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
                
            <span class="c1"># compute performance difference</span>
            <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
            <span class="c1"># compute characteristic</span>
            
            <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>  <span class="c1"># positive difference</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="n">v</span><span class="p">:</span>
                    <span class="n">pairwiseComparison</span><span class="p">[</span><span class="s1">&#39;gvt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">elif</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="n">wv</span><span class="p">:</span>
                    <span class="n">pairwiseComparison</span><span class="p">[</span><span class="s1">&#39;gwvt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> 
                <span class="k">elif</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="n">p</span><span class="p">:</span>
                        <span class="n">pairwiseComparison</span><span class="p">[</span><span class="s1">&#39;gt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="k">elif</span> <span class="n">wp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="n">wp</span><span class="p">:</span>
                            <span class="n">pairwiseComparison</span><span class="p">[</span><span class="s1">&#39;geq&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">pairwiseComparison</span><span class="p">[</span><span class="s1">&#39;eq&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="n">ind</span><span class="p">:</span>
                            <span class="n">pairwiseComparison</span><span class="p">[</span><span class="s1">&#39;geq&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">pairwiseComparison</span><span class="p">[</span><span class="s1">&#39;eq&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pairwiseComparison</span><span class="p">[</span><span class="s1">&#39;geq&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                    
            <span class="k">elif</span> <span class="n">d</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span> <span class="c1"># zero difference</span>
                <span class="n">pairwiseComparison</span><span class="p">[</span><span class="s1">&#39;eq&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="k">else</span><span class="p">:</span>   <span class="c1"># negative difference</span>

                <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="n">v</span><span class="p">:</span>
                    <span class="n">pairwiseComparison</span><span class="p">[</span><span class="s1">&#39;v&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">elif</span> <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="n">wv</span><span class="p">:</span>
                    <span class="n">pairwiseComparison</span><span class="p">[</span><span class="s1">&#39;wv&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> 
                <span class="k">elif</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="n">p</span><span class="p">:</span>
                        <span class="n">pairwiseComparison</span><span class="p">[</span><span class="s1">&#39;lt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="k">elif</span> <span class="n">wp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="n">wp</span><span class="p">:</span>
                            <span class="n">pairwiseComparison</span><span class="p">[</span><span class="s1">&#39;leq&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">pairwiseComparison</span><span class="p">[</span><span class="s1">&#39;eq&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="o">-</span><span class="n">ind</span><span class="p">:</span>
                            <span class="n">pairwiseComparison</span><span class="p">[</span><span class="s1">&#39;leq&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">pairwiseComparison</span><span class="p">[</span><span class="s1">&#39;eq&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pairwiseComparison</span><span class="p">[</span><span class="s1">&#39;leq&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># missing evaluation(s)</span>
            <span class="n">d</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">pairwiseComparison</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&gt;&gt;&gt; c,a,b,d&#39;</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">d</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ind,wp,p,wv,v&#39;</span><span class="p">,</span> <span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;pairwiseComparison&#39;</span><span class="p">,</span> <span class="n">pairwiseComparison</span><span class="p">)</span>
            
        <span class="k">return</span> <span class="n">pairwiseComparison</span></div>


<div class="viewcode-block" id="OutrankingDigraph.computeActionsComparisonCorrelations">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.computeActionsComparisonCorrelations">[docs]</a>
    <span class="k">def</span> <span class="nf">computeActionsComparisonCorrelations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders the comparison correlations between the actions</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
        
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="c1">#nPairs = Decimal(str(len(criteriaList)*((len(criteriaList)-1))))</span>

        <span class="n">actionsCorrelationIndex</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
        <span class="c1">#for gi in criteriaList:</span>
            <span class="n">actionsCorrelationIndex</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1">#for gj in criteriaList:</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="n">actionsCorrelationIndex</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                <span class="n">nPairs</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                <span class="c1">#for a in actionsList:</span>
                <span class="k">for</span> <span class="n">gi</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>                
                    <span class="c1">#for b in actionsList:</span>
                    <span class="k">for</span> <span class="n">gj</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">gi</span> <span class="o">!=</span> <span class="n">gj</span><span class="p">:</span>                                                    
                            <span class="n">nPairs</span> <span class="o">+=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                            <span class="n">compi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computePairwiseCompleteComparison</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">gi</span><span class="p">)</span>
                            <span class="n">compj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computePairwiseCompleteComparison</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">gj</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">compi</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">compj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">compi</span> <span class="o">==</span> <span class="n">compj</span><span class="p">:</span>
                                    <span class="n">actionsCorrelationIndex</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">+=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                                <span class="k">elif</span> <span class="p">(</span><span class="n">compi</span><span class="p">[</span><span class="s1">&#39;gvt&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">compi</span><span class="p">[</span><span class="s1">&#39;gwvt&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">compi</span><span class="p">[</span><span class="s1">&#39;gt&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">compj</span><span class="p">[</span><span class="s1">&#39;gvt&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">compj</span><span class="p">[</span><span class="s1">&#39;gwvt&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">compj</span><span class="p">[</span><span class="s1">&#39;gt&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">):</span>
                                    <span class="n">actionsCorrelationIndex</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">+=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.5&#39;</span><span class="p">)</span>
                                <span class="k">elif</span> <span class="p">(</span><span class="n">compi</span><span class="p">[</span><span class="s1">&#39;v&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">compi</span><span class="p">[</span><span class="s1">&#39;wv&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">compi</span><span class="p">[</span><span class="s1">&#39;lt&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">compj</span><span class="p">[</span><span class="s1">&#39;v&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">compj</span><span class="p">[</span><span class="s1">&#39;wv&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">compj</span><span class="p">[</span><span class="s1">&#39;lt&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">):</span>
                                    <span class="n">actionsCorrelationIndex</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">+=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.5&#39;</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">actionsCorrelationIndex</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">+=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.5&#39;</span><span class="p">)</span>
                <span class="c1">#print nPairs,criteriaCorrelationIndex[gi][gj]</span>
                <span class="n">actionsCorrelationIndex</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2.0&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">actionsCorrelationIndex</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">-</span> <span class="n">nPairs</span><span class="p">)</span> <span class="o">/</span> <span class="n">nPairs</span>
        <span class="k">return</span> <span class="n">actionsCorrelationIndex</span></div>


<div class="viewcode-block" id="OutrankingDigraph.computeCriteriaCorrelations">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.computeCriteriaCorrelations">[docs]</a>
    <span class="k">def</span> <span class="nf">computeCriteriaCorrelations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ValuedCorrelation</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders the relation equivalence or correlation between the criteria</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">digraphs</span> <span class="kn">import</span> <span class="n">EquivalenceDigraph</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">nPairs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="o">*</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="c1">#nPairs = self.order*(self.order)</span>
        <span class="n">tau</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
        
        <span class="k">for</span> <span class="n">gi</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="n">tau</span><span class="p">[</span><span class="n">gi</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">d</span><span class="p">[</span><span class="n">gi</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">Pgi</span> <span class="o">=</span> <span class="n">BipolarOutrankingDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">coalition</span><span class="o">=</span><span class="p">[</span><span class="n">gi</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">gj</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="n">M</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                <span class="n">D</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                <span class="n">Pgj</span> <span class="o">=</span> <span class="n">BipolarOutrankingDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">coalition</span><span class="o">=</span><span class="p">[</span><span class="n">gj</span><span class="p">])</span>
                <span class="n">EQ</span> <span class="o">=</span> <span class="n">EquivalenceDigraph</span><span class="p">(</span><span class="n">Pgi</span><span class="p">,</span><span class="n">Pgj</span><span class="p">)</span>
                <span class="c1">#nPairs = 0.0</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                        <span class="c1">#if x != y:</span>
                        <span class="n">M</span> <span class="o">+=</span> <span class="n">EQ</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>
                        <span class="n">D</span> <span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">EQ</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">ValuedCorrelation</span><span class="p">:</span>
                    <span class="n">tau</span><span class="p">[</span><span class="n">gi</span><span class="p">][</span><span class="n">gj</span><span class="p">]</span> <span class="o">=</span> <span class="n">M</span> <span class="o">/</span> <span class="n">nPairs</span>
                <span class="k">elif</span> <span class="n">D</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                    <span class="n">tau</span><span class="p">[</span><span class="n">gi</span><span class="p">][</span><span class="n">gj</span><span class="p">]</span> <span class="o">=</span> <span class="n">M</span> <span class="o">/</span> <span class="n">D</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">tau</span><span class="p">[</span><span class="n">gi</span><span class="p">][</span><span class="n">gj</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                <span class="n">d</span><span class="p">[</span><span class="n">gi</span><span class="p">][</span><span class="n">gj</span><span class="p">]</span> <span class="o">=</span> <span class="n">D</span> <span class="o">/</span> <span class="n">nPairs</span>                            
                
        <span class="k">return</span> <span class="n">tau</span><span class="p">,</span> <span class="n">d</span></div>


<div class="viewcode-block" id="OutrankingDigraph.computeCriteriaComparisonCorrelations">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.computeCriteriaComparisonCorrelations">[docs]</a>
    <span class="k">def</span> <span class="nf">computeCriteriaComparisonCorrelations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders the comparison correlations between the criteria</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">nPairs</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span><span class="o">*</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">))))</span>

        <span class="n">criteriaCorrelationIndex</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">gi</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="n">criteriaCorrelationIndex</span><span class="p">[</span><span class="n">gi</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">gj</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="n">criteriaCorrelationIndex</span><span class="p">[</span><span class="n">gi</span><span class="p">][</span><span class="n">gj</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                <span class="c1">#nPairs = 0.0</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">b</span><span class="p">:</span>
                            <span class="c1">#nPairs += 1.0</span>
                            <span class="n">compi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computePairwiseCompleteComparison</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">gi</span><span class="p">)</span>
                            <span class="n">compj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computePairwiseCompleteComparison</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">gj</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">compi</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">compj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">compi</span> <span class="o">==</span> <span class="n">compj</span><span class="p">:</span>
                                    <span class="n">criteriaCorrelationIndex</span><span class="p">[</span><span class="n">gi</span><span class="p">][</span><span class="n">gj</span><span class="p">]</span> <span class="o">+=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                                <span class="k">elif</span> <span class="p">(</span><span class="n">compi</span><span class="p">[</span><span class="s1">&#39;gvt&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">compi</span><span class="p">[</span><span class="s1">&#39;gwvt&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">compi</span><span class="p">[</span><span class="s1">&#39;gt&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">compj</span><span class="p">[</span><span class="s1">&#39;gvt&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">compj</span><span class="p">[</span><span class="s1">&#39;gwvt&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">compj</span><span class="p">[</span><span class="s1">&#39;gt&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">):</span>
                                    <span class="n">criteriaCorrelationIndex</span><span class="p">[</span><span class="n">gi</span><span class="p">][</span><span class="n">gj</span><span class="p">]</span> <span class="o">+=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.5&#39;</span><span class="p">)</span>
                                <span class="k">elif</span> <span class="p">(</span><span class="n">compi</span><span class="p">[</span><span class="s1">&#39;v&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">compi</span><span class="p">[</span><span class="s1">&#39;wv&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">compi</span><span class="p">[</span><span class="s1">&#39;lt&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">compj</span><span class="p">[</span><span class="s1">&#39;v&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">compj</span><span class="p">[</span><span class="s1">&#39;wv&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">compj</span><span class="p">[</span><span class="s1">&#39;lt&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">1</span><span class="p">):</span>
                                    <span class="n">criteriaCorrelationIndex</span><span class="p">[</span><span class="n">gi</span><span class="p">][</span><span class="n">gj</span><span class="p">]</span> <span class="o">+=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.5&#39;</span><span class="p">)</span>                                
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">criteriaCorrelationIndex</span><span class="p">[</span><span class="n">gi</span><span class="p">][</span><span class="n">gj</span><span class="p">]</span> <span class="o">+=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.5&#39;</span><span class="p">)</span>
                <span class="c1">#print nPairs,criteriaCorrelationIndex[gi][gj]</span>
                <span class="n">criteriaCorrelationIndex</span><span class="p">[</span><span class="n">gi</span><span class="p">][</span><span class="n">gj</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2.0&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">criteriaCorrelationIndex</span><span class="p">[</span><span class="n">gi</span><span class="p">][</span><span class="n">gj</span><span class="p">]</span> <span class="o">-</span> <span class="n">nPairs</span><span class="p">)</span> <span class="o">/</span> <span class="n">nPairs</span>
        <span class="k">return</span> <span class="n">criteriaCorrelationIndex</span></div>



<div class="viewcode-block" id="OutrankingDigraph.showCriteriaCorrelationTable">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.showCriteriaCorrelationTable">[docs]</a>
    <span class="k">def</span> <span class="nf">showCriteriaCorrelationTable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ValuedCorrelation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">isReturningHTML</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">ndigits</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        prints the ordinal correlation index tau between criteria in table format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">nPairs</span> <span class="o">=</span> <span class="n">n</span><span class="o">*</span><span class="n">n</span>
        <span class="n">corr</span><span class="p">,</span><span class="n">deter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeCriteriaCorrelations</span><span class="p">(</span><span class="n">ValuedCorrelation</span><span class="o">=</span><span class="n">ValuedCorrelation</span><span class="p">)</span>
        <span class="n">html</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="c1"># title</span>
        <span class="k">if</span> <span class="n">isReturningHTML</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ValuedCorrelation</span><span class="p">:</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h1&gt;Criteria valued ordinal correlation index&lt;/h1&gt;&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h1&gt;Criteria ordinal correlation index&lt;/h1&gt;&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ValuedCorrelation</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Criteria valued ordinal correlation index&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Criteria ordinal correlation index&#39;</span><span class="p">)</span>
        <span class="c1"># header row</span>
        <span class="k">if</span> <span class="n">isReturningHTML</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;table border=1&gt;&lt;tr bgcolor=&quot;#9acd32&quot;&gt;&lt;th&gt;&amp;tau;&lt;/th&gt;&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;     |&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;th bgcolor=&quot;#FFEEAA&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%5s</span><span class="s1">  &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">isReturningHTML</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">()</span>
            <span class="n">hline</span> <span class="o">=</span> <span class="s1">&#39;-----|&#39;</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">hline</span> <span class="o">+=</span> <span class="s1">&#39;-------&#39;</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">hline</span><span class="p">)</span>
        <span class="c1"># table body</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;th bgcolor=&quot;#FFEEAA&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%4s</span><span class="s1"> |&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">j</span><span class="p">:</span>
                    <span class="n">gi</span> <span class="o">=</span> <span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="n">gj</span> <span class="o">=</span> <span class="n">criteriaList</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                    <span class="n">index</span> <span class="o">=</span> <span class="n">corr</span><span class="p">[</span><span class="n">gi</span><span class="p">][</span><span class="n">gj</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td bgcolor=&quot;#ddffdd&quot;&gt;</span><span class="si">%+2.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span>\
                                <span class="p">(</span><span class="n">index</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td bgcolor=&quot;#ffddff&quot;&gt;</span><span class="si">%+2.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span>\
                                <span class="p">(</span><span class="n">index</span><span class="p">)</span>
                            
                    <span class="k">else</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">((</span><span class="s1">&#39;</span><span class="si">%%</span><span class="s1">+2.</span><span class="si">%d</span><span class="s1">f &#39;</span> <span class="o">%</span> <span class="n">ndigits</span><span class="p">)</span>  <span class="o">%</span> <span class="p">(</span><span class="n">index</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">index</span> <span class="o">=</span> <span class="s1">&#39;       &#39;</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">isReturningHTML</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/table&gt;&#39;</span>
        <span class="c1"># render the result</span>
        <span class="k">return</span> <span class="n">html</span></div>

                
<div class="viewcode-block" id="OutrankingDigraph.computeActionsCorrelationDigraph">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.computeActionsCorrelationDigraph">[docs]</a>
    <span class="k">def</span> <span class="nf">computeActionsCorrelationDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders the pairwise actions comparison digraph</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">digraphs</span> <span class="kn">import</span> <span class="n">Digraph</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="n">corr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeActionsComparisonCorrelations</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">EmptyDigraph</span><span class="p">(</span><span class="n">order</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">=</span> <span class="n">Digraph</span>
        <span class="n">g</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;actCorrGraph&#39;</span>
        <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">),</span><span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">),</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)}</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">g</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeActionsComparisonCorrelations</span><span class="p">()</span>
        <span class="n">g</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="n">g</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">g</span></div>


<div class="viewcode-block" id="OutrankingDigraph.computeCriteriaCorrelationDigraph">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.computeCriteriaCorrelationDigraph">[docs]</a>
    <span class="k">def</span> <span class="nf">computeCriteriaCorrelationDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ValuedCorrelation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">WithMedian</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders the ordinal criteria correlation digraph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">digraphs</span> <span class="kn">import</span> <span class="n">Digraph</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">corr</span><span class="p">,</span><span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeCriteriaCorrelations</span><span class="p">(</span><span class="n">ValuedCorrelation</span><span class="o">=</span><span class="n">ValuedCorrelation</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">)</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">EmptyDigraph</span><span class="p">(</span><span class="n">order</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">=</span> <span class="n">Digraph</span>
        <span class="k">if</span> <span class="n">ValuedCorrelation</span><span class="p">:</span>
            <span class="n">g</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;valCorrGraph&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">gname</span> <span class="o">=</span> <span class="s1">&#39;corrGraph&#39;</span>
        <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">),</span><span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">),</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)}</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">WithMedian</span><span class="p">:</span>
            <span class="n">criteriaList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="n">relation</span><span class="p">[</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span> <span class="o">=</span> <span class="n">corr</span><span class="p">[</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span>
        <span class="k">if</span> <span class="n">WithMedian</span><span class="p">:</span>
            <span class="n">margCorr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeOutrankingConsensusQuality</span><span class="p">(</span><span class="n">ValuedCorrelation</span><span class="o">=</span><span class="n">ValuedCorrelation</span><span class="p">)</span>
            <span class="c1">#print(margCorr)</span>
            <span class="n">relation</span><span class="p">[</span><span class="s1">&#39;m&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">relation</span><span class="p">[</span><span class="s1">&#39;m&#39;</span><span class="p">][</span><span class="s1">&#39;m&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeDeterminateness</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">margCorr</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">relation</span><span class="p">[</span><span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="s1">&#39;m&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">relation</span><span class="p">[</span><span class="s1">&#39;m&#39;</span><span class="p">][</span><span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">g</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">criteriaList</span>
        <span class="n">g</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
        <span class="c1">#g.gamma = g.gammaSets()</span>
        <span class="c1">#g.notGamma = g.notGammaSets()</span>
        <span class="k">return</span> <span class="n">g</span></div>

        
<div class="viewcode-block" id="OutrankingDigraph.showCriteriaHierarchy">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.showCriteriaHierarchy">[docs]</a>
    <span class="k">def</span> <span class="nf">showCriteriaHierarchy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        shows the Rubis clustering of the ordinal criteria correlation table</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">corr</span><span class="p">,</span><span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeCriteriaCorrelations</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">)</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">RandomValuationDigraph</span><span class="p">(</span><span class="n">order</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;corrGraph&#39;</span>
        <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">),</span><span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">),</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)}</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">g</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">criteriaList</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="n">relation</span><span class="p">[</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span> <span class="o">=</span> <span class="o">-</span><span class="n">corr</span><span class="p">[</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span>
        <span class="n">g</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
        <span class="n">g</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="n">g</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="n">g</span><span class="o">.</span><span class="n">computePreKernels</span><span class="p">()</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">criteriaHierarchy</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ker</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">dompreKernels</span><span class="p">:</span>
            <span class="n">cluster</span> <span class="o">=</span> <span class="p">[</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ker</span><span class="p">]</span>
            <span class="n">cluster</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="n">degintstab</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">intstab</span><span class="p">(</span><span class="n">ker</span><span class="p">)</span>
            <span class="n">degextstab</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">domin</span><span class="p">(</span><span class="n">ker</span><span class="p">)</span>
            <span class="n">cred</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">degintstab</span><span class="p">,</span><span class="n">degextstab</span><span class="p">)</span>
            <span class="n">criteriaHierarchy</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="o">-</span><span class="n">cred</span><span class="p">,</span><span class="n">degintstab</span><span class="p">,</span><span class="n">degextstab</span><span class="p">,</span><span class="n">cluster</span><span class="p">))</span>
        <span class="n">criteriaHierarchy</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*------ criteria clustering hierarchy ------*&#39;</span><span class="p">)</span>
        <span class="n">clustered</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">hierarchy</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">criteriaHierarchy</span><span class="p">:</span>
            <span class="n">hierarchy</span> <span class="o">=</span> <span class="n">hierarchy</span> <span class="o">+</span> <span class="p">[</span><span class="n">ch</span><span class="p">[</span><span class="mi">3</span><span class="p">]]</span>
            <span class="n">clustered</span> <span class="o">|=</span> <span class="nb">set</span><span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
            <span class="n">rest</span> <span class="o">=</span> <span class="n">actions</span> <span class="o">-</span> <span class="n">clustered</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Cluster: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">   Credibility level: </span><span class="si">%2.2f%%</span><span class="s1">; Exterior stability: </span><span class="si">%2.2f%%</span><span class="s1">; Interior stability: </span><span class="si">%2.2f%%</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">3</span><span class="p">]),</span>
                <span class="p">(</span><span class="o">-</span><span class="n">ch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">))</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2.0&#39;</span><span class="p">)</span><span class="o">*</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">))</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2.0&#39;</span><span class="p">)</span><span class="o">*</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">))</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2.0&#39;</span><span class="p">)</span><span class="o">*</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">)))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;   Hierarchy: &#39;</span><span class="p">,</span> <span class="n">hierarchy</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">()</span></div>


<div class="viewcode-block" id="OutrankingDigraph.saveActionsCorrelationTable">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.saveActionsCorrelationTable">[docs]</a>
    <span class="k">def</span> <span class="nf">saveActionsCorrelationTable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;tempcorr.prn&#39;</span><span class="p">,</span><span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="n">Bipolar</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Silent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Centered</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delimited save of correlation table</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">math</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span>
        <span class="n">nd</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
        <span class="n">corr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeActionsComparisonCorrelations</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">Bipolar</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                    <span class="n">corr</span><span class="p">[</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">actionsList</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">corr</span><span class="p">[</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">actionsList</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">))</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2.0&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Centered</span><span class="p">:</span>
            <span class="n">centcorr</span> <span class="o">=</span> <span class="p">[</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                    <span class="n">centcorr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">corr</span><span class="p">[</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">actionsList</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span><span class="o">/</span><span class="n">nd</span>
            <span class="c1">#print centcorr</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                    <span class="n">corr</span><span class="p">[</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">actionsList</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="n">corr</span><span class="p">[</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">actionsList</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span><span class="o">-</span><span class="n">centcorr</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">/</span><span class="n">Decimal</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">nd</span><span class="p">)</span>
                <span class="c1">#print i, corr[actionsList[i]]</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
<span class="c1">##                 if Bipolar:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">corr</span><span class="p">[</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">actionsList</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span>
<span class="c1">##                 else:</span>
<span class="c1">##                     value = 1.0 - (corr[actionsList[i]][actionsList[j]] + 1.0)/2.0</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%2.2f</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="n">delimiter</span><span class="p">)),</span>
<span class="c1">##             if Bipolar:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">corr</span><span class="p">[</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">actionsList</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
<span class="c1">##             else:</span>
<span class="c1">##                 value = 1.0 - (corr[actionsList[i]][actionsList[len(actionsList)-1]] + 1.0)/2.0</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%2.2f</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">value</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">Silent</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Actions Correlation saved on file </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileName</span><span class="p">))</span></div>

        
        
<div class="viewcode-block" id="OutrankingDigraph.saveCriteriaCorrelationTable">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.saveCriteriaCorrelationTable">[docs]</a>
    <span class="k">def</span> <span class="nf">saveCriteriaCorrelationTable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;tempcorr.prn&#39;</span><span class="p">,</span><span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">,</span>
                                     <span class="n">ValuedCorrelation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Bipolar</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                     <span class="n">Silent</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Centered</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delimited save of correlation table</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">math</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="c1">#print(criteriaList)</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">)</span>
        <span class="n">nd</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
        <span class="n">corr</span><span class="p">,</span><span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeCriteriaCorrelations</span><span class="p">(</span><span class="n">ValuedCorrelation</span><span class="o">=</span><span class="n">ValuedCorrelation</span><span class="p">)</span>
        <span class="c1">#print(corr)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">Bipolar</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                    <span class="n">corr</span><span class="p">[</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">corr</span><span class="p">[</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">))</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2.0&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Centered</span><span class="p">:</span>
            <span class="n">centcorr</span> <span class="o">=</span> <span class="p">[</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                    <span class="n">centcorr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">corr</span><span class="p">[</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span><span class="o">/</span><span class="n">nd</span>
            <span class="c1">#print centcorr</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                    <span class="n">corr</span><span class="p">[</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="n">corr</span><span class="p">[</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span><span class="o">-</span><span class="n">centcorr</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">/</span><span class="n">Decimal</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">nd</span><span class="p">)</span>
                <span class="c1">#print i, corr[criteriaList[i]]</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
<span class="c1">##                 if Bipolar:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">corr</span><span class="p">[</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span>
<span class="c1">##                 else:</span>
<span class="c1">##                     value = 1.0 - (corr[criteriaList[i]][criteriaList[j]] + 1.0)/2.0</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%2.2f</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="n">delimiter</span><span class="p">)),</span>
<span class="c1">##             if Bipolar:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">corr</span><span class="p">[</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
<span class="c1">##             else:</span>
<span class="c1">##                 value = 1.0 - (corr[criteriaList[i]][criteriaList[len(criteriaList)-1]] + 1.0)/2.0</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%2.2f</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">value</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">Silent</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Criteria Correlation saved on file </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileName</span><span class="p">))</span></div>


<div class="viewcode-block" id="OutrankingDigraph.export3DplotOfCriteriaCorrelation">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.export3DplotOfCriteriaCorrelation">[docs]</a>
    <span class="k">def</span> <span class="nf">export3DplotOfCriteriaCorrelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">plotFileName</span><span class="o">=</span><span class="s2">&quot;critCorr&quot;</span><span class="p">,</span>
                                          <span class="n">tempDir</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span>
                                          <span class="n">graphType</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                          <span class="n">pictureFormat</span><span class="o">=</span><span class="s1">&#39;pdf&#39;</span><span class="p">,</span>
                                          <span class="n">bgcolor</span><span class="o">=</span><span class="s1">&#39;cornsilk&#39;</span><span class="p">,</span>
                                          <span class="n">ValuedCorrelation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                          <span class="n">WithMedian</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                          <span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Using R for producing a plot (pdf format by default) of the principal components of</span>
<span class="sd">        the criteria ordinal correlation table.</span>

<span class="sd">        *Parameters*:</span>

<span class="sd">            * *plotFileName* := name of the created R plot image,</span>
<span class="sd">            * *pictureFormat* := &#39;png&#39; (default) | &#39;pdf&#39; | &#39;jpeg&#39; | &#39;xfig&#39;,</span>
<span class="sd">            * *graphType* := deprecated</span>
<span class="sd">            * *bgcolor* := &#39;cornsilk&#39; by default | None,</span>
<span class="sd">            * *ValuedCorrelation* := False (tau by default) | True (r(&lt;=&gt;) otherwise,</span>
<span class="sd">            * *WithMedian* includes the marginal correlation with the global outranking relation</span>
<span class="sd">            * *tempDir* := &#39;.&#39; : default current working directory.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cg</span> <span class="o">=</span> <span class="n">CriteriaCorrelationDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ValuedCorrelation</span><span class="o">=</span><span class="n">ValuedCorrelation</span><span class="p">,</span><span class="n">WithMedian</span><span class="o">=</span><span class="n">WithMedian</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">graphType</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">pictureFormat</span> <span class="o">=</span> <span class="n">graphType</span>
        <span class="n">cg</span><span class="o">.</span><span class="n">exportPrincipalImage</span><span class="p">(</span><span class="n">plotFileName</span><span class="o">=</span><span class="n">plotFileName</span><span class="p">,</span>
                                <span class="n">tempDir</span><span class="o">=</span><span class="n">tempDir</span><span class="p">,</span>
                                <span class="n">pictureFormat</span><span class="o">=</span><span class="n">pictureFormat</span><span class="p">,</span>
                                <span class="n">bgcolor</span><span class="o">=</span><span class="n">bgcolor</span><span class="p">,</span>
                                <span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">_export3DplotOfCriteriaCorrelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">plotFileName</span><span class="o">=</span><span class="s2">&quot;correlation&quot;</span><span class="p">,</span>
                                          <span class="n">ValuedCorrelation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Type</span><span class="o">=</span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span>
                                          <span class="n">graphType</span><span class="o">=</span><span class="s1">&#39;pdf&#39;</span><span class="p">,</span><span class="n">bgcolor</span><span class="o">=</span><span class="s1">&#39;cornsilk&#39;</span><span class="p">,</span>
                                          <span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">bipolarFlag</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                          <span class="n">_dist</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">_centeredFlag</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                          <span class="n">tempDir</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Obsolete and deprecated</span>
<span class="sd">        use Calmat and R for producing a plot of the principal components of</span>
<span class="sd">        the criteria ordinal correlation table.</span>

<span class="sd">        *Parameters*;</span>

<span class="sd">            * *plotFileName* := name of the created R plot image.</span>
<span class="sd">            * deprecated ! *Type*,</span>
<span class="sd">            * *graphType* := format of graphics file: pdf, png, jpeg, xfig, </span>
<span class="sd">            * *bgcolor* := &#39;cornsilk&#39; by default | None</span>
<span class="sd">            * *ValuedCorrelation* := False (tau by default) | True (r(&lt;=&gt;) otherwise</span>
<span class="sd">            * *tempDir* : if None the tempfile.gettempdir() is used to get the platform independent temporary directory.</span>
<span class="sd">            * *bipolarFlag*: obsolete</span>
<span class="sd">            * *_dist*: internal Calmat flag</span>
<span class="sd">            * *_centeredFlag* : internal Calmat flag</span>
<span class="sd">            </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">time</span>
        <span class="kn">from</span> <span class="nn">tempfile</span> <span class="kn">import</span> <span class="n">TemporaryDirectory</span><span class="p">,</span> <span class="n">gettempdir</span>
        <span class="kn">import</span> <span class="nn">os</span>
        <span class="n">currentDir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
        <span class="c1">#print(currentDir)</span>
        <span class="n">plotFileName</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">currentDir</span><span class="p">,</span><span class="n">plotFileName</span><span class="p">)</span>
        <span class="n">Type</span> <span class="o">=</span> <span class="n">graphType</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;3DplotFileName: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">plotFileName</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">tempDir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">tempDir</span> <span class="o">=</span> <span class="n">gettempdir</span><span class="p">()</span>
        <span class="k">with</span> <span class="n">TemporaryDirectory</span><span class="p">(</span><span class="nb">dir</span><span class="o">=</span><span class="n">tempDir</span><span class="p">)</span> <span class="k">as</span> <span class="n">tempDirName</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----  export 3dplot of type </span><span class="si">%s</span><span class="s1"> -----&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Type</span><span class="p">))</span>
            <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">tempDirName</span><span class="p">)</span>
            <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
            <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">)</span>
            <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;criteriaLabels.prn&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">saveCriteriaCorrelationTable</span><span class="p">(</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;tempcorr.prn&#39;</span><span class="p">,</span><span class="n">Silent</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                              <span class="n">ValuedCorrelation</span><span class="o">=</span><span class="n">ValuedCorrelation</span><span class="p">,</span>
                                              <span class="n">Bipolar</span><span class="o">=</span><span class="n">bipolarFlag</span><span class="p">,</span><span class="n">Centered</span><span class="o">=</span><span class="n">_centeredFlag</span><span class="p">)</span>
            <span class="c1"># create Calmat script and calmat execution (the prn extension is standard)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">_dist</span><span class="p">:</span>
                        <span class="n">cmd</span> <span class="o">=</span> <span class="s1">&#39;env defdist.sh tempcorr &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">cmd</span> <span class="o">=</span> <span class="s1">&#39;env defdista.sh tempcorr &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> 
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">_dist</span><span class="p">:</span>
                        <span class="n">cmd</span> <span class="o">=</span> <span class="s1">&#39;env defdist.sh tempcorr &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; &gt; /dev/null&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">cmd</span> <span class="o">=</span> <span class="s1">&#39;env defdista.sh tempcorr &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; &gt; /dev/null&#39;</span>
                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;env calmat tempcorr.prg&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;env calmat tempcorr.prg &gt; /dev/null&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: You need to install calmat !!!&#39;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="c1"># create R 3d scatter plot script</span>
            <span class="k">if</span> <span class="n">Type</span> <span class="o">==</span> <span class="s2">&quot;interactive&quot;</span><span class="p">:</span>
                <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;scatter.r&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;# 3d scatter plot RB April 2008</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;test.mat &lt;- matrix(scan(&quot;compolg.prn&quot;),ncol=</span><span class="si">%d</span><span class="s1">,byrow=T)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="p">))</span>
    <span class="c1">##             fo.write(&#39;choose&lt;-c(%d,%d,%d)\n&#39; % (1,2,3))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;choose&lt;-c(</span><span class="si">%d</span><span class="s1">,</span><span class="si">%d</span><span class="s1">,</span><span class="si">%d</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;test.labels &lt;- scan(&quot;criteriaLabels.prn&quot;,what=&quot;character&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span> 
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;valprop &lt;- matrix(scan(&quot;val_prlg.prn&quot;),ncol=2,byrow=T)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span> 
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;require(rgl)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;open3d()</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;points3d(test.mat[,choose])</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;text3d(test.mat[,choose],text=test.labels,col=&quot;red3&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;axes3d(edges=c(&quot;x&quot;,&quot;y&quot;,&quot;z&quot;),pos=c(0,0,0),labels=F,ticks=F)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;axes3d(edges=c(&quot;x&quot;,&quot;y&quot;,&quot;z&quot;))</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;title3d(main=&quot;Criteria Ordinal Correlation&quot;,xlab=valprop[choose,2][1],ylab=valprop[choose,2][2],zlab=valprop[choose,2][3],col=&quot;blue&quot;,line=4)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;rgl.viewpoint(1,1/4,interactive=T)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;rgl.snapshot(&quot;</span><span class="si">%s</span><span class="s1">.png&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="o">+</span><span class="s1">&#39;.png&#39;</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;scatter.r&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;# scatter plot RB April 2008</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;test.mat &lt;- matrix(scan(&quot;compolg.prn&quot;),ncol=</span><span class="si">%d</span><span class="s1">,byrow=T)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="p">))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;lim1 &lt;- max(test.mat)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;lim2 &lt;- min(test.mat)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">_centeredFlag</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;choose12&lt;-c(</span><span class="si">%d</span><span class="s1">,</span><span class="si">%d</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;choose23&lt;-c(</span><span class="si">%d</span><span class="s1">,</span><span class="si">%d</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;choose13&lt;-c(</span><span class="si">%d</span><span class="s1">,</span><span class="si">%d</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;choose21&lt;-c(</span><span class="si">%d</span><span class="s1">,</span><span class="si">%d</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;choose12&lt;-c(</span><span class="si">%d</span><span class="s1">,</span><span class="si">%d</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;choose23&lt;-c(</span><span class="si">%d</span><span class="s1">,</span><span class="si">%d</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">))</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;choose13&lt;-c(</span><span class="si">%d</span><span class="s1">,</span><span class="si">%d</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">))</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;choose21&lt;-c(</span><span class="si">%d</span><span class="s1">,</span><span class="si">%d</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;test.labels &lt;- scan(&quot;criteriaLabels.prn&quot;,what=&quot;character&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span> 
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;valprop &lt;- matrix(scan(&quot;val_prlg.prn&quot;),ncol=2,byrow=T)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">Type</span> <span class="o">==</span> <span class="s2">&quot;png&quot;</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;png(&quot;</span><span class="si">%s</span><span class="s1">.png&quot;,width=480,height=480,bg=&quot;cornsilk&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">)</span> <span class="p">)</span>
                <span class="k">elif</span> <span class="n">Type</span> <span class="o">==</span> <span class="s2">&quot;jpeg&quot;</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;jpeg(&quot;</span><span class="si">%s</span><span class="s1">.jpg&quot;,width=480,height=480,bg=&quot;cornsilk&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">)</span> <span class="p">)</span>
                <span class="k">elif</span> <span class="n">Type</span> <span class="o">==</span> <span class="s2">&quot;xfig&quot;</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;xfig(&quot;</span><span class="si">%s</span><span class="s1">.fig&quot;,width=480,height=480,bg=&quot;cornsilk&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">)</span> <span class="p">)</span>
                <span class="k">elif</span> <span class="n">Type</span> <span class="o">==</span> <span class="s2">&quot;pdf&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">bgcolor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;pdf(&quot;</span><span class="si">%s</span><span class="s1">.pdf&quot;,width=6,height=6,bg=&quot;</span><span class="si">%s</span><span class="s1">&quot;,title=&quot;PCA of Criteria Correlation Index&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">,</span><span class="n">bgcolor</span><span class="p">)</span> <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;pdf(&quot;</span><span class="si">%s</span><span class="s1">.pdf&quot;,width=6,height=6,title=&quot;PCA of Criteria Correlation Index&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">)</span> <span class="p">)</span>
                         
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: Plotting device </span><span class="si">%s</span><span class="s1"> not defined !&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Type</span><span class="p">))</span>
                    <span class="k">return</span>     
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;par(mfrow=c(2,2))</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;plot(test.mat[,choose12],xlab=paste(&quot;axis 1:&quot;,valprop[choose12,2][1]*100,&quot;%&quot;),ylab=paste(&quot;axis 2:&quot;,valprop[choose12,2][2]*100,&quot;%&quot;),type=&quot;n&quot;,asp=1)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;abline(h=0,v=0,col=&quot;grey&quot;,lty=&quot;dotted&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>            
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;title(sub=paste(&quot;total inertia:&quot;,(valprop[choose12,2][1]+valprop[choose12,2][2])*100,&quot;%&quot;),main=&quot;factors 1 and 2&quot;,col=&quot;blue&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;text(test.mat[,choose12],labels=test.labels,col=&quot;red3&quot;,cex=1.0)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="c1">##             fo.write(&#39;plot(test.mat[,choose12],xlab=paste(&quot;axis 1:&quot;,valprop[choose12,2][1]*100,&quot;%&quot;),ylab=paste(&quot;axis 2:&quot;,valprop[choose12,2][2]*100,&quot;%&quot;),type=&quot;n&quot;,asp=1)\n&#39;)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;plot(test.mat[,choose12],xlab=paste(&quot;axis 2:&quot;,valprop[choose23,2][1]*100,&quot;%&quot;),ylab=paste(&quot;axis 3:&quot;,valprop[choose23,2][2]*100,&quot;%&quot;),type=&quot;n&quot;,asp=1)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;abline(h=0,v=0,col=&quot;grey&quot;,lty=&quot;dotted&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>            
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;title(sub=paste(&quot;total inertia:&quot;,(valprop[choose23,2][1]+valprop[choose23,2][2])*100,&quot;%&quot;),main=&quot;factors 2 and 3&quot;,col=&quot;blue&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;text(test.mat[,choose23],labels=test.labels,col=&quot;red3&quot;,cex=1.0)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="c1">##             fo.write(&#39;plot(test.mat[,choose12],xlab=paste(&quot;axis 1:&quot;,valprop[choose12,2][1]*100,&quot;%&quot;),ylab=paste(&quot;axis 2:&quot;,valprop[choose12,2][2]*100,&quot;%&quot;),type=&quot;n&quot;,asp=1)\n&#39;)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;plot(test.mat[,choose12],xlab=paste(&quot;axis 1:&quot;,valprop[choose13,2][1]*100,&quot;%&quot;),ylab=paste(&quot;axis 3:&quot;,valprop[choose13,2][2]*100,&quot;%&quot;),type=&quot;n&quot;,asp=1)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;abline(h=0,v=0,col=&quot;grey&quot;,lty=&quot;dotted&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>            
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;title(sub=paste(&quot;total inertia:&quot;,(valprop[choose13,2][1]+valprop[choose13,2][2])*100,&quot;%&quot;),main=&quot;factors 1 and 3&quot;,col=&quot;blue&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;text(test.mat[,choose13],labels=test.labels,col=&quot;red3&quot;,cex=1.0)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">_centeredFlag</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;barplot(valprop[1:nrow(valprop)-1,2]*100,names.arg=c(1:</span><span class="si">%d</span><span class="s1">),main=&quot;Axis inertia (in </span><span class="si">%%</span><span class="s1">)&quot;,col=&quot;orangered&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;barplot(valprop[nrow(valprop):2,2]*100,names.arg=c(1:</span><span class="si">%d</span><span class="s1">),main=&quot;Axis inertia (in </span><span class="si">%%</span><span class="s1">)&quot;,col=&quot;orangered&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>     
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;dev.off()</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>           
                <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                
            <span class="k">try</span><span class="p">:</span>
                <span class="c1">## if Comments:</span>
                <span class="c1">##     os.system(&#39;/usr/bin/R -q --vanilla --verbose &lt; scatter.r 2&gt;&amp;1&#39;)</span>
                <span class="c1">## else:</span>
                <span class="c1">##     os.system(&#39;/usr/bin/R -q --vanilla &lt; scatter.r &gt; /dev/null 2&gt; /dev/null&#39;)</span>
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;env R -q --vanilla --verbose &lt; scatter.r 2&gt;&amp;1&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;env R -q --vanilla &lt; scatter.r &gt; /dev/null 2&gt; /dev/null&#39;</span><span class="p">)</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>     
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;See </span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1"> ! &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">,</span><span class="n">Type</span><span class="p">))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: You need to install R !!!&#39;</span><span class="p">)</span>

        <span class="c1"># reset current working dir !!!</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">currentDir</span><span class="p">)</span>

<div class="viewcode-block" id="OutrankingDigraph.export3DplotOfActionsCorrelation">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.export3DplotOfActionsCorrelation">[docs]</a>
    <span class="k">def</span> <span class="nf">export3DplotOfActionsCorrelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">plotFileName</span><span class="o">=</span><span class="s2">&quot;actCorr&quot;</span><span class="p">,</span>
                                          <span class="n">graphType</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                          <span class="n">pictureFormat</span><span class="o">=</span><span class="s1">&#39;pdf&#39;</span><span class="p">,</span>
                                          <span class="n">bgcolor</span><span class="o">=</span><span class="s1">&#39;cornsilk&#39;</span><span class="p">,</span> <span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Using R for producing a plot -pdf format by default- of the principal components of</span>
<span class="sd">        the actions ordinal correlation table. </span>

<span class="sd">        See export3DplotCriteriaCorrelation()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="n">relationOrig</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeActionsComparisonCorrelations</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exportPrincipalImage</span><span class="p">(</span><span class="n">plotFileName</span><span class="o">=</span><span class="n">plotFileName</span><span class="p">,</span>
                                  <span class="n">pictureFormat</span><span class="o">=</span><span class="n">pictureFormat</span><span class="p">,</span>
                                  <span class="n">bgcolor</span><span class="o">=</span><span class="n">bgcolor</span><span class="p">,</span>
                                  <span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relationOrig</span></div>

        
    <span class="k">def</span> <span class="nf">_export3DplotOfActionsCorrelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">plotFileName</span><span class="o">=</span><span class="s2">&quot;actionsCorrelati&quot;</span><span class="p">,</span>
                                         <span class="n">Type</span><span class="o">=</span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span><span class="n">graphType</span><span class="o">=</span><span class="s1">&#39;pdf&#39;</span><span class="p">,</span>
                                         <span class="n">pictureFormat</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">bgcolor</span><span class="o">=</span><span class="s1">&#39;cornsilk&#39;</span><span class="p">,</span>
                                         <span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">bipolarFlag</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                         <span class="n">_dist</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">_centeredFlag</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        use Calmat and R for producing a png plot of the principal components of</span>
<span class="sd">        the the actions ordinal correlation table. </span>

<span class="sd">        See export3DplotCriteriaCorrelation()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">time</span>
        <span class="c1">#from tempfile import TemporaryDirectory</span>
        <span class="c1">#with TemporaryDirectory(dir=tempDir) as tempDirName:</span>
        <span class="k">if</span> <span class="n">pictureFormat</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">Type</span> <span class="o">=</span> <span class="n">pictureFormat</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Type</span> <span class="o">=</span> <span class="n">graphType</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----  export 3dplot of type </span><span class="si">%s</span><span class="s1"> -----&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">graphType</span><span class="p">))</span>
        <span class="kn">import</span> <span class="nn">os</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;actionsLabels.prn&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">saveActionsCorrelationTable</span><span class="p">(</span>
            <span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;tempcorr.prn&#39;</span><span class="p">,</span><span class="n">Silent</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">Bipolar</span><span class="o">=</span><span class="n">bipolarFlag</span><span class="p">,</span><span class="n">Centered</span><span class="o">=</span><span class="n">_centeredFlag</span><span class="p">)</span>
        <span class="c1"># create Calmat script and calmat execution</span>
        <span class="c1"># (the prn extension is standard)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">_dist</span><span class="p">:</span>
                    <span class="n">cmd</span> <span class="o">=</span> <span class="s1">&#39;env defdist.sh tempcorr &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">cmd</span> <span class="o">=</span> <span class="s1">&#39;env defdista.sh tempcorr &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> 
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">_dist</span><span class="p">:</span>
                    <span class="n">cmd</span> <span class="o">=</span> <span class="s1">&#39;env defdist.sh tempcorr &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; &gt; /dev/null&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">cmd</span> <span class="o">=</span> <span class="s1">&#39;env defdista.sh tempcorr &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; &gt; /dev/null&#39;</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;env calmat tempcorr.prg&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;env calmat tempcorr.prg &gt; /dev/null&#39;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: You need to install calmat !!!&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="c1"># create R 3d scatter plot script</span>
        <span class="k">if</span> <span class="n">Type</span> <span class="o">==</span> <span class="s2">&quot;interactive&quot;</span><span class="p">:</span>
            <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;scatter.r&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;# 3d scatter plot RB April 2008</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;test.mat &lt;- matrix(scan(&quot;compolg.prn&quot;),ncol=</span><span class="si">%d</span><span class="s1">,byrow=T)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="p">))</span>
<span class="c1">##             fo.write(&#39;choose&lt;-c(%d,%d,%d)\n&#39; % (1,2,3))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;choose&lt;-c(</span><span class="si">%d</span><span class="s1">,</span><span class="si">%d</span><span class="s1">,</span><span class="si">%d</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;test.labels &lt;- scan(&quot;actionsLabels.prn&quot;,what=&quot;character&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span> 
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;valprop &lt;- matrix(scan(&quot;val_prlg.prn&quot;),ncol=2,byrow=T)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span> 
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;require(rgl)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;open3d()</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;points3d(test.mat[,choose])</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;text3d(test.mat[,choose],text=test.labels,col=&quot;red3&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;axes3d(edges=c(&quot;x&quot;,&quot;y&quot;,&quot;z&quot;),pos=c(0,0,0),labels=F,ticks=F)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;axes3d(edges=c(&quot;x&quot;,&quot;y&quot;,&quot;z&quot;))</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;title3d(main=&quot;Actions Ordinal Correlation&quot;,xlab=valprop[choose,2][1],ylab=valprop[choose,2][2],zlab=valprop[choose,2][3],col=&quot;blue&quot;,line=4)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;rgl.viewpoint(1,1/4,interactive=T)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;rgl.snapshot(&quot;</span><span class="si">%s</span><span class="s1">.png&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="o">+</span><span class="s1">&#39;.png&#39;</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;scatter.r&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;# scatter plot RB April 2008</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;test.mat &lt;- matrix(scan(&quot;compolg.prn&quot;),ncol=</span><span class="si">%d</span><span class="s1">,byrow=T)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="p">))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;lim1 &lt;- max(test.mat)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;lim2 &lt;- min(test.mat)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">_centeredFlag</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;choose12&lt;-c(</span><span class="si">%d</span><span class="s1">,</span><span class="si">%d</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;choose23&lt;-c(</span><span class="si">%d</span><span class="s1">,</span><span class="si">%d</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;choose13&lt;-c(</span><span class="si">%d</span><span class="s1">,</span><span class="si">%d</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;choose21&lt;-c(</span><span class="si">%d</span><span class="s1">,</span><span class="si">%d</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;choose12&lt;-c(</span><span class="si">%d</span><span class="s1">,</span><span class="si">%d</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;choose23&lt;-c(</span><span class="si">%d</span><span class="s1">,</span><span class="si">%d</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;choose13&lt;-c(</span><span class="si">%d</span><span class="s1">,</span><span class="si">%d</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;choose21&lt;-c(</span><span class="si">%d</span><span class="s1">,</span><span class="si">%d</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;test.labels &lt;- scan(&quot;actionsLabels.prn&quot;,what=&quot;character&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span> 
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;valprop &lt;- matrix(scan(&quot;val_prlg.prn&quot;),ncol=2,byrow=T)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Type</span> <span class="o">==</span> <span class="s2">&quot;png&quot;</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;png(&quot;</span><span class="si">%s</span><span class="s1">.png&quot;,width=480,height=480,bg=&quot;cornsilk&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">elif</span> <span class="n">Type</span> <span class="o">==</span> <span class="s2">&quot;jpeg&quot;</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;jpeg(&quot;</span><span class="si">%s</span><span class="s1">.jpg&quot;,width=480,height=480,bg=&quot;cornsilk&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">elif</span> <span class="n">Type</span> <span class="o">==</span> <span class="s2">&quot;xfig&quot;</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;xfig(&quot;</span><span class="si">%s</span><span class="s1">.fig&quot;,width=480,height=480,bg=&quot;cornsilk&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">elif</span> <span class="n">Type</span> <span class="o">==</span> <span class="s2">&quot;pdf&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">bgcolor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;pdf(&quot;</span><span class="si">%s</span><span class="s1">.pdf&quot;,width=6,height=6,bg=&quot;</span><span class="si">%s</span><span class="s1">&quot;,title=&quot;PCA of Actions Correlation Index&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">,</span><span class="n">bgcolor</span><span class="p">)</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;pdf(&quot;</span><span class="si">%s</span><span class="s1">.pdf&quot;,width=6,height=6,title=&quot;PCA of Actions Correlation Index&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">)</span> <span class="p">)</span>                    
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: Plotting device </span><span class="si">%s</span><span class="s1"> not defined !&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Type</span><span class="p">))</span>
                <span class="k">return</span>     
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;par(mfrow=c(2,2))</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;plot(test.mat[,choose12],xlab=paste(&quot;axis 1:&quot;,valprop[choose12,2][1]*100,&quot;%&quot;),ylab=paste(&quot;axis 2:&quot;,valprop[choose12,2][2]*100,&quot;%&quot;),type=&quot;n&quot;,asp=1)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;abline(h=0,v=0,col=&quot;grey&quot;,lty=&quot;dotted&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>            
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;title(sub=paste(&quot;total inertia:&quot;,(valprop[choose12,2][1]+valprop[choose12,2][2])*100,&quot;%&quot;),main=&quot;factors 1 and 2&quot;,col=&quot;blue&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;text(test.mat[,choose12],labels=test.labels,col=&quot;red3&quot;,cex=1.0)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="c1">##             fo.write(&#39;plot(test.mat[,choose12],xlab=paste(&quot;axis 1:&quot;,valprop[choose12,2][1]*100,&quot;%&quot;),ylab=paste(&quot;axis 2:&quot;,valprop[choose12,2][2]*100,&quot;%&quot;),type=&quot;n&quot;,asp=1)\n&#39;)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;plot(test.mat[,choose12],xlab=paste(&quot;axis 2:&quot;,valprop[choose23,2][1]*100,&quot;%&quot;),ylab=paste(&quot;axis 3:&quot;,valprop[choose23,2][2]*100,&quot;%&quot;),type=&quot;n&quot;,asp=1)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;abline(h=0,v=0,col=&quot;grey&quot;,lty=&quot;dotted&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>            
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;title(sub=paste(&quot;total inertia:&quot;,(valprop[choose23,2][1]+valprop[choose23,2][2])*100,&quot;%&quot;),main=&quot;factors 2 and 3&quot;,col=&quot;blue&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;text(test.mat[,choose23],labels=test.labels,col=&quot;red3&quot;,cex=1.0)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="c1">##             fo.write(&#39;plot(test.mat[,choose12],xlab=paste(&quot;axis 1:&quot;,valprop[choose12,2][1]*100,&quot;%&quot;),ylab=paste(&quot;axis 2:&quot;,valprop[choose12,2][2]*100,&quot;%&quot;),type=&quot;n&quot;,asp=1)\n&#39;)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;plot(test.mat[,choose12],xlab=paste(&quot;axis 1:&quot;,valprop[choose13,2][1]*100,&quot;%&quot;),ylab=paste(&quot;axis 3:&quot;,valprop[choose13,2][2]*100,&quot;%&quot;),type=&quot;n&quot;,asp=1)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;abline(h=0,v=0,col=&quot;grey&quot;,lty=&quot;dotted&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>            
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;title(sub=paste(&quot;total inertia:&quot;,(valprop[choose13,2][1]+valprop[choose13,2][2])*100,&quot;%&quot;),main=&quot;factors 1 and 3&quot;,col=&quot;blue&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;text(test.mat[,choose13],labels=test.labels,col=&quot;red3&quot;,cex=1.0)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">_centeredFlag</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;barplot(valprop[1:nrow(valprop)-1,2]*100,names.arg=c(1:</span><span class="si">%d</span><span class="s1">),main=&quot;Axis inertia (in </span><span class="si">%%</span><span class="s1">)&quot;,col=&quot;orangered&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;barplot(valprop[nrow(valprop):2,2]*100,names.arg=c(1:</span><span class="si">%d</span><span class="s1">),main=&quot;Axis inertia (in </span><span class="si">%%</span><span class="s1">)&quot;,col=&quot;orangered&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>     
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;dev.off()</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>           
            <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            
        <span class="k">try</span><span class="p">:</span>
            <span class="c1">## if Comments:</span>
            <span class="c1">##     os.system(&#39;/usr/bin/R -q --vanilla --verbose &lt; scatter.r 2&gt;&amp;1&#39;)</span>
            <span class="c1">## else:</span>
            <span class="c1">##     os.system(&#39;/usr/bin/R -q --vanilla &lt; scatter.r &gt; /dev/null 2&gt; /dev/null&#39;)</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;env R -q --vanilla --verbose &lt; scatter.r 2&gt;&amp;1&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;env R -q --vanilla &lt; scatter.r &gt; /dev/null 2&gt; /dev/null&#39;</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>     
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;See </span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1"> ! &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">,</span><span class="n">Type</span><span class="p">))</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: You need to install R !!!&#39;</span><span class="p">)</span>
            
<div class="viewcode-block" id="OutrankingDigraph.computePairwiseComparisons">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.computePairwiseComparisons">[docs]</a>
    <span class="k">def</span> <span class="nf">computePairwiseComparisons</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders pairwise comparison parameters for all pairs of actions</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">NA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NA</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        
        <span class="n">pairwiseComparisons</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">pairwiseComparisons</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="n">pairwiseComparisons</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;lt&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;leq&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;eq&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;geq&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;gt&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span> <span class="ow">and</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span><span class="p">:</span>		
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">indx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">indy</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                            <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span> <span class="n">indy</span> <span class="o">*</span>\
                                    <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span>
                                        <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span> <span class="n">indy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="n">ind</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">wpx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">wpy</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                            <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span>\
                                    <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span>
                                        <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>                           
                        <span class="k">except</span><span class="p">:</span>
                            <span class="n">wp</span> <span class="o">=</span> <span class="n">ind</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.00000000000001&quot;</span><span class="p">)</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">px</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">py</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                            <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span>
                                                  <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="n">p</span> <span class="o">=</span> <span class="n">wp</span>
                        <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                            <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">-</span> <span class="n">p</span> <span class="o">&gt;=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]:</span>
                            <span class="n">pairwiseComparisons</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">][</span><span class="s1">&#39;gt&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
                        <span class="k">elif</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">-</span> <span class="n">wp</span> <span class="o">&gt;=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]:</span>
                            <span class="n">pairwiseComparisons</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">][</span><span class="s1">&#39;geq&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
                        <span class="k">elif</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">+</span> <span class="n">ind</span> <span class="o">&gt;=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]:</span>
                            <span class="n">pairwiseComparisons</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">][</span><span class="s1">&#39;eq&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
                        <span class="k">elif</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">+</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]:</span>
                            <span class="n">pairwiseComparisons</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">][</span><span class="s1">&#39;leq&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
                        <span class="k">elif</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">+</span> <span class="n">p</span> <span class="o">&lt;=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]:</span>
                            <span class="n">pairwiseComparisons</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">][</span><span class="s1">&#39;lt&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: a,b,c,d,ind,wp,p&quot;</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
                        
        <span class="k">return</span> <span class="n">pairwiseComparisons</span></div>


<div class="viewcode-block" id="OutrankingDigraph.showPairwiseComparisonsDistributions">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.showPairwiseComparisonsDistributions">[docs]</a>
    <span class="k">def</span> <span class="nf">showPairwiseComparisonsDistributions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the lt,leq, eq, geq, gt distributions for all pairs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">a</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">pc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computePairwiseComparisons</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; distribution of pairwise comparisons&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; a  b | &quot;&lt;&quot; &quot;&lt;=&quot; &quot;==&quot; &quot;&gt;=&quot; &quot;&gt;&quot; | &quot;S&quot;&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-----------------------------&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; </span><span class="si">%s</span><span class="s1">  </span><span class="si">%s</span><span class="s1"> | </span><span class="si">%.2f</span><span class="s1"> </span><span class="si">%.2f</span><span class="s1"> </span><span class="si">%.2f</span><span class="s1"> </span><span class="si">%.2f</span><span class="s1"> </span><span class="si">%.2f</span><span class="s1"> | </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">],</span><span class="n">pc</span><span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]][</span><span class="s1">&#39;lt&#39;</span><span class="p">],</span>
                    <span class="n">pc</span><span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]][</span><span class="s1">&#39;leq&#39;</span><span class="p">],</span><span class="n">pc</span><span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]][</span><span class="s1">&#39;eq&#39;</span><span class="p">],</span>
                    <span class="n">pc</span><span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]][</span><span class="s1">&#39;geq&#39;</span><span class="p">],</span><span class="n">pc</span><span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]][</span><span class="s1">&#39;gt&#39;</span><span class="p">],</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]]))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; </span><span class="si">%s</span><span class="s1">  </span><span class="si">%s</span><span class="s1"> | </span><span class="si">%.2f</span><span class="s1"> </span><span class="si">%.2f</span><span class="s1"> </span><span class="si">%.2f</span><span class="s1"> </span><span class="si">%.2f</span><span class="s1"> </span><span class="si">%.2f</span><span class="s1"> | </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">],</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">pc</span><span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]][</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="s1">&#39;lt&#39;</span><span class="p">],</span>
                    <span class="n">pc</span><span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]][</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="s1">&#39;leq&#39;</span><span class="p">],</span><span class="n">pc</span><span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]][</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="s1">&#39;eq&#39;</span><span class="p">],</span>
                    <span class="n">pc</span><span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]][</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="s1">&#39;geq&#39;</span><span class="p">],</span><span class="n">pc</span><span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]][</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="s1">&#39;gt&#39;</span><span class="p">],</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]][</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]]))</span></div>


<div class="viewcode-block" id="OutrankingDigraph.showOldPairwiseComparison">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.showOldPairwiseComparison">[docs]</a>
    <span class="k">def</span> <span class="nf">showOldPairwiseComparison</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span>
                               <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">isReturningHTML</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                               <span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Obsolete: Renders the pairwise comprison parameters on all criteria</span>
<span class="sd">        with weak preference and weak veto thresholds.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">NA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NA</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a,b =&#39;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">b</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                <span class="n">html</span>  <span class="o">=</span> <span class="s1">&#39;&lt;h1&gt;Pairwise Comparison&lt;/h1&gt;&#39;</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h2&gt;Comparing actions : (</span><span class="si">%s</span><span class="s1">,</span><span class="si">%s</span><span class="s1">)&lt;/h2&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;table style=&quot;background-color:White&quot; border=&quot;1&quot;&gt;&#39;</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr bgcolor=&quot;#9acd32&quot;&gt;&#39;</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;th&gt;crit.&lt;/th&gt;&lt;th&gt;wght.&lt;/th&gt; &lt;th&gt;g(x)&lt;/th&gt; &lt;th&gt;g(y)&lt;/th&gt; &lt;th&gt;diff&lt;/th&gt; &lt;th&gt;ind&lt;/th&gt; &lt;th&gt;wp&lt;/th&gt; &lt;th&gt;p&lt;/th&gt; &lt;th&gt;concord&lt;/th&gt; &lt;th&gt;wv&lt;/th&gt; &lt;th&gt;v&lt;/th&gt; &lt;th&gt;polarisation&lt;/th&gt;&#39;</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*------------  pairwise comparison ----*&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Comparing actions : (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;crit. wght.  g(x)  g(y)    diff  </span><span class="se">\t</span><span class="s1">| ind     wp      p    concord </span><span class="se">\t</span><span class="s1">|  wv   v   weak veto veto&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-------------------------------  </span><span class="se">\t</span><span class="s1"> ----------------------------- </span><span class="se">\t</span><span class="s1"> ----------------&#39;</span><span class="p">)</span>                
            <span class="n">concordance</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">sumWeights</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">]</span>
            <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="n">sumWeights</span> <span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span> <span class="ow">and</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span><span class="p">:</span>		
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">indx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">indy</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                            <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">ind</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">wpx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">wpy</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                            <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">px</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">py</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                            <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                        <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
                    <span class="n">lc0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localConcordance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">ind</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">ind</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">wp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">wp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">wp</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">p</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&#39;</span>
                        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td bgcolor=&quot;#FFEEAA&quot; align=&quot;center&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt; &lt;td&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/td&gt; &lt;td&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/td&gt; &lt;td&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/td&gt; &lt;td&gt;</span><span class="si">%+2.2f</span><span class="s1">&lt;/td&gt; &lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;  &lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;  &lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;   &lt;td&gt;</span><span class="si">%+.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">],</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">],</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">],</span><span class="n">d</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">ind</span><span class="p">),</span><span class="nb">str</span><span class="p">(</span><span class="n">wp</span><span class="p">),</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">),</span><span class="n">lc0</span><span class="o">*</span><span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]))</span>
                    <span class="k">else</span><span class="p">:</span>
                         <span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="s1">&#39;  </span><span class="si">%.2f</span><span class="s1">  </span><span class="si">%2.2f</span><span class="s1">  </span><span class="si">%2.2f</span><span class="s1">  </span><span class="si">%+2.2f</span><span class="s1"> </span><span class="se">\t</span><span class="s1">| </span><span class="si">%s</span><span class="s1">  </span><span class="si">%s</span><span class="s1">  </span><span class="si">%s</span><span class="s1">   </span><span class="si">%+.2f</span><span class="s1"> </span><span class="se">\t</span><span class="s1">|&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">],</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">],</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">],</span><span class="n">d</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">ind</span><span class="p">),</span><span class="nb">str</span><span class="p">(</span><span class="n">wp</span><span class="p">),</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">),</span><span class="n">lc0</span><span class="o">*</span><span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                    <span class="n">concordance</span> <span class="o">=</span> <span class="n">concordance</span> <span class="o">+</span> <span class="p">(</span><span class="n">lc0</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]))</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">wvx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">wvy</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                            <span class="n">wv</span> <span class="o">=</span> <span class="n">wvx</span> <span class="o">+</span> <span class="n">wvy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span>
                                                 <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">wv</span> <span class="o">=</span> <span class="n">wvx</span> <span class="o">+</span> <span class="n">wvy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">wv</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">vx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">vy</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                            <span class="n">v</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span>
                                              <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">v</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">v</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="n">veto</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localVeto</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">negativeVeto</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localNegativeVeto</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                        <span class="n">hasBipolarVeto</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">hasBipolarVeto</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="n">v</span><span class="p">:</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;     </span><span class="si">%2.2f</span><span class="s1">       </span><span class="si">%+2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">negativeVeto</span><span class="p">))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&lt;/td&gt; &lt;td&gt; </span><span class="si">%2.2f</span><span class="s1">&lt;/td&gt; &lt;td bgcolor=&quot;#ddffdd&quot;&gt;</span><span class="si">%+2.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">negativeVeto</span><span class="p">)</span>
                            <span class="k">elif</span> <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="n">v</span><span class="p">:</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;     </span><span class="si">%2.2f</span><span class="s1">       </span><span class="si">%+2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="o">-</span><span class="n">veto</span><span class="p">))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&lt;/td&gt; &lt;td&gt; </span><span class="si">%2.2f</span><span class="s1">&lt;/td&gt; &lt;td bgcolor=&quot;#ffddff&quot;&gt;</span><span class="si">%+2.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="o">-</span><span class="n">veto</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>                                
                                    <span class="nb">print</span><span class="p">()</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
                        <span class="k">elif</span> <span class="n">wv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="n">wv</span><span class="p">:</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%2.2f</span><span class="s1">      </span><span class="si">%+2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">wv</span><span class="p">,</span> <span class="n">negativeVeto</span><span class="p">))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/td&gt;&lt;td&gt;&lt;/td&gt; &lt;td bgcolor=&quot;#ddffdd&quot;&gt;</span><span class="si">%+2.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">wv</span><span class="p">,</span> <span class="n">negativeVeto</span><span class="p">)</span>
                            <span class="k">elif</span> <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="n">wv</span><span class="p">:</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%2.2f</span><span class="s1">      </span><span class="si">%+2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">wv</span><span class="p">,</span> <span class="o">-</span><span class="n">veto</span><span class="p">))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/td&gt;&lt;td&gt;&lt;/td&gt; &lt;td bgcolor=&quot;#ffddff&quot;&gt;</span><span class="si">%+2.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">wv</span><span class="p">,</span> <span class="o">-</span><span class="n">veto</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                    <span class="nb">print</span><span class="p">()</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">()</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1">## unipolar case  Electre III for instance</span>
                        <span class="k">if</span> <span class="n">veto</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;-1.0&quot;</span><span class="p">):</span>
                            <span class="k">if</span> <span class="n">wv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; </span><span class="si">%2.2f</span><span class="s1"> </span><span class="si">%2.2f</span><span class="s1"> </span><span class="si">%+2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">wv</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">veto</span><span class="p">))</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/td&gt; &lt;td&gt; </span><span class="si">%2.2f</span><span class="s1">&lt;/td&gt; &lt;td bgcolor=&quot;#ffddff&quot;&gt;</span><span class="si">%+2.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">wv</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">veto</span><span class="p">)</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; </span><span class="si">%2.2f</span><span class="s1">       </span><span class="si">%+2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">wv</span><span class="p">,</span> <span class="o">-</span><span class="n">veto</span><span class="p">))</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/td&gt; &lt;td&gt;&lt;/td&gt; &lt;td bgcolor=&quot;#ffddff&quot;&gt;</span><span class="si">%+2.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">wv</span><span class="p">,</span> <span class="o">-</span><span class="n">veto</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;       </span><span class="si">%2.2f</span><span class="s1"> </span><span class="si">%+2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">veto</span><span class="p">))</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&lt;/td&gt; &lt;td&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/td&gt; &lt;td bgcolor=&quot;#ffddff&quot;&gt;</span><span class="si">%+2.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="o">-</span><span class="n">veto</span><span class="p">)</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                        <span class="nb">print</span><span class="p">()</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
                        
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">==</span> <span class="n">NA</span><span class="p">:</span>
                        <span class="n">eval_c_a</span> <span class="o">=</span> <span class="s1">&#39;NA&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">eval_c_a</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">==</span> <span class="n">NA</span><span class="p">:</span>
                        <span class="n">eval_c_b</span> <span class="o">=</span> <span class="s1">&#39;NA&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">eval_c_b</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                    
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="s1">&#39;    </span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eval_c_a</span><span class="p">,</span><span class="n">eval_c_b</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;td bgcolor=&quot;#FFEEAA&quot; align=&quot;center&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt; &lt;td&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/td&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/td&gt;&lt;/tr&gt;&#39;</span> <span class="o">%</span>\
                                <span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">],</span><span class="n">eval_c_a</span><span class="p">,</span><span class="n">eval_c_b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;             ----------------------------------------&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; Valuation in range: </span><span class="si">%+.2f</span><span class="s1"> to </span><span class="si">%+.2f</span><span class="s1">; global concordance: </span><span class="si">%+.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="o">-</span><span class="n">sumWeights</span><span class="p">,</span><span class="n">sumWeights</span><span class="p">,</span><span class="n">concordance</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&lt;/table&gt;&#39;</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;b&gt;Valuation in range: </span><span class="si">%+.2f</span><span class="s1"> to </span><span class="si">%+.2f</span><span class="s1">; global concordance: </span><span class="si">%+.2f</span><span class="s1"> &lt;/b&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="o">-</span><span class="n">sumWeights</span><span class="p">,</span><span class="n">sumWeights</span><span class="p">,</span><span class="n">concordance</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">isReturningHTML</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">html</span></div>


<div class="viewcode-block" id="OutrankingDigraph.showPairwiseComparison">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.showPairwiseComparison">[docs]</a>
    <span class="k">def</span> <span class="nf">showPairwiseComparison</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span>
                               <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">isReturningHTML</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                               <span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the pairwise comprison parameters on all criteria</span>
<span class="sd">        in html format</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">NA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NA</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a,b =&#39;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">b</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                <span class="n">html</span>  <span class="o">=</span> <span class="s1">&#39;&lt;h1&gt;Pairwise Comparison&lt;/h1&gt;&#39;</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h2&gt;Comparing actions : (</span><span class="si">%s</span><span class="s1">,</span><span class="si">%s</span><span class="s1">)&lt;/h2&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;table style=&quot;background-color:White&quot; border=&quot;1&quot;&gt;&#39;</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr bgcolor=&quot;#9acd32&quot;&gt;&#39;</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;th&gt;crit.&lt;/th&gt;&lt;th&gt;wght.&lt;/th&gt; &lt;th&gt;g(x)&lt;/th&gt; &lt;th&gt;g(y)&lt;/th&gt; &lt;th&gt;diff&lt;/th&gt; &lt;th&gt;ind&lt;/th&gt; &lt;th&gt;pref&lt;/th&gt; &lt;th&gt;concord&lt;/th&gt; &lt;th&gt;v&lt;/th&gt; &lt;th&gt;polarisation&lt;/th&gt;&#39;</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*------------  pairwise comparison ----*&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Comparing actions : (</span><span class="si">%s</span><span class="s1">, </span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;crit. wght.  g(x)  g(y)    diff  </span><span class="se">\t</span><span class="s1">| ind   pref    r() </span><span class="se">\t</span><span class="s1">|   v  veto&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-------------------------------  </span><span class="se">\t</span><span class="s1"> ----------------------------- </span><span class="se">\t</span><span class="s1"> ----------------&#39;</span><span class="p">)</span>                
            <span class="n">concordance</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">sumWeights</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">]</span>
            <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="n">sumWeights</span> <span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span> <span class="ow">and</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span><span class="p">:</span>		
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">indx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">indy</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                            <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span>
                                                   <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">ind</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">px</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">py</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                            <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span>
                                              <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                        <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
                    <span class="n">lc0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localConcordance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">ind</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">ind</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">ind</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">wp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">wp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">wp</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">p</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&#39;</span>
                        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td bgcolor=&quot;#FFEEAA&quot; align=&quot;center&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt; &lt;td&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/td&gt; &lt;td&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/td&gt; &lt;td&gt;</span><span class="si">%+2.2f</span><span class="s1">&lt;/td&gt; &lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;  &lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;  &lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;   &lt;td&gt;</span><span class="si">%+.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span>\
                                <span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">],</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">],</span>
                                 <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">],</span><span class="n">d</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">ind</span><span class="p">),</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">),</span>
                                 <span class="n">lc0</span><span class="o">*</span><span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]))</span>
                    <span class="k">else</span><span class="p">:</span>
                         <span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="s1">&#39;  </span><span class="si">%.2f</span><span class="s1">  </span><span class="si">%2.2f</span><span class="s1">  </span><span class="si">%2.2f</span><span class="s1">  </span><span class="si">%+2.2f</span><span class="s1"> </span><span class="se">\t</span><span class="s1">| </span><span class="si">%s</span><span class="s1">  </span><span class="si">%s</span><span class="s1">   </span><span class="si">%+.2f</span><span class="s1"> </span><span class="se">\t</span><span class="s1">|&#39;</span> <span class="o">%</span>\
                               <span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">],</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">],</span>
                                <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">],</span><span class="n">d</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">ind</span><span class="p">),</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">),</span>
                                <span class="n">lc0</span><span class="o">*</span><span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                    <span class="n">concordance</span> <span class="o">=</span> <span class="n">concordance</span> <span class="o">+</span> <span class="p">(</span><span class="n">lc0</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]))</span>
                    <span class="n">wv</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">vx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">vy</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                            <span class="n">v</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">v</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">v</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="n">veto</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localVeto</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">negativeVeto</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localNegativeVeto</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                        <span class="n">hasBipolarVeto</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">hasBipolarVeto</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="n">v</span><span class="p">:</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;     </span><span class="si">%2.2f</span><span class="s1">       </span><span class="si">%+2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">negativeVeto</span><span class="p">))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&lt;/td&gt; &lt;td&gt; </span><span class="si">%2.2f</span><span class="s1">&lt;/td&gt; &lt;td bgcolor=&quot;#ddffdd&quot;&gt;</span><span class="si">%+2.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">negativeVeto</span><span class="p">)</span>
                            <span class="k">elif</span> <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="n">v</span><span class="p">:</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;     </span><span class="si">%2.2f</span><span class="s1">       </span><span class="si">%+2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="o">-</span><span class="n">veto</span><span class="p">))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&lt;/td&gt; &lt;td&gt; </span><span class="si">%2.2f</span><span class="s1">&lt;/td&gt; &lt;td bgcolor=&quot;#ffddff&quot;&gt;</span><span class="si">%+2.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="o">-</span><span class="n">veto</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>                                
                                    <span class="nb">print</span><span class="p">()</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
                        <span class="k">elif</span> <span class="n">wv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="n">wv</span><span class="p">:</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%2.2f</span><span class="s1">      </span><span class="si">%+2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">wv</span><span class="p">,</span> <span class="n">negativeVeto</span><span class="p">))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/td&gt;&lt;td&gt;&lt;/td&gt; &lt;td bgcolor=&quot;#ddffdd&quot;&gt;</span><span class="si">%+2.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">wv</span><span class="p">,</span> <span class="n">negativeVeto</span><span class="p">)</span>
                            <span class="k">elif</span> <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="n">wv</span><span class="p">:</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%2.2f</span><span class="s1">      </span><span class="si">%+2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">wv</span><span class="p">,</span> <span class="o">-</span><span class="n">veto</span><span class="p">))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/td&gt;&lt;td&gt;&lt;/td&gt; &lt;td bgcolor=&quot;#ffddff&quot;&gt;</span><span class="si">%+2.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">wv</span><span class="p">,</span> <span class="o">-</span><span class="n">veto</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                    <span class="nb">print</span><span class="p">()</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">()</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1">## unipolar case  Electre III for instance</span>
                        <span class="k">if</span> <span class="n">veto</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;-1.0&quot;</span><span class="p">):</span>
                            <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;       </span><span class="si">%2.2f</span><span class="s1"> </span><span class="si">%+2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">veto</span><span class="p">))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&lt;/td&gt; &lt;td&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/td&gt; &lt;td bgcolor=&quot;#ffddff&quot;&gt;</span><span class="si">%+2.2f</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="o">-</span><span class="n">veto</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                                    <span class="nb">print</span><span class="p">()</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
                        
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">==</span> <span class="n">NA</span><span class="p">:</span>
                        <span class="n">eval_c_a</span> <span class="o">=</span> <span class="s1">&#39;NA&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">eval_c_a</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">==</span> <span class="n">NA</span><span class="p">:</span>
                        <span class="n">eval_c_b</span> <span class="o">=</span> <span class="s1">&#39;NA&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">eval_c_b</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                    
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="s1">&#39;    </span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">eval_c_a</span><span class="p">,</span><span class="n">eval_c_b</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;td bgcolor=&quot;#FFEEAA&quot; align=&quot;center&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt; &lt;td&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/td&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/td&gt;&lt;/tr&gt;&#39;</span> <span class="o">%</span>\
                                <span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">],</span><span class="n">eval_c_a</span><span class="p">,</span><span class="n">eval_c_b</span><span class="p">,</span>
                                 <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">isReturningHTML</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;             ----------------------------------------&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; Valuation in range: </span><span class="si">%+.2f</span><span class="s1"> to </span><span class="si">%+.2f</span><span class="s1">; global concordance: </span><span class="si">%+.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                      <span class="p">(</span><span class="o">-</span><span class="n">sumWeights</span><span class="p">,</span><span class="n">sumWeights</span><span class="p">,</span><span class="n">concordance</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&lt;/table&gt;&#39;</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;b&gt;Valuation in range: </span><span class="si">%+.2f</span><span class="s1"> to </span><span class="si">%+.2f</span><span class="s1">; global concordance: </span><span class="si">%+.2f</span><span class="s1"> &lt;/b&gt;&#39;</span> <span class="o">%</span>\
                    <span class="p">(</span><span class="o">-</span><span class="n">sumWeights</span><span class="p">,</span><span class="n">sumWeights</span><span class="p">,</span><span class="n">concordance</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">isReturningHTML</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">html</span></div>


<div class="viewcode-block" id="OutrankingDigraph.showHTMLPairwiseComparison">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.showHTMLPairwiseComparison">[docs]</a>
    <span class="k">def</span> <span class="nf">showHTMLPairwiseComparison</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">htmlFileName</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Exporting the pairwise comparison table of actions a and b in the default system browser. A specific file name may be provided.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">webbrowser</span>
        <span class="k">if</span> <span class="n">htmlFileName</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">tempfile</span> <span class="kn">import</span> <span class="n">NamedTemporaryFile</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="p">(</span><span class="n">NamedTemporaryFile</span><span class="p">(</span><span class="n">suffix</span><span class="o">=</span><span class="s1">&#39;.html&#39;</span><span class="p">,</span>
                                           <span class="n">delete</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="nb">dir</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">getcwd</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="n">getcwd</span><span class="p">()</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">htmlFileName</span>
        <span class="c1"># if fileName is None:</span>
        <span class="c1">#     fileName = &#39;pairwiseComparison_%s_%s.html&#39; % (a,b)</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">showPairwiseComparison</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">isReturningHTML</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;file://&#39;</span><span class="o">+</span><span class="n">fileName</span>
        <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">new</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span></div>


<div class="viewcode-block" id="OutrankingDigraph.showPairwiseOutrankings">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.showPairwiseOutrankings">[docs]</a>
    <span class="k">def</span> <span class="nf">showPairwiseOutrankings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span>
                               <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">isReturningHTML</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                               <span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the pairwise outrankings table for actions *a* and *b*.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showPairwiseComparison</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span>\
                               <span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">,</span><span class="n">isReturningHTML</span><span class="o">=</span><span class="n">isReturningHTML</span><span class="p">,</span>\
                               <span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="n">hasSymmetricThresholds</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showPairwiseComparison</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="n">a</span><span class="p">,</span>\
                               <span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">,</span><span class="n">isReturningHTML</span><span class="o">=</span><span class="n">isReturningHTML</span><span class="p">,</span>\
                               <span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="n">hasSymmetricThresholds</span><span class="p">)</span></div>


<div class="viewcode-block" id="OutrankingDigraph.showHTMLPairwiseOutrankings">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.showHTMLPairwiseOutrankings">[docs]</a>
    <span class="k">def</span> <span class="nf">showHTMLPairwiseOutrankings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">htmlFileName</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Exporting the pairwise outrankings table of actions a and b</span>
<span class="sd">        in the default system browser. A specific file name may be provided.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">webbrowser</span>
        <span class="k">if</span> <span class="n">htmlFileName</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">tempfile</span> <span class="kn">import</span> <span class="n">NamedTemporaryFile</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="p">(</span><span class="n">NamedTemporaryFile</span><span class="p">(</span><span class="n">suffix</span><span class="o">=</span><span class="s1">&#39;.html&#39;</span><span class="p">,</span>
                                           <span class="n">delete</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="nb">dir</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">getcwd</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="n">getcwd</span><span class="p">()</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">htmlFileName</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">showPairwiseComparison</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">isReturningHTML</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">showPairwiseComparison</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">isReturningHTML</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;file://&#39;</span><span class="o">+</span><span class="n">fileName</span>
        <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">new</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span></div>


<div class="viewcode-block" id="OutrankingDigraph.showShort">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.showShort">[docs]</a>
    <span class="k">def</span> <span class="nf">showShort</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        specialize the general showShort method with the criteria.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Digraph</span><span class="o">.</span><span class="n">showShort</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showCriteria</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showPerformanceTableau</span><span class="p">()</span></div>


<div class="viewcode-block" id="OutrankingDigraph.showAll">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.showAll">[docs]</a>
    <span class="k">def</span> <span class="nf">showAll</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        specialize the general showAll method with criteria</span>
<span class="sd">        and performance tableau output</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----- show detail -------------*&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Digraph          :&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---- Actions ----*&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showCriteria</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showPerformanceTableau</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---- Valuation domain ----*&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showRelationTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showComponents</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showPreKernels</span><span class="p">()</span></div>



<div class="viewcode-block" id="OutrankingDigraph.showRelationTable">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.showRelationTable">[docs]</a>
    <span class="k">def</span> <span class="nf">showRelationTable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">IntegerValues</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">actionsSubset</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">rankingRule</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">Sorted</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">hasLPDDenotation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">OddsDenotation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">StabilityDenotation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">hasLatexFormat</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">hasIntegerValuation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">relation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">ReflexiveTerms</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                          <span class="n">fromIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">toIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prints the relation valuation in actions X actions table format.</span>
<span class="sd">        Copeland and NetFlows ranking rule may be applied.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">hasLPDDenotation</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">largePerformanceDifferencesCount</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">largePerformanceDifferencesCount</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">hasLPDDenotation</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">OddsDenotation</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">oddsMatrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computePairwiseOddsMatrix</span><span class="p">()</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">OddsDenotation</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">StabilityDenotation</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">stability</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stability</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="n">robustg</span> <span class="o">=</span> <span class="n">RobustOutrankingDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="n">stability</span> <span class="o">=</span> <span class="n">robustg</span><span class="o">.</span><span class="n">stability</span>
            <span class="c1">#except:</span>
            <span class="c1">#    hasStabilityDenotation = False</span>
            
<span class="c1">##        if actionsSubset is None:</span>
<span class="c1">##            actions = self.actions</span>
<span class="c1">##        else:</span>
<span class="c1">##            actions = actionsSubset</span>
        <span class="k">if</span> <span class="n">actionsSubset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">rankingRule</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">rankingRule</span> <span class="o">==</span> <span class="s1">&#39;Copeland&#39;</span><span class="p">:</span>
                    <span class="n">computeRanking</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeCopelandRanking</span>
                <span class="k">elif</span> <span class="n">rankingRule</span> <span class="o">==</span> <span class="s1">&#39;NetFlows&#39;</span><span class="p">:</span>
                    <span class="n">computeRanking</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeNetFlowsRanking</span>
                <span class="n">actions</span> <span class="o">=</span> <span class="n">computeRanking</span><span class="p">()</span>
                <span class="n">Sorted</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="n">actionsSubset</span>

        <span class="k">if</span> <span class="n">relation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">hasLPDDenotation</span><span class="p">:</span>
                <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
            
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* ---- Relation Table -----</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">OddsDenotation</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;r/(pro:con)| &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">StabilityDenotation</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;r/(stab)| &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">hasLPDDenotation</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;r/(lpd)| &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  r   | &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">fromIndex</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fromIndex</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">toIndex</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">toIndex</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">[</span><span class="n">fromIndex</span><span class="p">:</span><span class="n">toIndex</span><span class="p">]:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="nb">frozenset</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">actionsList</span> <span class="o">+=</span> <span class="p">[(</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;shortName&#39;</span><span class="p">],</span><span class="n">x</span><span class="p">)]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">actionsList</span> <span class="o">+=</span> <span class="p">[(</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">],</span><span class="n">x</span><span class="p">)]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">actionsList</span> <span class="o">+=</span> <span class="p">[(</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;shortName&#39;</span><span class="p">],</span><span class="n">x</span><span class="p">)]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">actionsList</span> <span class="o">+=</span> <span class="p">[(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="n">x</span><span class="p">)]</span>
        <span class="k">if</span> <span class="n">Sorted</span><span class="p">:</span>
            <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="c1">#print actionsList</span>
        <span class="c1">#actionsList.sort()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">hasIntegerValuation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;hasIntegerValuation&#39;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">hasIntegerValuation</span> <span class="o">=</span> <span class="n">IntegerValues</span>
        
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="o">+</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;&#39;  &quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">-----|------------------------------------------------------------&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">hasLatexFormat</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;$&quot;</span><span class="o">+</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;$ &amp; &quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="o">+</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;&#39; |  &quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">ReflexiveTerms</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">hasLPDDenotation</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;   -   &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="n">hasLatexFormat</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;$</span><span class="se">\\</span><span class="s1">;-</span><span class="se">\\</span><span class="s1">;$ &amp;&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  -  &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">hasLPDDenotation</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; </span><span class="si">%+.2f</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="n">Max</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="n">hasLatexFormat</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;$</span><span class="si">%.2f</span><span class="s1">$ &amp;&#39;</span> <span class="o">%</span> <span class="n">Max</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; </span><span class="si">%+.2f</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="n">Max</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>    
                    <span class="k">if</span> <span class="n">hasIntegerValuation</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">hasLPDDenotation</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%+d</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="n">hasLatexFormat</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;$</span><span class="si">%+d</span><span class="s1">$ &amp;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%+d</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">hasLPDDenotation</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%+2.2f</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="n">hasLatexFormat</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;$</span><span class="si">%+2.2f</span><span class="s1">$ &amp; &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>       
                        <span class="k">else</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%+2.2f</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                
            <span class="k">if</span> <span class="n">hasLatexFormat</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; </span><span class="se">\\</span><span class="s1">cr&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">hasLPDDenotation</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;       | &quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(</span><span class="si">%+d</span><span class="s1">,</span><span class="si">%+d</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">largePerformanceDifferencesCount</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="s1">&#39;positive&#39;</span><span class="p">],</span>
                                         <span class="n">largePerformanceDifferencesCount</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="s1">&#39;negative&#39;</span><span class="p">]),</span>
                          <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">OddsDenotation</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;       | &quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(</span><span class="si">%.0f</span><span class="s1">:</span><span class="si">%.0f</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">oddsMatrix</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="mi">0</span><span class="p">],</span><span class="n">oddsMatrix</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="mi">1</span><span class="p">]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;  &#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">StabilityDenotation</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;     | &quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span> <span class="ow">and</span> <span class="n">StabilityDenotation</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; (+4) &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; (</span><span class="si">%+d</span><span class="s1">) &#39;</span> <span class="o">%</span> <span class="n">stability</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Valuation domain: [</span><span class="si">%.3f</span><span class="s1">; </span><span class="si">%.3f</span><span class="s1">]&#39;</span> <span class="o">%</span>\
                  <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">])</span> <span class="p">)</span>
        <span class="k">if</span> <span class="n">rankingRule</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;RankingRule = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">rankingRule</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">StabilityDenotation</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Stability denotation semantics:&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; +4|-4 : unanimous outranking | outranked situation;&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; +3|-3 : validated outranking | outranked situation&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;         in each coalition of equisignificant criteria;&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; +2|-2 : outranking | outranked situation validated&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;         with all potential significance weights that are&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;         compatible with the given significance preorder;&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; +1|-1 : validated outranking | outranked situation with&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;         the given significance weights;&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;   0   : indeterminate relational situation.&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">()</span></div>

            
<div class="viewcode-block" id="OutrankingDigraph.showPerformanceTableau">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.showPerformanceTableau">[docs]</a>
    <span class="k">def</span> <span class="nf">showPerformanceTableau</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">actionsSubset</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Print the performance Tableau.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">NA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NA</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----  performance tableau -----*&#39;</span><span class="p">)</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
        <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">actionsSubset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">actionsList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
            <span class="c1">#actionsList.sort()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">actionsList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">actionsSubset</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;criteria | &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">  &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">---------|-----------------------------------------&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;   </span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">  |&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">% .1f</span><span class="s1">, &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; NA, &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">()</span>      </div>


<div class="viewcode-block" id="OutrankingDigraph.computeVetosShort">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.computeVetosShort">[docs]</a>
    <span class="k">def</span> <span class="nf">computeVetosShort</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders the number of vetoes and real vetoes in an OutrankingDigraph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">nv</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vetos</span><span class="p">)</span>
        <span class="n">realveto</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nv</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                <span class="n">realveto</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">nv</span><span class="p">,</span><span class="n">realveto</span></div>


<div class="viewcode-block" id="OutrankingDigraph.computeVetoesStatistics">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.computeVetoesStatistics">[docs]</a>
    <span class="k">def</span> <span class="nf">computeVetoesStatistics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">level</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders the cut level vetos in dictionary format:</span>
<span class="sd">        vetos = {&#39;all&#39;: n0, &#39;strong: n1, &#39;weak&#39;:n2}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">level</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">level</span> <span class="o">=</span> <span class="n">Med</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">level</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">level</span><span class="p">))</span>
        <span class="n">negLevel</span> <span class="o">=</span> <span class="n">Max</span> <span class="o">-</span> <span class="n">level</span> <span class="o">+</span> <span class="n">Min</span>
        <span class="n">nv</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vetos</span><span class="p">)</span>
        <span class="n">weakVeto</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">strongVeto</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nv</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">level</span><span class="p">:</span>
                <span class="n">strongVeto</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">negLevel</span><span class="p">:</span>
                <span class="n">weakVeto</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">vetos</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">vetos</span><span class="p">[</span><span class="s1">&#39;all&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">nv</span>
        <span class="n">vetos</span><span class="p">[</span><span class="s1">&#39;strong&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">strongVeto</span>
        <span class="n">vetos</span><span class="p">[</span><span class="s1">&#39;weak&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">weakVeto</span>
        <span class="k">return</span> <span class="n">vetos</span></div>


<div class="viewcode-block" id="OutrankingDigraph.showConsiderablePerformancesPolarisation">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.showConsiderablePerformancesPolarisation">[docs]</a>
    <span class="k">def</span> <span class="nf">showConsiderablePerformancesPolarisation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        prints all considerable performance polarisations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">vet</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vetos</span>
        <span class="n">negVet</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">negativeVetos</span>
        <span class="n">vp</span> <span class="o">=</span>  <span class="p">[(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">vet</span><span class="p">]</span>
        <span class="n">nvp</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">negVet</span><span class="p">]</span>
        <span class="c1">#print(vp)</span>
        <span class="c1">#print(nvp)</span>
        <span class="n">nv</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">vp</span><span class="p">)</span>
        <span class="n">nnv</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nvp</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nv</span> <span class="ow">or</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">nnv</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nv</span> <span class="ow">and</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">nnv</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">vp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">nvp</span><span class="p">[</span><span class="n">j</span><span class="p">]:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----- Consirable contradictory performance difference! ------*&#39;</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                        <span class="p">(</span><span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span> <span class="p">)</span>
                    <span class="k">for</span> <span class="n">lpd</span> <span class="ow">in</span> <span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;criterion: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">lpd</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Considerable negative performance difference : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">lpd</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Veto discrimination threshold       : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="o">-</span><span class="n">lpd</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="p">)</span>
                    <span class="k">for</span> <span class="n">lpd</span> <span class="ow">in</span> <span class="n">negVet</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;criteria: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">lpd</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Considerable positive performance difference : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">lpd</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Counter-veto threshold              : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">lpd</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="p">)</span>            
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Polarisation: r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1"> ==&gt; </span><span class="si">%+.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                          <span class="p">(</span><span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span><span class="n">Med</span><span class="p">)</span> <span class="p">)</span>                    
                    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">+=</span><span class="mi">1</span>
                <span class="k">elif</span> <span class="n">vp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">nvp</span><span class="p">[</span><span class="n">j</span><span class="p">]:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*------ Considerable negative performance difference -----&quot;&#39;</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                            <span class="p">(</span><span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span> <span class="p">)</span>
                    <span class="k">for</span> <span class="n">lpd</span> <span class="ow">in</span> <span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;criterion: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">lpd</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Considerable negative performance difference : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">lpd</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Veto discrimination threshold       : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="o">-</span><span class="n">lpd</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="p">)</span>
                    <span class="k">if</span> <span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Polarisation: r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1"> ==&gt; </span><span class="si">%+.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                          <span class="p">(</span><span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span><span class="n">Med</span><span class="p">)</span> <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Polarisation: r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1"> ==&gt; </span><span class="si">%+.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                          <span class="p">(</span><span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span><span class="n">Min</span><span class="p">)</span> <span class="p">)</span>
                    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*------ Considerable positive performance difference -----&quot;&#39;</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                            <span class="p">(</span><span class="n">negVet</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">negVet</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">negVet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span> <span class="p">)</span>
                    <span class="k">for</span> <span class="n">lpd</span> <span class="ow">in</span> <span class="n">negVet</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;criteria: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">lpd</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Considerable positive performance difference : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">lpd</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Counter-veto threshold              : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">lpd</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="p">)</span>            
                    <span class="k">if</span> <span class="n">negVet</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Polarisation: r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1"> ==&gt; </span><span class="si">%+.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                          <span class="p">(</span><span class="n">negVet</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">negVet</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">negVet</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span><span class="n">Med</span><span class="p">)</span> <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Polarisation: r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1"> ==&gt; </span><span class="si">%+.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                          <span class="p">(</span><span class="n">negVet</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">negVet</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">negVet</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span><span class="n">Max</span><span class="p">)</span> <span class="p">)</span>
                    <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nv</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*------ Considerable negative performance difference -----&quot;&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                    <span class="p">(</span><span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span> <span class="p">)</span>
            <span class="k">for</span> <span class="n">lpd</span> <span class="ow">in</span> <span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;criterion: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">lpd</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Considerable negative performance difference : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">lpd</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Veto discrimination threshold       : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="o">-</span><span class="n">lpd</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="p">)</span>
            <span class="k">if</span> <span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Polarisation: r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1"> ==&gt; </span><span class="si">%+.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                  <span class="p">(</span><span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span><span class="n">Med</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Polarisation: r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1"> ==&gt; </span><span class="si">%+.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                  <span class="p">(</span><span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span><span class="n">Min</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">i</span> <span class="o">+=</span><span class="mi">1</span>
        <span class="k">while</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">nnv</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*------ Considerable positive performance difference -----&quot;&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                    <span class="p">(</span><span class="n">negVet</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">negVet</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">negVet</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span> <span class="p">)</span>
            <span class="k">for</span> <span class="n">lpd</span> <span class="ow">in</span> <span class="n">negVet</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;criterion: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">lpd</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Considerable positive performance difference : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">lpd</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Counter-veto threshold              : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">lpd</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="p">)</span>            
            <span class="k">if</span> <span class="n">negVet</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Polarisation: r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1"> ==&gt; </span><span class="si">%+.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                  <span class="p">(</span><span class="n">negVet</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">negVet</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">negVet</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span><span class="n">Med</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Polarisation: r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1"> ==&gt; </span><span class="si">%+.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                  <span class="p">(</span><span class="n">negVet</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">negVet</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">negVet</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span><span class="n">Max</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span></div>


<div class="viewcode-block" id="OutrankingDigraph.showPolarisations">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.showPolarisations">[docs]</a>
    <span class="k">def</span> <span class="nf">showPolarisations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">cutLevel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">realVetosOnly</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>       
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        prints all negative and positive polarised situations observed in the OutrankingDigraph instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">lpdCount</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">largePerformanceDifferencesCount</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No large performance differences count has been stored&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">vetos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vetos</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">vetos</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----  Negative polarisations ----*&#39;</span><span class="p">)</span>
        <span class="c1">#nv, realveto = self.computeVetosShort()</span>
        <span class="c1">#vetos.sort()</span>
        <span class="n">nv</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">vetos</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;number of negative polarisations : </span><span class="si">%d</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nv</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nv</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">: r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span> <span class="p">)</span>
            <span class="k">for</span> <span class="n">lpd</span> <span class="ow">in</span> <span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;criterion: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">lpd</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Considerable performance difference : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">lpd</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Veto discrimination threshold       : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="o">-</span><span class="n">lpd</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="p">)</span>
            <span class="k">if</span> <span class="n">lpdCount</span><span class="p">[</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]][</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]][</span><span class="s1">&#39;positive&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Polarisation: r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1"> ==&gt; </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                      <span class="p">(</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span><span class="n">Med</span><span class="p">)</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Polarisation: r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1"> ==&gt; </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                      <span class="p">(</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span><span class="n">Min</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Consirable contradictory performance differences!&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Polarisation: r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1"> ==&gt; </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                      <span class="p">(</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span><span class="n">Med</span><span class="p">)</span> <span class="p">)</span>
        <span class="c1">#print(&#39;number of real vetos: %d&#39; % (realveto))</span>
        <span class="c1">#return nv,realveto</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">negativeVetos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">negativeVetos</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">negativeVetos</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">*----  Positive polarisations ----*&#39;</span><span class="p">)</span>
        <span class="c1">#vetos.sort()</span>
        <span class="n">cv</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">negativeVetos</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;number of positive polarisations: </span><span class="si">%d</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">cv</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cv</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">: r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                      <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
                       <span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span> <span class="p">)</span>
            <span class="k">for</span> <span class="n">lpd</span> <span class="ow">in</span> <span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;criterion: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">lpd</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Considerable performance difference : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">lpd</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Counter-veto threshold              : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">lpd</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="p">)</span>            
            <span class="k">if</span> <span class="n">lpdCount</span><span class="p">[</span><span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]][</span><span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]][</span><span class="s1">&#39;negative&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Polarisation: r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1"> ==&gt; </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                      <span class="p">(</span><span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
                       <span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span><span class="n">Med</span><span class="p">)</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Polarisation: r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1"> ==&gt; </span><span class="si">%+.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                      <span class="p">(</span><span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
                       <span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span><span class="n">Max</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Consirable contradictory performance differences!&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Polarisation: r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1"> ==&gt; </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                      <span class="p">(</span><span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
                       <span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span><span class="n">Med</span><span class="p">)</span> <span class="p">)</span></div>


<div class="viewcode-block" id="OutrankingDigraph.showVetos">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.showVetos">[docs]</a>
    <span class="k">def</span> <span class="nf">showVetos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">cutLevel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">realVetosOnly</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        prints all veto and counter-veto situations observed in the OutrankingDigraph instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">lpdCount</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">largePerformanceDifferencesCount</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----  Veto situations ---&#39;</span><span class="p">)</span>
        <span class="c1">#nv, realveto = self.computeVetosShort()</span>
        <span class="n">vetos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vetos</span>
        <span class="c1">#vetos.sort()</span>
        <span class="n">nv</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">vetos</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;number of veto situations : </span><span class="si">%d</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nv</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nv</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">: r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span> <span class="p">)</span>
            <span class="k">for</span> <span class="n">lpd</span> <span class="ow">in</span> <span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;criterion: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">lpd</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Considerable performance difference : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">lpd</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Veto discrimination threshold       : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="o">-</span><span class="n">lpd</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="p">)</span>
            <span class="k">if</span> <span class="n">lpdCount</span><span class="p">[</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]][</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]][</span><span class="s1">&#39;positive&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Polarisation: r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1"> ==&gt; </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                      <span class="p">(</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span><span class="n">Med</span><span class="p">)</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Polarisation: r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1"> ==&gt; </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                      <span class="p">(</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span><span class="n">Min</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Consirable contradictory performance differences!&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Polarisation: r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1"> ==&gt; </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                      <span class="p">(</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span><span class="n">Med</span><span class="p">)</span> <span class="p">)</span>
        <span class="c1">#print(&#39;number of real vetos: %d&#39; % (realveto))</span>
        <span class="c1">#return nv,realveto</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">*----  Counter-veto situations ---&#39;</span><span class="p">)</span>
        <span class="n">negativeVetos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">negativeVetos</span>
        <span class="c1">#vetos.sort()</span>
        <span class="n">cv</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">negativeVetos</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;number of counter-veto situations : </span><span class="si">%d</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nv</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cv</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">: r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                      <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>\
                       <span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span> <span class="p">)</span>
            <span class="k">for</span> <span class="n">lpd</span> <span class="ow">in</span> <span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;criterion: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">lpd</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Considerable performance difference : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">lpd</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Counter-veto threshold              : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">lpd</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="p">)</span>            
            <span class="k">if</span> <span class="n">lpdCount</span><span class="p">[</span><span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]][</span><span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]][</span><span class="s1">&#39;negative&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Polarisation: r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1"> ==&gt; </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                      <span class="p">(</span><span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>\
                       <span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span><span class="n">Med</span><span class="p">)</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Polarisation: r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1"> ==&gt; </span><span class="si">%+.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                      <span class="p">(</span><span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>\
                        <span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span><span class="n">Max</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Consirable contradictory performance differences!&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Polarisation: r(</span><span class="si">%s</span><span class="s1"> &gt;= </span><span class="si">%s</span><span class="s1">) = </span><span class="si">%.2f</span><span class="s1"> ==&gt; </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                      <span class="p">(</span><span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>\
                       <span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">negativeVetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span><span class="n">Med</span><span class="p">)</span> <span class="p">)</span></div>

               

<div class="viewcode-block" id="OutrankingDigraph.saveXMCDA2RubisChoiceRecommendation">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OutrankingDigraph.saveXMCDA2RubisChoiceRecommendation">[docs]</a>
    <span class="k">def</span> <span class="nf">saveXMCDA2RubisChoiceRecommendation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">,</span>
                                            <span class="n">category</span><span class="o">=</span><span class="s1">&#39;Rubis&#39;</span><span class="p">,</span><span class="n">subcategory</span><span class="o">=</span><span class="s1">&#39;Choice Recommendation&#39;</span><span class="p">,</span>
                                            <span class="n">author</span><span class="o">=</span><span class="s1">&#39;digraphs Module (RB)&#39;</span><span class="p">,</span><span class="n">reference</span><span class="o">=</span><span class="s1">&#39;saved from Python&#39;</span><span class="p">,</span>
                                            <span class="n">comment</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">servingD3</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">relationName</span><span class="o">=</span><span class="s1">&#39;Stilde&#39;</span><span class="p">,</span>
                                            <span class="n">graphValuationType</span><span class="o">=</span><span class="s1">&#39;bipolar&#39;</span><span class="p">,</span><span class="n">variant</span><span class="o">=</span><span class="s1">&#39;standard&#39;</span><span class="p">,</span>
                                            <span class="n">instanceID</span><span class="o">=</span><span class="s1">&#39;void&#39;</span><span class="p">,</span><span class="n">stringNA</span><span class="o">=</span><span class="s1">&#39;NA&#39;</span><span class="p">,</span><span class="n">_OldCoca</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                            <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        save complete Rubis problem and result in XMCDA 2.0 format with unicode encoding.</span>

<span class="sd">        *Warning*: obsolete now!</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">codecs</span><span class="o">,</span><span class="nn">copy</span>

        <span class="c1"># save a copy of self</span>
        <span class="n">selfOrig</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Debug sel orig:&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

        <span class="c1"># the next command augments self with chordless circuits,</span>
        <span class="c1"># the case given ! _OldCoca is True by default for compatibility reasons</span>
        <span class="c1"># with the old Rubis web services in D3 and D4 for instance !</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">computeRubyChoice</span><span class="p">(</span><span class="n">_OldCoca</span><span class="o">=</span><span class="n">_OldCoca</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Debug after computeRubyChoice:&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">RobustOutrankingDigraph</span><span class="p">):</span>
            <span class="n">category</span> <span class="o">=</span> <span class="s1">&#39;Robust Rubis&#39;</span>

        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----- saving digraph in XMCDA 2.0 format  -------------*&#39;</span><span class="p">)</span>        
        <span class="n">nameExt</span> <span class="o">=</span> <span class="n">fileName</span><span class="o">+</span><span class="s1">&#39;.xmcda2&#39;</span>
        <span class="c1">#nameExt = fileName+&#39;.xml&#39;</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">nameExt</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">category</span><span class="o">==</span><span class="s1">&#39;Rubis&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">servingD3</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;xmcda2RubisChoice.xsl&quot;?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;!-- ?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;xmcda2RubisChoice.xsl&quot;? --&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">category</span><span class="o">==</span><span class="s1">&#39;Robust Rubis&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">servingD3</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;xmcda2RubisRobustChoice.xsl&quot;?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;!-- ?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;xmcda2RubisRobustChoice.xsl&quot;? --&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">servingD3</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;xmcda2Rubis.xsl&quot;?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;!-- ?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;xmcda2Rubis.xsl&quot;? --&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>     
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;xmcda:XMCDA xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="se">\n</span><span class="s1"> xsi:schemaLocation=&quot;http://www.decision-deck.org/2009/XMCDA-2.0.0 http://www.decision-deck.org/xmcda/_downloads/XMCDA-2.0.0.xsd&quot;</span><span class="se">\n</span><span class="s1"> xmlns:xmcda=&quot;http://www.decision-deck.org/2009/XMCDA-2.0.0&quot; instanceID=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">instanceID</span><span class="p">)</span> <span class="p">)</span>

        <span class="c1"># write description</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">projectName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">projectName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">projectID</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">projectID</span> <span class="o">=</span> <span class="n">fileName</span>
            
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;projectReference id=&quot;</span><span class="si">%s</span><span class="s1">&quot; name=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">projectID</span><span class="p">),</span><span class="nb">str</span><span class="p">(</span><span class="n">projectName</span><span class="p">)))</span>
        <span class="c1"># titles</span>
        <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="s1">&#39;Rubis&#39;</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Rubis Best Choice Recommendation&#39;</span>
        <span class="k">elif</span> <span class="n">category</span> <span class="o">==</span> <span class="s1">&#39;Robust Rubis&#39;</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;Condorcet Robustness of a Rubis Best Choice Recommendation&#39;</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;</span><span class="si">%s</span><span class="s1">&gt;</span><span class="si">%s</span><span class="s1">&lt;/</span><span class="si">%s</span><span class="s1">&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">title</span><span class="p">),</span><span class="s1">&#39;title&#39;</span><span class="p">)</span> <span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;</span><span class="si">%s</span><span class="s1">&gt;</span><span class="si">%s</span><span class="s1">&lt;/</span><span class="si">%s</span><span class="s1">&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;subTitle&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]),</span><span class="s1">&#39;subTitle&#39;</span><span class="p">)</span> <span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;</span><span class="si">%s</span><span class="s1">&gt;</span><span class="si">%s</span><span class="s1">&lt;/</span><span class="si">%s</span><span class="s1">&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;subSubTitle&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">[</span><span class="s1">&#39;subTitle&#39;</span><span class="p">]),</span><span class="s1">&#39;subSubTitle&#39;</span><span class="p">)</span> <span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="c1"># rest of case description including the bibliography</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">entry</span> <span class="o">==</span> <span class="s1">&#39;bibliography&#39;</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;bibliography&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">bibEntry</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">[</span><span class="n">entry</span><span class="p">]]:</span>
                        <span class="k">if</span> <span class="n">bibEntry</span> <span class="o">==</span> <span class="s1">&#39;description&#39;</span><span class="p">:</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;&lt;subSubTitle&gt;</span><span class="si">%s</span><span class="s1">&lt;/subSubTitle&gt;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                                     <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">[</span><span class="s1">&#39;bibliography&#39;</span><span class="p">][</span><span class="s1">&#39;description&#39;</span><span class="p">][</span><span class="s1">&#39;subSubTitle&#39;</span><span class="p">]))</span> <span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;bibEntry&gt;</span><span class="si">%s</span><span class="s1">&lt;/bibEntry&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                                     <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">[</span><span class="s1">&#39;bibliography&#39;</span><span class="p">][</span><span class="n">bibEntry</span><span class="p">]))</span> <span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/bibliography&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">entry</span> <span class="o">!=</span> <span class="s1">&#39;title&#39;</span> <span class="ow">and</span> <span class="n">entry</span> <span class="o">!=</span> <span class="s1">&#39;subTitle&#39;</span> <span class="ow">and</span> <span class="n">entry</span> <span class="o">!=</span> <span class="s1">&#39;subSubTitle&#39;</span> <span class="ow">and</span> <span class="n">entry</span> <span class="o">!=</span> <span class="s1">&#39;name&#39;</span> <span class="ow">and</span> <span class="n">entry</span> <span class="o">!=</span> <span class="s1">&#39;id&#39;</span> <span class="ow">and</span> <span class="n">entry</span> <span class="o">!=</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;</span><span class="si">%s</span><span class="s1">&gt;</span><span class="si">%s</span><span class="s1">&lt;/</span><span class="si">%s</span><span class="s1">&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">entry</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">[</span><span class="n">entry</span><span class="p">]),</span><span class="n">entry</span><span class="p">)</span> <span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;author&gt;</span><span class="si">%s</span><span class="s1">&lt;/author&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">author</span><span class="p">))</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;version&gt;</span><span class="si">%s</span><span class="s1">&lt;/version&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">reference</span><span class="p">))</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/projectReference&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="c1"># write methodParameters</span>
        <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="s1">&#39;Robust Rubis&#39;</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;methodParameters id=&quot;</span><span class="si">%s</span><span class="s1">&quot; name=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Robust Rubis&#39;</span><span class="p">,</span><span class="s1">&#39;Robustness analysis of Rubis best choice method&#39;</span><span class="p">))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;subTitle&gt;Method data&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;Results of Condorcet robustness analysis in XMCDA format.&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;methodParameters id=&quot;</span><span class="si">%s</span><span class="s1">&quot; name=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Rubis&#39;</span><span class="p">,</span><span class="s1">&#39;Rubis best choice method&#39;</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;subTitle&gt;Method data&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;Rubis best choice recommendation in XMCDA format.&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>        
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;version&gt;</span><span class="si">%s</span><span class="s1">&lt;/version&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;parameters&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">variant</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">methodData</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">][</span><span class="s1">&#39;variant&#39;</span><span class="p">]</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;parameter name=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;variant&#39;</span><span class="p">))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;label&gt;</span><span class="si">%s</span><span class="s1">&lt;/label&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">variant</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/parameter&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">valuationType</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">methodData</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">][</span><span class="s1">&#39;valuationType&#39;</span><span class="p">]</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;parameter name=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;valuationType&#39;</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;label&gt;</span><span class="si">%s</span><span class="s1">&lt;/label&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">valuationType</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/parameter&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>   
        <span class="k">try</span><span class="p">:</span>
            <span class="n">vetoType</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">methodData</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">][</span><span class="s1">&#39;vetoType&#39;</span><span class="p">]</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;parameter name=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;vetoType&#39;</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;label&gt;</span><span class="si">%s</span><span class="s1">&lt;/label&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">vetoType</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/parameter&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>   
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/parameters&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/methodParameters&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="c1"># write potential actions </span>
        <span class="n">origActionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions_orig</span><span class="p">]</span>
        <span class="n">origActionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>            
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternatives mcdaConcept=&quot;alternatives&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;title&gt;</span><span class="si">%s</span><span class="s1">&lt;/title&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;List of Alternatives&#39;</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;subTitle&gt;Potential decision actions.&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1">#fo.write(&#39;&lt;type&gt;%s&lt;/type&gt;\n&#39; % (&#39;alternatives&#39;))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                  
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">origActionsList</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">alternativeName</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">actions_orig</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">alternativeName</span><span class="o">=</span><span class="n">x</span>
            
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternative id=&quot;</span><span class="si">%s</span><span class="s1">&quot; name=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="nb">str</span><span class="p">(</span><span class="n">alternativeName</span><span class="p">))</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions_orig</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">]))</span> 
            <span class="k">except</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;potential decision actions&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;type&gt;real&lt;/type&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;active&gt;true&lt;/active&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternative&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternatives&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        
        <span class="c1"># coca actions if any</span>
        <span class="n">cocaActionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="nb">frozenset</span><span class="p">)]</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Debug: cocaActionsList&#39;</span><span class="p">,</span><span class="n">cocaActionsList</span><span class="p">)</span> 
        <span class="k">if</span> <span class="n">cocaActionsList</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="n">cocaActionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternatives mcdaConcept=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;cocaActions&#39;</span><span class="p">))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;subTitle&gt;</span><span class="si">%s</span><span class="s1">&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Coca digraph actions&#39;</span><span class="p">))</span>
            <span class="c1">#fo.write(&#39;&lt;type&gt;%s&lt;/type&gt;\n&#39; % (&#39;cocaActions&#39;))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;Chordless odd circuits added to the original outranking digraph.&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                  
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">cocaActionsList</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternative id=&quot;</span><span class="si">%s</span><span class="s1">&quot; name=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                         <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]),</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]))</span> <span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">]))</span> <span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;type&gt;fictive&lt;/type&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternative&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternatives&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="c1"># save objectives if there are any</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">objectivesList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span><span class="p">]</span>
            <span class="n">objectivesList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="n">objectives</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;objectives mcdaConcept=&quot;objectives&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;subTitle&gt;Set of decision objectives&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objectivesList</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">objectiveName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">objectiveName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;objective id=&quot;</span><span class="si">%s</span><span class="s1">&quot; name=&quot;</span><span class="si">%s</span><span class="s1">&quot; mcdaConcept=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">),</span><span class="n">objectiveName</span><span class="p">,</span><span class="s1">&#39;objective&#39;</span> <span class="p">)</span> <span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">objective</span><span class="p">[</span><span class="n">obj</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">]))</span> <span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;No comment&#39;</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;version&gt;</span><span class="si">%s</span><span class="s1">&lt;/version&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Rubis&#39;</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;active&gt;true&lt;/active&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;weight&gt;&lt;value&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/value&gt;&lt;/weight&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                                                        <span class="p">(</span><span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span> <span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">objCriteria</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;objective&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">obj</span><span class="p">]</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;objectiveCriteria&gt;</span><span class="si">%s</span><span class="s1">&lt;/objectiveCriteria&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                             <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">objCriteria</span><span class="p">))</span> <span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/objective&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/objectives&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        
        <span class="c1"># save criteria</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criteria mcdaConcept=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;criteria&#39;</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;title&gt;Rubis family of criteria.&lt;/title&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1">#fo.write(&#39;&lt;type&gt;%s&lt;/type&gt;\n&#39; % (&#39;criteria&#39;))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>       
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="n">critg</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">criterionName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">criterionName</span> <span class="o">=</span> <span class="s1">&#39;nameless&#39;</span>
            
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterion id=&quot;</span><span class="si">%s</span><span class="s1">&quot; name=&quot;</span><span class="si">%s</span><span class="s1">&quot; mcdaConcept=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                     <span class="p">(</span><span class="n">g</span><span class="p">,</span><span class="n">criterionName</span><span class="p">,</span><span class="s1">&#39;criterion&#39;</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;comment&#39;</span><span class="p">]))</span> <span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;no comment&#39;</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;version&gt;</span><span class="si">%s</span><span class="s1">&lt;/version&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;performance&#39;</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;active&gt;true&lt;/active&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterionObjective&gt;</span><span class="si">%s</span><span class="s1">&lt;/criterionObjective&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                         <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;objective&#39;</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;IntegerWeights&#39;</span><span class="p">]:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterionValue&gt;&lt;value&gt;&lt;integer&gt;</span><span class="si">%d</span><span class="s1">&lt;/integer&gt;&lt;/value&gt;&lt;/criterionValue&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                             <span class="p">(</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterionValue&gt;&lt;value&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/value&gt;&lt;/criterionValue&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                             <span class="p">(</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span> <span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterionValue&gt;&lt;value&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/value&gt;&lt;/criterionValue&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                         <span class="p">(</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span> <span class="p">)</span>
 
            <span class="c1">#fo.write(&#39;&lt;criterionFunction category=&quot;%s&quot; subCategory=&quot;%s&quot; &gt;\n&#39; % (&#39;Rubis&#39;,&#39;performance&#39;))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;scale&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;quantitative&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;preferenceDirection&gt;</span><span class="si">%s</span><span class="s1">&lt;/preferenceDirection&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                         <span class="p">(</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">])</span> <span class="p">)</span>
                <span class="k">if</span> <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                    <span class="c1">#pdir = -1</span>
                    <span class="n">pdir</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pdir</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;preferenceDirection&gt;</span><span class="si">%s</span><span class="s1">&lt;/preferenceDirection&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;max&#39;</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">pdir</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;minimum&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/minimum&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;maximum&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/maximum&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>

            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/quantitative&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/scale&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;thresholds&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;threshold id=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;ind&#39;</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;slope&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/slope&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                                 <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;intercept&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/intercept&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                                 <span class="p">(</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/threshold&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;threshold id=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;slope&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/slope&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                                 <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;intercept&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/intercept&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                                 <span class="p">(</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                                 <span class="p">(</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/threshold&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;threshold id=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;pref&#39;</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;slope&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/slope&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                                 <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;intercept&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/intercept&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                                 <span class="p">(</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                                 <span class="p">(</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/threshold&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;threshold id=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;slope&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/slope&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                                 <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;intercept&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/intercept&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                                 <span class="p">(</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                                 <span class="p">(</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/threshold&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;threshold id=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;veto&#39;</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;slope&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/slope&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                                 <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;intercept&gt;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&lt;/intercept&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                                 <span class="p">(</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/linear&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                                 <span class="p">(</span><span class="n">critg</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/constant&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/threshold&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/thresholds&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="c1">#fo.write(&#39;&lt;/criterionFunction&gt;\n&#39;)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/criterion&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/criteria&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        
        <span class="c1"># save performance table</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">NA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NA</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;performanceTable mcdaConcept=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="s1">&#39;performanceTable&#39;</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;title&gt;Rubis Performance Table&lt;/title&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>            
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">origActionsList</span><span class="p">)):</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternativePerformances&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternativeID&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">origActionsList</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;&lt;/alternativeID&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;performance&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterionID&gt;&#39;</span><span class="p">)</span>       
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/criterionID&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">val</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">origActionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
                <span class="k">if</span> <span class="n">val</span> <span class="o">==</span> <span class="n">NA</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;&lt;NA&gt;&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">stringNA</span> <span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/NA&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;preferenceDirection&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                                <span class="n">pdir</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">pdir</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">pdir</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">pdir</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>

                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;&lt;real&gt;&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pdir</span><span class="o">*</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">origActionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span> <span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/real&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/performance&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternativePerformances&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/performanceTable&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>        

        <span class="c1"># criteria ordinal correlation analysis</span>
        <span class="k">if</span> <span class="n">category</span> <span class="o">!=</span> <span class="s1">&#39;Robust Rubis&#39;</span><span class="p">:</span>
            <span class="n">corr</span><span class="p">,</span><span class="n">d</span> <span class="o">=</span> <span class="n">selfOrig</span><span class="o">.</span><span class="n">computeCriteriaCorrelations</span><span class="p">()</span>
            <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
            <span class="n">cn</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">)</span>
            <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criteriaComparisons mcdaConcept=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;correlationTable&#39;</span><span class="p">))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;title&gt;</span><span class="si">%s</span><span class="s1">&lt;/title&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Ordinal Criteria Correlation Index&#39;</span><span class="p">))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                     <span class="p">(</span><span class="s1">&#39;Generalisation of Kendall&amp;apos;s &amp;#964; to nested homogeneous semiorders.&#39;</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comparisonType&gt;</span><span class="si">%s</span><span class="s1">&lt;/comparisonType&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;correlation&#39;</span><span class="p">))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;pairs&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">ci</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cn</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">cj</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cn</span><span class="p">):</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;pair&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>        
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;initial&gt;&lt;criterionID&gt;&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">ci</span><span class="p">]))</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/criterionID&gt;&lt;/initial&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;terminal&gt;&lt;criterionID&gt;&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">cj</span><span class="p">]))</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/criterionID&gt;&lt;/terminal&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                                             
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;&lt;real&gt;</span><span class="si">%2.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                             <span class="p">(</span><span class="n">corr</span><span class="p">[</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">ci</span><span class="p">]][</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">cj</span><span class="p">]])</span> <span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/real&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/pair&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>               
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/pairs&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/criteriaComparisons&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        
        <span class="c1"># outranking digraph</span>
        <span class="k">if</span> <span class="n">category</span> <span class="o">!=</span> <span class="s1">&#39;Robust Rubis&#39;</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternativesComparisons name=&quot;</span><span class="si">%s</span><span class="s1">&quot; mcdaConcept=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                     <span class="p">(</span><span class="n">relationName</span><span class="p">,</span><span class="s1">&#39;outrankingDigraph&#39;</span><span class="p">))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;title&gt;</span><span class="si">%s</span><span class="s1">&lt;/title&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Bipolar-valued Outranking Relation&#39;</span><span class="p">))</span>
            <span class="c1">#fo.write(&#39;&lt;name&gt;%s&lt;/name&gt;\n&#39; % (relationName) )</span>
            <span class="c1">#fo.write(&#39;&lt;type&gt;%s&lt;/type&gt;\n&#39; % (&#39;outrankingDigraph&#39;))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1"> Relation&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">category</span><span class="p">,</span><span class="n">subcategory</span><span class="p">)</span> <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternativesComparisons name=&quot;</span><span class="si">%s</span><span class="s1">&quot; mcdaConcept=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                     <span class="p">(</span><span class="n">relationName</span><span class="p">,</span><span class="s1">&#39;CondorcetRobustness&#39;</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;title&gt;</span><span class="si">%s</span><span class="s1">&lt;/title&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Valued Outranking Relation&#39;</span><span class="p">))</span>
            <span class="c1">#fo.write(&#39;&lt;name&gt;%s&lt;/name&gt;\n&#39; % (relationName) )</span>
            <span class="c1">#fo.write(&#39;&lt;type&gt;%s&lt;/type&gt;\n&#39; % (&#39;outrankingDigraph&#39;))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;with Condorcet Robustness denotation&#39;</span><span class="p">)</span> <span class="p">)</span>
            
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                  
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;valuation&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;subTitle&gt;</span><span class="si">%s</span><span class="s1">&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Valuation Domain&#39;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">category</span> <span class="o">!=</span> <span class="s1">&#39;Robust Rubis&#39;</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Significance degrees&#39;</span><span class="p">)</span> <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Condorcet robustness degrees&#39;</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;valuationType&gt;</span><span class="si">%s</span><span class="s1">&lt;/valuationType&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">graphValuationType</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;quantitative&gt;&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="s1">&#39;Robust Rubis&#39;</span><span class="p">:</span>        
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;minimum&gt;&lt;real&gt;</span><span class="si">%d</span><span class="s1">&lt;/real&gt;&lt;/minimum&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Min</span><span class="p">))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;maximum&gt;&lt;real&gt;</span><span class="si">%d</span><span class="s1">&lt;/real&gt;&lt;/maximum&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Max</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;minimum&gt;&lt;real&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/real&gt;&lt;/minimum&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Min</span><span class="p">))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;maximum&gt;&lt;real&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/real&gt;&lt;/maximum&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Max</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/quantitative&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/valuation&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;pairs&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;subTitle&gt;</span><span class="si">%s</span><span class="s1">&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Valued Adjacency Table&#39;</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">category</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span>
            <span class="n">subcategory</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subcategory</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="s1">&#39;Robust Rubis&#39;</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;Pairwise outranking significance degrees in the range: </span><span class="si">%d</span><span class="s1"> to </span><span class="si">%d</span><span class="s1"> with Condorcet robustness degrees shown in brackets. &lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                     <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cardinalValuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">cardinalValuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">])</span> <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;Pairwise outranking significance degrees in the range: </span><span class="si">%2.2f</span><span class="s1"> to </span><span class="si">%2.2f</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Min</span><span class="p">,</span><span class="n">Max</span><span class="p">)</span> <span class="p">)</span>
            
            
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                  
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="s1">&#39;Robust Rubis&#39;</span><span class="p">:</span>
            <span class="n">cardinalRelation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cardinalRelation</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">origActionsList</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">origActionsList</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;pair&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>        
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;initial&gt;&lt;alternativeID&gt;&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternativeID&gt;&lt;/initial&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;terminal&gt;&lt;alternativeID&gt;&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternativeID&gt;&lt;/terminal&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">methodData</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">][</span><span class="s1">&#39;valuationType&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;integer&#39;</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;&lt;integer&gt;</span><span class="si">%d</span><span class="s1">&lt;/integer&gt;&lt;/value&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span> <span class="p">)</span>
                    <span class="k">elif</span> <span class="n">category</span> <span class="o">==</span> <span class="s1">&#39;Robust Rubis&#39;</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;values&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;outranking&quot;&gt;&lt;integer&gt;</span><span class="si">%d</span><span class="s1">&lt;/integer&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                                     <span class="p">(</span><span class="n">cardinalRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span> <span class="p">)</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;robustness&quot;&gt;&lt;integer&gt;</span><span class="si">%d</span><span class="s1">&lt;/integer&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                                     <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span> <span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;outranking&quot;&gt;&lt;integer&gt;</span><span class="si">%d</span><span class="s1">&lt;/integer&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="p">)</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;robustness&quot;&gt;&lt;integer&gt;</span><span class="si">%d</span><span class="s1">&lt;/integer&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="p">)</span>                            
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/values&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;&lt;real&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/real&gt;&lt;/value&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span> <span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="s1">&#39;Robust Rubis&#39;</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;values&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;outranking&quot;&gt;&lt;real&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/real&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">cardinalRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span> <span class="p">)</span>
                        <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">:</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;outranking&quot;&gt;&lt;real&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/real&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="p">)</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;robustness&quot;&gt;&lt;integer&gt;</span><span class="si">%d</span><span class="s1">&lt;/integer&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;outranking&quot;&gt;&lt;real&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/real&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                                     <span class="p">(</span><span class="n">cardinalRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span> <span class="p">)</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;robustness&quot;&gt;&lt;integer&gt;</span><span class="si">%d</span><span class="s1">&lt;/integer&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                                     <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]))</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/values&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span> 
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;&lt;real&gt;</span><span class="si">%2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/real&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/pair&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/pairs&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternativesComparisons&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>     

        <span class="c1"># vetos if any</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">vetos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vetos</span>
            <span class="k">if</span> <span class="n">vetos</span> <span class="o">!=</span> <span class="p">[]:</span>
                <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternativesComparisons mcdaConcept=&quot;Vetoes&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;title&gt;</span><span class="si">%s</span><span class="s1">&lt;/title&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Vetoes&#39;</span><span class="p">))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                  
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;pairs&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;subTitle&gt;</span><span class="si">%s</span><span class="s1">&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Effective and potential veto situations&#39;</span><span class="p">))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                  
                <span class="k">for</span> <span class="n">veto</span> <span class="ow">in</span> <span class="n">vetos</span><span class="p">:</span>
                    <span class="n">arc</span> <span class="o">=</span> <span class="n">veto</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;pair&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;concordance degree:</span><span class="si">%.2f</span><span class="s1">&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">arc</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;initial&gt;&lt;alternativeID&gt;&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">arc</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternativeID&gt;&lt;/initial&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;terminal&gt;&lt;alternativeID&gt;&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternativeID&gt;&lt;/terminal&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                                             
                    <span class="n">situations</span> <span class="o">=</span> <span class="n">veto</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">situations</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;values id=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span> <span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;&#39;</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">arc</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;effective veto&#39;</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;effective weak veto&#39;</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="n">arc</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="n">Med</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;effective veto&#39;</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;potential weak veto&#39;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;potential veto&#39;</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;potential weak veto&#39;</span><span class="p">)</span>                   
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;performanceDifference&#39;</span><span class="p">))</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;vetoCharacteristic&#39;</span><span class="p">))</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;real&gt;</span><span class="si">%.2f</span><span class="s1">&lt;/real&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/values&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/pair&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/pairs&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternativesComparisons&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span> 
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
   
        <span class="c1"># good choices</span>
        
        <span class="n">amplitude</span> <span class="o">=</span> <span class="p">(</span><span class="n">Max</span> <span class="o">-</span> <span class="n">Min</span><span class="p">)</span> <span class="o">/</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternativesSets mcdaConcept=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;goodChoices&#39;</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;title&gt;</span><span class="si">%s</span><span class="s1">&lt;/title&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Rubis Choice Recommendation&#39;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="s1">&#39;Robust Rubis&#39;</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;In decreasing order of determinateness.&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;In decreasing order of determinateness. All values expressed in %. &lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">nb</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="n">maxDet</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">goodChoices</span><span class="p">:</span>
            <span class="n">maxDet</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">maxDet</span><span class="p">,</span><span class="n">ch</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">goodChoices</span><span class="p">:</span>
            <span class="c1">#if ch[3] &gt; -ch[4]:</span>
            <span class="n">nb</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternativesSet id=&quot;good_</span><span class="si">%d</span><span class="s1">&quot; mcdaConcept=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nb</span><span class="p">,</span><span class="s1">&#39;goodChoice&#39;</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="s1">&#39;Robust Rubis&#39;</span><span class="p">:</span>
                <span class="n">determ</span> <span class="o">=</span> <span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;6&#39;</span><span class="p">))</span> <span class="o">-</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;3&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">determ</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">):</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;Robust good choice&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;Potential good choice&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">maxDet</span> <span class="o">==</span> <span class="n">ch</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;Best choice&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;Potential good choice&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                    
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;element&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternativeID&gt;&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="nb">frozenset</span><span class="p">):</span>
                    <span class="c1">#print(self.actions[x])</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternativeID&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/element&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="s1">&#39;Robust Rubis&#39;</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;values&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">independent</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;choiceSet independence&quot;&gt;&lt;integer&gt;</span><span class="si">%d</span><span class="s1">&lt;/integer&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">independent</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">outranking</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;outranking&quot;&gt;&lt;integer&gt;</span><span class="si">%d</span><span class="s1">&lt;/integer&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">outranking</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">outranked</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;outranked&quot;&gt;&lt;integer&gt;</span><span class="si">%d</span><span class="s1">&lt;/integer&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">outranked</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">determ</span> <span class="o">=</span> <span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;6&#39;</span><span class="p">))</span><span class="o">-</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;3&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;determinateness&quot;&gt;&lt;real&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/real&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">determ</span><span class="p">)</span>  <span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/values&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;values&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">independent</span> <span class="o">=</span> <span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">Min</span><span class="p">)</span> <span class="o">/</span> <span class="n">amplitude</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;choiceSet independence&quot;&gt;&lt;real&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/real&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">independent</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">outranking</span> <span class="o">=</span> <span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">Min</span><span class="p">)</span> <span class="o">/</span> <span class="n">amplitude</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;outranking&quot;&gt;&lt;real&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/real&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">outranking</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">outranked</span> <span class="o">=</span> <span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">-</span> <span class="n">Min</span><span class="p">)</span> <span class="o">/</span> <span class="n">amplitude</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;outranked&quot;&gt;&lt;real&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/real&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">outranked</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">determ</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;determinateness&quot;&gt;&lt;real&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/real&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">determ</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/values&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                    
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternativesSet&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>             
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternativesSets&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="c1"># bad choices if any</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">badChoices</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="c1">#amplitude = float(Max - Min)/float(100.0)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternativesSets mcdaConcept=&quot;badChoices&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;subTitle&gt;</span><span class="si">%s</span><span class="s1">&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Potentially Bad Choices&#39;</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">category</span> <span class="o">!=</span> <span class="s1">&#39;Robust Rubis&#39;</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;All values expressed in %.&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">nb</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">badChoices</span><span class="p">:</span>
                <span class="c1">#if -ch[3] &gt; ch[4]: </span>
                <span class="n">nb</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternativesSet id=&quot;bad_</span><span class="si">%d</span><span class="s1">&quot; mcdaConcept=&quot;badChoice&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nb</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="s1">&#39;Robust Rubis&#39;</span><span class="p">:</span>
                    <span class="n">determ</span> <span class="o">=</span> <span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;6&#39;</span><span class="p">))</span><span class="o">-</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;3&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">determ</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">):</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;Robust bad choice&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;Potential bad choice&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">ch</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">ch</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;Bad choice&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;Ambiguous choice&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;element&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternativeID&gt;&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="nb">frozenset</span><span class="p">):</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternativeID&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/element&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="s1">&#39;Robust Rubis&#39;</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;values&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="n">independent</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;choiceSet independence&quot;&gt;&lt;integer&gt;</span><span class="si">%d</span><span class="s1">&lt;/integer&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                             <span class="p">(</span><span class="n">independent</span><span class="p">)</span> <span class="p">)</span>
                    <span class="n">outranking</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;outranking&quot;&gt;&lt;integer&gt;</span><span class="si">%d</span><span class="s1">&lt;/integer&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                             <span class="p">(</span><span class="n">outranking</span><span class="p">)</span> <span class="p">)</span>
                    <span class="n">outranked</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;outranked&quot;&gt;&lt;integer&gt;</span><span class="si">%d</span><span class="s1">&lt;/integer&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">outranked</span><span class="p">)</span> <span class="p">)</span>
                    <span class="n">determ</span> <span class="o">=</span> <span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;6&#39;</span><span class="p">))</span> <span class="o">-</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;3&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;determinateness&quot;&gt;&lt;real&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/real&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">determ</span><span class="p">)</span> <span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/values&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;values&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="n">independent</span> <span class="o">=</span> <span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">Min</span><span class="p">)</span><span class="o">/</span><span class="n">amplitude</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;choiceSet independence&quot;&gt;&lt;real&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/real&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                             <span class="p">(</span><span class="n">independent</span><span class="p">)</span> <span class="p">)</span>
                    <span class="n">outranking</span> <span class="o">=</span> <span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">Min</span><span class="p">)</span><span class="o">/</span><span class="n">amplitude</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;outranking&quot;&gt;&lt;real&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/real&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">outranking</span><span class="p">)</span> <span class="p">)</span>
                    <span class="n">outranked</span> <span class="o">=</span> <span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">-</span> <span class="n">Min</span><span class="p">)</span><span class="o">/</span><span class="n">amplitude</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;outranked&quot;&gt;&lt;real&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/real&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">outranked</span><span class="p">)</span> <span class="p">)</span>
                    <span class="n">determ</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value name=&quot;determinateness&quot;&gt;&lt;real&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/real&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">determ</span><span class="p">)</span> <span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/values&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                    
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternativesSet&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>             
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternativesSets&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="c1"># end of XMCDA 2.0 file</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/xmcda:XMCDA&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;File: &#39;</span> <span class="o">+</span> <span class="n">nameExt</span> <span class="o">+</span> <span class="s1">&#39; saved !&#39;</span><span class="p">)</span>

        <span class="c1"># restore self to its original content</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span> <span class="o">=</span> <span class="n">selfOrig</span><span class="o">.</span><span class="vm">__dict__</span></div>
</div>

        

<span class="k">class</span> <span class="nc">_Electre3OutrankingDigraph</span><span class="p">(</span><span class="n">OutrankingDigraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialization of the standard OutrankingDigraph class for generating classical Electre III outranking digraphs (with vetoes and no counter-vetoes).</span>

<span class="sd">    Parameters:</span>
<span class="sd">        | performanceTableau (fileName of valid py code)</span>
<span class="sd">        | optional, coalition (sublist of criteria)</span>


<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">argPerfTab</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">coalition</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">copy</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">,</span> <span class="p">(</span><span class="n">PerformanceTableau</span><span class="p">,</span><span class="n">RandomPerformanceTableau</span><span class="p">)):</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">argPerfTab</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">argPerfTab</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">perfTab</span> <span class="o">=</span> <span class="n">RandomPerformanceTableau</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">perfTab</span> <span class="o">=</span> <span class="n">PerformanceTableau</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;rel_&#39;</span> <span class="o">+</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">Min</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="n">Med</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;50&#39;</span><span class="p">)</span>
        <span class="n">Max</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Min</span><span class="p">,</span><span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Med</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Max</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">coalition</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">criteria</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">criteria</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">coalition</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructRelation</span><span class="p">(</span><span class="n">criteria</span><span class="p">,</span><span class="n">perfTab</span><span class="o">.</span><span class="n">evaluation</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="n">hasNoVeto</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">criteria</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">evaluation</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">methodData</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">valuationType</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">parameter</span><span class="p">[</span><span class="s1">&#39;valuationType&#39;</span><span class="p">]</span>
            <span class="n">variant</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">parameter</span><span class="p">[</span><span class="s1">&#39;variant&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">valuationType</span> <span class="o">=</span> <span class="s1">&#39;normalized&#39;</span>
            <span class="n">variant</span> <span class="o">=</span> <span class="s1">&#39;electre3&#39;</span>
        <span class="n">methodData</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;valuationType&#39;</span><span class="p">:</span><span class="n">valuationType</span><span class="p">,</span><span class="s1">&#39;variant&#39;</span><span class="p">:</span><span class="n">variant</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">methodData</span> <span class="o">=</span> <span class="n">methodData</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        

    <span class="k">def</span> <span class="nf">showVetos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">cutLevel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">realVetosOnly</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        prints all veto situations observed in the OutrankingDigraph instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----  Veto situations ---&#39;</span><span class="p">)</span>
        <span class="n">nv</span><span class="p">,</span> <span class="n">realveto</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeVetosShort</span><span class="p">()</span>
        <span class="n">vetos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vetos</span>
        <span class="n">vetos</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">realVetosOnly</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
            <span class="n">cutveto</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">if</span> <span class="n">cutLevel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">cutLevel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">cutLevel</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">cutLevel</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">cutLevel</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error! min = </span><span class="si">%.3f</span><span class="s2">, max = </span><span class="si">%.3f</span><span class="s2">&quot;</span> <span class="o">%</span>\
                          <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]))</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Real vetos at cut level: </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">cutLevel</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nv</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">cutLevel</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;self.vetos[i][0][2]=&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>
                        <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;: relation: &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;, criteria: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
                    <span class="n">cutveto</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="n">nv</span><span class="p">,</span><span class="n">realveto</span><span class="p">,</span><span class="n">cutveto</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;number of potential vetos: </span><span class="si">%d</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nv</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nv</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;: relation: &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;, criteria: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;number of real vetos: </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">realveto</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">nv</span><span class="p">,</span><span class="n">realveto</span>

    <span class="k">def</span> <span class="nf">computeVetos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">cutLevel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">realVetosOnly</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        prints all veto situations observed in the OutrankingDigraph instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">nv</span><span class="p">,</span> <span class="n">realveto</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeVetosShort</span><span class="p">()</span>
        <span class="n">vetos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vetos</span>
        <span class="n">vetos</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">realVetosOnly</span><span class="p">:</span>
            <span class="n">cutveto</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">if</span> <span class="n">cutLevel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">cutLevel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">cutLevel</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">cutLevel</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">cutLevel</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]:</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nv</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">vetos</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">cutLevel</span><span class="p">:</span>
                    <span class="n">cutveto</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="n">nv</span><span class="p">,</span><span class="n">realveto</span><span class="p">,</span><span class="n">cutveto</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">nv</span><span class="p">,</span><span class="n">realveto</span>


    <span class="k">def</span> <span class="nf">_constructRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">criteria</span><span class="p">,</span><span class="n">evaluation</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters: PerfTab.criteria, PerfTab.evaluation.</span>
<span class="sd">        Renders the biploar valued outranking relation from the data</span>
<span class="sd">        of a given performance tableau instantiation PerfTab.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">NA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NA</span>
        <span class="n">totalweight</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
            <span class="n">totalweight</span> <span class="o">=</span> <span class="n">totalweight</span> <span class="o">+</span> <span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">vetos</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">nc</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">criteria</span><span class="p">)</span>
                    <span class="n">counter</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                    <span class="n">veto</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span> <span class="ow">and</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span><span class="p">:</span>		
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">ax</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">ay</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="n">h</span> <span class="o">=</span> <span class="n">ax</span> <span class="o">+</span> <span class="n">ay</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">h</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">ax</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">ay</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="n">h</span> <span class="o">=</span> <span class="n">ax</span> <span class="o">+</span> <span class="n">ay</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">h</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                                    <span class="n">h</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                            <span class="k">try</span><span class="p">:</span>    
                                <span class="n">bx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">by</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="n">p</span> <span class="o">=</span> <span class="n">bx</span> <span class="o">+</span> <span class="n">by</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">try</span><span class="p">:</span>   
                                <span class="n">vx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">vy</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasNoVeto</span><span class="p">:</span>
                                    <span class="n">v</span> <span class="o">=</span> <span class="kc">None</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">v</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">v</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                                <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
                            <span class="n">lc0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localConcordance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">h</span><span class="p">,</span><span class="n">h</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
                            <span class="n">counter</span> <span class="o">=</span> <span class="n">counter</span> <span class="o">+</span> <span class="p">(</span><span class="n">lc0</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]))</span>
                            <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_localVeto</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">v</span><span class="p">),</span><span class="n">d</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">counter</span> <span class="o">=</span> <span class="n">counter</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.5&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span>
                            <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">),</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>     
                    <span class="n">concordindex</span> <span class="o">=</span> <span class="n">counter</span><span class="o">/</span><span class="n">totalweight</span>                    
                    <span class="n">discordindex</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                    <span class="n">abvetos</span><span class="o">=</span><span class="p">[]</span>
                    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">concordindex</span><span class="p">:</span>
                            <span class="n">discordindex</span> <span class="o">=</span> <span class="n">discordindex</span> <span class="o">*</span> <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span> <span class="o">-</span> <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span> <span class="o">-</span> <span class="n">concordindex</span><span class="p">)</span>
                            <span class="n">abvetos</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">c</span><span class="p">,</span><span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">]))</span>
                    <span class="k">if</span> <span class="n">abvetos</span> <span class="o">!=</span> <span class="p">[]:</span>
                        <span class="n">vetos</span><span class="o">.</span><span class="n">append</span><span class="p">(([</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">concordindex</span><span class="o">*</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">),</span><span class="n">discordindex</span><span class="o">*</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">)],</span><span class="n">abvetos</span><span class="p">))</span>    
                    <span class="n">outrankindex</span> <span class="o">=</span> <span class="n">concordindex</span> <span class="o">*</span> <span class="n">discordindex</span>         
                    <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">outrankindex</span><span class="o">*</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vetos</span> <span class="o">=</span> <span class="n">vetos</span>
        <span class="k">return</span> <span class="n">relation</span>

    <span class="k">def</span> <span class="nf">computeCriterionRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        compute the outranking characteristic for actions x and y</span>
<span class="sd">        on criterion c.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">NA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NA</span>
        <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;1.0&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>

            <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span> <span class="ow">and</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span><span class="p">:</span>		
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">indx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">indy</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                        <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span> <span class="n">indy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span> <span class="n">indy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">ind</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.0&quot;</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">wpx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">wpy</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                        <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                    <span class="n">ind</span> <span class="o">=</span> <span class="n">wp</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">px</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">py</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                        <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span> 
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                    <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localConcordance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.5&quot;</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">_localConcordance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters: d := diff observed, ind := indifference threshold,</span>
<span class="sd">        wp := weak prefrence threshold,  p := prefrence threshold, </span>
<span class="sd">        Renders the concordance index per criteria.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Debug</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;d,ind,wp,p&#39;</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span>   <span class="n">d</span> <span class="o">&lt;</span> <span class="o">-</span><span class="n">p</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">ind</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="o">-</span><span class="n">ind</span><span class="p">:</span>
                    <span class="k">return</span> <span class="p">(</span><span class="n">p</span> <span class="o">+</span> <span class="n">d</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">p</span> <span class="o">-</span> <span class="n">ind</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ind</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="o">-</span><span class="n">ind</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
                
            

    <span class="k">def</span> <span class="nf">_localVeto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters:</span>
<span class="sd">            d := diff observed, v := veto threshold.</span>

<span class="sd">        Renders the local veto state</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span>  <span class="n">d</span> <span class="o">&gt;</span> <span class="o">-</span><span class="n">p</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="o">-</span><span class="n">v</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">))</span><span class="o">*</span><span class="p">(</span><span class="n">d</span><span class="o">+</span><span class="n">p</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">v</span><span class="o">+</span><span class="n">p</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="o">-</span><span class="n">v</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>

<span class="c1"># multiprocessing thread for BipolarOutrankingDigraph class</span>
<span class="k">class</span> <span class="nc">_myBODGThread</span><span class="p">(</span><span class="n">Process</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span><span class="n">args</span><span class="p">):</span>
        <span class="n">Process</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">threadID</span> <span class="o">=</span> <span class="n">target</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">digraph</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">InitialSplit</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">workingDirectory</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">splitActions</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hasNoVeto</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hasBipolarVeto</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hasSymmetricThresholds</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Debug</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>
        <span class="kn">from</span> <span class="nn">pickle</span> <span class="kn">import</span> <span class="n">Pickler</span><span class="p">,</span> <span class="n">dumps</span><span class="p">,</span> <span class="n">loads</span>
        <span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">chdir</span>
        <span class="n">chdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workingDirectory</span><span class="p">)</span>
        <span class="n">Debug</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Debug</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Starting working in </span><span class="si">%s</span><span class="s2"> on thread </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workingDirectory</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">threadId</span><span class="p">)))</span>
<span class="c1">##                    fi = open(&#39;dumpSelf.py&#39;,&#39;rb&#39;)</span>
<span class="c1">##                    digraph = loads(fi.read())</span>
<span class="c1">##                    fi.close()</span>
        <span class="n">digraph</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">digraph</span>
        <span class="n">splitActions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">splitActions</span>
<span class="c1">##                    fiName = &#39;splitActions-&#39;+str(self.threadID)+&#39;.py&#39;</span>
<span class="c1">##                    fi = open(fiName,&#39;rb&#39;)</span>
<span class="c1">##                    splitActions = loads(fi.read())</span>
<span class="c1">##                    fi.close()</span>
        <span class="c1"># compute partiel relation</span>
        <span class="c1">#if (not self.hasBipolarVeto) or WithConcordanceRelation or WithVetoCounts:</span>
        <span class="c1">#    constructRelation = BipolarOutrankingDigraph._constructRelation</span>
        <span class="c1">#else:</span>
        <span class="n">constructRelation</span> <span class="o">=</span> <span class="n">BipolarOutrankingDigraph</span><span class="o">.</span><span class="n">_constructRelationSimple</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">InitialSplit</span><span class="p">:</span>
            <span class="c1">#splitRelation = BipolarOutrankingDigraph._constructRelation(</span>
            <span class="n">splitRelation</span> <span class="o">=</span> <span class="n">constructRelation</span><span class="p">(</span>
                                <span class="n">digraph</span><span class="p">,</span><span class="n">digraph</span><span class="o">.</span><span class="n">criteria</span><span class="p">,</span>\
                                <span class="n">digraph</span><span class="o">.</span><span class="n">evaluation</span><span class="p">,</span>
                                <span class="n">initial</span><span class="o">=</span><span class="n">splitActions</span><span class="p">,</span>
                                <span class="c1">#terminal=terminal,</span>
                                <span class="n">hasNoVeto</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">hasNoVeto</span><span class="p">,</span>
                                <span class="n">hasBipolarVeto</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">hasBipolarVeto</span><span class="p">,</span>
                                <span class="n">WithConcordanceRelation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                <span class="n">WithVetoCounts</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                <span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">hasSymmetricThresholds</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#splitRelation = BipolarOutrankingDigraph._constructRelation(</span>
            <span class="n">splitRelation</span> <span class="o">=</span> <span class="n">constructRelation</span><span class="p">(</span>
                                <span class="n">digraph</span><span class="p">,</span><span class="n">digraph</span><span class="o">.</span><span class="n">criteria</span><span class="p">,</span>\
                                <span class="n">digraph</span><span class="o">.</span><span class="n">evaluation</span><span class="p">,</span>
                                <span class="c1">#initial=initial,</span>
                                <span class="n">terminal</span><span class="o">=</span><span class="n">splitActions</span><span class="p">,</span>
                                <span class="n">hasNoVeto</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">hasNoVeto</span><span class="p">,</span>
                                <span class="n">hasBipolarVeto</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">hasBipolarVeto</span><span class="p">,</span>
                                <span class="n">WithConcordanceRelation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                <span class="n">WithVetoCounts</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                <span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">hasSymmetricThresholds</span><span class="p">)</span>
        <span class="c1"># store partial relation</span>
        <span class="n">foName</span> <span class="o">=</span> <span class="s1">&#39;splitRelation-&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">threadID</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.py&#39;</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">foName</span><span class="p">,</span><span class="s1">&#39;wb&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">dumps</span><span class="p">(</span><span class="n">splitRelation</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="c1"># .......</span>


<div class="viewcode-block" id="BipolarOutrankingDigraph">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.BipolarOutrankingDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">BipolarOutrankingDigraph</span><span class="p">(</span><span class="n">OutrankingDigraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialization of the abstract OutrankingDigraph root class for generating</span>
<span class="sd">    bipolarly-valued outranking digraphs.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        * argPerfTab: instance of PerformanceTableau class.</span>
<span class="sd">          If a file name string is given, the performance tableau will directly be loaded first.</span>
<span class="sd">        * coalition: subset of criteria to be used for contructing the outranking digraph.</span>
<span class="sd">        * hasNoVeto: veto desactivation flag (False by default).</span>
<span class="sd">        * hasBipolarVeto: bipolar versus electre veto activation (true by default).</span>
<span class="sd">        * Normalized: the valuation domain is set by default to [-100,+100] (bipolar percents).</span>
<span class="sd">          If True, the valuation domain is recoded to [-1.0,+1.0].</span>
<span class="sd">        * WithConcordanceRelation: True by default when not threading.</span>
<span class="sd">          The self.concordanceRelation contains the significance majority margin of the &quot;at least as good relation as&quot;</span>
<span class="sd">          without the large performance difference polarization.</span>
<span class="sd">        * WithVetoCounts: True by default when not threading. All vetos and countervetos</span>
<span class="sd">          are stored in self.vetos and self.negativeVetos slots,</span>
<span class="sd">          as well the counts of large performance differences in self.largePerformanceDifferencesCount slot.</span>
<span class="sd">        * Threading: False by default. Allows to profit from SMP machines via the Python multiprocessing module.</span>
<span class="sd">        * startMethod: &#39;spawn&#39; (default), &#39;forkserver&#39; or &#39;fork&#39; (not safe against dead locks)</span>
<span class="sd">        * nbrCores: controls the maximal number of cores that will be used in the multiprocessing phases.</span>
<span class="sd">          If None is given, the os.cpu_count method is used in order to determine the number of available CPU cores on the SMP machine.</span>

<span class="sd">   .. warning:: The multiprocessing :py:class:`~outrankingDigraphs.BipolarOutrankingDigraph` constructor uses</span>
<span class="sd">        by default the &#39;spawn&#39; start-mathod for threading.</span>
<span class="sd">        When not using the &#39;fork&#39; start method in a python script file,</span>
<span class="sd">        the main entry code must hence be protected with the __name__==&#39;__main__&#39; test</span>
<span class="sd">        in order to avoid a recursive re-execution of the whole script.</span>
<span class="sd">        (see the documentation of the :py:mod:`multiprocessing` module.</span>

<span class="sd">        If Threading is *True*, *WithConcordanceRelation* and *WithVetoCounts* flags</span>
<span class="sd">        are automatically set both to False.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Default presentation method for BipolarOutrankingDigraph instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">reprString</span> <span class="o">=</span> <span class="s1">&#39;*------- Object instance description ------*</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Instance class       : </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Instance name        : </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Actions              : </span><span class="si">%d</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Criteria             : </span><span class="si">%d</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Size                 : </span><span class="si">%d</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeSize</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">oppDeg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeOppositeness</span><span class="p">(</span><span class="n">InPercents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Oppositeness (</span><span class="si">%%</span><span class="s1">)    : </span><span class="si">%.2f</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">oppDeg</span><span class="p">[</span><span class="s1">&#39;oppositeness&#39;</span><span class="p">])</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">distribution</span> <span class="o">==</span> <span class="s1">&#39;beta&#39;</span><span class="p">:</span>
                <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Uncertainty model  : </span><span class="si">%s</span><span class="s1">(a=</span><span class="si">%.1f</span><span class="s1">,b=</span><span class="si">%.1f</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                    <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">distribution</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">betaParameter</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">betaParameter</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Uncertainty model    : </span><span class="si">%s</span><span class="s1">(a=</span><span class="si">%s</span><span class="s1">,b=</span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                             <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">distribution</span><span class="p">,</span><span class="s1">&#39;0&#39;</span><span class="p">,</span><span class="s1">&#39;2w&#39;</span><span class="p">)</span> 
            <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Likelihood domain    : [-1.0;+1.0]</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Confidence level     : </span><span class="si">%.2f</span><span class="s1"> (</span><span class="si">%.1f%%</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                         <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bipolarConfidenceLevel</span><span class="p">,</span>\
                         <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bipolarConfidenceLevel</span><span class="o">+</span><span class="mf">1.0</span><span class="p">)</span><span class="o">/</span><span class="mf">2.0</span><span class="o">*</span><span class="mf">100.0</span><span class="p">)</span>
            <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Confident majority   : </span><span class="si">%.2f</span><span class="s1"> (</span><span class="si">%.1f%%</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">confidenceCutLevel</span><span class="p">,</span>\
                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">confidenceCutLevel</span><span class="o">+</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">))</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2.0&#39;</span><span class="p">)</span><span class="o">*</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">))</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Determinateness (</span><span class="si">%%</span><span class="s1">)  : </span><span class="si">%.2f</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                      <span class="bp">self</span><span class="o">.</span><span class="n">computeDeterminateness</span><span class="p">(</span><span class="n">InPercents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Valuation domain     : [</span><span class="si">%.2f</span><span class="s1">;</span><span class="si">%.2f</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span> \
            <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">])</span>
        <span class="c1">#reprString += &#39;Valuation domain : %s\n&#39; % str(self.valuationdomain)</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Attributes           : </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">val1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runTimes</span><span class="p">[</span><span class="s1">&#39;totalTime&#39;</span><span class="p">]</span>
        <span class="n">val2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runTimes</span><span class="p">[</span><span class="s1">&#39;dataInput&#39;</span><span class="p">]</span>
        <span class="n">val3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runTimes</span><span class="p">[</span><span class="s1">&#39;computeRelation&#39;</span><span class="p">]</span>
        <span class="n">val4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runTimes</span><span class="p">[</span><span class="s1">&#39;gammaSets&#39;</span><span class="p">]</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;----  Constructor run times (in sec.) ----</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nbrThreads</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Threads          : </span><span class="si">%d</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">nbrThreads</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Threads          : </span><span class="si">%d</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="mi">0</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Start method     : </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">startMethod</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Start method     : </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="kc">None</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Total time       : </span><span class="si">%.5f</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">val1</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Data input       : </span><span class="si">%.5f</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">val2</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Compute relation : </span><span class="si">%.5f</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">val3</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Gamma sets       : </span><span class="si">%.5f</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">val4</span>
        <span class="k">return</span> <span class="n">reprString</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">argPerfTab</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">objectivesSubset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">criteriaSubset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">coalition</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">actionsSubset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">hasNoVeto</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">hasBipolarVeto</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">Normalized</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">ndigits</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                 <span class="n">CopyPerfTab</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">BigData</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">startMethod</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">tempDir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">WithConcordanceRelation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">WithVetoCounts</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">nbrCores</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">time</span>
        <span class="c1">#from digraphsTools import omax, omin</span>

        <span class="c1"># set initial time stamp</span>
        <span class="n">tt</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>

        <span class="c1"># ----  performance tableau data input </span>
        <span class="k">if</span> <span class="n">argPerfTab</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Performance tableau required !&#39;</span><span class="p">)</span>
            <span class="c1">#perfTab = RandomPerformanceTableau(commonThresholds = [(10.0,0.0),(20.0,0.0),(80.0,0.0),(101.0,0.0)])</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">,(</span><span class="nb">str</span><span class="p">)):</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">PerformanceTableau</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">argPerfTab</span>

        <span class="c1"># set Threading parameters</span>
        <span class="k">if</span> <span class="n">Threading</span><span class="p">:</span>
            <span class="n">WithConcordanceRelation</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">WithVetoCounts</span> <span class="o">=</span> <span class="kc">False</span>

            
        <span class="c1"># transfering the performance tableau data to self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;rel_&#39;</span> <span class="o">+</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">name</span>
        <span class="c1"># actions</span>
        <span class="k">if</span> <span class="n">actionsSubset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">,</span><span class="nb">list</span><span class="p">):</span>
                <span class="n">actions</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                    <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">CopyPerfTab</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">actions</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsSubset</span><span class="p">:</span>
                <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
           
        <span class="c1"># valuation domain</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ndigits</span><span class="o">=</span><span class="n">ndigits</span>
        <span class="k">if</span> <span class="n">Normalized</span><span class="p">:</span>
            <span class="n">Min</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
            <span class="n">Med</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="n">Max</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Min</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-100.0&#39;</span><span class="p">)</span>
            <span class="n">Med</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="n">Max</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Min</span><span class="p">,</span>
                                <span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Med</span><span class="p">,</span>
                                <span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Max</span><span class="p">,</span>
                                <span class="s1">&#39;hasIntegerValuation&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;precision&#39;</span><span class="p">]</span> <span class="o">=</span> \
                           <span class="n">perfTab</span><span class="o">.</span><span class="n">valuationPrecision</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;precision&#39;</span><span class="p">]</span> <span class="o">=</span> \
                           <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ndigits</span><span class="p">))</span>
            
        <span class="c1"># objectives</span>
        <span class="k">if</span> <span class="n">objectivesSubset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">CopyPerfTab</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">objectives</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">objectives</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">objectives</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objectivesSubset</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">CopyPerfTab</span><span class="p">:</span>
                    <span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span> <span class="o">=</span> <span class="n">objectives</span>
                
        <span class="c1"># criteria coalition</span>
        <span class="k">if</span> <span class="n">criteriaSubset</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">objectivesSubset</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">coalition</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">CopyPerfTab</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">criteria</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">criteriaSubset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">objectivesSubset</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">coalition</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">criteriaSubset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">coalition</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">coalition</span> <span class="o">=</span> <span class="n">criteriaSubset</span>

                <span class="k">elif</span> <span class="n">objectivesSubset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">coalition</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">coalition</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objectivesSubset</span><span class="p">:</span>
                        <span class="n">objCrit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">][</span><span class="s1">&#39;criteria&#39;</span><span class="p">]</span>
                        <span class="n">coalition</span> <span class="o">+=</span> <span class="n">objCrit</span>
                <span class="k">elif</span> <span class="n">objectivesSubset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">coalition</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: Objectives Subset and coalition given&#39;</span><span class="p">)</span>
                    <span class="k">return</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">coalition</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">CopyPerfTab</span><span class="p">:</span>
                            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">])</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaSubset</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">CopyPerfTab</span><span class="p">:</span>
                        <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">criteria</span>
        <span class="c1"># convert criteria weights to Decimal format    </span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">objectivesSubset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">coalition</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">criteriaSubset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">coalition</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">coalition</span> <span class="o">=</span> <span class="n">criteriaSubset</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">coalition</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objectives</span><span class="p">:</span>
                <span class="n">objCrit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">][</span><span class="s1">&#39;criteria&#39;</span><span class="p">]</span>
                <span class="n">coalition</span> <span class="o">+=</span> <span class="n">objCrit</span>

        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">coalition</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">CopyPerfTab</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span>
                    
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">criteria</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convertWeight2Decimal</span><span class="p">()</span>

        <span class="c1">#  install method Data and parameters</span>
        <span class="n">methodData</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">valuationType</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">parameter</span><span class="p">[</span><span class="s1">&#39;valuationType&#39;</span><span class="p">]</span>
            <span class="n">variant</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">parameter</span><span class="p">[</span><span class="s1">&#39;variant&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">valuationType</span> <span class="o">=</span> <span class="s1">&#39;bipolar&#39;</span>
            <span class="n">variant</span> <span class="o">=</span> <span class="s1">&#39;standard&#39;</span>
        <span class="n">methodData</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;valuationType&#39;</span><span class="p">:</span> <span class="n">valuationType</span><span class="p">,</span> <span class="s1">&#39;variant&#39;</span><span class="p">:</span> <span class="n">variant</span><span class="p">}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">vetoType</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">parameter</span><span class="p">[</span><span class="s1">&#39;vetoType&#39;</span><span class="p">]</span>
            <span class="n">methodData</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">][</span><span class="s1">&#39;vetoType&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vetoType</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">vetoType</span> <span class="o">=</span> <span class="s1">&#39;normal&#39;</span>
            <span class="n">methodData</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">][</span><span class="s1">&#39;vetoType&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vetoType</span>
        <span class="k">if</span> <span class="n">vetoType</span> <span class="o">==</span> <span class="s1">&#39;bipolar&#39;</span><span class="p">:</span>
            <span class="n">hasBipolarVeto</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">methodData</span> <span class="o">=</span> <span class="n">methodData</span>

        <span class="c1"># insert performance Data</span>
        <span class="k">if</span> <span class="n">CopyPerfTab</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">evaluation</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">NA</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">NA</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">evaluation</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">NA</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">NA</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">BigData</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">convertEvaluation2Decimal</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">CopyPerfTab</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="n">BigData</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">description</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="c1"># init general digraph Data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        
        <span class="c1"># finished data input time stamp</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">runTimes</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;dataInput&#39;</span><span class="p">:</span> <span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">tt</span> <span class="p">}</span>

        <span class="c1"># ---------- construct outranking relation</span>
        <span class="c1"># initial time stamp</span>
        <span class="n">tcp</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>        
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">actionsKeys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">actions</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructRelationWithThreading</span><span class="p">(</span><span class="n">criteria</span><span class="p">,</span>\
                                                <span class="n">evaluation</span><span class="p">,</span>\
                                                <span class="n">initial</span><span class="o">=</span><span class="n">actionsKeys</span><span class="p">,</span>\
                                                <span class="n">terminal</span><span class="o">=</span><span class="n">actionsKeys</span><span class="p">,</span>\
                                                <span class="n">hasNoVeto</span><span class="o">=</span><span class="n">hasNoVeto</span><span class="p">,</span>\
                                                <span class="n">hasBipolarVeto</span><span class="o">=</span><span class="n">hasBipolarVeto</span><span class="p">,</span>\
                                                <span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>\
                                                <span class="n">Threading</span><span class="o">=</span><span class="n">Threading</span><span class="p">,</span>\
                                                <span class="n">startMethod</span><span class="o">=</span><span class="n">startMethod</span><span class="p">,</span>\
                                                <span class="n">tempDir</span><span class="o">=</span><span class="n">tempDir</span><span class="p">,</span>\
                                                <span class="n">WithConcordanceRelation</span><span class="o">=</span><span class="n">WithConcordanceRelation</span><span class="p">,</span>\
                                                <span class="n">WithVetoCounts</span><span class="o">=</span><span class="n">WithVetoCounts</span><span class="p">,</span>\
                                                <span class="n">nbrCores</span><span class="o">=</span><span class="n">nbrCores</span><span class="p">,</span>\
                                                <span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>

        <span class="c1"># rounding up to ndigits</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="n">Min</span><span class="p">,</span><span class="n">Max</span><span class="p">,</span><span class="n">ndigits</span><span class="p">)</span>
        <span class="c1"># finished relation computing time stamp</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">runTimes</span><span class="p">[</span><span class="s1">&#39;computeRelation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">tcp</span>

        <span class="c1"># ----  computing the gamma sets</span>
        <span class="n">tg</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">runTimes</span><span class="p">[</span><span class="s1">&#39;gammaSets&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">tg</span> 

        <span class="c1"># total constructor time</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">runTimes</span><span class="p">[</span><span class="s1">&#39;totalTime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">tt</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        
<div class="viewcode-block" id="BipolarOutrankingDigraph.computeCriterionRelation">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.BipolarOutrankingDigraph.computeCriterionRelation">[docs]</a>
    <span class="k">def</span> <span class="nf">computeCriterionRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compute the outranking characteristic for actions x and y</span>
<span class="sd">        on criterion c.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">NA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NA</span>
        <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;1.0&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span><span class="p">:</span>		
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">indx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">indy</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                        <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">ind</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">wpx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">wpy</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                        <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">px</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">py</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                        <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span> 
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.0&quot;</span><span class="p">):</span>
                    <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>

                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localConcordance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.0&quot;</span><span class="p">)</span></div>

            
    <span class="k">def</span> <span class="nf">_constructRelationWithThreading</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">criteria</span><span class="p">,</span>
                           <span class="n">evaluation</span><span class="p">,</span>
                           <span class="n">initial</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">terminal</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">hasNoVeto</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">hasBipolarVeto</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                            <span class="n">startMethod</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">tempDir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">WithConcordanceRelation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">WithVetoCounts</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">nbrCores</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Specialization of the corresponding BipolarOutrankingDigraph method</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">cpu_count</span>
        
        <span class="c1">##</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="n">Threading</span> <span class="ow">or</span> <span class="n">cpu_count</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="c1"># set threading parameter</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Computing without threading ...&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nbrThreads</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">startMethod</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="c1"># !! concordance relation and veto counts need a complex constructor</span>
            <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">hasBipolarVeto</span><span class="p">)</span> <span class="ow">or</span> <span class="n">WithConcordanceRelation</span> <span class="ow">or</span> <span class="n">WithVetoCounts</span><span class="p">:</span>
                <span class="n">constructRelation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructRelation</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">constructRelation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructRelationSimple</span>

            <span class="k">return</span> <span class="n">constructRelation</span><span class="p">(</span><span class="n">criteria</span><span class="p">,</span>\
                                    <span class="n">evaluation</span><span class="p">,</span>\
                                    <span class="n">initial</span><span class="o">=</span><span class="n">initial</span><span class="p">,</span>\
                                    <span class="n">terminal</span><span class="o">=</span><span class="n">terminal</span><span class="p">,</span>\
                                    <span class="n">hasNoVeto</span><span class="o">=</span><span class="n">hasNoVeto</span><span class="p">,</span>\
                                    <span class="n">hasBipolarVeto</span><span class="o">=</span><span class="n">hasBipolarVeto</span><span class="p">,</span>\
                                    <span class="n">WithConcordanceRelation</span><span class="o">=</span><span class="n">WithConcordanceRelation</span><span class="p">,</span>\
                                    <span class="n">WithVetoCounts</span><span class="o">=</span><span class="n">WithVetoCounts</span><span class="p">,</span>\
                                    <span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">,</span>\
                                    <span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="n">hasSymmetricThresholds</span><span class="p">)</span>
        <span class="c1">##</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># parallel computation</span>
            <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span><span class="p">,</span> <span class="n">deepcopy</span>
            <span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>
            <span class="kn">from</span> <span class="nn">pickle</span> <span class="kn">import</span> <span class="n">Pickler</span><span class="p">,</span> <span class="n">dumps</span><span class="p">,</span> <span class="n">loads</span><span class="p">,</span> <span class="n">load</span>
            <span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>
            <span class="c1"># setting default start method</span>
            <span class="k">if</span> <span class="n">startMethod</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">startMethod</span> <span class="o">=</span> <span class="s1">&#39;spawn&#39;</span>
            <span class="n">mpctx</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">startMethod</span><span class="p">)</span>
            <span class="n">Process</span> <span class="o">=</span> <span class="n">mpctx</span><span class="o">.</span><span class="n">Process</span>
            <span class="n">active_children</span> <span class="o">=</span> <span class="n">mpctx</span><span class="o">.</span><span class="n">active_children</span>
            <span class="n">cpu_count</span> <span class="o">=</span> <span class="n">mpctx</span><span class="o">.</span><span class="n">cpu_count</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">startMethod</span> <span class="o">=</span> <span class="n">mpctx</span><span class="o">.</span><span class="n">get_start_method</span><span class="p">()</span>
 
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Threading ...&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">startMethod</span><span class="p">)</span>
            <span class="kn">from</span> <span class="nn">tempfile</span> <span class="kn">import</span> <span class="n">TemporaryDirectory</span>
            <span class="k">with</span> <span class="n">TemporaryDirectory</span><span class="p">(</span><span class="nb">dir</span><span class="o">=</span><span class="n">tempDir</span><span class="p">)</span> <span class="k">as</span> <span class="n">tempDirName</span><span class="p">:</span>
                <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span><span class="p">,</span> <span class="n">deepcopy</span>

<span class="c1">##                #selfDp = copy(self)</span>
<span class="c1">##                selfFileName = tempDirName +&#39;/dumpSelf.py&#39;</span>
<span class="c1">##                if Debug:</span>
<span class="c1">##                    print(&#39;temDirName, selfFileName&#39;, tempDirName,selfFileName)</span>
<span class="c1">##                fo = open(selfFileName,&#39;wb&#39;)</span>
<span class="c1">##                fo.write(dumps(self,-1))</span>
<span class="c1">##                fo.close()</span>

                <span class="k">if</span> <span class="n">nbrCores</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">nbrCores</span> <span class="o">=</span> <span class="n">cpu_count</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Nbr of cpus = &#39;</span><span class="p">,</span><span class="n">nbrCores</span><span class="p">)</span>
                <span class="c1"># set number of threads</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">nbrThreads</span> <span class="o">=</span> <span class="n">nbrCores</span>

                <span class="n">ni</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">initial</span><span class="p">)</span>
                <span class="n">nt</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">terminal</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ni</span> <span class="o">&lt;</span> <span class="n">nt</span><span class="p">:</span>
                    <span class="n">n</span> <span class="o">=</span> <span class="n">ni</span>
                    <span class="n">actions2Split</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">initial</span><span class="p">)</span>
                    <span class="n">InitialSplit</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">n</span> <span class="o">=</span> <span class="n">nt</span>
                    <span class="n">actions2Split</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">terminal</span><span class="p">)</span>
                    <span class="n">InitialSplit</span> <span class="o">=</span> <span class="kc">False</span>
<span class="c1">##                if Debug:</span>
<span class="c1">##                    print(&#39;InitialSplit, actions2Split&#39;, InitialSplit, actions2Split)</span>
            
                <span class="n">nit</span> <span class="o">=</span> <span class="n">n</span><span class="o">//</span><span class="n">nbrCores</span>
                <span class="n">nbrOfJobs</span> <span class="o">=</span> <span class="n">nbrCores</span>
                <span class="k">if</span> <span class="n">nit</span><span class="o">*</span><span class="n">nbrCores</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
                    <span class="n">nit</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">while</span> <span class="n">nit</span><span class="o">*</span><span class="p">(</span><span class="n">nbrOfJobs</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">n</span><span class="p">:</span>
                    <span class="n">nbrOfJobs</span> <span class="o">-=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;nbr of actions to split&#39;</span><span class="p">,</span><span class="n">n</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;nbr of jobs = &#39;</span><span class="p">,</span><span class="n">nbrOfJobs</span><span class="p">)</span>    
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;nbr of splitActions = &#39;</span><span class="p">,</span><span class="n">nit</span><span class="p">)</span>

                <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">initial</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">terminal</span><span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
                <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">actionsRemain</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">actions2Split</span><span class="p">)</span>
                <span class="n">splitActionsList</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nbrOfJobs</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Thread = </span><span class="si">%d</span><span class="s1">/</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">nbrOfJobs</span><span class="p">),</span><span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="n">splitActions</span><span class="o">=</span><span class="p">[]</span>
                    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nit</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">nbrOfJobs</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
                            <span class="n">splitActions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">actions2Split</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">splitActions</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">actionsRemain</span><span class="p">)</span>
                        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">splitActions</span><span class="p">)),</span><span class="n">flush</span><span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
<span class="c1">##                    if Debug:</span>
<span class="c1">##                        print(splitActions)</span>
                    <span class="n">actionsRemain</span> <span class="o">=</span> <span class="n">actionsRemain</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">splitActions</span><span class="p">)</span>
<span class="c1">##                    if Debug:</span>
<span class="c1">##                        print(actionsRemain)</span>
                    <span class="n">splitActionsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">splitActions</span><span class="p">)</span>
<span class="c1">##                    foName = tempDirName+&#39;/splitActions-&#39;+str(j)+&#39;.py&#39;</span>
<span class="c1">##                    fo = open(foName,&#39;wb&#39;)</span>
<span class="c1">##                    spa = dumps(splitActions,-1)</span>
<span class="c1">##                    fo.write(spa)</span>
<span class="c1">##                    fo.close()</span>
                    <span class="n">splitThread</span> <span class="o">=</span> <span class="n">_myBODGThread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">j</span><span class="p">,</span>
                                            <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                                  <span class="n">InitialSplit</span><span class="p">,</span>
                                                  <span class="n">tempDirName</span><span class="p">,</span><span class="n">splitActions</span><span class="p">,</span>
                                                  <span class="n">hasNoVeto</span><span class="p">,</span><span class="n">hasBipolarVeto</span><span class="p">,</span>
                                                  <span class="n">hasSymmetricThresholds</span><span class="p">,</span><span class="n">Debug</span><span class="p">))</span>
                    <span class="n">splitThread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
                    
                <span class="k">while</span> <span class="n">active_children</span><span class="p">()</span> <span class="o">!=</span> <span class="p">[]:</span>
                    <span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>    
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Exiting computing threads&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">splitActionsList</span><span class="p">)):</span>
                    <span class="c1">#print(&#39;Post job-%d/%d processing&#39; % (j+1,nbrOfJobs))</span>
<span class="c1">##                    if Debug:</span>
<span class="c1">##                        print(&#39;job&#39;,j)</span>
<span class="c1">##                    fiName = tempDirName+&#39;/splitActions-&#39;+str(j)+&#39;.py&#39;</span>
<span class="c1">##                    fi = open(fiName,&#39;rb&#39;)</span>
<span class="c1">##                    splitActions = loads(fi.read())</span>
<span class="c1">##                    fi.close()</span>
                    <span class="n">splitActions</span> <span class="o">=</span> <span class="n">splitActionsList</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
<span class="c1">##                    if Debug:</span>
<span class="c1">##                        print(&#39;splitActions&#39;,splitActions)</span>
                    <span class="n">fiName</span> <span class="o">=</span> <span class="n">tempDirName</span><span class="o">+</span><span class="s1">&#39;/splitRelation-&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">j</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.py&#39;</span>
                    <span class="n">fi</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fiName</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span>
                    <span class="n">splitRelation</span> <span class="o">=</span> <span class="n">loads</span><span class="p">(</span><span class="n">fi</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="c1">##                    if Debug:</span>
<span class="c1">##                        print(&#39;splitRelation&#39;,splitRelation)</span>
                    <span class="n">fi</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

                    <span class="c1">#relation update with splitRelation)                    </span>
                
                    <span class="k">if</span> <span class="n">InitialSplit</span><span class="p">:</span>
                        <span class="c1">#for x,y in product(splitActions,terminal):</span>
                        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">splitActions</span><span class="p">:</span>
                            <span class="n">rx</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
                            <span class="n">sprx</span> <span class="o">=</span> <span class="n">splitRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
                            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">terminal</span><span class="p">:</span>
                                <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">sprx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1">#for x,y in product(initial,splitActions):</span>
                        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">initial</span><span class="p">:</span>
                            <span class="n">rx</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
                            <span class="n">sprx</span> <span class="o">=</span> <span class="n">splitRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
                            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">splitActions</span><span class="p">:</span>
                                <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">sprx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span>   
                <span class="k">return</span> <span class="n">relation</span>

    <span class="k">def</span> <span class="nf">_constructRelationSimple</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">criteria</span><span class="p">,</span>
                           <span class="n">evaluation</span><span class="p">,</span>
                           <span class="n">initial</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">terminal</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">hasNoVeto</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">hasBipolarVeto</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">WithConcordanceRelation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">WithVetoCounts</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the biploar valued outranking relation from the data</span>
<span class="sd">        of a given performance tableau instantiation PerfTab.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            * PerfTab.criteria, PerfTab.evaluation,</span>
<span class="sd">            * inital nodes, terminal nodes, for restricted purposes </span>
<span class="sd">            </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">## default setting for digraphs</span>
        <span class="k">if</span> <span class="n">initial</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">initial</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="k">if</span> <span class="n">terminal</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">terminal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        
<span class="c1">##        totalweight = Decimal(&#39;0.0&#39;)</span>
<span class="c1">##        for c in dict.keys(criteria):</span>
<span class="c1">##            totalweight = totalweight + criteria[c][&#39;weight&#39;]</span>
        <span class="n">totalweight</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">crit</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span> <span class="k">for</span> <span class="n">crit</span> <span class="ow">in</span> <span class="n">criteria</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">vetos</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">negativeVetos</span> <span class="o">=</span> <span class="p">[]</span>
        
        <span class="c1">#nc = len(criteria)</span>
        <span class="n">NA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NA</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">initial</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">ra</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">terminal</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span>
                    <span class="n">ra</span><span class="p">[</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">concordance</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                    <span class="n">veto</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="n">abvetos</span><span class="o">=</span><span class="p">[]</span>
                    <span class="n">negativeVeto</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="n">abNegativeVetos</span><span class="o">=</span><span class="p">[]</span>

                    <span class="k">for</span> <span class="n">c</span><span class="p">,</span><span class="n">crit</span> <span class="ow">in</span> <span class="n">criteria</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="n">evalca</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
                        <span class="n">evalcb</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                        <span class="n">maxAB</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evalca</span><span class="p">),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evalcb</span><span class="p">))</span>
                        
                        <span class="k">if</span> <span class="n">evalca</span> <span class="o">!=</span> <span class="n">NA</span> <span class="ow">and</span> <span class="n">evalcb</span> <span class="o">!=</span> <span class="n">NA</span><span class="p">:</span>		
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">indx</span> <span class="o">=</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">indy</span> <span class="o">=</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="n">maxAB</span>
                            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                                <span class="n">ind</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">wpx</span> <span class="o">=</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">wpy</span> <span class="o">=</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                    <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="n">maxAB</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evalca</span><span class="p">)</span> 
                            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                                <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">px</span> <span class="o">=</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">py</span> <span class="o">=</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                    <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="n">maxAB</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evalca</span><span class="p">)</span> 
                            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                                <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">if</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                                <span class="n">d</span> <span class="o">=</span> <span class="n">evalca</span> <span class="o">-</span> <span class="n">evalcb</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">d</span> <span class="o">=</span> <span class="n">evalcb</span> <span class="o">-</span> <span class="n">evalca</span>
                            <span class="n">lc0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localConcordance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
                            <span class="c1">## print &#39;c,a,b,d,ind,wp,p,lco = &#39;,c,a,b,d, ind,wp,p,lc0</span>
                            <span class="n">concordance</span> <span class="o">=</span> <span class="n">concordance</span> <span class="o">+</span> <span class="p">(</span><span class="n">lc0</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">crit</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">]))</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">wvx</span> <span class="o">=</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">wvy</span> <span class="o">=</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasNoVeto</span><span class="p">:</span>
                                    <span class="n">wv</span> <span class="o">=</span> <span class="kc">None</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                        <span class="n">wv</span> <span class="o">=</span> <span class="n">wvx</span> <span class="o">+</span> <span class="n">wvy</span> <span class="o">*</span> <span class="n">maxAB</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="n">wv</span> <span class="o">=</span> <span class="n">wvx</span> <span class="o">+</span> <span class="n">wvy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evalca</span><span class="p">)</span>
                            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                                <span class="n">wv</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">vx</span> <span class="o">=</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">vy</span> <span class="o">=</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="n">v</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">*</span> <span class="n">maxAB</span>
                            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                                <span class="n">v</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_localVeto</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">),</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">):</span>
                                <span class="n">abvetos</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">c</span><span class="p">,</span><span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">]))</span>
                            
                            <span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_localNegativeVeto</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">),</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">):</span>
                                <span class="n">abNegativeVetos</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">c</span><span class="p">,</span><span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">]))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">concordance</span> <span class="o">=</span> <span class="n">concordance</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span>
                            <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">),</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
                            <span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">),</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
                                
                    <span class="n">concordindex</span> <span class="o">=</span> <span class="n">concordance</span> <span class="o">/</span> <span class="n">totalweight</span>                 
                    
                    <span class="c1">## init vetoes lists and indexes</span>
                    <span class="n">abVetoes</span><span class="o">=</span><span class="p">[]</span>
                    <span class="n">abNegativeVetoes</span><span class="o">=</span><span class="p">[]</span>

                    <span class="c1">#  contradictory vetoes</span>
                    
                    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="k">if</span> <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                            <span class="n">abVetoes</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">c</span><span class="p">,</span><span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">]))</span>
                        <span class="k">if</span> <span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                            <span class="n">abNegativeVetoes</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">c</span><span class="p">,</span><span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">]))</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">hasNoVeto</span><span class="p">:</span>                     
                        <span class="n">vetoes</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">veto</span> <span class="k">if</span> <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)]</span>
                        <span class="n">negativeVetoes</span> <span class="o">=</span> <span class="p">[</span><span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">negativeVeto</span>\
                                          <span class="k">if</span> <span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">vetoes</span> <span class="o">=</span> <span class="p">[]</span>
                        <span class="n">negativeVetoes</span> <span class="o">=</span> <span class="p">[]</span>
                    
<span class="c1">##                    if Debug:</span>
<span class="c1">##                        print(&#39;vetoes = &#39;, vetoes)</span>
<span class="c1">##                        print(&#39;negativeVetoes = &#39;, negativeVetoes)</span>
                    <span class="n">omaxList</span> <span class="o">=</span> <span class="p">[</span><span class="n">concordindex</span><span class="p">]</span> <span class="o">+</span> <span class="n">vetoes</span> <span class="o">+</span> <span class="n">negativeVetoes</span>
                    <span class="n">outrankindex</span> <span class="o">=</span> <span class="n">omax</span><span class="p">(</span><span class="n">Med</span><span class="p">,</span><span class="n">omaxList</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
                                                                 
                    <span class="k">if</span> <span class="n">abVetoes</span> <span class="o">!=</span> <span class="p">[]:</span>
                        <span class="n">vetos</span><span class="o">.</span><span class="n">append</span><span class="p">(([</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">concordindex</span><span class="o">*</span><span class="n">Max</span><span class="p">],</span><span class="n">abVetoes</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">abNegativeVetoes</span> <span class="o">!=</span> <span class="p">[]:</span>
                        <span class="n">negativeVetos</span><span class="o">.</span><span class="n">append</span><span class="p">(([</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">concordindex</span><span class="o">*</span><span class="n">Max</span><span class="p">],</span><span class="n">abNegativeVetoes</span><span class="p">))</span>
                    <span class="n">ra</span><span class="p">[</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">outrankindex</span><span class="o">*</span><span class="n">Max</span>

        <span class="c1"># return outranking relation    </span>

        <span class="k">return</span> <span class="n">relation</span>


    <span class="k">def</span> <span class="nf">_constructRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">criteria</span><span class="p">,</span>
                           <span class="n">evaluation</span><span class="p">,</span>
                           <span class="n">initial</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">terminal</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">hasNoVeto</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">hasBipolarVeto</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">WithConcordanceRelation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">WithVetoCounts</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the biploar valued outranking relation from the data</span>
<span class="sd">        of a given performance tableau instantiation PerfTab.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            * PerfTab.criteria, PerfTab.evaluation,</span>
<span class="sd">            * inital nodes, terminal nodes, for restricted purposes </span>

<span class="sd">        Flags:</span>
<span class="sd">            * hasNoVeto = True inhibits taking into account large performances differences</span>
<span class="sd">            * hasBipolarVeto = False allows to revert (if False) to standard Electre veto handling</span>
<span class="sd">            </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">digraphsTools</span> <span class="kn">import</span> <span class="n">omax</span><span class="p">,</span><span class="n">omin</span>
        <span class="c1">## default setting for digraphs</span>
        <span class="k">if</span> <span class="n">initial</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">initial</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="k">if</span> <span class="n">terminal</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">terminal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        
<span class="c1">##        totalweight = Decimal(&#39;0.0&#39;)</span>
<span class="c1">##        for c in dict.keys(criteria):</span>
<span class="c1">##            totalweight = totalweight + criteria[c][&#39;weight&#39;]</span>
        <span class="n">totalweight</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">)</span>

        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">concordanceRelation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">vetos</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
            <span class="n">negativeVetos</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">largePerformanceDifferencesCount</span> <span class="o">=</span> <span class="p">{}</span>        
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">initial</span><span class="p">:</span>
            <span class="n">largePerformanceDifferencesCount</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">lpda</span> <span class="o">=</span> <span class="n">largePerformanceDifferencesCount</span><span class="p">[</span><span class="n">a</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">terminal</span><span class="p">:</span>
                <span class="n">lpda</span><span class="p">[</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;positive&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;negative&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>

        
        <span class="c1">#nc = len(criteria)</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">NA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NA</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">initial</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">ra</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">]</span>
            <span class="n">concordanceRelation</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">crda</span> <span class="o">=</span> <span class="n">concordanceRelation</span><span class="p">[</span><span class="n">a</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">terminal</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span>
                    <span class="n">ra</span><span class="p">[</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
                    <span class="n">crda</span><span class="p">[</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    
                    <span class="n">concordance</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>

                    <span class="n">veto</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="n">abvetos</span><span class="o">=</span><span class="p">[]</span>

                    <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                        <span class="n">negativeVeto</span> <span class="o">=</span> <span class="p">{}</span>
                        <span class="n">abNegativeVetos</span><span class="o">=</span><span class="p">[]</span>

                    <span class="k">for</span> <span class="n">c</span><span class="p">,</span><span class="n">crit</span> <span class="ow">in</span> <span class="n">criteria</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="n">evalca</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
                        <span class="n">evalcb</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                        <span class="n">maxAB</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evalca</span><span class="p">),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evalcb</span><span class="p">))</span>
                        <span class="k">if</span> <span class="n">evalca</span> <span class="o">!=</span> <span class="n">NA</span> <span class="ow">and</span> <span class="n">evalcb</span> <span class="o">!=</span> <span class="n">NA</span><span class="p">:</span>		
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">indx</span> <span class="o">=</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">indy</span> <span class="o">=</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="n">maxAB</span>
                            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                                <span class="n">ind</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">wpx</span> <span class="o">=</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">wpy</span> <span class="o">=</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                    <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="n">maxAB</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evalca</span><span class="p">)</span> 
                            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                                <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">px</span> <span class="o">=</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">py</span> <span class="o">=</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                    <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="n">maxAB</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evalca</span><span class="p">)</span> 
                            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                                <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">if</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                                <span class="n">d</span> <span class="o">=</span> <span class="n">evalca</span> <span class="o">-</span> <span class="n">evalcb</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">d</span> <span class="o">=</span> <span class="n">evalcb</span> <span class="o">-</span> <span class="n">evalca</span>
                            <span class="n">lc0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localConcordance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
                            <span class="c1">## print &#39;c,a,b,d,ind,wp,p,lco = &#39;,c,a,b,d, ind,wp,p,lc0</span>
                            <span class="n">concordance</span> <span class="o">=</span> <span class="n">concordance</span> <span class="o">+</span> <span class="p">(</span><span class="n">lc0</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">crit</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">]))</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">wvx</span> <span class="o">=</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">wvy</span> <span class="o">=</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasNoVeto</span><span class="p">:</span>
                                    <span class="n">wv</span> <span class="o">=</span> <span class="kc">None</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                        <span class="n">wv</span> <span class="o">=</span> <span class="n">wvx</span> <span class="o">+</span> <span class="n">wvy</span> <span class="o">*</span> <span class="n">maxAB</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="n">wv</span> <span class="o">=</span> <span class="n">wvx</span> <span class="o">+</span> <span class="n">wvy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evalca</span><span class="p">)</span>
                            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                                <span class="n">wv</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">vx</span> <span class="o">=</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">vy</span> <span class="o">=</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasNoVeto</span><span class="p">:</span>
                                    <span class="n">v</span> <span class="o">=</span> <span class="kc">None</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                        <span class="n">v</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">*</span> <span class="n">maxAB</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="n">v</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evalca</span><span class="p">)</span>
                            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                                <span class="n">v</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_localVeto</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">),</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">):</span>
                                <span class="n">abvetos</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">c</span><span class="p">,</span><span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">]))</span>
                                <span class="n">largePerformanceDifferencesCount</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">][</span><span class="s1">&#39;negative&#39;</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
                            <span class="c1">## if d &lt; -wv:</span>
                            <span class="c1">##     print &#39;d,wv,v,veto[c]&#39;,d,wv,v,veto[c]</span>
                            <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                                <span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_localNegativeVeto</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">),</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                                <span class="k">if</span> <span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">):</span>
                                    <span class="n">abNegativeVetos</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">c</span><span class="p">,</span><span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">]))</span>
                                    <span class="n">largePerformanceDifferencesCount</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">][</span><span class="s1">&#39;positive&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                                <span class="c1">## if d &gt; wv:</span>
                                <span class="c1">##     print &#39;d,wv,v,negativeVeto[c]&#39;,d,wv,v,negativeVeto[c] </span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">concordance</span> <span class="o">=</span> <span class="n">concordance</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span>
                            <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">),</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                                <span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">),</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
                                
                    <span class="k">if</span> <span class="n">totalweight</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                        <span class="n">concordindex</span> <span class="o">=</span> <span class="n">concordance</span> <span class="o">/</span> <span class="n">totalweight</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">concordindex</span> <span class="o">=</span> <span class="n">concordance</span>
                    <span class="n">crda</span><span class="p">[</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">concordindex</span>
                    
                    <span class="c1">## init vetoes lists and indexes</span>
                    <span class="n">abVetoes</span><span class="o">=</span><span class="p">[]</span>
                    <span class="n">abNegativeVetoes</span><span class="o">=</span><span class="p">[]</span>

                    <span class="c1">#  contradictory vetoes</span>
                    
                    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="k">if</span> <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                            <span class="n">abVetoes</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">c</span><span class="p">,</span><span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">]))</span>
                        <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                                <span class="n">abNegativeVetoes</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">c</span><span class="p">,</span><span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">]))</span>
                                         
                    <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                        <span class="n">vetoes</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">veto</span> <span class="k">if</span> <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)]</span>
                        <span class="n">negativeVetoes</span> <span class="o">=</span> <span class="p">[</span><span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">negativeVeto</span> <span class="k">if</span> <span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)]</span>
                        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;vetoes = &#39;</span><span class="p">,</span> <span class="n">vetoes</span><span class="p">)</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;negativeVetoes = &#39;</span><span class="p">,</span> <span class="n">negativeVetoes</span><span class="p">)</span>
                        <span class="n">omaxList</span> <span class="o">=</span> <span class="p">[</span><span class="n">concordindex</span><span class="p">]</span> <span class="o">+</span> <span class="n">vetoes</span> <span class="o">+</span> <span class="n">negativeVetoes</span>
                        <span class="n">outrankindex</span> <span class="o">=</span> <span class="n">omax</span><span class="p">(</span><span class="n">Med</span><span class="p">,</span><span class="n">omaxList</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a b outrankindex = &#39;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span> <span class="n">outrankindex</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># hasBipolarVeto == False</span>
                        <span class="n">vetoIndex</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
                            <span class="n">vetoIndex</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">vetoIndex</span><span class="p">,</span><span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                        <span class="n">outrankindex</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">concordindex</span><span class="p">,</span><span class="o">-</span><span class="n">vetoIndex</span><span class="p">)</span>
                                                                 
                    <span class="k">if</span> <span class="n">abVetoes</span> <span class="o">!=</span> <span class="p">[]:</span>
                        <span class="n">vetos</span><span class="o">.</span><span class="n">append</span><span class="p">(([</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">concordindex</span><span class="o">*</span><span class="n">Max</span><span class="p">],</span><span class="n">abVetoes</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">abNegativeVetoes</span> <span class="o">!=</span> <span class="p">[]:</span>
                            <span class="n">negativeVetos</span><span class="o">.</span><span class="n">append</span><span class="p">(([</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">concordindex</span><span class="o">*</span><span class="n">Max</span><span class="p">],</span><span class="n">abNegativeVetoes</span><span class="p">))</span>
                    <span class="n">ra</span><span class="p">[</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">outrankindex</span><span class="o">*</span><span class="n">Max</span>

        <span class="c1"># storing concordance relation and vetoes</span>
        <span class="k">if</span> <span class="n">WithConcordanceRelation</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">concordanceRelation</span> <span class="o">=</span> <span class="n">concordanceRelation</span>
        <span class="k">if</span> <span class="n">WithVetoCounts</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vetos</span> <span class="o">=</span> <span class="n">vetos</span>
            <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">negativeVetos</span> <span class="o">=</span> <span class="n">negativeVetos</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">largePerformanceDifferencesCount</span> <span class="o">=</span> <span class="n">largePerformanceDifferencesCount</span>

        <span class="c1"># return outranking relation    </span>

        <span class="k">return</span> <span class="n">relation</span>


    
<div class="viewcode-block" id="BipolarOutrankingDigraph.criterionCharacteristicFunction">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.BipolarOutrankingDigraph.criterionCharacteristicFunction">[docs]</a>
    <span class="k">def</span> <span class="nf">criterionCharacteristicFunction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the characteristic value of the comparison of a and b on criterion c.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">evalca</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
        <span class="n">evalcb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
        <span class="n">maxAB</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evalca</span><span class="p">),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evalcb</span><span class="p">))</span>
        <span class="n">crit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">NA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NA</span>
        <span class="k">if</span> <span class="n">evalca</span> <span class="o">!=</span> <span class="n">NA</span> <span class="ow">and</span> <span class="n">evalcb</span> <span class="o">!=</span> <span class="n">NA</span><span class="p">:</span>		
            <span class="k">try</span><span class="p">:</span>
                <span class="n">indx</span> <span class="o">=</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">indy</span> <span class="o">=</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                    <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="n">maxAB</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evalca</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">ind</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">wpx</span> <span class="o">=</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">wpy</span> <span class="o">=</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                    <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="n">maxAB</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evalca</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">px</span> <span class="o">=</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">py</span> <span class="o">=</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="n">maxAB</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evalca</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">crit</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                <span class="n">d</span> <span class="o">=</span> <span class="n">evalca</span> <span class="o">-</span> <span class="n">evalcb</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">d</span> <span class="o">=</span> <span class="n">evalcb</span> <span class="o">-</span> <span class="n">evalca</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localConcordance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="BipolarOutrankingDigraph.computeSingleCriteriaNetflows">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.BipolarOutrankingDigraph.computeSingleCriteriaNetflows">[docs]</a>
    <span class="k">def</span> <span class="nf">computeSingleCriteriaNetflows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders the Promethee single criteria netflows matrix M</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">matrixM</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">matrixM</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="n">netflow</span><span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">b</span><span class="p">:</span>
                        <span class="n">cab</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criterionCharacteristicFunction</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
                        <span class="n">cba</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criterionCharacteristicFunction</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">a</span><span class="p">)</span>
                        <span class="n">netflow</span> <span class="o">+=</span> <span class="n">cab</span> <span class="o">-</span> <span class="n">cba</span>
                <span class="n">netflow</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">netflow</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">matrixM</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">netflow</span>
        <span class="k">return</span> <span class="n">matrixM</span></div>

    
<div class="viewcode-block" id="BipolarOutrankingDigraph.saveSingleCriterionNetflows">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.BipolarOutrankingDigraph.saveSingleCriterionNetflows">[docs]</a>
    <span class="k">def</span> <span class="nf">saveSingleCriterionNetflows</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;tempnetflows.prn&#39;</span><span class="p">,</span><span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delimited save of single criteria netflows matrix</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">M</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeSingleCriteriaNetflows</span><span class="p">()</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%2.2f</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">M</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">c</span><span class="p">]))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Single Criteria Netflows saved on file </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileName</span><span class="p">))</span></div>

        
    <span class="k">def</span> <span class="nf">_localConcordance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters: d := diff observed, wp := weak preference threshold,</span>
<span class="sd">        ind := indiffrence threshold, p := prefrence threshold.</span>
<span class="sd">        Renders the concordance index per criteria (-1,0,1)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span>   <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="n">p</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">ind</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="n">ind</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">wp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="o">-</span><span class="n">wp</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ind</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="n">ind</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">wp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="o">-</span><span class="n">wp</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.0&quot;</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>                
            

    <span class="k">def</span> <span class="nf">_localVeto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">wv</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters:</span>
<span class="sd">            d := diff observed, v (wv)  :=  (weak) veto threshold.</span>

<span class="sd">        Renders the local veto state (-1,0,1).</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span>  <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span> <span class="n">v</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">wv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span> <span class="n">wv</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>        
        <span class="k">elif</span> <span class="n">wv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="n">wv</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_localNegativeVeto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">wv</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters:</span>
<span class="sd">            d := diff observed, v (wv)  :=  (weak) veto threshold.</span>

<span class="sd">        Renders the local negative veto state (-1,0,1).</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span>  <span class="n">d</span> <span class="o">&gt;=</span> <span class="n">v</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">wv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="n">wv</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>        
        <span class="k">elif</span> <span class="n">wv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="n">wv</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span></div>


<span class="k">class</span> <span class="nc">_BipolarOutrankingDigraph</span><span class="p">(</span><span class="n">OutrankingDigraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialization of the abstract OutrankingDigraph root class for generating</span>
<span class="sd">    bipolarly-valued outranking digraphs.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        * argPerfTab: instance of PerformanceTableau class.</span>
<span class="sd">          If a file name string is given, the performance tableau will directly be loaded first.</span>
<span class="sd">        * coalition: subset of criteria to be used for contruction the outranking digraph.</span>
<span class="sd">        * hasNoVeto: veto desactivation flag (False by default).</span>
<span class="sd">        * hasBipolarVeto: bipolar versus electre veto activation (true by default).</span>
<span class="sd">        * Normalized: the valuation domain is set by default to [-100,+100] (bipolar percents).</span>
<span class="sd">          If True, the valuation domain is recoded to [-1.0,+1.0].</span>
<span class="sd">        * WithConcordanceRelation: True by default when not threading.</span>
<span class="sd">          The self.concordanceRelation contains the significance majority margin of the &quot;at least as good relation as&quot;</span>
<span class="sd">          without the large performance difference polarization.</span>
<span class="sd">        * WithVetoCounts: True by default when not threading. All vetos and countervetos</span>
<span class="sd">          are stored in self.vetos and self.negativeVetos slots,</span>
<span class="sd">          as well the counts of large performance differences in self.largePerformanceDifferencesCount slot.</span>
<span class="sd">        * Threading: False by default. Allows to profit from SMP machines via the Python multiprocessing module.</span>
<span class="sd">        * nbrCores: controls the maximal number of cores that will be used in the multiprocessing phases.</span>
<span class="sd">          If None is given, the os.cpu_count method is used in order to determine the number of availble cores on the SMP machine.</span>

<span class="sd">    .. warning::</span>

<span class="sd">        If Threading is True, WithConcordanceRelation and WithVetoCounts flags are automatically set both to False.</span>
<span class="sd">        Removing this limitation is on the todo list and will be done soon.</span>
<span class="sd">       </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">argPerfTab</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">coalition</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">hasNoVeto</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">hasBipolarVeto</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">Normalized</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">CopyPerfTab</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">WithConcordanceRelation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">WithVetoCounts</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">nbrCores</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span> 
        <span class="k">if</span> <span class="n">argPerfTab</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Performance tableau required !&#39;</span><span class="p">)</span>
            <span class="c1">#perfTab = RandomPerformanceTableau(commonThresholds = [(10.0,0.0),(20.0,0.0),(80.0,0.0),(101.0,0.0)])</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">,(</span><span class="nb">str</span><span class="p">)):</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">PerformanceTableau</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">argPerfTab</span>

        <span class="c1"># set Threading parameters</span>
        <span class="k">if</span> <span class="n">Threading</span><span class="p">:</span>
            <span class="n">WithConcordanceRelation</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">WithVetoCounts</span> <span class="o">=</span> <span class="kc">False</span>
            
        <span class="c1">#self.performanceTableau = perfTab</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;rel_&#39;</span> <span class="o">+</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">name</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">,</span><span class="nb">list</span><span class="p">):</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">CopyPerfTab</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">actions</span>
        <span class="k">if</span> <span class="n">Normalized</span><span class="p">:</span>
            <span class="n">Min</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
            <span class="n">Med</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="n">Max</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Min</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-100.0&#39;</span><span class="p">)</span>
            <span class="n">Med</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="n">Max</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Min</span><span class="p">,</span><span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Med</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Max</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">coalition</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">CopyPerfTab</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">objectives</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">objectives</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">if</span> <span class="n">CopyPerfTab</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span>
            
        <span class="k">else</span><span class="p">:</span>
            <span class="n">criteria</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">coalition</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">criteria</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convertWeight2Decimal</span><span class="p">()</span>
        <span class="c1">#  install method Data and parameters</span>
        <span class="n">methodData</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">valuationType</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">parameter</span><span class="p">[</span><span class="s1">&#39;valuationType&#39;</span><span class="p">]</span>
            <span class="n">variant</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">parameter</span><span class="p">[</span><span class="s1">&#39;variant&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">valuationType</span> <span class="o">=</span> <span class="s1">&#39;bipolar&#39;</span>
            <span class="n">variant</span> <span class="o">=</span> <span class="s1">&#39;standard&#39;</span>
        <span class="n">methodData</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;valuationType&#39;</span><span class="p">:</span> <span class="n">valuationType</span><span class="p">,</span> <span class="s1">&#39;variant&#39;</span><span class="p">:</span> <span class="n">variant</span><span class="p">}</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">vetoType</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">parameter</span><span class="p">[</span><span class="s1">&#39;vetoType&#39;</span><span class="p">]</span>
            <span class="n">methodData</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">][</span><span class="s1">&#39;vetoType&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vetoType</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">vetoType</span> <span class="o">=</span> <span class="s1">&#39;normal&#39;</span>
            <span class="n">methodData</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">][</span><span class="s1">&#39;vetoType&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vetoType</span>
        <span class="k">if</span> <span class="n">vetoType</span> <span class="o">==</span> <span class="s1">&#39;bipolar&#39;</span><span class="p">:</span>
            <span class="n">hasBipolarVeto</span> <span class="o">=</span> <span class="kc">True</span>
            
        <span class="bp">self</span><span class="o">.</span><span class="n">methodData</span> <span class="o">=</span> <span class="n">methodData</span>

        <span class="c1"># insert performance Data</span>
        <span class="k">if</span> <span class="n">CopyPerfTab</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">evaluation</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convertEvaluation2Decimal</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">CopyPerfTab</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">description</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="c1"># init general digraph Data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        
        <span class="c1"># construct outranking relation</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">actionsKeys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">actions</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructRelationWithThreading</span><span class="p">(</span><span class="n">criteria</span><span class="p">,</span>\
                                                <span class="n">evaluation</span><span class="p">,</span>\
                                                <span class="n">initial</span><span class="o">=</span><span class="n">actionsKeys</span><span class="p">,</span>\
                                                <span class="n">terminal</span><span class="o">=</span><span class="n">actionsKeys</span><span class="p">,</span>\
                                                <span class="n">hasNoVeto</span><span class="o">=</span><span class="n">hasNoVeto</span><span class="p">,</span>\
                                                <span class="n">hasBipolarVeto</span><span class="o">=</span><span class="n">hasBipolarVeto</span><span class="p">,</span>\
                                                <span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>\
                                                <span class="n">Threading</span><span class="o">=</span><span class="n">Threading</span><span class="p">,</span>\
                                                <span class="n">WithConcordanceRelation</span><span class="o">=</span><span class="n">WithConcordanceRelation</span><span class="p">,</span>\
                                                <span class="n">WithVetoCounts</span><span class="o">=</span><span class="n">WithVetoCounts</span><span class="p">,</span>\
                                                <span class="n">nbrCores</span><span class="o">=</span><span class="n">nbrCores</span><span class="p">,</span>\
                                                <span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>

<span class="c1">##        if Normalized:</span>
<span class="c1">##            self.recodeValuation(-1.0,1.0)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">computeCriterionRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compute the outranking characteristic for actions x and y</span>
<span class="sd">        on criterion c.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">criterion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">]</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">NA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NA</span>
        <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;1.0&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>

            <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span> <span class="ow">and</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span><span class="p">:</span>		
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">indx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">indy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                        <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">ind</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">wpx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">wpy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                        <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">px</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">py</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                        <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span> 
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteriion</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                    <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localConcordance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.0&quot;</span><span class="p">)</span>
            
    <span class="k">def</span> <span class="nf">_constructRelationWithThreading</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">criteria</span><span class="p">,</span>
                           <span class="n">evaluation</span><span class="p">,</span>
                           <span class="n">initial</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">terminal</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">hasNoVeto</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">hasBipolarVeto</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">WithConcordanceRelation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">WithVetoCounts</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">nbrCores</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Specialization of the corresponding BipolarOutrankingDigraph method</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">cpu_count</span>
        
        <span class="c1">##</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">Threading</span> <span class="ow">or</span> <span class="n">cpu_count</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructRelation</span><span class="p">(</span><span class="n">criteria</span><span class="p">,</span>\
                                    <span class="n">evaluation</span><span class="p">,</span>\
                                    <span class="n">initial</span><span class="o">=</span><span class="n">initial</span><span class="p">,</span>\
                                    <span class="n">terminal</span><span class="o">=</span><span class="n">terminal</span><span class="p">,</span>\
                                    <span class="n">hasNoVeto</span><span class="o">=</span><span class="n">hasNoVeto</span><span class="p">,</span>\
                                    <span class="n">hasBipolarVeto</span><span class="o">=</span><span class="n">hasBipolarVeto</span><span class="p">,</span>\
                                    <span class="n">WithConcordanceRelation</span><span class="o">=</span><span class="n">WithConcordanceRelation</span><span class="p">,</span>\
                                    <span class="n">WithVetoCounts</span><span class="o">=</span><span class="n">WithVetoCounts</span><span class="p">,</span>\
                                    <span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">,</span>\
                                    <span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="n">hasSymmetricThresholds</span><span class="p">)</span>
        <span class="c1">##</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># parallel computation</span>
            <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span><span class="p">,</span> <span class="n">deepcopy</span>
            <span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>
            <span class="kn">from</span> <span class="nn">pickle</span> <span class="kn">import</span> <span class="n">Pickler</span><span class="p">,</span> <span class="n">dumps</span><span class="p">,</span> <span class="n">loads</span><span class="p">,</span> <span class="n">load</span>
            <span class="c1">#from multiprocessing import Process, Lock,\</span>
            <span class="c1">#                            active_children, cpu_count</span>
            <span class="kn">import</span> <span class="nn">multiprocessing</span> <span class="k">as</span> <span class="nn">mp</span>
            <span class="k">if</span> <span class="n">startMethod</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">startMethod</span> <span class="o">=</span> <span class="s1">&#39;spawn&#39;</span>
            <span class="n">mpctx</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">startMethod</span><span class="p">)</span>
            <span class="n">Process</span> <span class="o">=</span> <span class="n">mpctx</span><span class="o">.</span><span class="n">Process</span>
            <span class="n">active_children</span> <span class="o">=</span> <span class="n">mpctx</span><span class="o">.</span><span class="n">active_children</span>
            <span class="n">cpu_count</span> <span class="o">=</span> <span class="n">mpctx</span><span class="o">.</span><span class="n">cpu_count</span>

            <span class="c1">#Debug=True</span>
            <span class="k">class</span> <span class="nc">myThread</span><span class="p">(</span><span class="n">Process</span><span class="p">):</span>
                <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">threadID</span><span class="p">,</span>
                             <span class="n">InitialSplit</span><span class="p">,</span> <span class="n">tempDirName</span><span class="p">,</span>
                             <span class="n">hasNoVeto</span><span class="p">,</span> <span class="n">hasBipolarVeto</span><span class="p">,</span>
                             <span class="n">hasSymmetricThresholds</span><span class="p">,</span> <span class="n">Debug</span><span class="p">):</span>
                    <span class="n">Process</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">threadID</span> <span class="o">=</span> <span class="n">threadID</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">InitialSplit</span> <span class="o">=</span> <span class="n">InitialSplit</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">workingDirectory</span> <span class="o">=</span> <span class="n">tempDirName</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">hasNoVeto</span> <span class="o">=</span> <span class="n">hasNoVeto</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">hasBipolarVeto</span> <span class="o">=</span> <span class="n">hasBipolarVeto</span><span class="p">,</span>
                    <span class="n">hasSymmetricThresholds</span> <span class="o">=</span> <span class="n">hasSymmetricThresholds</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">Debug</span> <span class="o">=</span> <span class="n">Debug</span>
                <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                    <span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>
                    <span class="kn">from</span> <span class="nn">pickle</span> <span class="kn">import</span> <span class="n">Pickler</span><span class="p">,</span> <span class="n">dumps</span><span class="p">,</span> <span class="n">loads</span>
                    <span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">chdir</span>
                    <span class="n">chdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workingDirectory</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Starting working in </span><span class="si">%s</span><span class="s2"> on thread </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span>\
                              <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workingDirectory</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">threadId</span><span class="p">)))</span>
                    <span class="n">fi</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;dumpSelf.py&#39;</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span>
                    <span class="n">digraph</span> <span class="o">=</span> <span class="n">loads</span><span class="p">(</span><span class="n">fi</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
                    <span class="n">fi</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                    <span class="n">fiName</span> <span class="o">=</span> <span class="s1">&#39;splitActions-&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">threadID</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.py&#39;</span>
                    <span class="n">fi</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fiName</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span>
                    <span class="n">splitActions</span> <span class="o">=</span> <span class="n">loads</span><span class="p">(</span><span class="n">fi</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
                    <span class="n">fi</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                    <span class="n">foName</span> <span class="o">=</span> <span class="s1">&#39;splitRelation-&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">threadID</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.py&#39;</span>
                    <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">foName</span><span class="p">,</span><span class="s1">&#39;wb&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">InitialSplit</span><span class="p">:</span>
                        <span class="n">splitRelation</span> <span class="o">=</span> <span class="n">BipolarOutrankingDigraph</span><span class="o">.</span><span class="n">_constructRelation</span><span class="p">(</span>
                                            <span class="n">digraph</span><span class="p">,</span><span class="n">digraph</span><span class="o">.</span><span class="n">criteria</span><span class="p">,</span>
                                            <span class="n">digraph</span><span class="o">.</span><span class="n">evaluation</span><span class="p">,</span>
                                            <span class="n">initial</span><span class="o">=</span><span class="n">splitActions</span><span class="p">,</span>
                                            <span class="n">hasNoVeto</span><span class="o">=</span><span class="n">hasNoVeto</span><span class="p">,</span>
                                            <span class="n">hasBipolarVeto</span><span class="o">=</span><span class="n">hasBipolarVeto</span><span class="p">,</span>
                                            <span class="n">WithConcordanceRelation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                            <span class="n">WithVetoCounts</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                            <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                            <span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="n">hasSymmetricThresholds</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">splitRelation</span> <span class="o">=</span> <span class="n">BipolarOutrankingDigraph</span><span class="o">.</span><span class="n">_constructRelation</span><span class="p">(</span><span class="n">digraph</span><span class="p">,</span><span class="n">digraph</span><span class="o">.</span><span class="n">criteria</span><span class="p">,</span>\
                                            <span class="n">digraph</span><span class="o">.</span><span class="n">evaluation</span><span class="p">,</span>
                                            <span class="n">terminal</span><span class="o">=</span><span class="n">splitActions</span><span class="p">,</span>
                                            <span class="n">hasNoVeto</span><span class="o">=</span><span class="n">hasNoVeto</span><span class="p">,</span>
                                            <span class="n">hasBipolarVeto</span><span class="o">=</span><span class="n">hasBipolarVeto</span><span class="p">,</span>
                                            <span class="n">WithConcordanceRelation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                            <span class="n">WithVetoCounts</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                            <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                            <span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="n">hasSymmetricThresholds</span><span class="p">)</span>
                    <span class="n">buff</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">()</span>
                    <span class="n">pickler</span> <span class="o">=</span> <span class="n">Pickler</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                    <span class="n">pickler</span><span class="o">.</span><span class="n">fast</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="n">pickler</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">splitRelation</span><span class="p">)</span>
                    <span class="n">buff</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">buff</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                <span class="c1"># .......</span>
             
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Threading ...&#39;</span><span class="p">)</span>
            <span class="kn">from</span> <span class="nn">tempfile</span> <span class="kn">import</span> <span class="n">TemporaryDirectory</span>
            <span class="k">with</span> <span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">tempDirName</span><span class="p">:</span>
                <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span><span class="p">,</span> <span class="n">deepcopy</span>
                <span class="c1">#selfDp = copy(self)</span>
                <span class="n">selfFileName</span> <span class="o">=</span> <span class="n">tempDirName</span> <span class="o">+</span><span class="s1">&#39;/dumpSelf.py&#39;</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;temDirName, selfFileName&#39;</span><span class="p">,</span> <span class="n">tempDirName</span><span class="p">,</span><span class="n">selfFileName</span><span class="p">)</span>
                <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">selfFileName</span><span class="p">,</span><span class="s1">&#39;wb&#39;</span><span class="p">)</span>
                <span class="n">pd</span> <span class="o">=</span> <span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pd</span><span class="p">)</span>
<span class="c1">##                buff = BytesIO()</span>
<span class="c1">##                pickler = Pickler(buff, -1)</span>
<span class="c1">##                pickler.fast = 1</span>
<span class="c1">##                pickler.dump(self)</span>
<span class="c1">##                buff.flush()</span>
<span class="c1">##                fo.write(buff.getvalue())</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

                <span class="k">if</span> <span class="n">nbrCores</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">nbrCores</span> <span class="o">=</span> <span class="n">cpu_count</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span>
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Nbr of cpus = &#39;</span><span class="p">,</span><span class="n">nbrCores</span><span class="p">)</span>

                <span class="n">ni</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">initial</span><span class="p">)</span>
                <span class="n">nt</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">terminal</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ni</span> <span class="o">&lt;</span> <span class="n">nt</span><span class="p">:</span>
                    <span class="n">n</span> <span class="o">=</span> <span class="n">ni</span>
                    <span class="n">actions2Split</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">initial</span><span class="p">)</span>
                    <span class="n">InitialSplit</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">n</span> <span class="o">=</span> <span class="n">nt</span>
                    <span class="n">actions2Split</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">terminal</span><span class="p">)</span>
                    <span class="n">InitialSplit</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;InitialSplit, actions2Split&#39;</span><span class="p">,</span> <span class="n">InitialSplit</span><span class="p">,</span> <span class="n">actions2Split</span><span class="p">)</span>
            
                <span class="n">nit</span> <span class="o">=</span> <span class="n">n</span><span class="o">//</span><span class="n">nbrCores</span>
                <span class="n">nbrOfJobs</span> <span class="o">=</span> <span class="n">nbrCores</span>
                <span class="k">if</span> <span class="n">nit</span><span class="o">*</span><span class="n">nbrCores</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
                    <span class="n">nit</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">while</span> <span class="n">nit</span><span class="o">*</span><span class="p">(</span><span class="n">nbrOfJobs</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">n</span><span class="p">:</span>
                    <span class="n">nbrOfJobs</span> <span class="o">-=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;nbr of actions to split&#39;</span><span class="p">,</span><span class="n">n</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;nbr of jobs = &#39;</span><span class="p">,</span><span class="n">nbrOfJobs</span><span class="p">)</span>    
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;nbr of splitActions = &#39;</span><span class="p">,</span><span class="n">nit</span><span class="p">)</span>

                <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">initial</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">terminal</span><span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
                <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">actionsRemain</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">actions2Split</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nbrOfJobs</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Thread = </span><span class="si">%d</span><span class="s1">/</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">nbrOfJobs</span><span class="p">),</span><span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
                    <span class="n">splitActions</span><span class="o">=</span><span class="p">[]</span>
                    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nit</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">nbrOfJobs</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
                            <span class="n">splitActions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">actions2Split</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">splitActions</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">actionsRemain</span><span class="p">)</span>
                        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">splitActions</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">splitActions</span><span class="p">)</span>
                    <span class="n">actionsRemain</span> <span class="o">=</span> <span class="n">actionsRemain</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">splitActions</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">actionsRemain</span><span class="p">)</span>
                    <span class="n">foName</span> <span class="o">=</span> <span class="n">tempDirName</span><span class="o">+</span><span class="s1">&#39;/splitActions-&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">j</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.py&#39;</span>
                    <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">foName</span><span class="p">,</span><span class="s1">&#39;wb&#39;</span><span class="p">)</span>
                    <span class="n">spa</span> <span class="o">=</span> <span class="n">dumps</span><span class="p">(</span><span class="n">splitActions</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">spa</span><span class="p">)</span>
<span class="c1">##                    buff = BytesIO()</span>
<span class="c1">##                    pickler = Pickler(buff, -1)</span>
<span class="c1">##                    pickler.fast = 1</span>
<span class="c1">##                    pickler.dump(splitActions)</span>
<span class="c1">##                    buff.flush()</span>
<span class="c1">##                    fo.write(buff.getvalue())</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

                    <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                    <span class="n">splitThread</span> <span class="o">=</span> <span class="n">myThread</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="n">InitialSplit</span><span class="p">,</span>
                                           <span class="n">tempDirName</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="p">,</span><span class="n">hasBipolarVeto</span><span class="p">,</span>
                                           <span class="n">hasSymmetricThresholds</span><span class="p">,</span><span class="n">Debug</span><span class="p">)</span>
                    <span class="n">splitThread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
                    
                <span class="k">while</span> <span class="n">active_children</span><span class="p">()</span> <span class="o">!=</span> <span class="p">[]:</span>
                    <span class="k">pass</span>

                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>    
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Exiting computing threads&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nbrOfJobs</span><span class="p">):</span>
                    <span class="c1">#print(&#39;Post job-%d/%d processing&#39; % (j+1,nbrOfJobs))</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;job&#39;</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
                    <span class="n">fiName</span> <span class="o">=</span> <span class="n">tempDirName</span><span class="o">+</span><span class="s1">&#39;/splitActions-&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">j</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.py&#39;</span>
                    <span class="n">fi</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fiName</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span>
                    <span class="n">splitActions</span> <span class="o">=</span> <span class="n">loads</span><span class="p">(</span><span class="n">fi</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;splitActions&#39;</span><span class="p">,</span><span class="n">splitActions</span><span class="p">)</span>
                    <span class="n">fi</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                    <span class="n">fiName</span> <span class="o">=</span> <span class="n">tempDirName</span><span class="o">+</span><span class="s1">&#39;/splitRelation-&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">j</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.py&#39;</span>
                    <span class="n">fi</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fiName</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span>
                    <span class="n">splitRelation</span> <span class="o">=</span> <span class="n">loads</span><span class="p">(</span><span class="n">fi</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;splitRelation&#39;</span><span class="p">,</span><span class="n">splitRelation</span><span class="p">)</span>
                    <span class="n">fi</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

                    <span class="c1">#relation.update(splitRelation)</span>
                    <span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">product</span>
                    <span class="k">if</span> <span class="n">InitialSplit</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="ow">in</span> <span class="n">product</span><span class="p">(</span><span class="n">splitActions</span><span class="p">,</span><span class="n">terminal</span><span class="p">):</span>
                        <span class="c1">#for x in splitActions:</span>
                        <span class="c1">#    for y in terminal:</span>
                            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">splitRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="ow">in</span> <span class="n">product</span><span class="p">(</span><span class="n">initial</span><span class="p">,</span><span class="n">splitActions</span><span class="p">):</span>
                        <span class="c1">#for x in initial:</span>
                        <span class="c1">#    for y in splitActions:</span>
                            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">splitRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>   
                <span class="k">return</span> <span class="n">relation</span>

    <span class="k">def</span> <span class="nf">_constructRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">criteria</span><span class="p">,</span>
                           <span class="n">evaluation</span><span class="p">,</span>
                           <span class="n">initial</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">terminal</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">hasNoVeto</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">hasBipolarVeto</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">WithConcordanceRelation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">WithVetoCounts</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                           <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the biploar valued outranking relation from the data</span>
<span class="sd">        of a given performance tableau instantiation PerfTab.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            * PerfTab.criteria, PerfTab.evaluation,</span>
<span class="sd">            * inital nodes, terminal nodes, for restricted purposes </span>

<span class="sd">        Flags:</span>
<span class="sd">            * hasNoVeto = True inhibits taking into account large performances differences</span>
<span class="sd">            * hasBipolarVeto = False allows to revert (if False) to standard Electre veto handling</span>
<span class="sd">            </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">## default setting for digraphs</span>
        <span class="k">if</span> <span class="n">initial</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">initial</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="k">if</span> <span class="n">terminal</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">terminal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        
<span class="c1">##        totalweight = Decimal(&#39;0.0&#39;)</span>
<span class="c1">##        for c in dict.keys(criteria):</span>
<span class="c1">##            totalweight = totalweight + criteria[c][&#39;weight&#39;]</span>
        <span class="n">totalweight</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">])</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">concordanceRelation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">vetos</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
            <span class="n">negativeVetos</span> <span class="o">=</span> <span class="p">[]</span>
    
        <span class="n">largePerformanceDifferencesCount</span> <span class="o">=</span> <span class="p">{}</span>        
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">initial</span><span class="p">:</span>
            <span class="n">largePerformanceDifferencesCount</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">terminal</span><span class="p">:</span>
                <span class="n">largePerformanceDifferencesCount</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;positive&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;negative&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>

        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>                                             
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">NA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NA</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">initial</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">concordanceRelation</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">terminal</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
                    <span class="n">concordanceRelation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">nc</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">criteria</span><span class="p">)</span>
                    <span class="n">concordance</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>

                    <span class="n">veto</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="n">abvetos</span><span class="o">=</span><span class="p">[]</span>

                    <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                        <span class="n">negativeVeto</span> <span class="o">=</span> <span class="p">{}</span>
                        <span class="n">abNegativeVetos</span><span class="o">=</span><span class="p">[]</span>

                    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span> <span class="ow">and</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span><span class="p">:</span>		
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">indx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">indy</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">ind</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">wpx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">wpy</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                    <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span> 
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">px</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">py</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                    <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span> 
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                                <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
                            <span class="n">lc0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localConcordance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
                            <span class="c1">## print &#39;c,a,b,d,ind,wp,p,lco = &#39;,c,a,b,d, ind,wp,p,lc0</span>
                            <span class="n">concordance</span> <span class="o">+=</span> <span class="p">(</span><span class="n">lc0</span> <span class="o">*</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">wvx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">wvy</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasNoVeto</span><span class="p">:</span>
                                    <span class="n">wv</span> <span class="o">=</span> <span class="kc">None</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                        <span class="n">wv</span> <span class="o">=</span> <span class="n">wvx</span> <span class="o">+</span> <span class="n">wvy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="n">wv</span> <span class="o">=</span> <span class="n">wvx</span> <span class="o">+</span> <span class="n">wvy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">wv</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">vx</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">vy</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasNoVeto</span><span class="p">:</span>
                                    <span class="n">v</span> <span class="o">=</span> <span class="kc">None</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                        <span class="n">v</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="n">v</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">v</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_localVeto</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">),</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">):</span>
                                <span class="n">abvetos</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">c</span><span class="p">,</span><span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">]))</span>
                                <span class="n">largePerformanceDifferencesCount</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">][</span><span class="s1">&#39;negative&#39;</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
                            <span class="c1">## if d &lt; -wv:</span>
                            <span class="c1">##     print &#39;d,wv,v,veto[c]&#39;,d,wv,v,veto[c]</span>
                            <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                                <span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_localNegativeVeto</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">),</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                                <span class="k">if</span> <span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">):</span>
                                    <span class="n">abNegativeVetos</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">c</span><span class="p">,</span><span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">]))</span>
                                    <span class="n">largePerformanceDifferencesCount</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">][</span><span class="s1">&#39;positive&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                                <span class="c1">## if d &gt; wv:</span>
                                <span class="c1">##     print &#39;d,wv,v,negativeVeto[c]&#39;,d,wv,v,negativeVeto[c] </span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">concordance</span> <span class="o">+=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span>
                            <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">),</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                                <span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">),</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
                                
                    <span class="n">concordindex</span> <span class="o">=</span> <span class="n">concordance</span> <span class="o">/</span> <span class="n">totalweight</span>                 
                    <span class="n">concordanceRelation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">concordindex</span>
                    
                    <span class="c1">## init vetoes lists and indexes</span>
                    <span class="n">abVetoes</span><span class="o">=</span><span class="p">[]</span>
                    <span class="n">abNegativeVetoes</span><span class="o">=</span><span class="p">[]</span>

                    <span class="c1">#  contradictory vetoes</span>
                    
                    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                            <span class="n">abVetoes</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">c</span><span class="p">,</span><span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">]))</span>
                        <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                                <span class="n">abNegativeVetoes</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">c</span><span class="p">,</span><span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">]))</span>
                                         
                    <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                        <span class="n">vetoes</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">veto</span> <span class="k">if</span> <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)]</span>
                        <span class="n">negativeVetoes</span> <span class="o">=</span> <span class="p">[</span><span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">negativeVeto</span> <span class="k">if</span> <span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)]</span>
                        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;vetoes = &#39;</span><span class="p">,</span> <span class="n">vetoes</span><span class="p">)</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;negativeVetoes = &#39;</span><span class="p">,</span> <span class="n">negativeVetoes</span><span class="p">)</span>
                        <span class="n">omaxList</span> <span class="o">=</span> <span class="p">[</span><span class="n">concordindex</span><span class="p">]</span> <span class="o">+</span> <span class="n">vetoes</span> <span class="o">+</span> <span class="n">negativeVetoes</span>
                        <span class="n">outrankindex</span> <span class="o">=</span> <span class="n">omax</span><span class="p">(</span><span class="n">Med</span><span class="p">,</span><span class="n">omaxList</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a b outrankindex = &#39;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span> <span class="n">outrankindex</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># hasBipolarVeto == False</span>
                        <span class="n">vetoIndex</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
                            <span class="n">vetoIndex</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">vetoIndex</span><span class="p">,</span><span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                        <span class="n">outrankindex</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">concordindex</span><span class="p">,</span><span class="o">-</span><span class="n">vetoIndex</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">abVetoes</span> <span class="o">!=</span> <span class="p">[]:</span>
                        <span class="n">vetos</span><span class="o">.</span><span class="n">append</span><span class="p">(([</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">concordindex</span><span class="o">*</span><span class="n">Max</span><span class="p">],</span><span class="n">abVetoes</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">abNegativeVetoes</span> <span class="o">!=</span> <span class="p">[]:</span>
                            <span class="n">negativeVetos</span><span class="o">.</span><span class="n">append</span><span class="p">(([</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">concordindex</span><span class="o">*</span><span class="n">Max</span><span class="p">],</span><span class="n">abNegativeVetoes</span><span class="p">))</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">outrankindex</span><span class="o">*</span><span class="n">Max</span>

        <span class="c1"># storing concordance relation and vetoes</span>
        <span class="k">if</span> <span class="n">WithConcordanceRelation</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">concordanceRelation</span> <span class="o">=</span> <span class="n">concordanceRelation</span>
        <span class="k">if</span> <span class="n">WithVetoCounts</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vetos</span> <span class="o">=</span> <span class="n">vetos</span>
            <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">negativeVetos</span> <span class="o">=</span> <span class="n">negativeVetos</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">largePerformanceDifferencesCount</span> <span class="o">=</span> <span class="n">largePerformanceDifferencesCount</span>

        <span class="c1"># return outranking relation    </span>

        <span class="k">return</span> <span class="n">relation</span>


    
    <span class="k">def</span> <span class="nf">criterionCharacteristicFunction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the characteristic value of the comparison of a and b on criterion c.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">NA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NA</span>
        <span class="n">criterion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span> <span class="ow">and</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span><span class="p">:</span>		
            <span class="k">try</span><span class="p">:</span>
                <span class="n">indx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">indy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                    <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">ind</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">wpx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">wpy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                    <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">px</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">py</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localConcordance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">computeSingleCriteriaNetflows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders the Promethee single criteria netflows matrix M</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">matrixM</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">matrixM</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="n">netflow</span><span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">b</span><span class="p">:</span>
                        <span class="n">cab</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criterionCharacteristicFunction</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
                        <span class="n">cba</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criterionCharacteristicFunction</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">a</span><span class="p">)</span>
                        <span class="n">netflow</span> <span class="o">+=</span> <span class="n">cab</span> <span class="o">-</span> <span class="n">cba</span>
                <span class="n">netflow</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">netflow</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">matrixM</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">netflow</span>
        <span class="k">return</span> <span class="n">matrixM</span>
    
    <span class="k">def</span> <span class="nf">saveSingleCriterionNetflows</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;tempnetflows.prn&#39;</span><span class="p">,</span><span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delimited save of single criteria netflows matrix</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">M</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeSingleCriteriaNetflows</span><span class="p">()</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%2.2f</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">M</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">c</span><span class="p">]))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Single Criteria Netflows saved on file </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileName</span><span class="p">))</span>
        
    <span class="k">def</span> <span class="nf">_localConcordance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters: d := diff observed, wp := weak preference threshold,</span>
<span class="sd">        ind := indiffrence threshold, p := prefrence threshold.</span>
<span class="sd">        Renders the concordance index per criteria (-1,0,1)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span>   <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="n">p</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">ind</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="n">ind</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">wp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="o">-</span><span class="n">wp</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ind</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="n">ind</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">wp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="o">-</span><span class="n">wp</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.0&quot;</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>                
            

    <span class="k">def</span> <span class="nf">_localVeto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">wv</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters:</span>
<span class="sd">            d := diff observed, v (wv)  :=  (weak) veto threshold.</span>

<span class="sd">        Renders the local veto state (-1,0,1).</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span>  <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span> <span class="n">v</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">wv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span> <span class="n">wv</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>        
        <span class="k">elif</span> <span class="n">wv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="n">wv</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_localNegativeVeto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">wv</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters:</span>
<span class="sd">            d := diff observed, v (wv)  :=  (weak) veto threshold.</span>

<span class="sd">        Renders the local negative veto state (-1,0,1).</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span>  <span class="n">d</span> <span class="o">&gt;=</span> <span class="n">v</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">wv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="n">wv</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>        
        <span class="k">elif</span> <span class="n">wv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="n">wv</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">_BipolarPreferenceDigraph</span><span class="p">(</span><span class="n">BipolarOutrankingDigraph</span><span class="p">,</span><span class="n">PerformanceTableau</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameters:</span>
<span class="sd">        | performanceTableau (fileName of valid py code)</span>
<span class="sd">        | optional, coalition (sublist of criteria)</span>

<span class="sd">    Specialization of the standard BipolarOutrankingDigraph class for generating</span>
<span class="sd">    new bipolar ordinal-valued outranking digraphs.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">argPerfTab</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">coalition</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">copy</span>
        <span class="k">if</span> <span class="n">argPerfTab</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">RandomPerformanceTableau</span><span class="p">(</span><span class="n">commonThresholds</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">10.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),(</span><span class="mf">20.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),(</span><span class="mf">80.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),(</span><span class="mf">101.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">)])</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">,(</span><span class="nb">str</span><span class="p">)):</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">PerformanceTableau</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">argPerfTab</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">performanceTableau</span> <span class="o">=</span> <span class="n">perfTab</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;rel_&#39;</span> <span class="o">+</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">Min</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-2.0&#39;</span><span class="p">)</span>
        <span class="n">Med</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="n">Max</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2.0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Min</span><span class="p">,</span><span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Med</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Max</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">coalition</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">criteria</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">criteria</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">coalition</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">criteria</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convertWeight2Decimal</span><span class="p">()</span>
        <span class="c1">#  install method Data and parameters</span>
        <span class="n">methodData</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">valuationType</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">parameter</span><span class="p">[</span><span class="s1">&#39;valuationType&#39;</span><span class="p">]</span>
            <span class="n">variant</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">parameter</span><span class="p">[</span><span class="s1">&#39;variant&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">valuationType</span> <span class="o">=</span> <span class="s1">&#39;bipolar&#39;</span>
            <span class="n">variant</span> <span class="o">=</span> <span class="s1">&#39;standard&#39;</span>
        <span class="n">methodData</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;valuationType&#39;</span><span class="p">:</span> <span class="n">valuationType</span><span class="p">,</span> <span class="s1">&#39;variant&#39;</span><span class="p">:</span> <span class="n">variant</span><span class="p">}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">vetoType</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">parameter</span><span class="p">[</span><span class="s1">&#39;vetoType&#39;</span><span class="p">]</span>
            <span class="n">methodData</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">][</span><span class="s1">&#39;vetoType&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vetoType</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">vetoType</span> <span class="o">=</span> <span class="s1">&#39;normal&#39;</span>
            <span class="n">methodData</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">][</span><span class="s1">&#39;vetoType&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vetoType</span>
        <span class="k">if</span> <span class="n">vetoType</span> <span class="o">==</span> <span class="s1">&#39;bipolar&#39;</span><span class="p">:</span>
            <span class="n">hasBipolarVeto</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">methodData</span> <span class="o">=</span> <span class="n">methodData</span>
        <span class="c1"># construct outranking relation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructRelation</span><span class="p">(</span><span class="n">criteria</span><span class="p">,</span><span class="n">perfTab</span><span class="o">.</span><span class="n">evaluation</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="n">hasNoVeto</span><span class="p">,</span><span class="n">hasBipolarVeto</span><span class="o">=</span><span class="n">hasBipolarVeto</span><span class="p">)</span>

        <span class="c1"># insert performance Data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">evaluation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convertEvaluation2Decimal</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="c1"># init general digraph Data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">_constructRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">criteria</span><span class="p">,</span><span class="n">evaluation</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">hasBipolarVeto</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters:</span>
<span class="sd">            PerfTab.criteria, PerfTab.evaluation.</span>

<span class="sd">        Renders the biploar valued outranking relation from the data</span>
<span class="sd">        of a given performance tableau instantiation PerfTab.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">NA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NA</span>
        <span class="n">totalweight</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
            <span class="n">totalweight</span> <span class="o">=</span> <span class="n">totalweight</span> <span class="o">+</span> <span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">vetos</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
            <span class="n">negativeVetos</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">nc</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">criteria</span><span class="p">)</span>
                    <span class="n">concordance</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                    <span class="n">veto</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                        <span class="n">negativeVeto</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
                        <span class="n">criterion</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span> <span class="ow">and</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span><span class="p">:</span>		
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">indx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">indy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                    <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">ind</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">wpx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">wpy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                    <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">px</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">py</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                    <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                                    
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">if</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                                <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
                            <span class="n">lc0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localConcordance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
                            <span class="c1">## print &#39;c,a,b,d,ind,wp,p,lco = &#39;,c,a,b,d, ind,wp,p,lc0</span>
                            <span class="n">concordance</span> <span class="o">=</span> <span class="n">concordance</span> <span class="o">+</span> <span class="p">(</span><span class="n">lc0</span> <span class="o">*</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">wvx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">wvy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasNoVeto</span><span class="p">:</span>
                                    <span class="n">wv</span> <span class="o">=</span> <span class="kc">None</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                        <span class="n">wv</span> <span class="o">=</span> <span class="n">wvx</span> <span class="o">+</span> <span class="n">wvy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="n">wv</span> <span class="o">=</span> <span class="n">wvx</span> <span class="o">+</span> <span class="n">wvy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>  
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">wv</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">vx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">vy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasNoVeto</span><span class="p">:</span>
                                    <span class="n">v</span> <span class="o">=</span> <span class="kc">None</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                        <span class="n">v</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                                    <span class="k">else</span><span class="p">:</span>
                                        <span class="n">v</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">v</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_localVeto</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">),</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                            <span class="c1">## if d &lt; -wv:</span>
                            <span class="c1">##     print &#39;d,wv,v,veto[c]&#39;,d,wv,v,veto[c]</span>
                            <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                                <span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_localNegativeVeto</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">),</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                                <span class="c1">## if d &gt; wv:</span>
                                <span class="c1">##     print &#39;d,wv,v,negativeVeto[c]&#39;,d,wv,v,negativeVeto[c] </span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">concordance</span> <span class="o">=</span> <span class="n">concordance</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span>
                            <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">),</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                                <span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">),</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
                    <span class="n">concordindex</span> <span class="o">=</span> <span class="n">concordance</span> <span class="o">/</span> <span class="n">totalweight</span>                 

                    <span class="c1">## init vetoes lists and indexes</span>
                    <span class="n">abvetos</span><span class="o">=</span><span class="p">[]</span>
                    <span class="n">abNegativeVetos</span><span class="o">=</span><span class="p">[]</span>
                    <span class="n">vetoIndex</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
                    <span class="n">negativeVetoIndex</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
                    <span class="c1">## compute bipolar vetoes indexes</span>
                    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
                        <span class="n">vetoIndex</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">vetoIndex</span><span class="p">,</span><span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                        <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                            <span class="n">negativeVetoIndex</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">negativeVetoIndex</span><span class="p">,</span><span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

                    <span class="c1">#  contradictory vetoes</span>
                    <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                        <span class="c1">#  contradictory vetoes</span>
                        <span class="k">if</span> <span class="n">vetoIndex</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">negativeVetoIndex</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">):</span>
                            <span class="n">abvetos</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">c</span><span class="p">,</span><span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">]))</span>
                            <span class="n">abNegativeVetos</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">c</span><span class="p">,</span><span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">]))</span>
                            <span class="n">outrankindex</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                        <span class="c1">#  veto</span>
                        <span class="k">elif</span> <span class="n">vetoIndex</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">):</span>
                            <span class="n">abvetos</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">c</span><span class="p">,</span><span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">]))</span>
                            <span class="k">if</span> <span class="n">concordindex</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                                <span class="n">outrankindex</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">outrankindex</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">concordindex</span><span class="p">,</span><span class="o">-</span><span class="n">vetoIndex</span><span class="p">)</span>
                        <span class="c1">#  dictator</span>
                        <span class="k">elif</span> <span class="n">negativeVetoIndex</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">):</span>
                            <span class="n">abNegativeVetos</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">c</span><span class="p">,</span><span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">]))</span>
                            <span class="k">if</span> <span class="n">concordindex</span> <span class="o">&lt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                                <span class="n">outrankindex</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">outrankindex</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">concordindex</span><span class="p">,</span><span class="n">negativeVetoIndex</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="c1"># no vetoes or dictators</span>
                            <span class="n">outrankindex</span> <span class="o">=</span> <span class="n">concordindex</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># hasBipolarVeto == False</span>
                        <span class="n">outrankindex</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">concordindex</span><span class="p">,</span><span class="o">-</span><span class="n">vetoIndex</span><span class="p">)</span>
                                                                 
                    <span class="k">if</span> <span class="n">abvetos</span> <span class="o">!=</span> <span class="p">[]:</span>
                        <span class="n">vetos</span><span class="o">.</span><span class="n">append</span><span class="p">(([</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">concordindex</span><span class="o">*</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">)],</span><span class="n">abvetos</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">abNegativeVetos</span> <span class="o">!=</span> <span class="p">[]:</span>
                            <span class="n">negativeVetos</span><span class="o">.</span><span class="n">append</span><span class="p">(([</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">concordindex</span><span class="o">*</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">)],</span><span class="n">abNegativeVetos</span><span class="p">))</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">outrankindex</span><span class="o">*</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vetos</span> <span class="o">=</span> <span class="n">vetos</span>
        <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">negativeVetos</span> <span class="o">=</span> <span class="n">negativeVetos</span>
        <span class="k">return</span> <span class="n">relation</span>

    <span class="k">def</span> <span class="nf">criterionCharacteristicFunction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the characteristic value of the comparison of a and b on criterion c.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">NA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NA</span>
        <span class="n">criterion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span> <span class="ow">and</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span><span class="p">:</span>		
            <span class="k">try</span><span class="p">:</span>
                <span class="n">indx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">indy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                    <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">ind</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">wpx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">wpy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                    <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">px</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">py</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localConcordance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">computeSingleCriteriaNetflows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders the Promethee single criteria netflows matrix M</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">matrixM</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">matrixM</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="n">netflow</span><span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">b</span><span class="p">:</span>
                        <span class="n">cab</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criterionCharacteristicFunction</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
                        <span class="n">cba</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criterionCharacteristicFunction</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">a</span><span class="p">)</span>
                        <span class="n">netflow</span> <span class="o">+=</span> <span class="n">cab</span> <span class="o">-</span> <span class="n">cba</span>
                <span class="n">netflow</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">netflow</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">matrixM</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">netflow</span>
        <span class="k">return</span> <span class="n">matrixM</span>
    
    <span class="k">def</span> <span class="nf">saveSingleCriterionNetflows</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;tempnetflows.prn&#39;</span><span class="p">,</span><span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delimited save of single criteria netflows matrix</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">M</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeSingleCriteriaNetflows</span><span class="p">()</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%2.2f</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">M</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">c</span><span class="p">]))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Single Criteria Netflows saved on file </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileName</span><span class="p">))</span>
        
    <span class="k">def</span> <span class="nf">_localConcordance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters: d := diff observed, wp := weak preference threshold,</span>
<span class="sd">        ind := indiffrence threshold, p := prefrence threshold.</span>
<span class="sd">        Renders the concordance index per criteria (-1,0,1)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span>   <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="n">p</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">ind</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="n">ind</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">wp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="o">-</span><span class="n">wp</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ind</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="n">ind</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">wp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="o">-</span><span class="n">wp</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.0&quot;</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>                
            

    <span class="k">def</span> <span class="nf">_localVeto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">wv</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters: d := diff observed, v (wv)  :=  (weak) veto threshold.</span>
<span class="sd">        Renders the local veto state (-1,0,1).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span>  <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span> <span class="n">v</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">wv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span> <span class="n">wv</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>        
        <span class="k">elif</span> <span class="n">wv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="n">wv</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_localNegativeVeto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">wv</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters: d := diff observed, v (wv)  :=  (weak) veto threshold.</span>
<span class="sd">        Renders the local negative veto state (-1,0,1).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span>  <span class="n">d</span> <span class="o">&gt;=</span> <span class="n">v</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">wv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="n">wv</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>        
        <span class="k">elif</span> <span class="n">wv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="n">wv</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">_MedianBipolarOutrankingDigraph</span><span class="p">(</span><span class="n">BipolarOutrankingDigraph</span><span class="p">,</span><span class="n">PerformanceTableau</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameters: performanceTableau (fileName of valid py code)</span>
<span class="sd">                optional: coalition (sublist of criteria)</span>
<span class="sd">                          percentile as rational (n,d)</span>
<span class="sd">                          for instance (50,100) or (1,2) renders Q2, (1,4) = Q1</span>
<span class="sd">                          (1,10) = D1, (3,4) = Q3</span>
<span class="sd">                     </span>
<span class="sd">    Specialization of the standard OutrankingDigraph class for generating</span>
<span class="sd">    a median bipolar outranking digraph.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">argPerfTab</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">coalition</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">percentile</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="kn">from</span>  <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">,</span> <span class="p">(</span><span class="n">PerformanceTableau</span><span class="p">,</span><span class="n">RandomPerformanceTableau</span><span class="p">)):</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">argPerfTab</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">argPerfTab</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">perfTab</span> <span class="o">=</span> <span class="n">RandomPerformanceTableau</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">perfTab</span> <span class="o">=</span> <span class="n">PerformanceTableau</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;rel_&#39;</span> <span class="o">+</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">name</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argPerfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">,</span><span class="nb">list</span><span class="p">):</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">argPerfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">argPerfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">Min</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-100.0&#39;</span><span class="p">)</span>
        <span class="n">Med</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="n">Max</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Min</span><span class="p">,</span><span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Med</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Max</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">coalition</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">criteria</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">criteria</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">coalition</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructRelation</span><span class="p">(</span><span class="n">perfTab</span><span class="p">,</span><span class="n">percentile</span><span class="p">,</span><span class="n">Debug</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">criteria</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">evaluation</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">methodData</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">valuationType</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">parameter</span><span class="p">[</span><span class="s1">&#39;valuationType&#39;</span><span class="p">]</span>
            <span class="n">variant</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">parameter</span><span class="p">[</span><span class="s1">&#39;variant&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">valuationType</span> <span class="o">=</span> <span class="s1">&#39;normalized&#39;</span>
            <span class="n">variant</span> <span class="o">=</span> <span class="s1">&#39;median&#39;</span>
        <span class="n">methodData</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;valuationType&#39;</span><span class="p">:</span><span class="n">valuationType</span><span class="p">,</span><span class="s1">&#39;variant&#39;</span><span class="p">:</span><span class="n">variant</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">methodData</span> <span class="o">=</span> <span class="n">methodData</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_constructRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">t</span><span class="p">,</span><span class="n">percentile</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters: PerfTab.criteria, quantile (0 - 100)</span>
<span class="sd">        Renders the quantile-outranking relation from the data</span>
<span class="sd">        of a given performance tableau instantiation PerfTab.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>

        <span class="c1">#criteriaKey = [x for x in t.criteria]</span>
        <span class="n">criteriaRelation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">criteriaWeight</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">criteriaVeto</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">criteria</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">gx</span> <span class="o">=</span> <span class="n">BipolarOutrankingDigraph</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">coalition</span><span class="o">=</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
            
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;criterion : &#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
                <span class="n">gx</span><span class="o">.</span><span class="n">showRelationTable</span><span class="p">()</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">gx</span><span class="o">.</span><span class="n">vetos</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">pass</span>
                
            <span class="n">criteriaRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">gx</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
            <span class="n">criteriaWeight</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span>
            <span class="n">criteriaVeto</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">gx</span><span class="o">.</span><span class="n">vetos</span><span class="p">)</span>


        <span class="n">veto</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">criteria</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
           <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">criteriaVeto</span><span class="p">[</span><span class="n">x</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;===&gt;&gt;&gt;&gt; v :&#39;</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">veto</span><span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]][</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">veto</span><span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]][</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]],</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">veto</span><span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]][</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">veto</span><span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>                   
                        <span class="n">veto</span><span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]][</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span>
                        
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Vetoes &#39;</span><span class="p">,</span> <span class="n">veto</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="c1">#actionsKey = [x for x in t.actions]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">veto</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;-1.0&quot;</span><span class="p">):</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                    
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="n">characteristics</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">criteriaWeight</span><span class="p">[</span><span class="n">c</span><span class="p">])):</span>
                        <span class="n">characteristics</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">criteriaRelation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
                <span class="n">characteristics</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">characteristics</span><span class="p">)</span>
                
                <span class="c1">## if n % 2 == 1:</span>
                <span class="n">m</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">percentile</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">m</span> <span class="o">%</span> <span class="n">percentile</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">k</span> <span class="o">=</span> <span class="n">m</span> <span class="o">//</span> <span class="n">percentile</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">quantile</span> <span class="o">=</span> <span class="n">characteristics</span><span class="p">[</span><span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">k</span> <span class="o">=</span> <span class="p">(</span><span class="n">m</span><span class="o">//</span><span class="n">percentile</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">quantile0</span> <span class="o">=</span> <span class="n">characteristics</span><span class="p">[</span><span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">quantile1</span> <span class="o">=</span> <span class="n">characteristics</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">quantile1</span> <span class="o">&lt;=</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">quantile</span> <span class="o">=</span> <span class="n">quantile1</span>
                    <span class="k">elif</span> <span class="n">quantile0</span> <span class="o">&gt;=</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">quantile</span> <span class="o">=</span> <span class="n">quantile0</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">quantile</span> <span class="o">=</span> <span class="n">Med</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x,y,n,k&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="n">k</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">characteristics</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">pass</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">quantile</span><span class="p">,</span><span class="n">veto</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">characteristics</span><span class="p">[</span><span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="c1">#print relation[x][y]</span>
                        
        <span class="k">return</span> <span class="n">relation</span>



<span class="k">class</span> <span class="nc">_BipolarIntegerOutrankingDigraph</span><span class="p">(</span><span class="n">BipolarOutrankingDigraph</span><span class="p">,</span><span class="n">PerformanceTableau</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameters:</span>
<span class="sd">        | performanceTableau (fileName of valid py code)</span>
<span class="sd">        | optional, coalition (sublist of criteria)</span>

<span class="sd">    Specialization of the standard OutrankingDigraph class for generating</span>
<span class="sd">    bipolar integer-valued outranking digraphs.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">argPerfTab</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">coalition</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">hasBipolarVeto</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">copy</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">,</span> <span class="p">(</span><span class="n">PerformanceTableau</span><span class="p">,</span><span class="n">RandomPerformanceTableau</span><span class="p">)):</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">argPerfTab</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">argPerfTab</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">perfTab</span> <span class="o">=</span> <span class="n">RandomPerformanceTableau</span><span class="p">(</span><span class="n">integerWeights</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">perfTab</span> <span class="o">=</span> <span class="n">PerformanceTableau</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;rel_&#39;</span> <span class="o">+</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">name</span>
        <span class="c1">#self.performanceTableau = copy.deepcopy(perfTab)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">coalition</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">criteria</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">criteria</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">coalition</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span>
        <span class="n">totalWeight</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
            <span class="n">totalWeight</span> <span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">criteria</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">methodData</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">valuationType</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">parameter</span><span class="p">[</span><span class="s1">&#39;valuationType&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">valuationType</span> <span class="o">=</span> <span class="s1">&#39;integer&#39;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">variant</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">parameter</span><span class="p">[</span><span class="s1">&#39;variant&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">variant</span> <span class="o">=</span> <span class="s1">&#39;standard&#39;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">vetoType</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">parameter</span><span class="p">[</span><span class="s1">&#39;vetoType&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">vetoType</span> <span class="o">=</span> <span class="s1">&#39;normal&#39;</span>
            
        <span class="n">methodData</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;valuationType&#39;</span><span class="p">:</span><span class="n">valuationType</span><span class="p">,</span>\
                                   <span class="s1">&#39;variant&#39;</span><span class="p">:</span><span class="n">variant</span><span class="p">,</span> <span class="s1">&#39;vetoType&#39;</span><span class="p">:</span><span class="n">vetoType</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">methodData</span> <span class="o">=</span> <span class="n">methodData</span>

        <span class="n">Min</span> <span class="o">=</span> <span class="o">-</span><span class="n">totalWeight</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">totalWeight</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Min</span><span class="p">,</span><span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Med</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Max</span><span class="p">,</span>
                                <span class="s1">&#39;hasIntegerValuation&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">}</span>
        
        <span class="n">evaluation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">evaluation</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">vetoType</span> <span class="o">==</span> <span class="s2">&quot;bipolar&quot;</span><span class="p">:</span>
            <span class="n">hasBipolarVeto</span> <span class="o">=</span> <span class="kc">True</span>    
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructRelation</span><span class="p">(</span><span class="n">criteria</span><span class="p">,</span><span class="n">evaluation</span><span class="p">,</span>\
                                                <span class="n">hasBipolarVeto</span><span class="o">=</span><span class="n">hasBipolarVeto</span><span class="p">,</span>\
                                                <span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="n">hasSymmetricThresholds</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">evaluation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_constructRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">criteria</span><span class="p">,</span><span class="n">evaluation</span><span class="p">,</span><span class="n">hasBipolarVeto</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters:</span>
<span class="sd">            PerfTab.criteria, PerfTab.evaluation.</span>

<span class="sd">        Renders the biploar valued outranking relation from the data</span>
<span class="sd">        of a given performance tableau instantiation PerfTab.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">NA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NA</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">vetos</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
            <span class="n">negativeVetos</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">largePerformanceDifferencesCount</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">largePerformanceDifferencesCount</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="n">largePerformanceDifferencesCount</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;positive&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;negative&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">nc</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">criteria</span><span class="p">)</span>
                    <span class="n">concordance</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
                    <span class="n">veto</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="n">abvetos</span><span class="o">=</span><span class="p">[]</span>
                    <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                        <span class="n">negativeVeto</span> <span class="o">=</span> <span class="p">{}</span>
                        <span class="n">abNegativeVetos</span><span class="o">=</span><span class="p">[]</span>
                    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
                        <span class="n">criterion</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span> <span class="ow">and</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span><span class="p">:</span>		
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">indx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">indy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                    <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                                <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">ind</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">try</span><span class="p">:</span>    
                                <span class="n">wpx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">wpy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                    <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                                <span class="n">ind</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">prefx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">prefy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                    <span class="n">p</span> <span class="o">=</span> <span class="n">prefx</span> <span class="o">+</span> <span class="n">prefy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">p</span> <span class="o">=</span> <span class="n">prefx</span> <span class="o">+</span> <span class="n">prefy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>

                            <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>    
                                <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>

                            <span class="n">lc0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localConcordance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
                            <span class="c1">#print &#39;a,b,c,w,d,ind,wp,p,localConcordance(d,ind,wp,p)&#39;,a,b,c,criteria[c][&#39;weight&#39;],d,ind,wp,p,lc0</span>
                            <span class="n">concordance</span> <span class="o">=</span> <span class="n">concordance</span> <span class="o">+</span> <span class="p">(</span><span class="n">lc0</span> <span class="o">*</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">wvx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">wvy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                    <span class="n">wv</span> <span class="o">=</span> <span class="n">wvx</span> <span class="o">+</span> <span class="n">wvy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">wv</span> <span class="o">=</span> <span class="n">wvx</span> <span class="o">+</span> <span class="n">wvy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">wv</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">vx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">vy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                    <span class="n">v</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">v</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">v</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="n">vetoindex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localVeto</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                            <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">vetoindex</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span>  <span class="n">Min</span><span class="p">:</span>
                                 <span class="n">abvetos</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">c</span><span class="p">,</span><span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">]))</span>
                                 <span class="n">largePerformanceDifferencesCount</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">][</span><span class="s1">&#39;negative&#39;</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
                                
                            <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                                <span class="n">negativeVetoindex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localNegativeVeto</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                                <span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">negativeVetoindex</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                                <span class="k">if</span> <span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Min</span><span class="p">:</span>
                                    <span class="n">abNegativeVetos</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">c</span><span class="p">,</span><span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">]))</span>
                                    <span class="n">largePerformanceDifferencesCount</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">][</span><span class="s1">&#39;positive&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                            <span class="c1">#if d &lt; -wv:</span>
                            <span class="c1">#    print &#39;d,wv,v,veto[c]&#39;,d,wv,v,veto[c] </span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">Min</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                                <span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">Min</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
                    <span class="c1">#outrankindex = concordance</span>
                    <span class="n">concordindex</span> <span class="o">=</span> <span class="n">concordance</span>

                    <span class="c1">## init vetoes lists and indexes</span>
                    <span class="c1">#abvetos=[]</span>
                    <span class="c1">#abNegativeVetos=[]</span>
                    <span class="n">vetoIndex</span> <span class="o">=</span> <span class="n">Min</span>
                    <span class="n">negativeVetoIndex</span> <span class="o">=</span> <span class="n">Min</span>
                    <span class="c1">## compute bipolar vetoes indexes</span>
                    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
                        <span class="n">vetoIndex</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">vetoIndex</span><span class="p">,</span><span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                        <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                            <span class="n">negativeVetoIndex</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">negativeVetoIndex</span><span class="p">,</span><span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                    <span class="c1">#  contradictory vetoes</span>
                    <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                        <span class="c1">#  contradictory vetoes</span>
                        <span class="k">if</span> <span class="n">vetoIndex</span> <span class="o">&gt;</span> <span class="n">Min</span> <span class="ow">and</span> <span class="n">negativeVetoIndex</span> <span class="o">&gt;</span> <span class="n">Min</span><span class="p">:</span>
                            <span class="c1">#abvetos.append((c,veto[c]))</span>
                            <span class="c1">#abNegativeVetos.append((c,negativeVeto[c]))</span>
                            <span class="n">outrankindex</span> <span class="o">=</span> <span class="n">Med</span>
                        <span class="c1">#  veto</span>
                        <span class="k">elif</span> <span class="n">vetoIndex</span> <span class="o">&gt;</span> <span class="n">Min</span><span class="p">:</span>
                            <span class="c1">#abvetos.append((c,veto[c]))</span>
                            <span class="k">if</span> <span class="n">concordindex</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                                <span class="n">outrankindex</span> <span class="o">=</span> <span class="n">Med</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">outrankindex</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">concordindex</span><span class="p">,</span><span class="n">Max</span> <span class="o">-</span> <span class="n">vetoIndex</span> <span class="o">+</span> <span class="n">Min</span><span class="p">)</span>
                        <span class="c1">#  dictator</span>
                        <span class="k">elif</span> <span class="n">negativeVetoIndex</span> <span class="o">&gt;</span> <span class="n">Min</span><span class="p">:</span>
                            <span class="c1">#abNegativeVetos.append((c,negativeVeto[c]))</span>
                            <span class="k">if</span> <span class="n">concordindex</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                                <span class="n">outrankindex</span> <span class="o">=</span> <span class="n">Med</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">outrankindex</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">concordindex</span><span class="p">,</span><span class="n">negativeVetoIndex</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="c1"># no vetoes or dictators</span>
                            <span class="n">outrankindex</span> <span class="o">=</span> <span class="n">concordindex</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># hasBipolarVeto == False</span>
                        <span class="n">outrankindex</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">concordindex</span><span class="p">,</span><span class="n">Max</span> <span class="o">-</span> <span class="n">vetoIndex</span> <span class="o">+</span> <span class="n">Min</span><span class="p">)</span>
                                                    
                    <span class="k">if</span> <span class="n">abvetos</span> <span class="o">!=</span> <span class="p">[]:</span>
                        <span class="n">vetos</span><span class="o">.</span><span class="n">append</span><span class="p">(([</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">concordance</span><span class="p">],</span><span class="n">abvetos</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">abNegativeVetos</span> <span class="o">!=</span> <span class="p">[]:</span>
                            <span class="n">negativeVetos</span><span class="o">.</span><span class="n">append</span><span class="p">(([</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">concordance</span><span class="p">],</span><span class="n">abNegativeVetos</span><span class="p">))</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">outrankindex</span>
                    <span class="c1">#print &#39;relation[a][b]&#39;, a,b, relation[a][b]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vetos</span> <span class="o">=</span> <span class="n">vetos</span>
        <span class="k">if</span> <span class="n">hasBipolarVeto</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">negativeVetos</span> <span class="o">=</span> <span class="n">negativeVetos</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">largePerformanceDifferencesCount</span> <span class="o">=</span> <span class="n">largePerformanceDifferencesCount</span>
        <span class="k">return</span> <span class="n">relation</span>

    <span class="k">def</span> <span class="nf">_localConcordance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters:</span>
<span class="sd">            | d := diff observed, h := weak preference threshold,</span>
<span class="sd">            | p := prefrence threshold.</span>

<span class="sd">        Renders the concordance index per criteria (Min,Med,Max)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

        <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span>   <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="n">p</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Min</span>
            <span class="k">elif</span> <span class="n">ind</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="n">ind</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Max</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Med</span>
            <span class="k">elif</span> <span class="n">wp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="o">-</span><span class="n">wp</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Max</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Med</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.0&quot;</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Min</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Max</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ind</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="n">ind</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Max</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Min</span>
            <span class="k">elif</span> <span class="n">wp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="o">-</span><span class="n">wp</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Max</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Min</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.0&quot;</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Min</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Max</span>                
            

    <span class="k">def</span> <span class="nf">_localVeto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">wv</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters:</span>
<span class="sd">            | d := diff observed, v (wv)  :=  (weak) veto threshold.</span>

<span class="sd">        Renders the local veto state (Min,Med,Max).</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span>  <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span> <span class="n">v</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Max</span>
            <span class="k">elif</span> <span class="n">wv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span> <span class="n">wv</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Med</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Min</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Min</span>        
        <span class="k">elif</span> <span class="n">wv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="n">wv</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Med</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Min</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Min</span>

    <span class="k">def</span> <span class="nf">_localNegativeVeto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">wv</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters:</span>
<span class="sd">            | d := diff observed, v (wv)  :=  (weak) veto threshold.</span>

<span class="sd">        Renders the local negative veto state (Min,Med,Max).</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span>  <span class="n">d</span> <span class="o">&gt;=</span> <span class="n">v</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Max</span>
            <span class="k">elif</span> <span class="n">wv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="n">wv</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Med</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Min</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Min</span>        
        <span class="k">elif</span> <span class="n">wv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="n">wv</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Med</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Min</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Min</span>



    <span class="k">def</span> <span class="nf">showRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        prints the relation valuation in ##.## format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* ---- Relation -----&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;, &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;) = &#39;</span><span class="o">+</span><span class="s1">&#39; </span><span class="si">%d</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]))</span>
        <span class="nb">print</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">savePy2Gprolog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        save digraph in gprolog version</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----- saving digraph in gprolog format  -------------*&#39;</span><span class="p">)</span>        
        <span class="n">Name</span> <span class="o">=</span> <span class="n">name</span><span class="o">+</span><span class="s1">&#39;.pl&#39;</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">Name</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;/*------- data set ---------*</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39; * digraph pl export        *</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39; * RB May 2007              *</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39; * ---------------------....*/</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">% d</span><span class="s1">ata set: &#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">Name</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">actions</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;actions(&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">actions</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;).</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">listCriteriaNames</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
            <span class="n">listCriteriaNames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
            <span class="n">criteriaScale</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">weakPreferenceThreshold</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">weakPreferenceThreshold</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">preferenceThreshold</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">vetoThreshold</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">weakVetoThreshold</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;criteria(&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">listCriteriaNames</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;).</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;criteriaScale(&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">criteriaScale</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;).</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1"># changing valuation from a bipolar to a positive one #</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">Med</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">Med</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;valuationDomain([&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">Min</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;, &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">Med</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;, &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">Max</span><span class="p">))</span>       
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;]).</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;sumWeights(&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">Max</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;).</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;weakPreferenceThreshold(&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">weakPreferenceThreshold</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;).</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;preferenceThreshold(&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">preferenceThreshold</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;).</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;weakVetoThreshold(&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">weakVetoThreshold</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;).</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;vetoThreshold(&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">vetoThreshold</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;).</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">resx</span> <span class="o">=</span> <span class="s1">&#39;relation(&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;,&#39;</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">Min</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">+</span> <span class="n">Med</span>
                <span class="n">resxy</span> <span class="o">=</span> <span class="n">resx</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;,&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;).</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">resxy</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">_RandomElectre3OutrankingDigraph</span><span class="p">(</span><span class="n">_Electre3OutrankingDigraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameters:</span>
<span class="sd">        | n := nbr of actions, p := number criteria, scale := [Min,Max],</span>
<span class="sd">        | thresholds := [h,q,v]</span>

<span class="sd">    Specialization of the OutrankingDigraph class for generating temporary</span>
<span class="sd">    Digraphs from random performance tableaux.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">numberOfActions</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">numberOfCriteria</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">weightDistribution</span><span class="o">=</span><span class="s1">&#39;random&#39;</span><span class="p">,</span> <span class="n">weightScale</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span> <span class="n">commonScale</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">100.0</span><span class="p">],</span> <span class="n">commonThresholds</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">10.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),(</span><span class="mf">20.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),(</span><span class="mf">80.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">)],</span> <span class="n">commonMode</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;uniform&#39;</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">]):</span>
        <span class="kn">import</span> <span class="nn">random</span><span class="o">,</span><span class="nn">time</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;rel_randomperftab&#39;</span>
        <span class="c1"># generate random performance tableau</span>
        <span class="n">tb</span> <span class="o">=</span> <span class="n">RandomS3PerformanceTableau</span><span class="p">(</span><span class="n">numberOfActions</span><span class="o">=</span><span class="n">numberOfActions</span><span class="p">,</span><span class="n">numberOfCriteria</span><span class="o">=</span><span class="n">numberOfCriteria</span><span class="p">,</span> <span class="n">weightDistribution</span><span class="o">=</span><span class="n">weightDistribution</span><span class="p">,</span> <span class="n">weightScale</span><span class="o">=</span><span class="n">weightScale</span><span class="p">,</span> <span class="n">commonScale</span><span class="o">=</span><span class="n">commonScale</span><span class="p">,</span><span class="n">commonThresholds</span> <span class="o">=</span> <span class="n">commonThresholds</span><span class="p">,</span> <span class="n">commonMode</span><span class="o">=</span><span class="n">commonMode</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">actions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">criteria</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="c1"># instantiate default valuation domain</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;50.0&#39;</span><span class="p">)</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Min</span><span class="p">,</span><span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Med</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Max</span><span class="p">}</span>
        <span class="c1"># generate relation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructRelation</span><span class="p">(</span><span class="n">tb</span><span class="o">.</span><span class="n">criteria</span><span class="p">,</span><span class="n">tb</span><span class="o">.</span><span class="n">evaluation</span><span class="p">)</span>
        
        <span class="c1"># standard Digraph parameters initialization</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>



<div class="viewcode-block" id="RandomBipolarOutrankingDigraph">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.RandomBipolarOutrankingDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">RandomBipolarOutrankingDigraph</span><span class="p">(</span><span class="n">BipolarOutrankingDigraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialization of the BipolarOutrankingDigraph class for generating temporary Digraphs from RandomPerformanceTableau instances.</span>

<span class="sd">    *Parameters*:</span>
<span class="sd">       See :py:class:`randomPerfTabs.RandomPerformanceTableau` class.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">numberOfActions</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
                 <span class="n">numberOfCriteria</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
                 <span class="n">weightDistribution</span><span class="o">=</span><span class="s1">&#39;random&#39;</span><span class="p">,</span>
                 <span class="n">weightScale</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span>
                 <span class="n">commonScale</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">100.0</span><span class="p">],</span>
                 <span class="n">commonThresholds</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">10.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),(</span><span class="mf">20.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),(</span><span class="mf">80.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),(</span><span class="mf">80.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">)],</span>
                 <span class="n">commonMode</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;uniform&#39;</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">),</span>
                 <span class="n">hasBipolarVeto</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">Normalized</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">seed</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1"># generate random performance tableau</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="n">tb</span> <span class="o">=</span> <span class="n">RandomPerformanceTableau</span><span class="p">(</span><span class="n">numberOfActions</span><span class="o">=</span><span class="n">numberOfActions</span><span class="p">,</span>\
                                      <span class="n">numberOfCriteria</span><span class="o">=</span><span class="n">numberOfCriteria</span><span class="p">,</span>\
                                      <span class="n">weightDistribution</span><span class="o">=</span><span class="n">weightDistribution</span><span class="p">,</span>\
                                      <span class="n">weightScale</span><span class="o">=</span><span class="n">weightScale</span><span class="p">,</span>\
                                      <span class="n">commonScale</span><span class="o">=</span><span class="n">commonScale</span><span class="p">,</span>\
                                      <span class="n">commonThresholds</span> <span class="o">=</span> <span class="n">commonThresholds</span><span class="p">,</span>\
                                      <span class="n">commonMode</span><span class="o">=</span><span class="n">commonMode</span><span class="p">,</span>\
                                      <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">)</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">BipolarOutrankingDigraph</span><span class="p">(</span><span class="n">tb</span><span class="p">,</span><span class="n">Normalized</span><span class="o">=</span><span class="n">Normalized</span><span class="p">,</span>\
                                     <span class="n">hasBipolarVeto</span><span class="o">=</span><span class="n">hasBipolarVeto</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span></div>

        <span class="c1"># self.name = deepcopy(g.name)</span>
        <span class="c1"># self.actions = deepcopy(g.actions)</span>
        <span class="c1"># self.criteria = deepcopy(g.criteria)</span>
        <span class="c1"># self.evaluation = deepcopy(g.evaluation)</span>
        <span class="c1"># self.relation = deepcopy(g.relation)</span>
        <span class="c1"># self.valuationdomain = deepcopy(g.valuationdomain)</span>
        <span class="c1"># self.NA = deepcopy(g.NA)</span>
        <span class="c1"># self.order = len(self.actions)</span>
        <span class="c1"># self.gamma = self.gammaSets()</span>
        <span class="c1"># self.notGamma = self.notGammaSets()</span>

<div class="viewcode-block" id="RandomOutrankingDigraph">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.RandomOutrankingDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">RandomOutrankingDigraph</span><span class="p">(</span><span class="n">RandomBipolarOutrankingDigraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Dummy for obsolete RandomOutrankingDigraph Class</span>
<span class="sd">    &quot;&quot;&quot;</span></div>

        
<div class="viewcode-block" id="PolarisedOutrankingDigraph">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.PolarisedOutrankingDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">PolarisedOutrankingDigraph</span><span class="p">(</span><span class="n">PolarisedDigraph</span><span class="p">,</span><span class="n">OutrankingDigraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specilised :py:class:`digraphs.PolarisedDigraph` instance for Outranking Digraphs.</span>

<span class="sd">    .. warning::</span>

<span class="sd">        If called with argument *digraph=None*, a RandomBipolarOutrankingDigraph instance is generated first.</span>
<span class="sd">        </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">digraph</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">level</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">KeepValues</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">AlphaCut</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">StrictCut</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">copy</span>
        <span class="k">if</span> <span class="n">digraph</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">digraph</span> <span class="o">=</span> <span class="n">RandomBipolarOutrankingDigraph</span><span class="p">()</span>
        <span class="n">PolarisedDigraph</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">digraph</span><span class="o">=</span><span class="n">digraph</span><span class="p">,</span>
                                  <span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">,</span><span class="n">KeepValues</span><span class="o">=</span><span class="n">KeepValues</span><span class="p">,</span>
                                  <span class="n">AlphaCut</span><span class="o">=</span><span class="n">AlphaCut</span><span class="p">,</span><span class="n">StrictCut</span><span class="o">=</span><span class="n">StrictCut</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">evaluation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">NA</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">NA</span><span class="p">)</span>
        <span class="c1">#self.vetos = self.computeVetos(digraph,level)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vetos</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">vetos</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span></div>



<div class="viewcode-block" id="EquiSignificanceMajorityOutrankingDigraph">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.EquiSignificanceMajorityOutrankingDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">EquiSignificanceMajorityOutrankingDigraph</span><span class="p">(</span><span class="n">BipolarOutrankingDigraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameters:</span>
<span class="sd">        performanceTableau (fileName of valid py code)</span>

<span class="sd">    Specialization of the general OutrankingDigraph class for </span>
<span class="sd">    temporary outranking digraphs with equisignificant criteria.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">argPerfTab</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">coalition</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">copy</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">,</span> <span class="p">(</span><span class="n">PerformanceTableau</span><span class="p">,</span><span class="n">RandomPerformanceTableau</span><span class="p">)):</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">argPerfTab</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">argPerfTab</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">perfTab</span> <span class="o">=</span> <span class="n">RandomPerformanceTableau</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">perfTab</span> <span class="o">=</span> <span class="n">PerformanceTableau</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">)</span>
        <span class="c1">#self.performanceTableau = perfTab</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;eqsignmajrel_&#39;</span> <span class="o">+</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;+1&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;hasIntegerValuation&#39;</span><span class="p">:</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Min</span><span class="p">,</span><span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Med</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Max</span><span class="p">}</span>
        <span class="c1">#self.weightPreorder = perfTab.computeWeightPreorder()</span>
        <span class="k">if</span> <span class="n">coalition</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">criteria</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">criteria</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">coalition</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">])</span>
        <span class="c1">#self.relation = self._constructRelation(criteria,perfTab.evaluation, self.weightPreorder)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">criteria</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convertWeight2Decimal</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">evaluation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convertEvaluation2Decimal</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructRelation</span><span class="p">(</span><span class="n">perfTab</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="n">hasNoVeto</span><span class="p">)</span>
        <span class="n">methodData</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">methodData</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;valuationType&#39;</span><span class="p">:</span><span class="s1">&#39;integer&#39;</span><span class="p">,</span><span class="s1">&#39;variant&#39;</span><span class="p">:</span><span class="s1">&#39;bipolar&#39;</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">methodData</span> <span class="o">=</span> <span class="n">methodData</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">_constructRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">perfTab</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters:</span>
<span class="sd">            PerfTab.criteria, PerfTab.evaluation.</span>

<span class="sd">        Renders the biploar valued outranking relation from the data</span>
<span class="sd">        of a given performance tableau instantiation PerfTab.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Debug</span> <span class="o">=</span> <span class="kc">False</span>
        
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        
        <span class="n">weightPreorder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeWeightPreorder</span><span class="p">()</span>
        <span class="n">k</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">weightPreorder</span><span class="p">)</span>

        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">characteristicVector</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">characteristicVector</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="n">characteristicVector</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">characteristicVector</span><span class="p">)</span>
        <span class="n">coalitionsRelation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
            <span class="n">_g</span> <span class="o">=</span> <span class="n">BipolarOutrankingDigraph</span><span class="p">(</span><span class="n">perfTab</span><span class="p">,</span><span class="n">coalition</span><span class="o">=</span><span class="n">weightPreorder</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="n">hasNoVeto</span><span class="p">)</span>
            <span class="n">_g</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">coalitionsRelation</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">_g</span><span class="o">.</span><span class="n">relation</span>

        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="n">isPosStable</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">isNegStable</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">coalitionsRelation</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">isPosStable</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">if</span> <span class="n">coalitionsRelation</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">isNegStable</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="n">isPosStable</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                <span class="k">elif</span> <span class="n">isNegStable</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">relation</span></div>

                
<span class="c1"># ------------        </span>
<span class="k">class</span> <span class="nc">_OutrankingOddsDigraph</span><span class="p">(</span><span class="n">OutrankingDigraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameters:</span>
<span class="sd">        performanceTableau (fileName of valid py code)</span>

<span class="sd">    Specialization of the general OutrankingDigraph class for </span>
<span class="sd">    temporary outranking digraphs with odds valuation,</span>
<span class="sd">    i.e. ratio of the number of positive over the number</span>
<span class="sd">    of negative marginal outranking situations. </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">argPerfTab</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">copy</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">,</span> <span class="p">(</span><span class="n">PerformanceTableau</span><span class="p">,</span><span class="n">RandomPerformanceTableau</span><span class="p">)):</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">argPerfTab</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">argPerfTab</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">perfTab</span> <span class="o">=</span> <span class="n">RandomPerformanceTableau</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">perfTab</span> <span class="o">=</span> <span class="n">PerformanceTableau</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">)</span>
        <span class="c1">#self.performanceTableau = perfTab</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;eqsignmajrel_&#39;</span> <span class="o">+</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;Infinity&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;hasIntegerValuation&#39;</span><span class="p">:</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Min</span><span class="p">,</span><span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Med</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Max</span><span class="p">}</span>
        <span class="c1">#self.weightPreorder = perfTab.computeWeightPreorder()</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
       <span class="c1">#self.relation = self._constructRelation(criteria,perfTab.evaluation, self.weightPreorder)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">criteria</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convertWeight2Decimal</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">NA</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">NA</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">evaluation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convertEvaluation2Decimal</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructRelation</span><span class="p">()</span>
        <span class="n">methodData</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">methodData</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;valuationType&#39;</span><span class="p">:</span><span class="s1">&#39;exponential&#39;</span><span class="p">,</span><span class="s1">&#39;variant&#39;</span><span class="p">:</span><span class="s1">&#39;standard&#39;</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">methodData</span> <span class="o">=</span> <span class="n">methodData</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_constructRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters:</span>
<span class="sd">            PerfTab.criteria, PerfTab.evaluation.</span>

<span class="sd">        Renders the outranking ods relation from the data</span>
<span class="sd">        of a given performance tableau instantiation PerfTab.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">valuationdomain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span>
        <span class="n">NA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NA</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">vetos</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">negativeVetos</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">largePerformanceDifferencesCount</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">largePerformanceDifferencesCount</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="n">largePerformanceDifferencesCount</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;positive&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;negative&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">a</span> <span class="o">==</span> <span class="n">b</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">nc</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">criteria</span><span class="p">)</span>
                    <span class="n">concordance</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
                    <span class="n">discordance</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
                    <span class="n">veto</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="n">abvetos</span><span class="o">=</span><span class="p">[]</span>
                    <span class="n">negativeVeto</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="n">abNegativeVetos</span><span class="o">=</span><span class="p">[]</span>
                    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
                        <span class="n">criterion</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span> <span class="ow">and</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span><span class="p">:</span>		
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">indx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">indy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                    <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                                <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">ind</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">try</span><span class="p">:</span>    
                                <span class="n">wpx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">wpy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                    <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                                <span class="n">ind</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">prefx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">prefy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                    <span class="n">p</span> <span class="o">=</span> <span class="n">prefx</span> <span class="o">+</span> <span class="n">prefy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">p</span> <span class="o">=</span> <span class="n">prefx</span> <span class="o">+</span> <span class="n">prefy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>

                            <span class="k">if</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>    
                                <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>

                            <span class="n">lc0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localConcordance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
                            <span class="c1">#print &#39;a,b,c,w,d,ind,wp,p,localConcordance(d,ind,wp,p)&#39;,a,b,c,criteria[c][&#39;weight&#39;],d,ind,wp,p,lc0</span>
                            <span class="k">if</span> <span class="n">lc0</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                                <span class="n">concordance</span> <span class="o">=</span> <span class="n">concordance</span> <span class="o">+</span> <span class="p">(</span><span class="n">lc0</span> <span class="o">*</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
                            <span class="k">elif</span> <span class="n">lc0</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                                <span class="n">discordance</span> <span class="o">=</span> <span class="n">discordance</span> <span class="o">-</span> <span class="p">(</span><span class="n">lc0</span> <span class="o">*</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">wvx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">wvy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                    <span class="n">wv</span> <span class="o">=</span> <span class="n">wvx</span> <span class="o">+</span> <span class="n">wvy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">wv</span> <span class="o">=</span> <span class="n">wvx</span> <span class="o">+</span> <span class="n">wvy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">wv</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">vx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">vy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                    <span class="n">v</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">v</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">v</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="n">vetoindex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localVeto</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                            <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">vetoindex</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                                 <span class="n">abvetos</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">c</span><span class="p">,</span><span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">]))</span>
                                 <span class="n">largePerformanceDifferencesCount</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">][</span><span class="s1">&#39;negative&#39;</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
                                
                            <span class="n">negativeVetoindex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localNegativeVeto</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                            <span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">negativeVetoindex</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                                <span class="n">abNegativeVetos</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">c</span><span class="p">,</span><span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">]))</span>
                                <span class="n">largePerformanceDifferencesCount</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">][</span><span class="s1">&#39;positive&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                            <span class="c1">#if d &lt; -wv:</span>
                            <span class="c1">#    print &#39;d,wv,v,veto[c]&#39;,d,wv,v,veto[c] </span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">Min</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
                            <span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">Min</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
                    <span class="c1">#outrankindex = oddsindex</span>
                    <span class="n">oddsindex</span> <span class="o">=</span> <span class="n">concordance</span> <span class="o">/</span> <span class="n">discordance</span>

                    <span class="c1">## init vetoes lists and indexes</span>
                    <span class="c1">#abvetos=[]</span>
                    <span class="c1">#abNegativeVetos=[]</span>
                    <span class="n">vetoIndex</span> <span class="o">=</span> <span class="n">Med</span>
                    <span class="n">negativeVetoIndex</span> <span class="o">=</span> <span class="n">Med</span>
                    <span class="c1">## compute bipolar vetoes indexes</span>
                    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
                        <span class="n">vetoIndex</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">vetoIndex</span><span class="p">,</span><span class="n">veto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                        <span class="n">negativeVetoIndex</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">negativeVetoIndex</span><span class="p">,</span><span class="n">negativeVeto</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                    <span class="c1">#  contradictory vetoes</span>
                    <span class="k">if</span> <span class="n">vetoIndex</span> <span class="o">&gt;</span> <span class="n">Med</span> <span class="ow">and</span> <span class="n">negativeVetoIndex</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="c1">#abvetos.append((c,veto[c]))</span>
                        <span class="c1">#abNegativeVetos.append((c,negativeVeto[c]))</span>
                        <span class="n">outrankindex</span> <span class="o">=</span> <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
                    <span class="c1">#  veto</span>
                    <span class="k">elif</span> <span class="n">vetoIndex</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="c1">#abvetos.append((c,veto[c]))</span>
                        <span class="k">if</span> <span class="n">oddsindex</span> <span class="o">&gt;</span> <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]:</span>
                            <span class="n">outrankindex</span> <span class="o">=</span> <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">vetoIndex</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                                <span class="n">outrankindex</span> <span class="o">=</span> <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">outrankindex</span> <span class="o">=</span> <span class="n">oddsindex</span>
                    <span class="c1">#  dictator</span>
                    <span class="k">elif</span> <span class="n">negativeVetoIndex</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="c1">#abNegativeVetos.append((c,negativeVeto[c]))</span>
                        <span class="k">if</span> <span class="n">oddsindex</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                            <span class="n">outrankindex</span> <span class="o">=</span> <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">negativeVetoIndex</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                                <span class="n">outrankindex</span> <span class="o">=</span> <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">outrankindex</span> <span class="o">=</span> <span class="n">oddsindex</span>
                    <span class="k">if</span> <span class="n">abvetos</span> <span class="o">!=</span> <span class="p">[]:</span>
                        <span class="n">vetos</span><span class="o">.</span><span class="n">append</span><span class="p">(([</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">oddsindex</span><span class="p">],</span><span class="n">abvetos</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">abNegativeVetos</span> <span class="o">!=</span> <span class="p">[]:</span>
                        <span class="n">negativeVetos</span><span class="o">.</span><span class="n">append</span><span class="p">(([</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">oddsindex</span><span class="p">],</span><span class="n">abNegativeVetos</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">outrankindex</span> <span class="o">=</span> <span class="n">oddsindex</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">outrankindex</span>
                    <span class="c1">#print &#39;relation[a][b]&#39;, a,b, relation[a][b]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vetos</span> <span class="o">=</span> <span class="n">vetos</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">negativeVetos</span> <span class="o">=</span> <span class="n">negativeVetos</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">largePerformanceDifferencesCount</span> <span class="o">=</span> <span class="n">largePerformanceDifferencesCount</span>
        <span class="k">return</span> <span class="n">relation</span>

             
<span class="c1"># ------------</span>

<div class="viewcode-block" id="OrdinalOutrankingDigraph">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OrdinalOutrankingDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">OrdinalOutrankingDigraph</span><span class="p">(</span><span class="n">OutrankingDigraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameters:</span>
<span class="sd">        performanceTableau (fileName of valid py code)</span>

<span class="sd">    Specialization of the general OutrankingDigraph class for </span>
<span class="sd">    temporary ordinal outranking digraphs</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">argPerfTab</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">coalition</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generic constructor for many outranking digraph models.&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">copy</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">,</span> <span class="p">(</span><span class="n">PerformanceTableau</span><span class="p">,</span><span class="n">RandomPerformanceTableau</span><span class="p">)):</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">argPerfTab</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">argPerfTab</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">perfTab</span> <span class="o">=</span> <span class="n">RandomPerformanceTableau</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">perfTab</span> <span class="o">=</span> <span class="n">PerformanceTableau</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">performanceTableau</span> <span class="o">=</span> <span class="n">perfTab</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;rel_&#39;</span> <span class="o">+</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;50.0&#39;</span><span class="p">)</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Min</span><span class="p">,</span><span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Med</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Max</span><span class="p">}</span>
        <span class="c1">#self.weightPreorder = perfTab.computeWeightPreorder()</span>
        <span class="k">if</span> <span class="n">coalition</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">criteria</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">criteria</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">coalition</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">criteria</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convertWeight2Decimal</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">evaluation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">NA</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">NA</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convertEvaluation2Decimal</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructRelation</span><span class="p">(</span><span class="n">criteria</span><span class="p">,</span><span class="n">perfTab</span><span class="o">.</span><span class="n">evaluation</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="n">hasNoVeto</span><span class="p">)</span>
        <span class="n">methodData</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">methodData</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;valuationType&#39;</span><span class="p">:</span><span class="s1">&#39;decimal&#39;</span><span class="p">,</span><span class="s1">&#39;variant&#39;</span><span class="p">:</span><span class="s1">&#39;none&#39;</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">methodData</span> <span class="o">=</span> <span class="n">methodData</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
    

    <span class="k">def</span> <span class="nf">_constructRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">criteria</span><span class="p">,</span><span class="n">evaluation</span><span class="p">,</span><span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters:</span>
<span class="sd">            PerfTab.criteria, PerfTab.evaluation.</span>

<span class="sd">        Renders the biploar valued outranking relation from the data</span>
<span class="sd">        of a given performance tableau instantiation PerfTab.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Debug</span> <span class="o">=</span> <span class="kc">False</span>
        
        <span class="n">weightPreorder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeWeightPreorder</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;weightPreorder=&#39;</span><span class="p">,</span> <span class="n">weightPreorder</span><span class="p">)</span>
        <span class="c1">#  constructing the bipolar semiotical references lsr</span>
        <span class="n">lsr</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
            <span class="n">ci</span> <span class="o">=</span> <span class="n">c</span> <span class="o">+</span> <span class="s1">&#39;+&#39;</span>
            <span class="n">cj</span> <span class="o">=</span> <span class="n">c</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span>
            <span class="n">lsr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ci</span><span class="p">)</span>
            <span class="n">lsr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cj</span><span class="p">)</span>
        <span class="c1"># constructing the bipolar ordering of lsr</span>
        <span class="n">losr</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">k</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">weightPreorder</span><span class="p">:</span>
            <span class="n">lowp</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">lown</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">w</span><span class="p">:</span>
                <span class="n">wp</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="s1">&#39;+&#39;</span>
                <span class="n">wn</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span>
                <span class="n">lowp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">wp</span><span class="p">)</span>
                <span class="n">lown</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">wn</span><span class="p">)</span>
            <span class="n">losr</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">k</span><span class="p">,</span><span class="n">lowp</span><span class="p">))</span>
            <span class="n">losr</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="o">-</span><span class="n">k</span><span class="p">,</span><span class="n">lown</span><span class="p">))</span>
            <span class="n">k</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">losr</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;lsr&#39;</span><span class="p">,</span> <span class="n">lsr</span><span class="p">)</span>            
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;losr&#39;</span><span class="p">,</span> <span class="n">losr</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">NA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NA</span>
        <span class="c1"># computing weight distributions</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="c1"># positive distribution ----------------------</span>
                <span class="n">veto</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
                <span class="n">v</span> <span class="o">=</span> <span class="p">{}</span>	
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">lsr</span><span class="p">:</span>
                    <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
                    <span class="n">criterion</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span> <span class="ow">and</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">indx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">indy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                            <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                            <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="n">ind</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="k">try</span><span class="p">:</span>    
                            <span class="n">wpx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">wpy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                            <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                            <span class="n">ind</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">prefx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">prefy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                            <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                <span class="n">p</span> <span class="o">=</span> <span class="n">prefx</span> <span class="o">+</span> <span class="n">prefy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">p</span> <span class="o">=</span> <span class="n">prefx</span> <span class="o">+</span> <span class="n">prefy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>
                                                    
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">wvx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">wvy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                            <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                <span class="n">wvv</span> <span class="o">=</span> <span class="n">wvx</span> <span class="o">+</span> <span class="n">wvy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">wvv</span> <span class="o">=</span> <span class="n">wvx</span> <span class="o">+</span> <span class="n">wvy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="n">wvv</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="k">if</span> <span class="n">hasNoVeto</span><span class="p">:</span>
                            <span class="n">wvv</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">vx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">vy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                            <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                <span class="n">vv</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">vv</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="n">vv</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="k">if</span> <span class="n">hasNoVeto</span><span class="p">:</span>
                            <span class="n">vv</span> <span class="o">=</span> <span class="kc">None</span>
                            
                        <span class="k">if</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                            <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>

                        <span class="n">veto</span> <span class="o">=</span> <span class="n">veto</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localVeto</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">wvv</span><span class="p">,</span><span class="n">vv</span><span class="p">)</span>
                        <span class="n">counter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localConcordance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--&gt; c,a,b,evaluation[c][a],evaluation[c][b], d&#39;</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">],</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">],</span> <span class="n">d</span><span class="p">)</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ind, wp, p, counter, veto&#39;</span><span class="p">,</span> <span class="n">ind</span><span class="p">,</span> <span class="n">wp</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">counter</span><span class="p">,</span> <span class="n">veto</span><span class="p">)</span>
                        
                        <span class="n">v</span><span class="p">[</span><span class="n">c</span> <span class="o">+</span> <span class="s1">&#39;+&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">c</span> <span class="o">+</span> <span class="s1">&#39;+&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">counter</span>
                        <span class="n">v</span><span class="p">[</span><span class="n">c</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">c</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span> <span class="o">-</span> <span class="n">counter</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">v</span><span class="p">[</span><span class="n">c</span> <span class="o">+</span> <span class="s1">&#39;+&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">c</span> <span class="o">+</span> <span class="s1">&#39;+&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.5&#39;</span><span class="p">)</span>
                        <span class="n">v</span><span class="p">[</span><span class="n">c</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">c</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.5&#39;</span><span class="p">)</span>
                <span class="n">da</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">losr</span><span class="p">:</span>
                    <span class="n">d</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">w</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                        <span class="n">d</span> <span class="o">=</span> <span class="n">d</span> <span class="o">+</span> <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> 
                    <span class="n">da</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">w</span><span class="p">,</span> <span class="n">d</span><span class="p">))</span>
                <span class="n">nc</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">losr</span><span class="p">)</span>
                <span class="n">dcd</span> <span class="o">=</span> <span class="p">[</span><span class="n">da</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
                <span class="n">k</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">while</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">nc</span><span class="p">:</span>
                    <span class="n">dcv</span> <span class="o">=</span> <span class="n">dcd</span><span class="p">[</span><span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">da</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">dcd</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">da</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">dcv</span><span class="p">))</span>
                    <span class="n">k</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;dcd&#39;</span><span class="p">,</span> <span class="n">dcd</span><span class="p">)</span>
                <span class="c1"># negative distribution	 ------------------------</span>
                <span class="n">vn</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">lsr</span><span class="p">:</span>
                    <span class="n">vn</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
                    <span class="n">criterion</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span> <span class="ow">and</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">indx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">indy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                            <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                            <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="n">ind</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="k">try</span><span class="p">:</span>    
                            <span class="n">wpx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">wpy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                            <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                            <span class="n">ind</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>

                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">prefx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">prefy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                            <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                <span class="n">p</span> <span class="o">=</span> <span class="n">prefx</span> <span class="o">+</span> <span class="n">prefy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">p</span> <span class="o">=</span> <span class="n">prefx</span> <span class="o">+</span> <span class="n">prefy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>
                        
                        <span class="k">if</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                            <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                            
                        <span class="n">counter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localConcordance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
                            
                        <span class="n">vn</span><span class="p">[</span><span class="n">c</span> <span class="o">+</span> <span class="s1">&#39;+&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vn</span><span class="p">[</span><span class="n">c</span> <span class="o">+</span> <span class="s1">&#39;+&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">counter</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                        <span class="n">vn</span><span class="p">[</span><span class="n">c</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vn</span><span class="p">[</span><span class="n">c</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">counter</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">vn</span><span class="p">[</span><span class="n">c</span> <span class="o">+</span> <span class="s1">&#39;+&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vn</span><span class="p">[</span><span class="n">c</span> <span class="o">+</span> <span class="s1">&#39;+&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.5&#39;</span><span class="p">)</span>
                        <span class="n">vn</span><span class="p">[</span><span class="n">c</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vn</span><span class="p">[</span><span class="n">c</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.5&#39;</span><span class="p">)</span>
                <span class="n">dan</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">losr</span><span class="p">:</span>
                    <span class="n">d</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">w</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                        <span class="n">d</span> <span class="o">=</span> <span class="n">d</span> <span class="o">+</span> <span class="n">vn</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="n">dan</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">w</span><span class="p">,</span> <span class="n">d</span><span class="p">))</span>
                <span class="n">nc</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">losr</span><span class="p">)</span>
                <span class="n">dcg</span> <span class="o">=</span> <span class="p">[</span><span class="n">dan</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
                <span class="n">k</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">while</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">nc</span><span class="p">:</span>
                    <span class="n">dcv</span> <span class="o">=</span> <span class="n">dcg</span><span class="p">[</span><span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">dan</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">dcg</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">dan</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">dcv</span><span class="p">))</span>
                    <span class="n">k</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;dcg&#39;</span> <span class="p">,</span> <span class="n">dcg</span><span class="p">)</span>
                <span class="c1">#  first order stochastic dominance</span>
                <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nc</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">dcd</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">dcg</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                        <span class="k">break</span>
                    <span class="k">elif</span> <span class="n">dcd</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">dcg</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                        <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span>  <span class="n">nc</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">j</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">veto</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                    <span class="k">elif</span> <span class="n">veto</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                        
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nc</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">dcd</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">dcg</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                            <span class="k">break</span>
                        <span class="k">elif</span> <span class="n">dcd</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">dcg</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                            <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="n">nc</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">j</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">veto</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">):</span>
                            <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                        <span class="k">elif</span> <span class="n">veto</span> <span class="o">&lt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">):</span>
                            <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">veto</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                            <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
        <span class="k">return</span> <span class="n">relation</span>

    <span class="k">def</span> <span class="nf">_localConcordance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters:</span>
<span class="sd">            | d := diff observed, h := indifference threshold,</span>
<span class="sd">            | p := prefrence threshold.</span>

<span class="sd">        Renders the concordance index per criterion.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Debug</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ordinal concordance locla concordance&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;d,ind,wp,p&#39;</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span>   <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="n">p</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">ind</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="n">ind</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.5&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">wp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="o">-</span><span class="n">wp</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.5&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.0&quot;</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.5&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ind</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="n">ind</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">wp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="o">-</span><span class="n">wp</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.0&quot;</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_localVeto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">wv</span><span class="p">,</span><span class="n">v</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters: d := diff observed, v := veto threshold.</span>
<span class="sd">        Renders the local veto state</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span>  <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span> <span class="n">v</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">wv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span> <span class="n">wv</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.5&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>        
        <span class="k">elif</span> <span class="n">wv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="n">wv</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.5&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span></div>



<div class="viewcode-block" id="UnanimousOutrankingDigraph">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.UnanimousOutrankingDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">UnanimousOutrankingDigraph</span><span class="p">(</span><span class="n">OutrankingDigraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameters:</span>
<span class="sd">        performanceTableau (fileName of valid py code)</span>

<span class="sd">    Specialization of the general OutrankingDigraph class for </span>
<span class="sd">    temporary unanimous outranking digraphs</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">argPerfTab</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">coalition</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generic constructor for many outranking digraph models.&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">copy</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">,</span> <span class="p">(</span><span class="n">PerformanceTableau</span><span class="p">,</span><span class="n">RandomPerformanceTableau</span><span class="p">)):</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">argPerfTab</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">argPerfTab</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">perfTab</span> <span class="o">=</span> <span class="n">RandomPerformanceTableau</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">perfTab</span> <span class="o">=</span> <span class="n">PerformanceTableau</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">performanceTableau</span> <span class="o">=</span> <span class="n">perfTab</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;rel_&#39;</span> <span class="o">+</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;50.0&#39;</span><span class="p">)</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Min</span><span class="p">,</span><span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Med</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Max</span><span class="p">}</span>
        <span class="c1">#self.weightPreorder = perfTab.computeWeightPreorder()</span>
        <span class="k">if</span> <span class="n">coalition</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">criteria</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">criteria</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">coalition</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">criteria</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convertWeight2Decimal</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">evaluation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">NA</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">NA</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convertEvaluation2Decimal</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructRelation</span><span class="p">(</span><span class="n">criteria</span><span class="p">,</span><span class="n">perfTab</span><span class="o">.</span><span class="n">evaluation</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="n">hasNoVeto</span><span class="p">)</span>
        <span class="n">methodData</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">methodData</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;valuationType&#39;</span><span class="p">:</span><span class="s1">&#39;decimal&#39;</span><span class="p">,</span><span class="s1">&#39;variant&#39;</span><span class="p">:</span><span class="s1">&#39;none&#39;</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">methodData</span> <span class="o">=</span> <span class="n">methodData</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_constructRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">criteria</span><span class="p">,</span><span class="n">evaluation</span><span class="p">,</span><span class="n">hasSymmetricThresholds</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters: PerfTab.criteria, PerfTab.evaluation.</span>
<span class="sd">        Renders the biploar valued outranking relation from the data</span>
<span class="sd">        of a given performance tableau instantiation PerfTab.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">NA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NA</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="n">nc</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">criteria</span><span class="p">)</span>
                <span class="n">nvc</span> <span class="o">=</span> <span class="n">nc</span>
                <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">veto</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
                    <span class="n">criterion</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">c</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span> <span class="ow">and</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span><span class="p">:</span>
                        <span class="c1">#d = evaluation[c][a] - evaluation[c][b]</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">indx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">indy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                            <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">ind</span> <span class="o">=</span> <span class="n">indx</span> <span class="o">+</span><span class="n">indy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                            <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="n">ind</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="k">try</span><span class="p">:</span>    
                            <span class="n">wpx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">wpy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                            <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                            <span class="n">ind</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">prefx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">prefy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                            <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                <span class="n">p</span> <span class="o">=</span> <span class="n">prefx</span> <span class="o">+</span> <span class="n">prefy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">p</span> <span class="o">=</span> <span class="n">prefx</span> <span class="o">+</span> <span class="n">prefy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>
                            
                        <span class="k">if</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>    
                            <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">d</span> <span class="o">=</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                            
                        <span class="n">lc0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localConcordance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
                            
                        <span class="n">counter</span> <span class="o">+=</span> <span class="n">lc0</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">hasNoVeto</span><span class="p">:</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">vx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">vy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">hasSymmetricThresholds</span><span class="p">:</span>
                                    <span class="n">v</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">b</span><span class="p">]))</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">v</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                                <span class="n">veto</span> <span class="o">=</span> <span class="n">veto</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localVeto</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">veto</span> <span class="o">=</span> <span class="n">veto</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">nvc</span> <span class="o">=</span> <span class="n">nvc</span> <span class="o">-</span> <span class="mi">1</span>
                        <span class="c1"># under the universality condition nvc not to be used.</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">hasNoVeto</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">veto</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">counter</span> <span class="o">==</span>  <span class="n">nc</span><span class="p">:</span>
                            <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                        <span class="k">elif</span> <span class="n">counter</span> <span class="o">==</span> <span class="o">-</span><span class="n">nc</span><span class="p">:</span>
                            <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">counter</span> <span class="o">==</span>  <span class="n">nc</span><span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                    <span class="k">elif</span> <span class="n">counter</span> <span class="o">==</span> <span class="o">-</span><span class="n">nc</span><span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
                    
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
        <span class="k">return</span> <span class="n">relation</span>

    <span class="k">def</span> <span class="nf">_localConcordance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters: d := diff observed, h := indifference threshold,</span>
<span class="sd">        p := prefrence threshold.</span>
<span class="sd">        Renders the concordance index per criterion.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Debug</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ordinal concordance locla concordance&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;d,ind,wp,p&#39;</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span><span class="n">ind</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span>   <span class="n">d</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="n">p</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">ind</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="n">ind</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">wp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="o">-</span><span class="n">wp</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;-1.0&quot;</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ind</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="n">ind</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">wp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="o">-</span><span class="n">wp</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.0&quot;</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>

            

    <span class="k">def</span> <span class="nf">_localVeto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters: d := diff observed, v := veto threshold.</span>
<span class="sd">        Renders the local veto state</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span>  <span class="n">d</span> <span class="o">&gt;</span> <span class="o">-</span><span class="n">v</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;1&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="RobustOutrankingDigraph">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.RobustOutrankingDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">RobustOutrankingDigraph</span><span class="p">(</span><span class="n">BipolarOutrankingDigraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    *Parameters*:</span>
<span class="sd">        performanceTableau (fileName or valid py code)</span>

<span class="sd">    Specialization of the general OutrankingDigraph class for </span>
<span class="sd">    new robustness analysis distinguishing between three nested stability levels:</span>
<span class="sd">    </span>
<span class="sd">        * +4 (resp. -4) : unanimous outranking (resp. outranked;</span>
<span class="sd">        * +3 (resp. -3) : majority outranking (resp. outranked) situation</span>
<span class="sd">          in all coalitions of equi-ignificant citeria;</span>
<span class="sd">        * +2 (resp. -2) : validated outranking (resp. outranked) situation</span>
<span class="sd">          with all potential weights compatible with the criteria significance preorder;</span>
<span class="sd">        * +1 (resp. -1) : validated outranking (resp. outranked) situation with</span>
<span class="sd">          the given criteria significances;</span>
<span class="sd">        * 0 : indeterminate preferential situation-</span>

<span class="sd">    *Sematics*:</span>
<span class="sd">    </span>
<span class="sd">        * alternative *x* robustly outranks alternative *y* when the</span>
<span class="sd">          outranking situation is qualified greater or equal to level +2</span>
<span class="sd">          and there is no considerable counter-performance</span>
<span class="sd">          observed on a discordant criteria;</span>
<span class="sd">        * alternative *x* robustly does not outrank alternative *y* when the</span>
<span class="sd">          outranking situation is qualified lower or equal to level -2</span>
<span class="sd">          and there is no considerable performance</span>
<span class="sd">          observed on a discordant criteria.</span>

<span class="sd">    *Usage example*:</span>

<span class="sd">    &gt;&gt;&gt; from outrankingDigraphs import *</span>
<span class="sd">    &gt;&gt;&gt; t = RandomPerformanceTableau(numberOfActions=7,weightDistribution=&#39;random&#39;,seed=100)</span>
<span class="sd">    &gt;&gt;&gt; t.showPerformanceTableau()</span>
<span class="sd">     *----  performance tableau -----*</span>
<span class="sd">     Criteria |  &#39;g1&#39;    &#39;g2&#39;    &#39;g3&#39;    &#39;g4&#39;    &#39;g5&#39;    &#39;g6&#39;    &#39;g7&#39;   </span>
<span class="sd">     Actions  |    4       6       2       7       4       4       2    </span>
<span class="sd">     ---------|-------------------------------------------------------</span>
<span class="sd">       &#39;a1&#39;   | 44.51   43.90   19.10   16.22   14.81   45.49   41.66  </span>
<span class="sd">       &#39;a2&#39;   |   NA    38.75   27.73   21.53   79.70   22.03   12.82  </span>
<span class="sd">       &#39;a3&#39;   | 58.00   35.84   41.46   51.16   67.48   33.83   21.92  </span>
<span class="sd">       &#39;a4&#39;   | 24.22   29.12   22.41     NA    13.97   31.83   75.74  </span>
<span class="sd">       &#39;a5&#39;   | 29.10   34.79   21.52   39.35     NA    69.98   15.45  </span>
<span class="sd">       &#39;a6&#39;   | 96.58   62.22   56.90   32.06   80.16   48.80    6.05  </span>
<span class="sd">       &#39;a7&#39;   | 82.29   44.23   46.37   47.67   69.62   82.88    9.96  </span>
<span class="sd">    &gt;&gt;&gt; t.showWeightPreorder()</span>
<span class="sd">     *------- weights preordering --------*</span>
<span class="sd">     [&#39;g3&#39;, &#39;g7&#39;] (2) &lt;</span>
<span class="sd">     [&#39;g1&#39;, &#39;g5&#39;, &#39;g6&#39;] (4) &lt;</span>
<span class="sd">     [&#39;g2&#39;] (6) &lt;</span>
<span class="sd">     [&#39;g4&#39;] (7)</span>
<span class="sd">    &gt;&gt;&gt; g = RobustOutrankingDigraph(t)</span>
<span class="sd">    &gt;&gt;&gt; g</span>
<span class="sd">     *------- Object instance description ------*</span>
<span class="sd">     Instance class      : RobustOutrankingDigraph</span>
<span class="sd">     Instance name       : robust_randomperftab</span>
<span class="sd">     Actions             : 7</span>
<span class="sd">     Criteria            : 7</span>
<span class="sd">     Size                : 19</span>
<span class="sd">     Determinateness (%) : 67.53</span>
<span class="sd">     Valuation domain    : [-1.00;1.00]</span>
<span class="sd">     Attributes          : [&#39;name&#39;, &#39;methodData&#39;, &#39;actions&#39;,</span>
<span class="sd">                            &#39;order&#39;, &#39;criteria&#39;, &#39;evaluation&#39;,</span>
<span class="sd">                            &#39;vetos&#39;, &#39;valuationdomain&#39;, &#39;relation&#39;,</span>
<span class="sd">                            &#39;concordanceRelation&#39;,</span>
<span class="sd">                            &#39;largePerformanceDifferencesCount&#39;,</span>
<span class="sd">                            &#39;ordinalRelation&#39;, &#39;equisignificantRelation&#39;,</span>
<span class="sd">                            &#39;unanimousRelation&#39;, &#39;stability&#39;,</span>
<span class="sd">                            &#39;gamma&#39;, &#39;notGamma&#39;]</span>
<span class="sd">    &gt;&gt;&gt; g.showRelationTable(StabilityDenotation=True)</span>
<span class="sd">     * ---- Relation Table -----</span>
<span class="sd">     r/(stab) |  &#39;a1&#39;   &#39;a2&#39;   &#39;a3&#39;   &#39;a4&#39;   &#39;a5&#39;   &#39;a6&#39;   &#39;a7&#39;   </span>
<span class="sd">     ---------|------------------------------------------------------------</span>
<span class="sd">       &#39;a1&#39;   |    +1.00  -0.03  -0.17  +0.55  +0.00  -0.72  -0.45  </span>
<span class="sd">              |   (+4)   (-2)   (-2)   (+2)   (+1)   (-2)   (-2)  </span>
<span class="sd">       &#39;a2&#39;   |   +0.03   +1.00  -0.17  +0.21  -0.10  -0.45  -0.45  </span>
<span class="sd">              |   (+2)   (+4)   (-2)   (+2)   (-2)   (-2)   (-2)  </span>
<span class="sd">       &#39;a3&#39;   |   +0.17  +0.38   +1.00  +0.62  +0.59  +0.00  +0.00  </span>
<span class="sd">              |   (+2)   (+2)   (+4)   (+2)   (+2)   (-1)   (-1)  </span>
<span class="sd">       &#39;a4&#39;   |   -0.21  -0.21  -0.34   +1.00  -0.21  -0.62  -0.62  </span>
<span class="sd">              |   (-2)   (-2)   (-2)   (+4)   (-2)   (-2)   (-2)  </span>
<span class="sd">       &#39;a5&#39;   |   +0.03  +0.38  -0.17  +0.48   +1.00  +0.03  -0.72  </span>
<span class="sd">              |   (+2)   (+2)   (-2)   (+2)   (+4)   (+2)   (-2)  </span>
<span class="sd">       &#39;a6&#39;   |   +0.86  +0.72  +0.00  +0.62  -0.03   +1.00  +0.00  </span>
<span class="sd">              |   (+2)   (+2)   (+1)   (+2)   (-2)   (+4)   (+1)  </span>
<span class="sd">       &#39;a7&#39;   |   +0.86  +0.52  +0.62  +0.62  +0.72  +0.00   +1.00  </span>
<span class="sd">              |   (+2)   (+2)   (+2)   (+2)   (+2)   (-1)   (+4)  </span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filePerfTab</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        
        <span class="kn">import</span> <span class="nn">copy</span>
        
        <span class="k">if</span> <span class="n">filePerfTab</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">filePerfTab</span> <span class="o">=</span> <span class="s1">&#39;randomPerf&#39;</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">RandomPerformanceTableau</span><span class="p">()</span>
            <span class="n">t</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filePerfTab</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;newrobust_randomPerf&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;robust_&#39;</span> <span class="o">+</span> <span class="n">filePerfTab</span><span class="o">.</span><span class="n">name</span>
        <span class="n">cardinal</span> <span class="o">=</span> <span class="n">BipolarOutrankingDigraph</span><span class="p">(</span><span class="n">filePerfTab</span><span class="p">,</span><span class="n">Normalized</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">WithConcordanceRelation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">WithVetoCounts</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">ordinal</span>  <span class="o">=</span> <span class="n">OrdinalOutrankingDigraph</span><span class="p">(</span><span class="n">filePerfTab</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="n">hasNoVeto</span><span class="p">)</span>
        <span class="n">ordinal</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">equisignificant</span> <span class="o">=</span> <span class="n">EquiSignificanceMajorityOutrankingDigraph</span><span class="p">(</span><span class="n">filePerfTab</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="n">hasNoVeto</span><span class="p">)</span>
        <span class="n">equisignificant</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">unanimous</span> <span class="o">=</span> <span class="n">UnanimousOutrankingDigraph</span><span class="p">(</span><span class="n">filePerfTab</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="n">hasNoVeto</span><span class="p">)</span>
        <span class="n">unanimous</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;unanimous&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">unanimous</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
            <span class="n">unanimous</span><span class="o">.</span><span class="n">showRelationTable</span><span class="p">(</span><span class="n">hasIntegerValuation</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;equisignificant&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">equisignificant</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
            <span class="n">equisignificant</span><span class="o">.</span><span class="n">showRelationTable</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ordinal&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">ordinal</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
            <span class="n">ordinal</span><span class="o">.</span><span class="n">showRelationTable</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;cardinal&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">cardinal</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
            <span class="n">cardinal</span><span class="o">.</span><span class="n">showRelationTable</span><span class="p">(</span><span class="n">hasLPDDenotation</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">cardinal</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">methodData</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">cardinal</span><span class="o">.</span><span class="n">methodData</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">cardinal</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">cardinal</span><span class="o">.</span><span class="n">objectives</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">cardinal</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">cardinal</span><span class="o">.</span><span class="n">evaluation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">NA</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">cardinal</span><span class="o">.</span><span class="n">NA</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vetos</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">cardinal</span><span class="o">.</span><span class="n">vetos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">cardinal</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">cardinal</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">concordanceRelation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">cardinal</span><span class="o">.</span><span class="n">concordanceRelation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">largePerformanceDifferencesCount</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">cardinal</span><span class="o">.</span><span class="n">largePerformanceDifferencesCount</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ordinalRelation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">ordinal</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">equisignificantRelation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">equisignificant</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unanimousRelation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">unanimous</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stability</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructRelation</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">showRelationTable</span><span class="p">(</span><span class="n">hasStabilityDenotation</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_constructRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Help method for constructing robust outranking relation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Debug</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">unanimousRelation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unanimousRelation</span>
        <span class="n">equisignificantRelation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">equisignificantRelation</span>
        <span class="n">ordinalRelation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ordinalRelation</span>
        <span class="n">concordanceRelation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">concordanceRelation</span>
        
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
            
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">One</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
        <span class="n">MinusOne</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;-1&quot;</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">stability</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">stability</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">b</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">unanimousRelation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">==</span> <span class="n">One</span><span class="p">:</span>
                        <span class="n">stability</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="n">unanimousRelation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">==</span> <span class="n">MinusOne</span><span class="p">:</span>
                        <span class="n">stability</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">4</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="n">equisignificantRelation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">==</span> <span class="n">One</span><span class="p">:</span>
                        <span class="n">stability</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="n">equisignificantRelation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">==</span> <span class="n">MinusOne</span><span class="p">:</span>
                        <span class="n">stability</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>                        
                    <span class="k">elif</span> <span class="n">ordinalRelation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">==</span> <span class="n">One</span><span class="p">:</span>
                        <span class="n">stability</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="n">ordinalRelation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">==</span> <span class="n">MinusOne</span><span class="p">:</span>
                        <span class="n">stability</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="n">concordanceRelation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">stability</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
                    <span class="k">elif</span> <span class="n">concordanceRelation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">stability</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">stability</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">stability</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
        <span class="k">return</span> <span class="n">stability</span>

<div class="viewcode-block" id="RobustOutrankingDigraph.showRelationTable">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.RobustOutrankingDigraph.showRelationTable">[docs]</a>
    <span class="k">def</span> <span class="nf">showRelationTable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">IntegerValues</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">actionsSubset</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">rankingRule</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">Sorted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                          <span class="n">hasLPDDenotation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">StabilityDenotation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                          <span class="n">hasLatexFormat</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">hasIntegerValuation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">relation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">ReflexiveTerms</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        prints the relation valuation in actions X actions table format by default with</span>
<span class="sd">        the stability denotation in brackets:</span>

<span class="sd">        +4 | -4 : unanimous outranking | outranked situation;</span>

<span class="sd">        +3 | -3 : validated outranking | outranked situation in each coalition</span>
<span class="sd">        of equisignificant criteria;</span>

<span class="sd">        +2 | -2 : outranking | outranked situation validated with all potential significance weights</span>
<span class="sd">        that are compatible with the given significance preorder;</span>

<span class="sd">        +1 | -1 : validated outranking | outranked situation with the given significance weights;</span>

<span class="sd">        0 : indeterminate relational situation.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">OutrankingDigraph</span><span class="o">.</span><span class="n">showRelationTable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                          <span class="n">IntegerValues</span><span class="o">=</span><span class="n">IntegerValues</span><span class="p">,</span>
                          <span class="n">actionsSubset</span><span class="o">=</span> <span class="n">actionsSubset</span><span class="p">,</span>
                          <span class="n">rankingRule</span><span class="o">=</span><span class="n">rankingRule</span><span class="p">,</span>
                          <span class="n">Sorted</span><span class="o">=</span><span class="n">Sorted</span><span class="p">,</span>
                          <span class="n">hasLPDDenotation</span><span class="o">=</span><span class="n">hasLPDDenotation</span><span class="p">,</span>
                          <span class="n">StabilityDenotation</span><span class="o">=</span><span class="n">StabilityDenotation</span><span class="p">,</span>
                          <span class="n">hasLatexFormat</span><span class="o">=</span><span class="n">hasLatexFormat</span><span class="p">,</span>
                          <span class="n">hasIntegerValuation</span><span class="o">=</span><span class="n">hasIntegerValuation</span><span class="p">,</span>
                          <span class="n">relation</span><span class="o">=</span><span class="n">relation</span><span class="p">,</span>
                          <span class="n">ReflexiveTerms</span><span class="o">=</span><span class="n">ReflexiveTerms</span><span class="p">)</span></div>
</div>


<div class="viewcode-block" id="OldRobustOutrankingDigraph">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OldRobustOutrankingDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">OldRobustOutrankingDigraph</span><span class="p">(</span><span class="n">BipolarOutrankingDigraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameters:</span>
<span class="sd">        performanceTableau (fileName of valid py code)</span>

<span class="sd">    Specialization of the general OutrankingDigraph class for </span>
<span class="sd">    robustness analysis distinguishing 3 levels of stability.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filePerfTab</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        
        <span class="kn">import</span> <span class="nn">copy</span>
        
        <span class="k">if</span> <span class="n">filePerfTab</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">filePerfTab</span> <span class="o">=</span> <span class="s1">&#39;randomPerf&#39;</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">RandomPerformanceTableau</span><span class="p">()</span>
            <span class="n">t</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filePerfTab</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;robust_randomPerf&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;robust_&#39;</span> <span class="o">+</span> <span class="n">filePerfTab</span><span class="o">.</span><span class="n">name</span>
        <span class="n">cardinal</span> <span class="o">=</span> <span class="n">BipolarOutrankingDigraph</span><span class="p">(</span><span class="n">filePerfTab</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="n">hasNoVeto</span><span class="p">)</span>
        <span class="n">ordinal</span>  <span class="o">=</span> <span class="n">OrdinalOutrankingDigraph</span><span class="p">(</span><span class="n">filePerfTab</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="n">hasNoVeto</span><span class="p">)</span>
        <span class="n">unanimous</span> <span class="o">=</span> <span class="n">UnanimousOutrankingDigraph</span><span class="p">(</span><span class="n">filePerfTab</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="n">hasNoVeto</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;unanimous&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">unanimous</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
            <span class="n">unanimous</span><span class="o">.</span><span class="n">showRelationTable</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ordinal&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">ordinal</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
            <span class="n">ordinal</span><span class="o">.</span><span class="n">showRelationTable</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;cardinal&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">cardinal</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
            <span class="n">cardinal</span><span class="o">.</span><span class="n">showRelationTable</span><span class="p">()</span>
            
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">cardinal</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">methodData</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">cardinal</span><span class="o">.</span><span class="n">methodData</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">cardinal</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">cardinal</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">cardinal</span><span class="o">.</span><span class="n">evaluation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">NA</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">cardinal</span><span class="o">.</span><span class="n">NA</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vetos</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">cardinal</span><span class="o">.</span><span class="n">vetos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;-3&quot;</span><span class="p">),</span> <span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">),</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;3&quot;</span><span class="p">)}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cardinalRelation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">cardinal</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cardinalValuationdomain</span> <span class="o">=</span>  <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">cardinal</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructRelation</span><span class="p">(</span><span class="n">unanimous</span><span class="p">,</span> <span class="n">ordinal</span><span class="p">,</span> <span class="n">cardinal</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="n">hasNoVeto</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_constructRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unanimous</span><span class="p">,</span> <span class="n">ordinal</span><span class="p">,</span> <span class="n">cardinal</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters: normal -, ordinal -, and unanimous outranking relation.</span>
<span class="sd">        Help method for constructing robust outranking relation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Debug</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
            
        <span class="n">uMin</span> <span class="o">=</span> <span class="n">unanimous</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">uMed</span> <span class="o">=</span> <span class="n">unanimous</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">uMax</span> <span class="o">=</span> <span class="n">unanimous</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        
        <span class="n">oMin</span> <span class="o">=</span> <span class="n">ordinal</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">oMed</span> <span class="o">=</span> <span class="n">ordinal</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">oMax</span> <span class="o">=</span> <span class="n">ordinal</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        
        <span class="n">cMin</span> <span class="o">=</span> <span class="n">cardinal</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">cMed</span> <span class="o">=</span> <span class="n">cardinal</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">cMax</span> <span class="o">=</span> <span class="n">cardinal</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        
        <span class="n">rMin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">rMed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">rMax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span> 
      
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">b</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">unanimous</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">==</span> <span class="n">uMax</span><span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">rMax</span>
                    <span class="k">elif</span> <span class="n">unanimous</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">==</span> <span class="n">uMin</span><span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">rMin</span>
                    <span class="k">elif</span> <span class="n">ordinal</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">==</span> <span class="n">oMax</span><span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2.0&#39;</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">ordinal</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">==</span> <span class="n">oMin</span><span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-2.0&#39;</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">cardinal</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">cMed</span><span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">cardinal</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">cMed</span><span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">rMed</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">rMed</span>
                    
        <span class="k">return</span> <span class="n">relation</span>

<div class="viewcode-block" id="OldRobustOutrankingDigraph.showRelationTable">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OldRobustOutrankingDigraph.showRelationTable">[docs]</a>
    <span class="k">def</span> <span class="nf">showRelationTable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; specialisation for integer values &quot;&quot;&quot;</span>

        <span class="n">Digraph</span><span class="o">.</span><span class="n">showRelationTable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">IntegerValues</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>



<div class="viewcode-block" id="OldRobustOutrankingDigraph.saveAMPLDataFile">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OldRobustOutrankingDigraph.saveAMPLDataFile">[docs]</a>
    <span class="k">def</span> <span class="nf">saveAMPLDataFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">,</span><span class="n">Unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        save the ampl reverse data for cplex</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">nc</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">)</span>
        
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">fileName</span> <span class="o">=</span> <span class="s1">&#39;amplReverse&#39;</span><span class="o">+</span><span class="n">name</span><span class="o">+</span><span class="s1">&#39;.dat&#39;</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;data;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;set CRITERIA := &#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nc</span><span class="p">):</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
        
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;set ALLPAIRS := </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">Unique</span><span class="p">:</span>
            <span class="n">pairwiseComparison</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                        <span class="n">xy</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                        <span class="n">lineString</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nc</span><span class="p">):</span>
                            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeCriterionRelation</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
                            <span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">value</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;1.0&quot;</span><span class="p">))</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;2.0&quot;</span><span class="p">)</span>
                            <span class="n">lineString</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%.1f</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">value</span><span class="p">)</span>
                        <span class="n">pairwiseComparison</span><span class="p">[</span><span class="n">xy</span><span class="p">]</span> <span class="o">=</span> <span class="n">lineString</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pairwiseComparison</span> <span class="o">=</span> <span class="n">pairwiseComparison</span>
        
        <span class="n">p2</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">pm2</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">pm1</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">p0</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">Unique</span><span class="p">:</span>
            <span class="n">setP2</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="n">setPm2</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="n">setP1</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="n">setPm1</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="n">setP0</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="n">count2</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">countm2</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">count1</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">countm1</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">count0</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">countSave2</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">countSavem2</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">countSave1</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">countSavem1</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">countSave0</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                        <span class="n">xy</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;2.0&quot;</span><span class="p">):</span>
                            <span class="n">count2</span> <span class="o">+=</span> <span class="mi">1</span>
                            <span class="k">if</span> <span class="n">pairwiseComparison</span><span class="p">[</span><span class="n">xy</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">setP2</span><span class="p">:</span>
                                <span class="n">countSave2</span> <span class="o">+=</span> <span class="mi">1</span>
                                <span class="n">p2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
                                <span class="n">setP2</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">pairwiseComparison</span><span class="p">[</span><span class="n">xy</span><span class="p">])</span>
                        <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;-2.0&quot;</span><span class="p">):</span>
                            <span class="n">countm2</span> <span class="o">+=</span> <span class="mi">1</span>
                            <span class="k">if</span> <span class="n">pairwiseComparison</span><span class="p">[</span><span class="n">xy</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">setPm2</span><span class="p">:</span>
                                <span class="n">countSavem2</span> <span class="o">+=</span> <span class="mi">1</span>
                                <span class="n">pm2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
                                <span class="n">setPm2</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">pairwiseComparison</span><span class="p">[</span><span class="n">xy</span><span class="p">])</span>
                        <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;1.0&quot;</span><span class="p">):</span>
                            <span class="n">count1</span> <span class="o">+=</span> <span class="mi">1</span>
                            <span class="k">if</span> <span class="n">pairwiseComparison</span><span class="p">[</span><span class="n">xy</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">setP1</span><span class="p">:</span>
                                <span class="n">countSave1</span> <span class="o">+=</span> <span class="mi">1</span>
                                <span class="n">p1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
                                <span class="n">setP1</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">pairwiseComparison</span><span class="p">[</span><span class="n">xy</span><span class="p">])</span>
                        <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;-1.0&quot;</span><span class="p">):</span>
                            <span class="n">countm1</span> <span class="o">+=</span> <span class="mi">1</span>
                            <span class="k">if</span> <span class="n">pairwiseComparison</span><span class="p">[</span><span class="n">xy</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">setPm1</span><span class="p">:</span>
                                <span class="n">countSavem1</span> <span class="o">+=</span> <span class="mi">1</span>
                                <span class="n">pm1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
                                <span class="n">setPm1</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">pairwiseComparison</span><span class="p">[</span><span class="n">xy</span><span class="p">])</span>
                        <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.0&quot;</span><span class="p">):</span>
                            <span class="n">count0</span> <span class="o">+=</span> <span class="mi">1</span>
                            <span class="k">if</span> <span class="n">pairwiseComparison</span><span class="p">[</span><span class="n">xy</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">setP0</span><span class="p">:</span>
                                <span class="n">countSave0</span> <span class="o">+=</span> <span class="mi">1</span>
                                <span class="n">p0</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
                                <span class="n">setP0</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">pairwiseComparison</span><span class="p">[</span><span class="n">xy</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;counts: 2  </span><span class="se">\t</span><span class="s1">-2 </span><span class="se">\t</span><span class="s1">1  </span><span class="se">\t</span><span class="s1">-1 </span><span class="se">\t</span><span class="s1">0&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;        </span><span class="si">%d</span><span class="s1"> </span><span class="se">\t</span><span class="si">%d</span><span class="s1"> </span><span class="se">\t</span><span class="si">%d</span><span class="s1"> </span><span class="se">\t</span><span class="si">%d</span><span class="s1"> </span><span class="se">\t</span><span class="si">%d</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">count2</span><span class="p">,</span><span class="n">countm2</span><span class="p">,</span><span class="n">count1</span><span class="p">,</span><span class="n">countm1</span><span class="p">,</span><span class="n">count0</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;        </span><span class="si">%d</span><span class="s1"> </span><span class="se">\t</span><span class="si">%d</span><span class="s1"> </span><span class="se">\t</span><span class="si">%d</span><span class="s1"> </span><span class="se">\t</span><span class="si">%d</span><span class="s1"> </span><span class="se">\t</span><span class="si">%d</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">countSave2</span><span class="p">,</span><span class="n">countSavem2</span><span class="p">,</span><span class="n">countSave1</span><span class="p">,</span><span class="n">countSavem1</span><span class="p">,</span><span class="n">countSave0</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; -----------------------------------------------------------&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;        </span><span class="si">%d</span><span class="s1"> </span><span class="se">\t</span><span class="si">%d</span><span class="s1"> </span><span class="se">\t</span><span class="si">%d</span><span class="s1"> </span><span class="se">\t</span><span class="si">%d</span><span class="s1"> </span><span class="se">\t</span><span class="si">%d</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">count2</span><span class="o">-</span><span class="n">countSave2</span><span class="p">,</span><span class="n">countm2</span><span class="o">-</span><span class="n">countSavem2</span><span class="p">,</span><span class="n">count1</span><span class="o">-</span><span class="n">countSave1</span><span class="p">,</span><span class="n">countm1</span><span class="o">-</span><span class="n">countSavem1</span><span class="p">,</span><span class="n">count0</span><span class="o">-</span><span class="n">countSave0</span><span class="p">))</span>
                <span class="n">totalcount</span> <span class="o">=</span> <span class="n">count2</span><span class="o">+</span> <span class="n">countm2</span><span class="o">+</span><span class="n">count1</span><span class="o">+</span> <span class="n">countm1</span><span class="o">+</span><span class="n">count0</span>
                <span class="n">totalcountSave</span> <span class="o">=</span> <span class="n">countSave2</span><span class="o">+</span><span class="n">countSavem2</span><span class="o">+</span><span class="n">countSave1</span><span class="o">+</span><span class="n">countSavem1</span><span class="o">+</span><span class="n">countSave0</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;totals: counts: </span><span class="si">%d</span><span class="s1">, countsUnique: </span><span class="se">\t</span><span class="si">%d</span><span class="s1">, reduction: </span><span class="si">%d</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">totalcount</span><span class="p">,</span><span class="n">totalcountSave</span><span class="p">,</span><span class="n">totalcount</span><span class="o">-</span><span class="n">totalcountSave</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                        <span class="n">xy</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;2.0&quot;</span><span class="p">):</span>
                            <span class="n">p2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
                        <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;-2.0&quot;</span><span class="p">):</span>
                            <span class="n">pm2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
                        <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;1.0&quot;</span><span class="p">):</span>
                            <span class="n">p1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
                        <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;-1.0&quot;</span><span class="p">):</span>
                            <span class="n">pm1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
                        <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.0&quot;</span><span class="p">):</span>
                            <span class="n">p0</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>

                            
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;set PAIRS2 :=</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">p2</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">7</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">+</span><span class="n">x</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;set PAIRSm2 :=</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">pm2</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">7</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">+</span><span class="n">x</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;set PAIRS1 :=</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">p1</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;set PAIRSm1 :=</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">pm1</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;set PAIRS0 :=</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">p0</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;param S : &#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nc</span><span class="p">):</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:= </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Unique</span><span class="p">:</span>
            <span class="n">Sset</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                        <span class="n">xy</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">pairwiseComparison</span><span class="p">[</span><span class="n">xy</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">Sset</span><span class="p">:</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">xy</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="n">pairwiseComparison</span><span class="p">[</span><span class="n">xy</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                            <span class="n">Sset</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">pairwiseComparison</span><span class="p">[</span><span class="n">xy</span><span class="p">])</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>    
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nc</span><span class="p">):</span>
                            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeCriterionRelation</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
                            <span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">value</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;1.0&quot;</span><span class="p">))</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;2.0&quot;</span><span class="p">)</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.1f</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">value</span><span class="p">))</span>
                        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>


        

<div class="viewcode-block" id="OldRobustOutrankingDigraph.saveXMLRubisOutrankingDigraph">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.OldRobustOutrankingDigraph.saveXMLRubisOutrankingDigraph">[docs]</a>
    <span class="k">def</span> <span class="nf">saveXMLRubisOutrankingDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">,</span><span class="n">category</span><span class="o">=</span><span class="s1">&#39;Rubis outranking robustness digraph&#39;</span><span class="p">,</span><span class="n">subcategory</span><span class="o">=</span><span class="s1">&#39;Choice recommendation&#39;</span><span class="p">,</span><span class="n">author</span><span class="o">=</span><span class="s1">&#39;digraphs Module (RB)&#39;</span><span class="p">,</span><span class="n">reference</span><span class="o">=</span><span class="s1">&#39;saved from Python&#39;</span><span class="p">,</span><span class="n">comment</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">servingD3</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        save complete robust Rubis problem and result in XML format with unicode encoding.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">codecs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">computeRubyChoice</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----- saving outranking robustness digraph in XML format  -------------*&#39;</span><span class="p">)</span>        
        <span class="n">nameExt</span> <span class="o">=</span> <span class="n">name</span><span class="o">+</span><span class="s1">&#39;.xml&#39;</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">nameExt</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;!DOCTYPE rubisOutrankingDigraph SYSTEM &quot;http://localhost/rubisServer/Schemas/rubisOutrankingDigraph-1.0/rubisOutrankingDigraph.dtd&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">servingD3</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;rubisOutrankingDigraph.xsl&quot;?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;!-- ?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;robustRubisOutrankingDigraph.xsl&quot;? --&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;rubisOutrankingDigraph xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:noNamespaceSchemaLocation=&quot;rubisOutrankingDigraph.xsd&quot;&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39; category=&quot;&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">category</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&quot; subcategory=&quot;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">subcategory</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;header&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;header declaration &lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;name&gt;&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">nameExt</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/name&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>       
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;author&gt;&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">author</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/author&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;reference&gt;&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">reference</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/reference&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/header&gt;&#39;</span><span class="p">)</span>

        <span class="n">actionsOrigList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions_orig</span><span class="p">]</span>
        <span class="n">actionsOrigList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;actions&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;Potential decision actions &lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsOrigList</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;action id=&quot;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;name&gt;&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions_orig</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/name&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions_orig</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">]))</span> 
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/action&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/actions&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criteria&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;List of performance criteria &lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">g</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">criteriaList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterion id=&quot;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&quot; category=&quot;performance&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;name&gt;&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/name&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">]))</span> 
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;scale&gt;&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;min&gt;&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/min&gt;&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;max&gt;&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;scale&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/max&gt;&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/scale&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;thresholds&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">th1</span><span class="p">,</span><span class="n">th2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">]</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;indifference&gt;&#39;</span><span class="p">),</span><span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;(</span><span class="si">%.2f</span><span class="s1">,</span><span class="si">%.2f</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">th1</span><span class="p">,</span><span class="n">th2</span><span class="p">)</span> <span class="p">),</span> <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/indifference&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">th1</span><span class="p">,</span><span class="n">th2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPreference&#39;</span><span class="p">]</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;weakPreference&gt;&#39;</span><span class="p">),</span><span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;(</span><span class="si">%.2f</span><span class="s1">,</span><span class="si">%.2f</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">th1</span><span class="p">,</span><span class="n">th2</span><span class="p">)</span> <span class="p">),</span><span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/weakPreference&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;preference&gt;&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;(</span><span class="si">%.2f</span><span class="s1">,</span><span class="si">%.2f</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>   
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/preference&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">th1</span><span class="p">,</span><span class="n">th2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakVeto&#39;</span><span class="p">]</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;weakVeto&gt;&#39;</span><span class="p">),</span><span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;(</span><span class="si">%.2f</span><span class="s1">,</span><span class="si">%.2f</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">th1</span><span class="p">,</span><span class="n">th2</span><span class="p">)</span> <span class="p">),</span><span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/weakVeto&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">th1</span><span class="p">,</span><span class="n">th2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;veto&#39;</span><span class="p">]</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;veto&gt;&#39;</span><span class="p">),</span><span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;(</span><span class="si">%.2f</span><span class="s1">,</span><span class="si">%.2f</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">th1</span><span class="p">,</span><span class="n">th2</span><span class="p">)</span> <span class="p">),</span><span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/veto&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
             
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/thresholds&gt;&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;weight&gt;&#39;</span><span class="p">)</span>
<span class="c1">##             fo.write(str(self.criteria[g][&#39;weight&#39;]))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/weight&gt;&#39;</span><span class="p">)</span>       
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/criterion&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/criteria&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;evaluations&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;performance table &lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;evaluation&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterionID&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/criterionID&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsOrigList</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;performance&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;actionID&gt;&#39;</span><span class="p">)</span>       
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/actionID&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                    
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;&#39;</span><span class="p">)</span>
<span class="c1">##                 fo.write(str(evaluation[g][x]))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/performance&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/evaluation&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>        
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/evaluations&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>        
  
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;valuationDomain category=&quot;bipolar&quot; subcategory=&quot;robustness&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>               
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;valuation domain declaration &lt;/comment&gt;&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;min&gt;&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%1d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">Min</span><span class="p">)))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/min&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;med&gt;&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%1d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">Med</span><span class="p">)))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/med&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;max&gt;&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%1d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">Max</span><span class="p">)))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/max&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/valuationDomain&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;relation&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation_orig</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;valued outranking relation declaration. &lt;/comment&gt;&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsOrigList</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsOrigList</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;arc&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>        
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;initialActionID&gt;&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/initialActionID&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;terminalActionID&gt;&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/terminalActionID&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                                             
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;&#39;</span><span class="p">)</span>
<span class="c1">##                 fo.write(str(relation[x][y]))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%1d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/arc&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>        
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/relation&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;vetos&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;Effective and potential weto situations.&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">vetos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vetos</span>
            <span class="k">for</span> <span class="n">veto</span> <span class="ow">in</span> <span class="n">vetos</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;veto&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">arc</span> <span class="o">=</span> <span class="n">veto</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;arc&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;initialActionID&gt;&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">arc</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/initialActionID&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                       
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;terminalActionID&gt;&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/terminalActionID&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                                             
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;concordanceDegree&gt;&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">arc</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/concordanceDegree&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>                                    
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/arc&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">situations</span> <span class="o">=</span> <span class="n">veto</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;vetoSituations&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">situations</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;vetoSituation&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;criterionID&gt;&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/criterionID&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;performanceDifference&gt;&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/performanceDifference&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;vetoCharacteristic&gt;&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/vetoCharacteristic&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">arc</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;effective veto&#39;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;effective weak veto&#39;</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">arc</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;effective veto&#39;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;potential weak veto&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;potential veto&#39;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;potential weak veto&#39;</span><span class="p">)</span>                   
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/vetoSituation&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/vetoSituations&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/veto&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/vetos&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;choiceRecommendation category=&quot;Rubis&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;List of good and bad choices following the Rubis methodology.&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">cocaActionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="nb">frozenset</span><span class="p">)]</span>
        <span class="k">if</span> <span class="n">cocaActionsList</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="n">cocaActionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;cocaActions&gt;&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;&lt;comment&gt;weak COCA digraph actions&#39; declaration &lt;/comment&gt;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">cocaActionsList</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;cocaAction id=&quot;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;name&gt;&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;chordless odd circuit&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/name&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;Rubis construction&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/cocaAction&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>     
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/cocaActions&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">amplitude</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">Max</span> <span class="o">-</span> <span class="n">Min</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="mf">100.0</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;goodChoices&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">goodChoices</span><span class="p">:</span>
<span class="c1">##             fo.write(&#39;&lt;choiceSet independence=&quot;&#39;+str(ch[2])+&#39;&quot; outranking=&quot;&#39;+str(ch[3])+&#39;&quot; outranked=&quot;&#39;+str(ch[4])+&#39;&quot; determinateness=&quot;&#39;+str(-ch[0])+&#39;&quot; &gt;&#39;)</span>
            <span class="k">if</span> <span class="n">ch</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">ch</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span>
                <span class="c1">#independent = float(ch[2])/amplitude</span>
                <span class="c1">#outranking = float(ch[3])/amplitude</span>
                <span class="c1">#outranked = float(ch[4])/amplitude</span>
                <span class="n">independent</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">outranking</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
                <span class="n">outranked</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                <span class="c1">#determ = -ch[0]*100.0</span>
                <span class="n">determ</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">6</span><span class="p">)</span> <span class="o">-</span> <span class="mi">3</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;choiceSet independence=&quot;</span><span class="si">%1d</span><span class="s1">&quot; outranking=&quot;</span><span class="si">%1d</span><span class="s1">&quot; outranked=&quot;</span><span class="si">%1d</span><span class="s1">&quot; determinateness=&quot;</span><span class="si">%1.2f</span><span class="s1">&quot; &gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">independent</span><span class="p">),</span><span class="nb">int</span><span class="p">(</span><span class="n">outranking</span><span class="p">),</span><span class="nb">int</span><span class="p">(</span><span class="n">outranked</span><span class="p">),</span><span class="n">determ</span><span class="p">))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;choiceActions&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;actionID&gt;&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/actionID&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/choiceActions&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>              
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/choiceSet&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/goodChoices&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;badChoices&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">badChoices</span><span class="p">:</span>
<span class="c1">##             fo.write(&#39;&lt;choiceSet independence=&quot;&#39;+str(ch[2])+&#39;&quot; outranking=&quot;&#39;+str(ch[3])+&#39;&quot; outranked=&quot;&#39;+str(ch[4])+&#39;&quot; determinateness=&quot;&#39;+str(-ch[0])+&#39;&quot; &gt;&#39;)</span>
            <span class="k">if</span> <span class="n">ch</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
                <span class="c1">#independent = float(ch[2])/float(amplitude)</span>
                <span class="c1">#outranking = float(ch[3])/float(amplitude)</span>
                <span class="c1">#outranked = float(ch[4])/float(amplitude)</span>
                <span class="n">independent</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">outranking</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
                <span class="n">outranked</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                <span class="c1">#determ = -ch[0]*100.0</span>
                <span class="n">determ</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">6</span><span class="p">)</span> <span class="o">-</span> <span class="mi">3</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;choiceSet independence=&quot;</span><span class="si">%1d</span><span class="s1">&quot; outranking=&quot;</span><span class="si">%1d</span><span class="s1">&quot; outranked=&quot;</span><span class="si">%1d</span><span class="s1">&quot; determinateness=&quot;</span><span class="si">%1.2f</span><span class="s1">&quot; &gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">independent</span><span class="p">),</span><span class="nb">int</span><span class="p">(</span><span class="n">outranking</span><span class="p">),</span><span class="nb">int</span><span class="p">(</span><span class="n">outranked</span><span class="p">),</span><span class="n">determ</span><span class="p">))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;choiceActions&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;actionID&gt;&#39;</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/actionID&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/choiceActions&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>              
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/choiceSet&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/badChoices&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/choiceRecommendation&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/rubisOutrankingDigraph&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;File: &#39;</span> <span class="o">+</span> <span class="n">nameExt</span> <span class="o">+</span> <span class="s1">&#39; saved !&#39;</span><span class="p">)</span></div>
</div>


    
            
<div class="viewcode-block" id="DissimilarityOutrankingDigraph">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.DissimilarityOutrankingDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">DissimilarityOutrankingDigraph</span><span class="p">(</span><span class="n">OutrankingDigraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameters:</span>
<span class="sd">        performanceTableau (fileName of valid py code)</span>

<span class="sd">    Specialization of the OutrankingDigraph class for generating</span>
<span class="sd">    temporary dissimilarity random graphs</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">argPerfTab</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">argPerfTab</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Performance tableau required !&#39;</span><span class="p">)</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">RandomPerformanceTableau</span><span class="p">(</span><span class="n">commonThresholds</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">10.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),(</span><span class="mf">20.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),(</span><span class="mf">80.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),(</span><span class="mf">101.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">)])</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">,(</span><span class="nb">str</span><span class="p">)):</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">PerformanceTableau</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">argPerfTab</span>
        <span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span><span class="nn">copy</span>
<span class="c1">##        if filePerfTab is None:</span>
<span class="c1">##            t = RandomPerformanceTableau()</span>
<span class="c1">##            filePerfTab = &#39;randomPerf&#39;</span>
<span class="c1">##            t.save(filePerfTab)</span>
<span class="c1">##        perfTab = PerformanceTableau(filePerfTab)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;rel_&#39;</span><span class="o">+</span><span class="n">perfTab</span><span class="o">.</span><span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">evaluation</span><span class="p">)</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Min</span><span class="p">,</span><span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Med</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Max</span><span class="p">}</span>
        <span class="n">weightPreorder</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">computeWeightPreorder</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">NA</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">NA</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructRelation</span><span class="p">(</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
        <span class="c1"># for g in perfTab.actions:</span>
        <span class="c1">#     actions.append(g)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_constructRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the valued dissimilarity relation between criteria.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">criteria</span><span class="p">)</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">evaluation</span><span class="p">)</span>
        <span class="n">NA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NA</span>        
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">ga</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
            <span class="n">criteriona</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">ga</span><span class="p">]</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">ga</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">gb</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
                <span class="n">criterionb</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">gb</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">ga</span> <span class="o">!=</span> <span class="n">gb</span><span class="p">:</span>
                    <span class="n">na</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
                    <span class="n">counter</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">ga</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span> <span class="ow">and</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">gb</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span><span class="p">:</span>
                            <span class="n">d</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">ga</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">gb</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                            <span class="n">hgax</span> <span class="o">=</span> <span class="n">criteriona</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">hgay</span> <span class="o">=</span> <span class="n">criteriona</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                            <span class="n">hga</span> <span class="o">=</span> <span class="n">hgax</span> <span class="o">+</span> <span class="n">hgay</span> <span class="o">*</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">ga</span><span class="p">][</span><span class="n">x</span><span class="p">]</span>
                            <span class="n">hgbx</span> <span class="o">=</span> <span class="n">criterionb</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">hgby</span> <span class="o">=</span> <span class="n">criterionb</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                            <span class="n">hgb</span> <span class="o">=</span> <span class="n">hgbx</span> <span class="o">+</span> <span class="n">hgby</span> <span class="o">*</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">gb</span><span class="p">][</span><span class="n">x</span><span class="p">]</span>
                            <span class="n">qgax</span> <span class="o">=</span> <span class="n">criteriona</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">qgay</span> <span class="o">=</span> <span class="n">criteriona</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                            <span class="n">qga</span> <span class="o">=</span> <span class="n">qgax</span> <span class="o">+</span> <span class="n">qgay</span> <span class="o">*</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">ga</span><span class="p">][</span><span class="n">x</span><span class="p">]</span>
                            <span class="n">qgbx</span> <span class="o">=</span> <span class="n">criterionb</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">qgby</span> <span class="o">=</span> <span class="n">criterionb</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                            <span class="n">qgb</span> <span class="o">=</span> <span class="n">qgbx</span> <span class="o">+</span> <span class="n">qgby</span> <span class="o">*</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">gb</span><span class="p">][</span><span class="n">x</span><span class="p">]</span>
                            <span class="n">h</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">hga</span><span class="p">,</span><span class="n">hgb</span><span class="p">)</span>
                            <span class="n">q</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">qga</span><span class="p">,</span><span class="n">qgb</span><span class="p">)</span>
                            <span class="n">counter</span> <span class="o">=</span> <span class="n">counter</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localDissimilarity</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">q</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">counter</span> <span class="o">=</span> <span class="n">counter</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.5&#39;</span><span class="p">)</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">ga</span><span class="p">][</span><span class="n">gb</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">((</span><span class="nb">round</span><span class="p">((</span><span class="n">counter</span><span class="o">/</span><span class="n">na</span><span class="o">*</span><span class="p">(</span><span class="n">Max</span><span class="o">-</span><span class="n">Min</span><span class="p">))))))</span> <span class="o">+</span> <span class="n">Min</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">ga</span><span class="p">][</span><span class="n">ga</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
        <span class="k">return</span> <span class="n">relation</span>
                

    <span class="k">def</span> <span class="nf">_localDissimilarity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">q</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders local dissimilarity between two criterial evaluations</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dn</span> <span class="o">=</span> <span class="n">q</span> <span class="o">-</span> <span class="n">h</span>
        <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;=</span> <span class="n">h</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">dn</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">d</span> <span class="o">&lt;=</span> <span class="n">q</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">d</span><span class="o">-</span><span class="n">h</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">q</span><span class="o">-</span><span class="n">h</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
            
<div class="viewcode-block" id="DissimilarityOutrankingDigraph.showAll">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.DissimilarityOutrankingDigraph.showAll">[docs]</a>
    <span class="k">def</span> <span class="nf">showAll</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        specialize the general showAll method for the dissimilarity case</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----- show detail -------------*&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Digraph          :&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Criteria         :&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Valuation domain :&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----  evaluated actions per criteria -----*&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----  evaluation tableau -----*&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="s1">&#39;: &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">])</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----  dissimilarity between criteria -----*&#39;</span><span class="p">)</span>       
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showComponents</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----  neighbourhoods -----*&#39;</span><span class="p">)</span>       
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Gamma        :&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Not Gamma    :&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span><span class="p">)</span></div>
</div>


<div class="viewcode-block" id="MultiCriteriaDissimilarityDigraph">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.MultiCriteriaDissimilarityDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">MultiCriteriaDissimilarityDigraph</span><span class="p">(</span><span class="n">OutrankingDigraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameters:</span>
<span class="sd">        performanceTableau (fileName of valid py code)</span>

<span class="sd">    Specialization of the OutrankingDigraph class for generating</span>
<span class="sd">    temporary multiple criteria based dissimilarity graphs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">perfTab</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">filePerfTab</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span><span class="nn">copy</span>
        <span class="k">if</span> <span class="n">perfTab</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">filePerfTab</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">perftab</span> <span class="o">=</span> <span class="n">RandomPerformanceTableau</span><span class="p">()</span>
                <span class="n">filePerfTab</span> <span class="o">=</span> <span class="s1">&#39;randomPerf&#39;</span>
                <span class="n">t</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filePerfTab</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">perfTab</span> <span class="o">=</span> <span class="n">PerformanceTableau</span><span class="p">(</span><span class="n">filePerfTab</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;rel_&#39;</span><span class="o">+</span><span class="n">perfTab</span><span class="o">.</span><span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Min</span><span class="p">,</span><span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Med</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Max</span><span class="p">}</span>
        <span class="n">weightPreorder</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">computeWeightPreorder</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">evaluation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">NA</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">NA</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructRelation</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_constructRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the valued dissimilarity relation between criteria.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">evaluation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="n">NA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NA</span>
        <span class="n">maxWeight</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
            <span class="n">maxWeight</span> <span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">b</span><span class="p">:</span>
                    <span class="n">nc</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">criteria</span><span class="p">)</span>
                    <span class="n">counter</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
                        <span class="n">criterion</span> <span class="o">=</span> <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span> <span class="ow">and</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">!=</span> <span class="n">NA</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                                <span class="n">d</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">b</span><span class="p">])</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">d</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">-</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">])</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">hx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">hy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;ind&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="n">h</span> <span class="o">=</span> <span class="n">hx</span> <span class="o">+</span> <span class="n">hy</span> <span class="o">*</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">h</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">wpx</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">wpy</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;weakPref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="n">wp</span> <span class="o">=</span> <span class="n">wpx</span> <span class="o">+</span> <span class="n">wpy</span> <span class="o">*</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">wp</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">px</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">py</span> <span class="o">=</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;thresholds&#39;</span><span class="p">][</span><span class="s1">&#39;pref&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                                <span class="n">p</span> <span class="o">=</span> <span class="n">px</span> <span class="o">+</span> <span class="n">py</span> <span class="o">*</span> <span class="n">evaluation</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
                            <span class="k">except</span><span class="p">:</span>
                                <span class="n">p</span> <span class="o">=</span> <span class="kc">None</span>
                            <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_localDissimilarity</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">h</span><span class="p">,</span><span class="n">wp</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
<span class="c1">##                             print d,h,wp,p</span>
<span class="c1">##                             print counter, index, criteria[g][&#39;weight&#39;]</span>
                            <span class="n">counter</span> <span class="o">+=</span> <span class="n">index</span> <span class="o">*</span> <span class="n">criterion</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">counter</span> <span class="o">+=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
<span class="c1">##                    relation[a][b] = counter/maxWeight*(Max-Min) + Min</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">counter</span><span class="o">/</span><span class="n">maxWeight</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
        <span class="k">return</span> <span class="n">relation</span>
                

    <span class="k">def</span> <span class="nf">_localDissimilarity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">wp</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders local dissimilarity between two criterial evaluations</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">h</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;=</span> <span class="n">h</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">p</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="n">h</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: should never come here !!!&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">wp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">wp</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">p</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">p</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">d</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span></div>



            
<div class="viewcode-block" id="ConfidentBipolarOutrankingDigraph">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.ConfidentBipolarOutrankingDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">ConfidentBipolarOutrankingDigraph</span><span class="p">(</span><span class="n">BipolarOutrankingDigraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Confident bipolar outranking digraph based on multiple criteria of</span>
<span class="sd">    uncertain significance.</span>
<span class="sd">    </span>
<span class="sd">    The digraph&#39;s bipolar valuation represents the bipolar outranking relation</span>
<span class="sd">    based on a sufficient likelihood of the at least as good as relation</span>
<span class="sd">    that is outranking without veto and counterveto.</span>

<span class="sd">    By default, each criterion i&#39; significance weight is supposed to</span>
<span class="sd">    be a triangular random variable of mode w_i in the range 0 to 2*w_i.</span>

<span class="sd">    *Parameters*:</span>

<span class="sd">        * argPerfTab: PerformanceTableau instance or the name (without extension) of a stored one. If None, a random instance is generated.</span>
<span class="sd">        * distribution: {triangular|uniform|beta}, probability distribution used for generating random weights</span>
<span class="sd">        * betaParameter: a = b (default = 2)</span>
<span class="sd">        * confidence: required likelihood (in %) of the outranking relation</span>
<span class="sd">        * other standard parameters from the BipolarOutrankingDigraph class (see documentation).</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">argPerfTab</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">distribution</span> <span class="o">=</span> <span class="s1">&#39;triangular&#39;</span><span class="p">,</span>
                 <span class="n">betaParameter</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
                 <span class="n">confidence</span> <span class="o">=</span> <span class="mf">90.0</span><span class="p">,</span>
                 <span class="n">coalition</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">hasNoVeto</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">hasBipolarVeto</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">Normalized</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="c1">#Threading=False,</span>
                 <span class="c1">#nbrOfCPUs=1,</span>
                 <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,):</span>
        <span class="c1"># getting module ressources and setting the random seed</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span><span class="p">,</span> <span class="n">deepcopy</span>
        <span class="c1"># getting performance tableau</span>
        <span class="k">if</span> <span class="n">argPerfTab</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">RandomPerformanceTableau</span><span class="p">(</span><span class="n">commonThresholds</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">10.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),(</span><span class="mf">20.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),(</span><span class="mf">80.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),(</span><span class="mf">101.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">)])</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">,(</span><span class="nb">str</span><span class="p">)):</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">PerformanceTableau</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">)</span>
        <span class="c1"># initializing the bipolar outranking digraph</span>
        <span class="n">bodg</span> <span class="o">=</span> <span class="n">BipolarOutrankingDigraph</span><span class="p">(</span><span class="n">argPerfTab</span><span class="o">=</span><span class="n">perfTab</span><span class="p">,</span><span class="n">coalition</span><span class="o">=</span><span class="n">coalition</span><span class="p">,</span>\
                                     <span class="n">hasNoVeto</span><span class="o">=</span><span class="n">hasNoVeto</span><span class="p">,</span>\
                                     <span class="n">hasBipolarVeto</span><span class="o">=</span><span class="n">hasBipolarVeto</span><span class="p">,</span>\
                                     <span class="n">Normalized</span><span class="o">=</span><span class="n">Normalized</span><span class="p">,</span>\
                                     <span class="c1">#Threading=Threading,\</span>
                                     <span class="c1">#nbrCores=nbrOfCPUs,\</span>
                                        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">bodg</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;_CLT&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bipolarConfidenceLevel</span> <span class="o">=</span> <span class="p">(</span><span class="n">confidence</span><span class="o">/</span><span class="mf">100.0</span><span class="p">)</span><span class="o">*</span><span class="mf">2.0</span> <span class="o">-</span><span class="mf">1.0</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">distribution</span> <span class="o">=</span> <span class="n">distribution</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">betaParameter</span> <span class="o">=</span> <span class="n">betaParameter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">bodg</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">bodg</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">bodg</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">bodg</span><span class="o">.</span><span class="n">evaluation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">NA</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">bodg</span><span class="o">.</span><span class="n">NA</span><span class="p">)</span>
        <span class="c1">#if not Threading:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">concordanceRelation</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">bodg</span><span class="o">.</span><span class="n">concordanceRelation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vetos</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">bodg</span><span class="o">.</span><span class="n">vetos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">negativeVetos</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">bodg</span><span class="o">.</span><span class="n">negativeVetos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">largePerformanceDifferencesCount</span> <span class="o">=</span>\
               <span class="n">copy</span><span class="p">(</span><span class="n">bodg</span><span class="o">.</span><span class="n">largePerformanceDifferencesCount</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">likelihoods</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeCLTLikelihoods</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="n">distribution</span><span class="p">,</span>
                                                      <span class="n">betaParameter</span><span class="o">=</span><span class="n">betaParameter</span><span class="p">,</span>
                                                      <span class="c1">#Threading=Threading,</span>
                                                      <span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_computeConfidentRelation</span><span class="p">(</span>
            <span class="n">bodg</span><span class="o">.</span><span class="n">relation</span><span class="p">,</span>
            <span class="c1">#likelihoodLevel=confidence,</span>
            <span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_computeConfidentRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                               <span class="n">outrankingRelation</span><span class="p">,</span>
                               <span class="n">likelihoodLevel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                               <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the relation cut at likelihood level.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">likelihoodLevel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">likelihoodLevel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bipolarConfidenceLevel</span>

        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Likelihood level = </span><span class="si">%.2f%%</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="p">(</span><span class="n">likelihoodLevel</span> <span class="o">+</span> <span class="mf">1.0</span><span class="p">)</span><span class="o">/</span><span class="mf">2.0</span><span class="o">*</span><span class="mf">100.0</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">confidenceCutLevel</span> <span class="o">=</span> <span class="n">Med</span>
        <span class="n">confidentRelation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">confidentRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">likelihoods</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span> <span class="o">&gt;=</span> <span class="n">likelihoodLevel</span><span class="p">:</span>
                    <span class="n">confidentRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">outrankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">confidentRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
                    <span class="n">level</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">outrankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
                    <span class="k">if</span> <span class="n">level</span> <span class="o">&lt;</span> <span class="n">Max</span> <span class="ow">and</span> <span class="n">level</span> <span class="o">&gt;</span> <span class="n">confidenceCutLevel</span><span class="p">:</span>
                        <span class="n">confidenceCutLevel</span> <span class="o">=</span> <span class="n">level</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">outrankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">likelihoods</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">confidenceCutLevel</span> <span class="o">=</span> <span class="n">confidenceCutLevel</span>
        <span class="k">return</span> <span class="n">confidentRelation</span>
        
    <span class="k">def</span> <span class="nf">_recodeConcordanceValuation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">oldRelation</span><span class="p">,</span><span class="n">sumWeights</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Recodes the characteristic valuation according</span>
<span class="sd">        to the parameters given.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">oldRelation</span><span class="p">,</span><span class="n">sumWeights</span><span class="p">)</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span> <span class="k">as</span> <span class="n">deepcopy</span>
        
<span class="c1">##        oldMax = Decimal(&#39;1&#39;)</span>
<span class="c1">##        oldMin = Decimal(&#39;-1&#39;)</span>
<span class="c1">##        oldMed = Decimal(&#39;0&#39;)</span>
        <span class="n">oldMax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">oldMin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">oldMed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">oldAmplitude</span> <span class="o">=</span> <span class="n">oldMax</span> <span class="o">-</span> <span class="n">oldMin</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;old: &#39;</span><span class="p">,</span><span class="n">oldMin</span><span class="p">,</span> <span class="n">oldMed</span><span class="p">,</span> <span class="n">oldMax</span><span class="p">,</span> <span class="n">oldAmplitude</span><span class="p">)</span>

        <span class="n">newMin</span> <span class="o">=</span> <span class="o">-</span><span class="n">sumWeights</span>
        <span class="n">newMax</span> <span class="o">=</span> <span class="n">sumWeights</span>
        <span class="n">newMed</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">((</span><span class="n">newMax</span> <span class="o">+</span> <span class="n">newMin</span><span class="p">)</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2.0&#39;</span><span class="p">)))</span>
        <span class="n">newAmplitude</span> <span class="o">=</span> <span class="n">newMax</span> <span class="o">-</span> <span class="n">newMin</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;new: &#39;</span><span class="p">,</span> <span class="n">newMin</span><span class="p">,</span> <span class="n">newMed</span><span class="p">,</span> <span class="n">newMax</span><span class="p">,</span> <span class="n">newAmplitude</span><span class="p">)</span>

        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">newRelation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">newRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">oldRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="n">oldMax</span><span class="p">:</span>
                    <span class="n">newRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">newMax</span>
                <span class="k">elif</span> <span class="n">oldRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="n">oldMin</span><span class="p">:</span>
                    <span class="n">newRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">newMin</span>
                <span class="k">elif</span> <span class="n">oldRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="n">oldMed</span><span class="p">:</span>
                    <span class="n">newRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">newMed</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">newRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">newMin</span> <span class="o">+</span>\
                        <span class="p">((</span><span class="n">oldRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">-</span> <span class="n">oldMin</span><span class="p">)</span><span class="o">/</span><span class="n">oldAmplitude</span><span class="p">)</span><span class="o">*</span><span class="n">newAmplitude</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">oldRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="n">newRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">newRelation</span>

    <span class="k">def</span> <span class="nf">_myGaussCDF</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">mean</span><span class="p">,</span><span class="n">sigma</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">Bipolar</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Bipolar error function of z = (x-mu)/sigma) divided by sqrt(2).</span>
<span class="sd">        If Bipolar = False,</span>
<span class="sd">        renders the Gauss cdf(z) = [erf( z ) + 1] / 2</span>
<span class="sd">        sqrt(2) = 1.4142135623731</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span><span class="p">,</span><span class="n">erf</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">z</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">mean</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">sigma</span> <span class="o">*</span> <span class="mf">1.4142135623731</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
            <span class="n">z</span> <span class="o">=</span> <span class="mf">0.0</span>        
        <span class="k">if</span> <span class="n">Bipolar</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">erf</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="mf">0.5</span><span class="o">*</span><span class="n">erf</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
    
<div class="viewcode-block" id="ConfidentBipolarOutrankingDigraph.computeCLTLikelihoods">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.ConfidentBipolarOutrankingDigraph.computeCLTLikelihoods">[docs]</a>
    <span class="k">def</span> <span class="nf">computeCLTLikelihoods</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">distribution</span><span class="o">=</span><span class="s2">&quot;triangular&quot;</span><span class="p">,</span>
                              <span class="n">betaParameter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                              <span class="c1">#Threading=False,</span>
                              <span class="c1">#nbrOfCPUs=1,</span>
                              <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the pairwise CLT likelihood of the at least as good as relation</span>
<span class="sd">        neglecting all considerable large performance differences polarisations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span> <span class="k">as</span> <span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
        <span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span>
        <span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">gauss</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">sumWeights</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">m</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">)</span>
        
        <span class="n">weightSquares</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="n">gWeight</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
<span class="c1">##            if Debug:</span>
<span class="c1">##                print(g,gWeight)</span>
            <span class="n">weightSquares</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="n">gWeight</span><span class="o">*</span><span class="n">gWeight</span>
            <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">gWeight</span>
<span class="c1">##        if Debug:</span>
<span class="c1">##            print(sumWeights)</span>
<span class="c1">##            print(weightSquares)</span>
<span class="c1">##        if Threading:</span>
<span class="c1">##            g = BipolarOutrankingDigraph(self,hasNoVeto=True,</span>
<span class="c1">##                                         Threading=Threading,nbrCores=nbrOfCPUs)</span>
<span class="c1">##            concordanceRelation = g.relation</span>
<span class="c1">##        else:</span>

        <span class="n">concordanceRelation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_recodeConcordanceValuation</span><span class="p">(</span>\
                                <span class="bp">self</span><span class="o">.</span><span class="n">concordanceRelation</span><span class="p">,</span><span class="n">sumWeights</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>

        <span class="n">ccf</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">distribution</span> <span class="o">==</span> <span class="s1">&#39;uniform&#39;</span><span class="p">:</span>
            <span class="n">varFactor</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;3&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">distribution</span> <span class="o">==</span> <span class="s1">&#39;triangular&#39;</span><span class="p">:</span>
            <span class="n">varFactor</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;6&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">distribution</span> <span class="o">==</span> <span class="s1">&#39;beta&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">betaParameter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">a</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">betaParameter</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">betaParameter</span>
            <span class="n">varFactor</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">)</span><span class="o">*</span><span class="n">a</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">))</span>
        <span class="c1">## elif distribution == &#39;beta(4,4)&#39;:</span>
        <span class="c1">##     varFactor = Decimal(&#39;1&#39;)/Decimal(&#39;9&#39;)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">ccf</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="n">ccf</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;std&#39;</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)}</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                    <span class="n">ccf</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criterionCharacteristicFunction</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
                    <span class="n">ccf</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="s1">&#39;std&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ccf</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="n">c</span><span class="p">])</span><span class="o">*</span><span class="n">weightSquares</span><span class="p">[</span><span class="n">c</span><span class="p">]</span>
<span class="c1">##                    if Debug:</span>
<span class="c1">##                        print(c,x,y,ccf[x][y][c])</span>
                <span class="n">ccf</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="s1">&#39;std&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">varFactor</span><span class="o">*</span><span class="n">ccf</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="s1">&#39;std&#39;</span><span class="p">])</span>
<span class="c1">##                if Debug:</span>
<span class="c1">##                    print(x,y,ccf[x][y][&#39;std&#39;])</span>
        <span class="n">lh</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">lh</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>

                <span class="n">mean</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">concordanceRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
                <span class="n">std</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">ccf</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="s1">&#39;std&#39;</span><span class="p">])</span>
                <span class="n">lh</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">_myGaussCDF</span><span class="p">(</span><span class="n">mean</span><span class="p">,</span><span class="n">std</span><span class="p">,</span><span class="mf">0.0</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">lh</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">lh</span></div>


<div class="viewcode-block" id="ConfidentBipolarOutrankingDigraph.showRelationTable">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.ConfidentBipolarOutrankingDigraph.showRelationTable">[docs]</a>
    <span class="k">def</span> <span class="nf">showRelationTable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">IntegerValues</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">actionsSubset</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">Sorted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                          <span class="n">LikelihoodDenotation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                          <span class="n">hasLatexFormat</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">hasIntegerValuation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">relation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        prints the relation valuation in actions X actions table format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">LikelihoodDenotation</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">likelihoods</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">likelihoods</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">LikelihoodDenotation</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">LikelihoodDenotation</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">actionsSubset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="n">actionsSubset</span>
            
        <span class="k">if</span> <span class="n">relation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
            
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* ---- Outranking Relation Table -----&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">LikelihoodDenotation</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;r/(lh) | &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; r()   | &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="c1">#actions = [x for x in actions]</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="nb">frozenset</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">actionsList</span> <span class="o">+=</span> <span class="p">[(</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;shortName&#39;</span><span class="p">],</span><span class="n">x</span><span class="p">)]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">actionsList</span> <span class="o">+=</span> <span class="p">[(</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">],</span><span class="n">x</span><span class="p">)]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">actionsList</span> <span class="o">+=</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span><span class="n">x</span><span class="p">)]</span>
        <span class="k">if</span> <span class="n">Sorted</span><span class="p">:</span>
            <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">hasIntegerValuation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;hasIntegerValuation&#39;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">hasIntegerValuation</span> <span class="o">=</span> <span class="n">IntegerValues</span>
        
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="o">+</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;&#39;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">-------|------------------------------------------------------------&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">hasLatexFormat</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;$&quot;</span><span class="o">+</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;$ &amp; &quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; &#39;&quot;</span><span class="o">+</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;&#39; |&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">hasIntegerValuation</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">hasLatexFormat</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;$</span><span class="si">%+d</span><span class="s1">$ &amp;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%+d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">hasLatexFormat</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;$</span><span class="si">%+.2f</span><span class="s1">$ &amp; &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>       
                    <span class="k">else</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; </span><span class="si">%+.2f</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                
            <span class="k">if</span> <span class="n">hasLatexFormat</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; </span><span class="se">\\</span><span class="s1">cr&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">LikelihoodDenotation</span><span class="p">:</span>
                <span class="n">headString</span> <span class="o">=</span> <span class="s2">&quot;&#39; &quot;</span><span class="o">+</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;&#39; &quot;</span>
                <span class="n">formatStr</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">headString</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">formatStr</span><span class="o">+</span><span class="s1">&#39;|&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(</span><span class="si">%+.2f</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">likelihoods</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; ( - ) &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Valuation domain   : [</span><span class="si">%+.3f</span><span class="s1">; </span><span class="si">%+.3f</span><span class="s1">] &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">],</span>
                                                   <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">distribution</span> <span class="o">==</span> <span class="s1">&#39;beta&#39;</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Uncertainty model  : </span><span class="si">%s</span><span class="s1">(a=</span><span class="si">%.1f</span><span class="s1">,b=</span><span class="si">%.1f</span><span class="s1">) &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">distribution</span><span class="p">,</span>
                                                         <span class="bp">self</span><span class="o">.</span><span class="n">betaParameter</span><span class="p">,</span>
                                                         <span class="bp">self</span><span class="o">.</span><span class="n">betaParameter</span><span class="p">)</span>
                                                         <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Uncertainty model  : </span><span class="si">%s</span><span class="s1">(a=</span><span class="si">%s</span><span class="s1">,b=</span><span class="si">%s</span><span class="s1">) &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">distribution</span><span class="p">,</span><span class="s1">&#39;0&#39;</span><span class="p">,</span><span class="s1">&#39;2w&#39;</span><span class="p">)</span> <span class="p">)</span>
          
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Likelihood domain  : [-1.0;+1.0] &#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Confidence level   : </span><span class="si">%.2f</span><span class="s1"> (</span><span class="si">%.1f%%</span><span class="s1">) &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bipolarConfidenceLevel</span><span class="p">,</span>
                                                     <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bipolarConfidenceLevel</span><span class="o">+</span><span class="mf">1.0</span><span class="p">)</span><span class="o">/</span><span class="mf">2.0</span><span class="o">*</span><span class="mf">100.0</span><span class="p">))</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Confident majority : </span><span class="si">%.2f</span><span class="s1"> (</span><span class="si">%.1f%%</span><span class="s1">) &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">confidenceCutLevel</span><span class="p">,</span>\
                            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">confidenceCutLevel</span><span class="o">+</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">))</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2.0&#39;</span><span class="p">)</span><span class="o">*</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">)))</span>
        <span class="n">deter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeDeterminateness</span><span class="p">(</span><span class="n">InPercents</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Determinateness    : </span><span class="si">%.2f</span><span class="s1"> (</span><span class="si">%.1f%%</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">deter</span><span class="p">,</span>\
                            <span class="p">(</span><span class="n">deter</span><span class="o">+</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">))</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2.0&#39;</span><span class="p">)</span><span class="o">*</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">)))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>
</div>



<span class="c1">#--------------------        </span>
<div class="viewcode-block" id="StochasticBipolarOutrankingDigraph">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.StochasticBipolarOutrankingDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">StochasticBipolarOutrankingDigraph</span><span class="p">(</span><span class="n">BipolarOutrankingDigraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Stochastic bipolar outranking digraph based on multiple criteria of uncertain significance.</span>
<span class="sd">    </span>
<span class="sd">    The digraph&#39;s bipolar valuation represents the median of sampled outranking relations with a</span>
<span class="sd">    sufficient likelihood (default = 90%) to remain positive, repectively negative,</span>
<span class="sd">    over the possible criteria significance ranges.</span>

<span class="sd">    Each criterion i&#39; significance weight is supposed to</span>
<span class="sd">    be a triangular random variables of mode w_i in the range 0 to 2*w_i.</span>

<span class="sd">    *Parameters*:</span>

<span class="sd">        * argPerfTab: PerformanceTableau instance or the name of a stored one.</span>
<span class="sd">          If None, a random instance is generated.</span>
<span class="sd">        * sampleSize: number of random weight vectors used for Monte Carlo simulation.</span>
<span class="sd">        * distribution: {triangular|extTriangular|uniform|beta(2,2)|beta(4,4)}, probability distribution used for generating random weights</span>
<span class="sd">        * spread: weight range = weight mode +- (weight mode * spread)</span>
<span class="sd">        * likelihood: 1.0 - frequency of valuations of opposite sign compared to the median valuation.</span>
<span class="sd">        * other standard parameters from the BipolarOutrankingDigraph class (see documentation).</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">argPerfTab</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">sampleSize</span> <span class="o">=</span> <span class="mi">50</span><span class="p">,</span>
                 <span class="n">samplingSeed</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">distribution</span> <span class="o">=</span> <span class="s1">&#39;triangular&#39;</span><span class="p">,</span>
                 <span class="n">spread</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
                 <span class="n">likelihood</span> <span class="o">=</span> <span class="mf">0.9</span><span class="p">,</span>
                 <span class="n">coalition</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">hasNoVeto</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">hasBipolarVeto</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">Normalized</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">SeeSampleCounter</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># getting module ressources and setting the random seed</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span><span class="p">,</span> <span class="n">deepcopy</span>
        <span class="k">if</span> <span class="n">distribution</span> <span class="o">==</span> <span class="s1">&#39;extTriangular&#39;</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">randomNumbers</span> <span class="kn">import</span> <span class="n">ExtendedTriangularRandomVariable</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">triangular</span><span class="p">,</span> <span class="n">uniform</span><span class="p">,</span> <span class="n">betavariate</span>
            <span class="k">if</span> <span class="n">samplingSeed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">seed</span>
                <span class="n">seed</span> <span class="o">=</span> <span class="n">samplingSeed</span>   
        <span class="c1"># getting performance tableau</span>
        <span class="k">if</span> <span class="n">argPerfTab</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">RandomPerformanceTableau</span><span class="p">(</span><span class="n">commonThresholds</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">10.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),(</span><span class="mf">20.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),(</span><span class="mf">80.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">),(</span><span class="mf">101.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">)])</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">,(</span><span class="nb">str</span><span class="p">)):</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">PerformanceTableau</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">)</span>
        <span class="c1"># initializing the bipolar outranking digraph</span>
        <span class="n">bodg</span> <span class="o">=</span> <span class="n">BipolarOutrankingDigraph</span><span class="p">(</span><span class="n">argPerfTab</span><span class="o">=</span><span class="n">perfTab</span><span class="p">,</span><span class="n">coalition</span><span class="o">=</span><span class="n">coalition</span><span class="p">,</span>\
                                     <span class="n">hasNoVeto</span> <span class="o">=</span> <span class="n">hasNoVeto</span><span class="p">,</span>\
                                     <span class="n">hasBipolarVeto</span> <span class="o">=</span> <span class="n">hasBipolarVeto</span><span class="p">,</span>\
                                     <span class="n">Normalized</span><span class="o">=</span><span class="n">Normalized</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">bodg</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;_MC&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sampleSize</span> <span class="o">=</span> <span class="n">sampleSize</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">likelihood</span> <span class="o">=</span> <span class="n">likelihood</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">bodg</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">bodg</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">bodg</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">bodg</span><span class="o">.</span><span class="n">evaluation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">NA</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">bodg</span><span class="o">.</span><span class="n">NA</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">bodg</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        
        <span class="c1"># normalize valuation to percentages</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="o">-</span><span class="mf">100.0</span><span class="p">,</span><span class="mf">100.0</span><span class="p">)</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        
        <span class="c1"># bin breaks per percent unit</span>
        <span class="n">breaks</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">x</span>  <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span><span class="mi">101</span><span class="p">))]</span>
        
        <span class="c1"># quantiles for cdf calls</span>
        <span class="n">quantilesId</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">breaks</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">quantilesId</span><span class="p">)</span>
            
        <span class="c1"># initialize frequency and observation dictionaries</span>
        <span class="n">frequency</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">valuationObservations</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">valuationObservations</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">frequency</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="n">valuationObservations</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">frequency</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">breaks</span><span class="p">))]</span>

        <span class="c1"># initialize the weight modes</span>
        <span class="n">weights</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">([(</span><span class="n">g</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">])</span>
        <span class="n">spread</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">spread</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">weights</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">sample</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">sampleSize</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">SeeSampleCounter</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;===&gt;&gt;&gt; sample </span><span class="si">%d</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">sample</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">:</span>
                <span class="n">lowerWeightLimit</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">weights</span><span class="p">[</span><span class="n">g</span><span class="p">]</span><span class="o">-</span> <span class="p">(</span><span class="n">weights</span><span class="p">[</span><span class="n">g</span><span class="p">]</span><span class="o">*</span><span class="n">spread</span><span class="p">))</span>
                <span class="n">upperWeightLimit</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">weights</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">weights</span><span class="p">[</span><span class="n">g</span><span class="p">]</span><span class="o">*</span><span class="n">spread</span><span class="p">))</span>
                <span class="n">weightMode</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">weights</span><span class="p">[</span><span class="n">g</span><span class="p">])</span>
                <span class="n">weightRange</span> <span class="o">=</span> <span class="n">upperWeightLimit</span> <span class="o">-</span> <span class="n">lowerWeightLimit</span>
                <span class="k">if</span> <span class="n">distribution</span> <span class="o">==</span> <span class="s1">&#39;triangular&#39;</span><span class="p">:</span>
                    <span class="n">rw</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span> <span class="s1">&#39;</span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">triangular</span><span class="p">(</span><span class="n">lowerWeightLimit</span><span class="p">,</span><span class="n">upperWeightLimit</span><span class="p">,</span><span class="n">weightMode</span><span class="p">)</span> <span class="p">)</span>
                <span class="k">elif</span> <span class="n">distribution</span> <span class="o">==</span> <span class="s1">&#39;uniform&#39;</span><span class="p">:</span>
                    <span class="n">rw</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span> <span class="s1">&#39;</span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">uniform</span><span class="p">(</span><span class="n">lowerWeightLimit</span><span class="p">,</span><span class="n">upperWeightLimit</span><span class="p">)</span> <span class="p">)</span>
                <span class="k">elif</span> <span class="n">distribution</span> <span class="o">==</span> <span class="s1">&#39;beta(2,2)&#39;</span><span class="p">:</span>
                    <span class="n">rw</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span> <span class="s1">&#39;</span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">lowerWeightLimit</span><span class="o">+</span><span class="p">(</span><span class="n">betavariate</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">weightRange</span><span class="p">))</span> <span class="p">)</span>
                <span class="k">elif</span> <span class="n">distribution</span> <span class="o">==</span> <span class="s1">&#39;beta(4,4)&#39;</span><span class="p">:</span>
                    <span class="n">rw</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span> <span class="s1">&#39;</span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">lowerWeightLimit</span><span class="o">+</span><span class="p">(</span><span class="n">betavariate</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span><span class="o">*</span><span class="n">weightRange</span><span class="p">))</span> <span class="p">)</span>
                <span class="k">elif</span> <span class="n">distribution</span> <span class="o">==</span> <span class="s1">&#39;extTriangular&#39;</span><span class="p">:</span>
                    <span class="n">extTrRdv</span> <span class="o">=</span> <span class="n">ExtendedTriangularRandomVariable</span><span class="p">(</span><span class="n">lowLimit</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">weights</span><span class="p">[</span><span class="n">g</span><span class="p">])</span><span class="o">/</span><span class="mf">2.0</span><span class="p">,</span>
                                                                <span class="n">highLimit</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">weights</span><span class="p">[</span><span class="n">g</span><span class="p">])</span><span class="o">*</span><span class="mf">2.0</span><span class="p">,</span>
                                                                <span class="n">mode</span><span class="o">=</span><span class="n">weightMode</span><span class="p">,</span>
                                                                <span class="n">seed</span><span class="o">=</span><span class="n">samplingSeed</span><span class="p">)</span>
                    <span class="n">rw</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span> <span class="s1">&#39;</span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">extTrRdv</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="p">)</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: wrong distribution </span><span class="si">%s</span><span class="s1">. Available laws: triangular (default), uniform, beta(2,2), beta(12,12)&#39;</span> <span class="o">%</span> <span class="n">distribution</span><span class="p">)</span>        
                <span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rw</span>
<span class="c1">##                if Debug:</span>
<span class="c1">##                    print(self.criteria[g][&#39;weight&#39;],rw)</span>
            <span class="n">srelation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructRelation</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">,</span>\
                                               <span class="n">perfTab</span><span class="o">.</span><span class="n">evaluation</span><span class="p">,</span>\
                                               <span class="n">hasNoVeto</span> <span class="o">=</span> <span class="n">hasNoVeto</span><span class="p">,</span>\
                                               <span class="n">hasBipolarVeto</span> <span class="o">=</span> <span class="n">hasBipolarVeto</span><span class="p">,</span>\
                                               <span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                    <span class="n">valuationObservations</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">srelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">breaks</span><span class="p">)):</span>
                        <span class="k">if</span> <span class="n">srelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">breaks</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
                            <span class="n">frequency</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                            
        <span class="bp">self</span><span class="o">.</span><span class="n">relationStatistics</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relationStatistics</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">relationStatistics</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>              
                <span class="n">valuationObservations</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="c1">##                if Debug and x == &#39;a04&#39; and y == &#39;a05&#39;:</span>
<span class="c1">##                    print(x,y)</span>
<span class="c1">##                    print(valuationObservations[x][y])</span>
                
<span class="c1">##                q = sampleSize//2</span>
<span class="c1">##                if (sampleSize % 2) == 0:    </span>
<span class="c1">##                    median = (valuationObservations[x][y][q] + valuationObservations[x][y][q+1])/Decimal(&#39;2&#39;)</span>
<span class="c1">##                else:</span>
<span class="c1">##                    median = (valuationObservations[x][y][q])</span>
<span class="c1">##                print(median,self._computeQuantile(0.5,valuationObservations[x][y]))</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">relationStatistics</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="s1">&#39;median&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_computeQuantile</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span><span class="n">valuationObservations</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">Debug</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">==</span> <span class="s1">&#39;a04&#39;</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">==</span> <span class="s1">&#39;a05&#39;</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">frequency</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">quantilesId</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">frequency</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="n">quantilesId</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">relationStatistics</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="s1">&#39;likelihood&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="nb">float</span><span class="p">(</span><span class="n">frequency</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="n">quantilesId</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">sampleSize</span><span class="p">)</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">relationStatistics</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="s1">&#39;likelihood&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">frequency</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="n">quantilesId</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">sampleSize</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_computeRelationStatistics</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">valuationObservations</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relationStatistics</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
                <span class="n">requiredLikelihood</span> <span class="o">=</span> <span class="n">likelihood</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relationStatistics</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="s1">&#39;likelihood&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">requiredLikelihood</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">relationStatistics</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="s1">&#39;median&#39;</span><span class="p">])</span>
                
        <span class="c1">#self.relationStatistics = deepcopy(relationStatistics)</span>
        <span class="k">if</span> <span class="n">Normalized</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationObservations</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">valuationObservations</span><span class="p">)</span>
        <span class="c1"># sampled valuations r(x,y) are observed in standard bipolar percentages, i.e. [-100,100]</span>
        <span class="c1"># the breaks are left closed integers and go from -100 to 100</span>
        <span class="c1"># the quantileId disctionary gives the</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frequency</span> <span class="o">=</span> <span class="n">frequency</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quantilesId</span> <span class="o">=</span> <span class="n">quantilesId</span>
<span class="c1">##        if Debug:</span>
<span class="c1">##            print(self.valuationObservations)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>

<div class="viewcode-block" id="StochasticBipolarOutrankingDigraph.computeCDF">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.StochasticBipolarOutrankingDigraph.computeCDF">[docs]</a>
    <span class="k">def</span> <span class="nf">computeCDF</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">rValue</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        computes by interpolation the likelihood of a given rValue with respect to the sampled r(x,y) valuations.</span>

<span class="sd">        *Parameters*:</span>

<span class="sd">            * action key x</span>
<span class="sd">            * action key y</span>
<span class="sd">            * r(x,y)</span>
<span class="sd">            </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">floor</span>
        <span class="n">fval</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">100.0</span> <span class="o">+</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">rValue</span><span class="p">)</span> <span class="o">-</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]))</span>\
                <span class="o">/</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]))</span><span class="o">*</span><span class="mf">200.0</span><span class="p">)</span>
        <span class="n">val</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">floor</span><span class="p">(</span><span class="n">fval</span><span class="p">))</span>
        <span class="c1">#print(fval,val)</span>
        <span class="k">if</span> <span class="n">val</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
            <span class="c1">#print(self.frequency[x][y][self.quantilesId[val]],self.frequency[x][y][self.quantilesId[val+1]])</span>
            <span class="n">Fval</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frequency</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">quantilesId</span><span class="p">[</span><span class="n">val</span><span class="p">]])</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sampleSize</span><span class="p">)</span>
            <span class="n">Fval1</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frequency</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">quantilesId</span><span class="p">[</span><span class="n">val</span><span class="o">+</span><span class="mi">1</span><span class="p">]])</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sampleSize</span><span class="p">)</span>
            <span class="n">prob</span> <span class="o">=</span> <span class="n">Fval</span> <span class="o">+</span> <span class="p">((</span><span class="n">fval</span> <span class="o">-</span> <span class="n">val</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">Fval1</span> <span class="o">-</span> <span class="n">Fval</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Fval</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frequency</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">quantilesId</span><span class="p">[</span><span class="n">val</span><span class="p">]])</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sampleSize</span><span class="p">)</span>
            <span class="n">prob</span> <span class="o">=</span> <span class="n">Fval</span>
        <span class="k">return</span> <span class="n">prob</span></div>

        
    <span class="k">def</span> <span class="nf">_computeQuantile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">observations</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        computes by interpolation the quantile of probability p of a list of sorted observations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">floor</span><span class="p">,</span><span class="n">ceil</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">observations</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">p</span> <span class="o">&lt;=</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="n">quantile</span> <span class="o">=</span> <span class="n">observations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">p</span> <span class="o">&gt;=</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="n">quantile</span> <span class="o">=</span> <span class="n">observations</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>        
        <span class="k">else</span><span class="p">:</span>
            <span class="n">q</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">*</span><span class="n">p</span>
            <span class="n">flq</span> <span class="o">=</span> <span class="n">floor</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
            <span class="n">clq</span> <span class="o">=</span> <span class="n">ceil</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
            <span class="n">quantile</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">observations</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">flq</span><span class="p">)])</span>\
                   <span class="o">+</span> <span class="p">(</span><span class="n">q</span><span class="o">-</span><span class="n">flq</span><span class="p">)</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">observations</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">clq</span><span class="p">)]</span><span class="o">-</span> <span class="n">observations</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">flq</span><span class="p">)])</span>
        <span class="k">return</span> <span class="n">quantile</span>

    <span class="k">def</span> <span class="nf">_computeRelationStatistics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">observations</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes the pairwise relation statistics from the sampled observations.</span>
<span class="sd">        Results are stored in the self.relationStatistics[x][y] dictionary</span>
<span class="sd">        with keys = &#39;sd&#39;,&#39;Q0,&#39;Q1,&#39;Q3&#39;,&#39;Q4&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">observations</span><span class="p">)</span>
        <span class="n">fn</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="n">mean</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">meansq2</span> <span class="o">=</span> <span class="mf">0.0</span> 
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">observations</span><span class="p">:</span>
            <span class="n">fv</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            <span class="n">mean</span> <span class="o">+=</span> <span class="n">fv</span>
            <span class="n">meansq2</span> <span class="o">+=</span> <span class="p">(</span><span class="n">fv</span> <span class="o">*</span> <span class="n">fv</span><span class="p">)</span>
        <span class="n">mean</span> <span class="o">/=</span> <span class="n">fn</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relationStatistics</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="s1">&#39;mean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mean</span>
        <span class="n">variance</span> <span class="o">=</span> <span class="p">(</span><span class="n">meansq2</span> <span class="o">/</span> <span class="n">fn</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">mean</span><span class="o">*</span><span class="n">mean</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relationStatistics</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="s1">&#39;sd&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">variance</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relationStatistics</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="s1">&#39;Q0&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">observations</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relationStatistics</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="s1">&#39;Q1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_computeQuantile</span><span class="p">(</span><span class="mf">0.25</span><span class="p">,</span><span class="n">observations</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relationStatistics</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="s1">&#39;Q3&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_computeQuantile</span><span class="p">(</span><span class="mf">0.75</span><span class="p">,</span><span class="n">observations</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relationStatistics</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="s1">&#39;Q4&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">observations</span><span class="p">))</span>

<div class="viewcode-block" id="StochasticBipolarOutrankingDigraph.showRelationTable">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.StochasticBipolarOutrankingDigraph.showRelationTable">[docs]</a>
    <span class="k">def</span> <span class="nf">showRelationTable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">IntegerValues</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">actionsSubset</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">hasLPDDenotation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">hasLatexFormat</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">hasIntegerValuation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">relation</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        specialising BipolarOutrankingDigraph.showRelationTable() for stochstic instances.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Stochastic outranking digraph </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Sampling size: </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">sampleSize</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Likelihood of Condorcet digraph: </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">likelihood</span><span class="p">)</span>
        <span class="n">BipolarOutrankingDigraph</span><span class="o">.</span><span class="n">showRelationTable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">IntegerValues</span><span class="o">=</span><span class="n">IntegerValues</span><span class="p">,</span>
                          <span class="n">actionsSubset</span><span class="o">=</span> <span class="n">actionsSubset</span><span class="p">,</span>
                          <span class="n">hasLPDDenotation</span><span class="o">=</span><span class="n">hasLPDDenotation</span><span class="p">,</span>
                          <span class="n">hasLatexFormat</span><span class="o">=</span><span class="n">hasLatexFormat</span><span class="p">,</span>
                          <span class="n">hasIntegerValuation</span><span class="o">=</span><span class="n">hasIntegerValuation</span><span class="p">,</span>
                          <span class="n">relation</span><span class="o">=</span><span class="n">relation</span><span class="p">)</span></div>


<div class="viewcode-block" id="StochasticBipolarOutrankingDigraph.computeCLTLikelihoods">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.StochasticBipolarOutrankingDigraph.computeCLTLikelihoods">[docs]</a>
    <span class="k">def</span> <span class="nf">computeCLTLikelihoods</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">distribution</span><span class="o">=</span><span class="s2">&quot;triangular&quot;</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the pairwise CLT likelihood of the at least as good as relation</span>
<span class="sd">        neglecting all considerable large performance differences polarisations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
        <span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span>
        <span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>
        <span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">norm</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">sumWeights</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">m</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">)</span>
        <span class="n">weightSquares</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
            <span class="n">gWeight</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">])</span>
<span class="c1">##            if Debug:</span>
<span class="c1">##                print(g,gWeight)</span>
            <span class="n">weightSquares</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="n">gWeight</span><span class="o">*</span><span class="n">gWeight</span>
            <span class="n">sumWeights</span> <span class="o">+=</span> <span class="n">gWeight</span>
<span class="c1">##        if Debug:</span>
<span class="c1">##            print(sumWeights)</span>
<span class="c1">##            print(weightSquares)</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">BipolarOutrankingDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">hasNoVeto</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="o">-</span><span class="n">sumWeights</span><span class="p">,</span><span class="n">sumWeights</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="n">g</span><span class="o">.</span><span class="n">showRelationTable</span><span class="p">()</span>
        <span class="n">ccf</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">distribution</span> <span class="o">==</span> <span class="s1">&#39;uniform&#39;</span><span class="p">:</span>
            <span class="n">varFactor</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;3&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">distribution</span> <span class="o">==</span> <span class="s1">&#39;triangular&#39;</span><span class="p">:</span>
            <span class="n">varFactor</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;6&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">distribution</span> <span class="o">==</span> <span class="s1">&#39;beta(2,2)&#39;</span><span class="p">:</span>
            <span class="n">varFactor</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;5&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">distribution</span> <span class="o">==</span> <span class="s1">&#39;beta(4,4)&#39;</span><span class="p">:</span>
            <span class="n">varFactor</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;9&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">ccf</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="n">ccf</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;std&#39;</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)}</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">criteriaList</span><span class="p">:</span>
                    <span class="n">ccf</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">criterionCharacteristicFunction</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
                    <span class="n">ccf</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="s1">&#39;std&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ccf</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="n">c</span><span class="p">])</span><span class="o">*</span><span class="n">weightSquares</span><span class="p">[</span><span class="n">c</span><span class="p">]</span>
<span class="c1">##                    if Debug:</span>
<span class="c1">##                        print(c,x,y,ccf[x][y][c])</span>
                <span class="n">ccf</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="s1">&#39;std&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">varFactor</span><span class="o">*</span><span class="n">ccf</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="s1">&#39;std&#39;</span><span class="p">])</span>
<span class="c1">##                if Debug:</span>
<span class="c1">##                    print(x,y,ccf[x][y][&#39;std&#39;])</span>
        <span class="n">lh</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">lh</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">norm</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]),</span><span class="nb">float</span><span class="p">(</span><span class="n">ccf</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="s1">&#39;std&#39;</span><span class="p">]))</span>
                <span class="n">lh</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">if</span> <span class="n">g</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]:</span>
                    <span class="n">lh</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">n</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">lh</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">lh</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">lh</span></div>



<div class="viewcode-block" id="StochasticBipolarOutrankingDigraph.showRelationStatistics">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.StochasticBipolarOutrankingDigraph.showRelationStatistics">[docs]</a>
    <span class="k">def</span> <span class="nf">showRelationStatistics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">argument</span><span class="o">=</span><span class="s1">&#39;likelihoods&#39;</span><span class="p">,</span>
                          <span class="n">actionsSubset</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">hasLatexFormat</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">Bipolar</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        prints the relation statistics in actions X actions table format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">copysign</span>
<span class="c1">##        if hasLPDDenotation:</span>
<span class="c1">##            try:</span>
<span class="c1">##                largePerformanceDifferencesCount = self.largePerformanceDifferencesCount</span>
<span class="c1">##                gnv = BipolarOutrankingDigraph(self.performanceTableau,hasNoVeto=True)</span>
<span class="c1">##                recodeValuation(self.valuationdomain[&#39;min&#39;],self.valuationdomain[&#39;max&#39;])</span>
<span class="c1">##            except:</span>

        <span class="n">hasLPDDenotation</span> <span class="o">=</span> <span class="kc">False</span>
            
        <span class="k">if</span> <span class="n">actionsSubset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="n">actionsSubset</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">argument</span> <span class="o">==</span> <span class="s1">&#39;likelihoods&#39;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">Bipolar</span><span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span>\
        <span class="n">copysign</span><span class="p">(</span> <span class="p">((</span><span class="mf">2.0</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">relationStatistics</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="s1">&#39;likelihood&#39;</span><span class="p">])</span> <span class="o">-</span> <span class="mf">1.0</span><span class="p">),</span>
                   <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relationStatistics</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="s1">&#39;likelihood&#39;</span><span class="p">]</span>
                <span class="k">elif</span> <span class="n">argument</span> <span class="o">==</span> <span class="s1">&#39;medians&#39;</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relationStatistics</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="s1">&#39;median&#39;</span><span class="p">]</span>
                <span class="k">elif</span> <span class="n">argument</span> <span class="o">==</span> <span class="s1">&#39;means&#39;</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relationStatistics</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">][</span><span class="s1">&#39;mean&#39;</span><span class="p">]</span>
                
            
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* ---- Relation statistics -----</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">argument</span> <span class="o">==</span> <span class="s1">&#39;likelihoods&#39;</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; 0 p-val | &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">argument</span> <span class="o">==</span> <span class="s1">&#39;means&#39;</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; mean  | &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">argument</span> <span class="o">==</span> <span class="s1">&#39;medians&#39;</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  med  | &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            
        <span class="c1">#actions = [x for x in actions]</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="nb">frozenset</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">actionsList</span> <span class="o">+=</span> <span class="p">[(</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;shortName&#39;</span><span class="p">],</span><span class="n">x</span><span class="p">)]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">actionsList</span> <span class="o">+=</span> <span class="p">[(</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">],</span><span class="n">x</span><span class="p">)]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">actionsList</span> <span class="o">+=</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span><span class="n">x</span><span class="p">)]</span>
        <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

<span class="c1">##        try:</span>
<span class="c1">##            hasIntegerValuation = self.valuationdomain[&#39;hasIntegerValuation&#39;]</span>
<span class="c1">##        except KeyError</span>
        <span class="n">hasIntegerValuation</span> <span class="o">=</span> <span class="kc">False</span>
        
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="o">+</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;&#39;,  &quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">-----|------------------------------------------------------------&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">hasLatexFormat</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;$&quot;</span><span class="o">+</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;$ &amp; &quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="o">+</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;&#39; |  &quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">hasIntegerValuation</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">hasLPDDenotation</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%+d</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">hasLatexFormat</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;$</span><span class="si">%+d</span><span class="s1">$ &amp;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%+d</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">hasLPDDenotation</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%+2.2f</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">hasLatexFormat</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;$</span><span class="si">%+2.2f</span><span class="s1">$ &amp; &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>       
                    <span class="k">else</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%+2.2f</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                
            <span class="k">if</span> <span class="n">hasLatexFormat</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; </span><span class="se">\\</span><span class="s1">cr&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">hasLPDDenotation</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="o">+</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;&#39; | &quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(</span><span class="si">%+d</span><span class="s1">,</span><span class="si">%+d</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">largePerformanceDifferencesCount</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="s1">&#39;positive&#39;</span><span class="p">],</span>\
                                          <span class="n">largePerformanceDifferencesCount</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="s1">&#39;negative&#39;</span><span class="p">]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">()</span>
            
                
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>
</div>

    

<div class="viewcode-block" id="CoalitionsOutrankingsFusionDigraph">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.CoalitionsOutrankingsFusionDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">CoalitionsOutrankingsFusionDigraph</span><span class="p">(</span><span class="n">BipolarOutrankingDigraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    With a list of criteria coalitions, a fusion digraph is constructed form the fusion of the corresponding marginal coalitions restricted bipolar outranking digraphs.</span>

<span class="sd">    When *coalitionsList* is None, an &#39;o-average&#39; fusion of the decision objectives restricted outranking digraphs is produced (see *UnOpposedBipolarOutrankingDigraph* class).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">argPerfTab</span><span class="p">,</span>
                     <span class="n">coalitionsList</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">actionsSubset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                     <span class="n">CopyPerfTab</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                     <span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">time</span>

        <span class="c1"># set initial time stamp</span>
        <span class="n">tt</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        
        <span class="c1"># ----  performance tableau data input </span>
        <span class="k">if</span> <span class="n">argPerfTab</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Performance tableau required !&#39;</span><span class="p">)</span>
            <span class="c1">#perfTab = RandomPerformanceTableau(commonThresholds = [(10.0,0.0),(20.0,0.0),(80.0,0.0),(101.0,0.0)])</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">,(</span><span class="nb">str</span><span class="p">)):</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">PerformanceTableau</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">argPerfTab</span>

        <span class="c1"># transfering the performance tableau data to self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;objectivesFusion_&#39;</span> <span class="o">+</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">name</span>
        <span class="c1"># actions</span>
        <span class="k">if</span> <span class="n">actionsSubset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">,</span><span class="nb">list</span><span class="p">):</span>
                <span class="n">actions</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                    <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">CopyPerfTab</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">actions</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsSubset</span><span class="p">:</span>
                <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
     
        <span class="c1"># valuation domain</span>
        <span class="n">Min</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
        <span class="n">Med</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="n">Max</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Min</span><span class="p">,</span><span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Med</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Max</span><span class="p">}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;precision&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">valuationPrecision</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;precision&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
 
        <span class="c1"># objectives and criteria</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">CopyPerfTab</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">objectives</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">objectives</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="c1">#  install method Data and parameters</span>
        <span class="n">methodData</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">valuationType</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">parameter</span><span class="p">[</span><span class="s1">&#39;valuationType&#39;</span><span class="p">]</span>
            <span class="n">variant</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">parameter</span><span class="p">[</span><span class="s1">&#39;variant&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">valuationType</span> <span class="o">=</span> <span class="s1">&#39;bipolar&#39;</span>
            <span class="n">variant</span> <span class="o">=</span> <span class="s1">&#39;standard&#39;</span>
        <span class="n">methodData</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;valuationType&#39;</span><span class="p">:</span> <span class="n">valuationType</span><span class="p">,</span> <span class="s1">&#39;variant&#39;</span><span class="p">:</span> <span class="n">variant</span><span class="p">}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">vetoType</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">parameter</span><span class="p">[</span><span class="s1">&#39;vetoType&#39;</span><span class="p">]</span>
            <span class="n">methodData</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">][</span><span class="s1">&#39;vetoType&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vetoType</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">vetoType</span> <span class="o">=</span> <span class="s1">&#39;normal&#39;</span>
            <span class="n">methodData</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">][</span><span class="s1">&#39;vetoType&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vetoType</span>
        <span class="k">if</span> <span class="n">vetoType</span> <span class="o">==</span> <span class="s1">&#39;bipolar&#39;</span><span class="p">:</span>
            <span class="n">hasBipolarVeto</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">methodData</span> <span class="o">=</span> <span class="n">methodData</span>

        <span class="c1"># insert performance Data</span>
        <span class="k">if</span> <span class="n">CopyPerfTab</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">evaluation</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">CopyPerfTab</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        
        <span class="c1"># init general digraph Data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        
        <span class="c1"># finished data input time stamp</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">runTimes</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;dataInput&#39;</span><span class="p">:</span> <span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">tt</span> <span class="p">}</span>

        <span class="c1"># ---------- construct outranking relation</span>
        <span class="c1"># initial time stamp</span>
        <span class="n">tcp</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="k">if</span> <span class="n">coalitionsList</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">objectives</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span>
                <span class="n">coalitionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">][</span><span class="s1">&#39;criteria&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objectives</span><span class="p">]</span>
                <span class="c1">#print(coalitionsList)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;!!! Error: No coalitions given and performance tableau has no objectives&#39;</span><span class="p">)</span>
                <span class="k">return</span>
        <span class="n">marginalRelations</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">marginalDigraphs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">coalition</span> <span class="ow">in</span> <span class="n">coalitionsList</span><span class="p">:</span>
            <span class="n">mg</span> <span class="o">=</span> <span class="n">BipolarOutrankingDigraph</span><span class="p">(</span><span class="n">perfTab</span><span class="p">,</span><span class="n">criteriaSubset</span><span class="o">=</span><span class="n">coalition</span><span class="p">)</span>
            <span class="n">marginalRelations</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">coalition</span><span class="p">)]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">mg</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
            <span class="n">marginalDigraphs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mg</span><span class="p">)</span>
        <span class="n">weights</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">coalition</span> <span class="ow">in</span> <span class="n">coalitionsList</span><span class="p">:</span>
            <span class="n">sumMarginalWeights</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">coalition</span><span class="p">:</span>
                <span class="n">sumMarginalWeights</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span>
            <span class="n">weights</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sumMarginalWeights</span><span class="p">)</span>            
        <span class="c1">#weights = [objectives[obj][&#39;weight&#39;] for obj in objectives]</span>
        <span class="n">fg</span> <span class="o">=</span> <span class="n">FusionLDigraph</span><span class="p">(</span><span class="n">marginalDigraphs</span><span class="p">,</span><span class="s1">&#39;o-average&#39;</span><span class="p">,</span><span class="n">weights</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">fg</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">marginalRelationsRelations</span> <span class="o">=</span> <span class="n">marginalRelations</span>

        <span class="c1"># finished relation computing time stamp</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">runTimes</span><span class="p">[</span><span class="s1">&#39;computeRelation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">tcp</span>

        <span class="c1"># ----  computing the gamma sets</span>
        <span class="n">tg</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">runTimes</span><span class="p">[</span><span class="s1">&#39;gammaSets&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">tg</span> 

        <span class="c1"># total constructor time</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">runTimes</span><span class="p">[</span><span class="s1">&#39;totalTime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">tt</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>



<div class="viewcode-block" id="UnOpposedBipolarOutrankingDigraph">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.UnOpposedBipolarOutrankingDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">UnOpposedBipolarOutrankingDigraph</span><span class="p">(</span><span class="n">CoalitionsOutrankingsFusionDigraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    When operating an *o-average* fusion of the mariginal outranking digraphs restricted to the coalition of criteria supporting each decision objective, we obtain **unopposed** outranking situtations, namely *validated* by one or more decision objectives without being *invalidated* by any other decision objective. </span>

<span class="sd">    These positive, as well as negative outranking characteristics, appear hence stable with respect to the importance of the decision objectives when proportional criteria significances are given. </span>

<span class="sd">    Furthermore, polarising the outranking digraph with considerable performance differences is here restricted to each decision objective, which makes it easier to decide on veto discrimination thresholds.</span>
<span class="sd">   </span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">argPerfTab</span><span class="p">,</span><span class="n">actionsSubset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">CopyPerfTab</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>

                 
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="k">for</span> <span class="n">att</span> <span class="ow">in</span> <span class="n">argPerfTab</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">att</span><span class="p">]</span> <span class="o">=</span> <span class="n">argPerfTab</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">att</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">coalitions</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">objectives</span><span class="p">[</span><span class="n">obj</span><span class="p">][</span><span class="s1">&#39;criteria&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;coalitions:&#39;</span><span class="p">,</span><span class="n">coalitions</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;!! Error: the given performance tableau does not contain objectives.&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">uoo</span> <span class="o">=</span> <span class="n">CoalitionsOutrankingsFusionDigraph</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">,</span>\
                                            <span class="n">CopyPerfTab</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>\
                                            <span class="n">coalitionsList</span><span class="o">=</span><span class="n">coalitions</span><span class="p">,</span>\
                                            <span class="n">actionsSubset</span><span class="o">=</span><span class="n">actionsSubset</span><span class="p">,</span>\
                                            <span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">att</span> <span class="ow">in</span> <span class="n">uoo</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">att</span><span class="p">]</span> <span class="o">=</span> <span class="n">uoo</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">att</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+=</span> <span class="s1">&#39;_unopposed_outrankings&#39;</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="UnOpposedBipolarOutrankingDigraph.computeOppositeness">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.UnOpposedBipolarOutrankingDigraph.computeOppositeness">[docs]</a>
    <span class="k">def</span> <span class="nf">computeOppositeness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">InPercents</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes the degree in *[0.0, 1.0]* of oppositeness --**preferential disagreement**-- of the multiple decision objectives.</span>
<span class="sd">        </span>
<span class="sd">        Renders a dictionary with three entries:</span>

<span class="sd">        - *standardSize* : size of the corresponding</span>
<span class="sd">          standard bipolar-valued outranking digraph;</span>
<span class="sd">        - *unopposedSize* : size of the the corresponding</span>
<span class="sd">          unopposed bipolar-valued outranking digraph;</span>
<span class="sd">        - *oppositeness* : (1.0 - unopposedSize/standardSize);</span>
<span class="sd">          if *InPercents* has value True, the *oppositeness* is rendered in percents format.</span>
<span class="sd">    </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">outrankingDigraphs</span> <span class="kn">import</span> <span class="n">BipolarOutrankingDigraph</span>
        <span class="n">du</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeSize</span><span class="p">()</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">BipolarOutrankingDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">computeSize</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">InPercents</span><span class="p">:</span>
            <span class="n">op</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span><span class="p">(</span><span class="n">du</span><span class="o">/</span><span class="n">d</span><span class="p">))</span><span class="o">*</span><span class="mf">100.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">op</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span><span class="p">(</span><span class="n">du</span><span class="o">/</span><span class="n">d</span><span class="p">))</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;standardSize&#39;</span><span class="p">:</span> <span class="n">d</span><span class="p">,</span> <span class="s1">&#39;unopposedSize&#39;</span><span class="p">:</span> <span class="n">du</span><span class="p">,</span> <span class="s1">&#39;oppositeness&#39;</span><span class="p">:</span> <span class="n">op</span><span class="p">}</span></div>
</div>

        
        
<div class="viewcode-block" id="SymmetricAverageFusionOutrankingDigraph">
<a class="viewcode-back" href="../techDoc.html#outrankingDigraphs.SymmetricAverageFusionOutrankingDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">SymmetricAverageFusionOutrankingDigraph</span><span class="p">(</span><span class="n">BipolarOutrankingDigraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    in development !</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">argPerfTab</span><span class="p">,</span><span class="n">actionsSubset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">coalition</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">CopyPerfTab</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Normalized</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">time</span>

        <span class="c1"># set initial time stamp</span>
        <span class="n">tt</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        
        <span class="c1"># ----  performance tableau data input </span>
        <span class="k">if</span> <span class="n">argPerfTab</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Performance tableau required !&#39;</span><span class="p">)</span>
            <span class="c1">#perfTab = RandomPerformanceTableau(commonThresholds = [(10.0,0.0),(20.0,0.0),(80.0,0.0),(101.0,0.0)])</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">,(</span><span class="nb">str</span><span class="p">)):</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">PerformanceTableau</span><span class="p">(</span><span class="n">argPerfTab</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">perfTab</span> <span class="o">=</span> <span class="n">argPerfTab</span>

        <span class="c1"># transfering the performance tableau data to self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;symAvFusion_&#39;</span> <span class="o">+</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">name</span>
        <span class="c1"># actions</span>
        <span class="k">if</span> <span class="n">actionsSubset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">,</span><span class="nb">list</span><span class="p">):</span>
                <span class="n">actions</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                    <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">CopyPerfTab</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">actions</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsSubset</span><span class="p">:</span>
                <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
     
        <span class="c1"># valuation domain</span>
        <span class="k">if</span> <span class="n">Normalized</span><span class="p">:</span>
            <span class="n">Min</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
            <span class="n">Med</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="n">Max</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Min</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-100.0&#39;</span><span class="p">)</span>
            <span class="n">Med</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="n">Max</span> <span class="o">=</span>   <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Min</span><span class="p">,</span><span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Med</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Max</span><span class="p">}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;precision&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">valuationPrecision</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;precision&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
 
        <span class="c1"># objectives and criteria</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">CopyPerfTab</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">objectives</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">objectives</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">objectives</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">coalition</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">coalition</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">coalition</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">CopyPerfTab</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span> <span class="o">=</span> <span class="n">criteria</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">convertWeight2Decimal</span><span class="p">()</span>

        <span class="c1">#  install method Data and parameters</span>
        <span class="n">methodData</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">valuationType</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">parameter</span><span class="p">[</span><span class="s1">&#39;valuationType&#39;</span><span class="p">]</span>
            <span class="n">variant</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">parameter</span><span class="p">[</span><span class="s1">&#39;variant&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">valuationType</span> <span class="o">=</span> <span class="s1">&#39;bipolar&#39;</span>
            <span class="n">variant</span> <span class="o">=</span> <span class="s1">&#39;standard&#39;</span>
        <span class="n">methodData</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;valuationType&#39;</span><span class="p">:</span> <span class="n">valuationType</span><span class="p">,</span> <span class="s1">&#39;variant&#39;</span><span class="p">:</span> <span class="n">variant</span><span class="p">}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">vetoType</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">parameter</span><span class="p">[</span><span class="s1">&#39;vetoType&#39;</span><span class="p">]</span>
            <span class="n">methodData</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">][</span><span class="s1">&#39;vetoType&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vetoType</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">vetoType</span> <span class="o">=</span> <span class="s1">&#39;normal&#39;</span>
            <span class="n">methodData</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">][</span><span class="s1">&#39;vetoType&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vetoType</span>
        <span class="k">if</span> <span class="n">vetoType</span> <span class="o">==</span> <span class="s1">&#39;bipolar&#39;</span><span class="p">:</span>
            <span class="n">hasBipolarVeto</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">methodData</span> <span class="o">=</span> <span class="n">methodData</span>

        <span class="c1"># insert performance Data</span>
        <span class="k">if</span> <span class="n">CopyPerfTab</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">evaluation</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">evaluation</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">evaluation</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">CopyPerfTab</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">perfTab</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="c1"># init general digraph Data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        
        <span class="c1"># finished data input time stamp</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">runTimes</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;dataInput&#39;</span><span class="p">:</span> <span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">tt</span> <span class="p">}</span>

        <span class="c1"># ---------- construct outranking relation</span>
        <span class="c1"># initial time stamp</span>
        <span class="n">tcp</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">criteria</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">criteria</span>
        <span class="n">margG</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">:</span>
            <span class="n">gg</span> <span class="o">=</span> <span class="n">BipolarOutrankingDigraph</span><span class="p">(</span><span class="n">perfTab</span><span class="p">,</span><span class="n">coalition</span><span class="o">=</span><span class="p">[</span><span class="n">g</span><span class="p">],</span>\
                                          <span class="n">CopyPerfTab</span><span class="o">=</span><span class="n">CopyPerfTab</span><span class="p">,</span>\
                                          <span class="n">Normalized</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">margG</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">gg</span><span class="p">)</span>
        <span class="n">weights</span> <span class="o">=</span> <span class="p">[</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">criteria</span><span class="p">]</span>
        <span class="n">fg</span> <span class="o">=</span> <span class="n">FusionLDigraph</span><span class="p">(</span><span class="n">margG</span><span class="p">,</span><span class="s1">&#39;o-average&#39;</span><span class="p">,</span><span class="n">weights</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">fg</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        
        <span class="c1"># finished relation computing time stamp</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">runTimes</span><span class="p">[</span><span class="s1">&#39;computeRelation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">tcp</span>

        <span class="c1"># ----  computing the gamma sets</span>
        <span class="n">tg</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">runTimes</span><span class="p">[</span><span class="s1">&#39;gammaSets&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">tg</span> 

        <span class="c1"># total constructor time</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">runTimes</span><span class="p">[</span><span class="s1">&#39;totalTime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">tt</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>



<span class="k">class</span> <span class="nc">_RubisRestServer</span><span class="p">(</span><span class="n">ServerProxy</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    xmlrpc-cgi Proxy Server for accessing on-line</span>
<span class="sd">    a Rubis Rest Solver.</span>
<span class="sd">    Deprecated !</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">host</span><span class="o">=</span><span class="s2">&quot;https://leopold-loewenheim.uni.lu/cgi-bin/xmlrpc_cgi.py&quot;</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Rubis Rest Server connection.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span><span class="nn">xmlrpc.client</span><span class="o">,</span><span class="nn">ssl</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_server</span> <span class="o">=</span> <span class="n">xmlrpc</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">ServerProxy</span><span class="p">(</span><span class="n">host</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;host=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">host</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>           
                <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_server</span><span class="o">.</span><span class="n">hello</span><span class="p">()</span>
                <span class="nb">print</span> <span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s1">&#39;message&#39;</span><span class="p">])</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;available service ports&quot;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_server</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">listMethods</span><span class="p">():</span>
                    <span class="k">if</span> <span class="s1">&#39;system&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">m</span><span class="p">:</span>
                        <span class="nb">print</span> <span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_server</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">methodHelp</span><span class="p">(</span><span class="n">m</span><span class="p">))</span>

            <span class="k">except</span> <span class="n">xmlrpc</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">Fault</span> <span class="k">as</span> <span class="n">faultobj</span><span class="p">:</span>
                <span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;Rubis Server error:&quot;</span><span class="p">,</span> <span class="n">faultobj</span><span class="o">.</span><span class="n">faultCode</span><span class="p">)</span>
                <span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;&gt;&gt;&gt; </span><span class="si">%s</span><span class="s2"> &lt;&lt;&lt;&quot;</span> <span class="o">%</span> <span class="n">faultobj</span><span class="o">.</span><span class="n">faultString</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>

            <span class="k">except</span><span class="p">:</span>
                <span class="nb">print</span> <span class="p">(</span><span class="s2">&quot;Client Error: &#39;</span><span class="si">%s</span><span class="s2">/</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span><span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">1</span><span class="p">]))</span>
                <span class="k">return</span> <span class="kc">None</span>
            
    <span class="k">def</span> <span class="nf">ping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_server</span><span class="o">.</span><span class="n">hello</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s1">&#39;message&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;available service ports&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_server</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">listMethods</span><span class="p">():</span>
                <span class="k">if</span> <span class="s1">&#39;system&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">m</span><span class="p">:</span>
                    <span class="nb">print</span> <span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_server</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">methodHelp</span><span class="p">(</span><span class="n">m</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">submitProblem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">perfTab</span><span class="p">,</span>\
                      <span class="n">valuation</span><span class="o">=</span><span class="s1">&#39;bipolar&#39;</span><span class="p">,</span>\
                      <span class="n">hasVeto</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>\
                      <span class="n">argTitle</span><span class="o">=</span><span class="s1">&#39;XMCDA 2.0 encoding&#39;</span><span class="p">,</span>\
                      <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Submit PerformanceTableau class instances.</span>

<span class="sd">        *Parameters*:</span>

<span class="sd">             * valuation: &#39;bipolar&#39;, &#39;robust&#39;, &#39;integer&#39;</span>
<span class="sd">             * hasVeto: Switch on or off vetoes</span>
<span class="sd">             * argTitle: set specific application title</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">problemText</span> <span class="o">=</span> <span class="n">perfTab</span><span class="o">.</span><span class="n">saveXMCDA2</span><span class="p">(</span><span class="n">isStringIO</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>\
                                         <span class="n">valuationType</span><span class="o">=</span><span class="n">valuation</span><span class="p">,</span>\
                                         <span class="n">servingD3</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>\
                                         <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;Rubis Rest Server generated&#39;</span><span class="p">,</span>\
                                         <span class="n">hasVeto</span> <span class="o">=</span> <span class="n">hasVeto</span><span class="p">,</span>
                                         <span class="n">title</span> <span class="o">=</span> <span class="n">argTitle</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuation</span> <span class="o">=</span> <span class="n">valuation</span>
        <span class="n">arg</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;problemFile&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">problemText</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
        <span class="n">answer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_server</span><span class="o">.</span><span class="n">submitProblem</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ticket</span> <span class="o">=</span> <span class="n">answer</span><span class="p">[</span><span class="s1">&#39;ticket&#39;</span><span class="p">]</span> 
        <span class="nb">print</span><span class="p">(</span><span class="n">answer</span><span class="p">[</span><span class="s1">&#39;message&#39;</span><span class="p">])</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Server ticket: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">answer</span><span class="p">[</span><span class="s1">&#39;ticket&#39;</span><span class="p">])</span>
        <span class="n">fileNameTicket</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">+</span><span class="s1">&#39;Ticket.txt&#39;</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileNameTicket</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">answer</span><span class="p">[</span><span class="s1">&#39;ticket&#39;</span><span class="p">])</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">submitXMCDA2Problem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="p">,</span><span class="n">valuation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Submit stored XMCDA 2.0 encoded performance tableau.</span>

<span class="sd">        .. warning::</span>

<span class="sd">            An &lt;_.xml&gt; file extension is assumed !</span>
<span class="sd">            </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Calling submitXMCDA2Problem(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="n">fileName</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">fileName</span>
        <span class="n">fileNameExt</span> <span class="o">=</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s1">&#39;.xml&#39;</span>
        <span class="n">fi</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileNameExt</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">problemText</span> <span class="o">=</span> <span class="n">fi</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">fi</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuation</span> <span class="o">=</span> <span class="n">valuation</span>
        <span class="n">arg</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;problemFile&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">problemText</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
        <span class="n">answer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_server</span><span class="o">.</span><span class="n">submitProblem</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ticket</span> <span class="o">=</span> <span class="n">answer</span><span class="p">[</span><span class="s1">&#39;ticket&#39;</span><span class="p">]</span> 
        <span class="nb">print</span><span class="p">(</span><span class="n">answer</span><span class="p">[</span><span class="s1">&#39;message&#39;</span><span class="p">])</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">answer</span><span class="p">[</span><span class="s1">&#39;ticket&#39;</span><span class="p">])</span>
        <span class="n">fileNameTicket</span> <span class="o">=</span> <span class="n">fileName</span><span class="o">+</span><span class="s1">&#39;Ticket.txt&#39;</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileNameTicket</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">answer</span><span class="p">[</span><span class="s1">&#39;ticket&#39;</span><span class="p">])</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">saveXMCDA2Solution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save the solution in XMCDA 2.0 encoding.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">fileName</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fileNameExt</span> <span class="o">=</span> <span class="s2">&quot;Solution&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ticket</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;.xml&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fileNameExt</span> <span class="o">=</span> <span class="n">fileName</span><span class="o">+</span><span class="s2">&quot;Solution.xml&quot;</span>
        <span class="n">arg</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ticket&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">ticket</span><span class="p">}</span>
        <span class="n">answer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_server</span><span class="o">.</span><span class="n">requestSolution</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">solution</span> <span class="o">=</span> <span class="n">answer</span><span class="p">[</span><span class="s1">&#39;solution&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">solution</span><span class="p">)</span>
            <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileNameExt</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">solution</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;saving solution in file </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span><span class="n">fileNameExt</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">answer</span><span class="p">[</span><span class="s1">&#39;message&#39;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">showHTMLSolution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ticket</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">valuation</span><span class="o">=</span><span class="s1">&#39;bipolar&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show XMCDA 2.0 solution in a default browser window.</span>
<span class="sd">        The valuation parameter may set the correct style sheet.</span>
<span class="sd">        </span>

<span class="sd">        *Parameter*:</span>
<span class="sd">        </span>
<span class="sd">            * valuation: &#39;bipolar&#39; or &#39;robust&#39;.</span>
<span class="sd">              By default the valuation type is set</span>
<span class="sd">              automatically at problem submission.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">os</span><span class="o">,</span><span class="nn">webbrowser</span>
        <span class="n">newTab</span> <span class="o">=</span> <span class="mi">2</span> <span class="c1"># open in a new tab if possible</span>
        <span class="k">if</span> <span class="n">ticket</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ticket</span> <span class="o">=</span> <span class="n">ticket</span>
        <span class="k">if</span> <span class="n">valuation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">valuation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuation</span>
                <span class="k">if</span> <span class="n">valuation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">valuation</span> <span class="o">=</span> <span class="s1">&#39;bipolar&#39;</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">valuation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">valuation</span> <span class="o">=</span> <span class="s1">&#39;bipolar&#39;</span>
        <span class="n">arg</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ticket&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">ticket</span><span class="p">,</span> <span class="s1">&#39;valuation&#39;</span><span class="p">:</span> <span class="n">valuation</span><span class="p">}</span>
        <span class="n">answer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_server</span><span class="o">.</span><span class="n">requestSolutionHTML</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ticket</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;Solution.html&quot;</span>
            <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">answer</span><span class="p">[</span><span class="s1">&#39;html&#39;</span><span class="p">])</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;file://&quot;</span><span class="o">+</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot;/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">fileName</span>
            <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">new</span><span class="o">=</span><span class="n">newTab</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">answer</span><span class="p">[</span><span class="s1">&#39;message&#39;</span><span class="p">])</span>

<span class="c1">################################################################ </span>
<span class="c1">#----------test outrankingDigraphs classes ----------------</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>

    <span class="kn">import</span> <span class="nn">copy</span>
    <span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">time</span><span class="p">,</span> <span class="n">sleep</span>
    <span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>
    <span class="kn">from</span> <span class="nn">outrankingDigraphs</span> <span class="kn">import</span> <span class="n">BipolarOutrankingDigraph</span>
    <span class="kn">from</span> <span class="nn">transitiveDigraphs</span> <span class="kn">import</span> <span class="n">RankingByChoosingDigraph</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    ****************************************************</span>
<span class="s2">    * Digraph3 outrankingDigraphs module               *</span>
<span class="s2">    * Copyright (C) 2011-2021 Raymond Bisdorff         *</span>
<span class="s2">    * The module comes with ABSOLUTELY NO WARRANTY     *</span>
<span class="s2">    * to the extent permitted by the applicable law.   *</span>
<span class="s2">    * This is free software, and you are welcome to    *</span>
<span class="s2">    * redistribute it if it remains free software.     *</span>
<span class="s2">    ****************************************************</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">)</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*-------- Testing classes and methods -------&#39;</span><span class="p">)</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">RandomCBPerformanceTableau</span><span class="p">(</span><span class="n">numberOfActions</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>\
                                   <span class="n">numberOfCriteria</span><span class="o">=</span><span class="mi">21</span><span class="p">,</span>\
                                   <span class="n">weightDistribution</span><span class="o">=</span><span class="s1">&#39;equiobjectives&#39;</span><span class="p">,</span>
                                   <span class="n">seed</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span> 
    <span class="n">g</span> <span class="o">=</span> <span class="n">BipolarOutrankingDigraph</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">Normalized</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Threading</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">startMethod</span><span class="o">=</span><span class="s1">&#39;spawn&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
    <span class="n">Threading</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="n">criteriaCorrelations</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">computeMarginalVersusGlobalOutrankingCorrelations</span><span class="p">(</span><span class="n">Threading</span><span class="o">=</span><span class="n">Threading</span><span class="p">,</span><span class="n">startMethod</span><span class="o">=</span><span class="s1">&#39;spawn&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">t0</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">criteriaCorrelations</span><span class="p">)</span>
    
    <span class="c1"># from randomPerfTabs import Random3ObjectivesPerformanceTableau</span>
    <span class="c1"># t = Random3ObjectivesPerformanceTableau(</span>
    <span class="c1">#                                 numberOfActions=500,\</span>
    <span class="c1">#                                 numberOfCriteria=7,\</span>
    <span class="c1">#                                 vetoProbability=0.2,\</span>
    <span class="c1">#                                 seed=1)</span>
    <span class="c1"># g = BipolarOutrankingDigraph(t,Threading=True,</span>
    <span class="c1">#                              startMethod=None,</span>
    <span class="c1">#                              nbrCores=10,Comments=True)</span>
    <span class="c1"># print(g)</span>
    <span class="c1"># t0 = time()</span>
    <span class="c1"># g.showHTMLPerformanceHeatmap(Correlations=True,Threading=False)</span>
    <span class="c1"># print(time()-t0)</span>

    <span class="c1">#g.showPolarisations()</span>
    <span class="c1">#g.showObjectives()</span>
    <span class="c1"># ranking = g.computeNetFlowsRanking()</span>
    <span class="c1"># sizeOfDiagonal = 5</span>
    <span class="c1"># quasiRelation = {}</span>
    <span class="c1"># Med = g.valuationdomain[&#39;med&#39;]</span>
    <span class="c1"># for x in g.actions:</span>
    <span class="c1">#     quasiRelation[x] = {}</span>
    <span class="c1">#     xi = ranking.index(x)</span>
    <span class="c1">#     for y in g.actions:</span>
    <span class="c1">#         yj = ranking.index(y)</span>
    <span class="c1">#         #if abs(xi-yj) &gt; sizeOfDiagonal:</span>
    <span class="c1">#         #    quasiRelation[x][y] = g.relation[x][y]</span>
    <span class="c1">#         if xi &gt;= yj:</span>
    <span class="c1">#             quasiRelation[x][y] = min(Med, g.relation[x][y])</span>
    <span class="c1">#         else:</span>
    <span class="c1">#             quasiRelation[x][y] = max(Med, g.relation[x][y])</span>
    <span class="c1"># g.relation = quasiRelation</span>
    <span class="c1"># gcd = ~(-g)</span>
    <span class="c1"># gcd.showHTMLRelationHeatmap(actionsList=ranking,colorLevels=9)</span>
  
<span class="c1">#############################</span>
<span class="c1">############################</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2012-2025, Raymond Bisdorff.
      <span class="lastupdated">Last updated on Mar 18, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>