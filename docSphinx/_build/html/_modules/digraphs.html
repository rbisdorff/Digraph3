

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>digraphs &mdash; Digraph3 3.14.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=e4f4b189"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=15d7cbb8"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Digraph3
              <img src="../_static/htmlLogo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">1. Digraph3 Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../techDoc.html">2. Technical Reference of the Digraph3 modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pearls.html">3. Pearls of bipolar-valued epistemic logic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../adtLectures.html">4. Algorithmic Decision Theory Lectures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../compStatLectures.html">5. Computational Statistics Lectures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../digraph3Archives.html">6. Digraph3 Archives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../errataList.html">7. Digraph3 Book Errata List</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Digraph3</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Module code</a></li>
      <li class="breadcrumb-item active">digraphs</li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for digraphs</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/Usr/bin/env python3</span>
<span class="c1">#########################</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Python3+ implementation of the digraphs module, root module of the Digraph3 resources.</span>

<span class="sd">Copyright (C) 2006-2025  Raymond Bisdorff</span>

<span class="sd">    This program is free software; you can redistribute it and/or modify</span>
<span class="sd">    it under the terms of the GNU General Public License as published by</span>
<span class="sd">    the Free Software Foundation; either version 3 of the License, or</span>
<span class="sd">    (at your option) any later version.</span>

<span class="sd">    This program is distributed in the hope that it will be useful,</span>
<span class="sd">    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="sd">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="sd">    GNU General Public License for more details.</span>

<span class="sd">    You should have received a copy of the GNU General Public License along</span>
<span class="sd">    with this program; if not, write to the Free Software Foundation, Inc.,</span>
<span class="sd">    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="c1">#######################</span>

<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;Branch: Python3.13.2 $&quot;</span>

<span class="kn">from</span> <span class="nn">digraphsTools</span> <span class="kn">import</span> <span class="o">*</span>
<span class="c1">#from digraphs import *</span>
<span class="kn">from</span> <span class="nn">perfTabs</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">randomPerfTabs</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Process</span>

<span class="c1">#-----------</span>
<span class="k">class</span> <span class="nc">_myThread2</span><span class="p">(</span><span class="n">Process</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span><span class="n">args</span><span class="p">):</span>
        <span class="n">Process</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">threadID</span> <span class="o">=</span> <span class="n">target</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">workingDirectory</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Debug</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">pickle</span> <span class="kn">import</span> <span class="n">dumps</span><span class="p">,</span> <span class="n">loads</span>
        <span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">chdir</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
        <span class="n">chdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workingDirectory</span><span class="p">)</span>
        <span class="n">Debug</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Debug</span>
        <span class="c1">#Debug=False</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Starting working in </span><span class="si">%s</span><span class="s2"> on </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workingDirectory</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
        <span class="n">fi</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;dumpActions.py&#39;</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="n">loads</span><span class="p">(</span><span class="n">fi</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="n">fi</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">threadID</span><span class="p">,</span><span class="n">actionsList</span><span class="p">)</span>
        <span class="n">fi</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;dumpRelation.py&#39;</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="n">loads</span><span class="p">(</span><span class="n">fi</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="n">fi</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">threadID</span><span class="p">,</span><span class="n">relation</span><span class="p">)</span>
        <span class="n">fi</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;dumpOtherRelation.py&#39;</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span>
        <span class="n">otherRelation</span> <span class="o">=</span> <span class="n">loads</span><span class="p">(</span><span class="n">fi</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="n">fi</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">threadID</span><span class="p">,</span><span class="n">relation</span><span class="p">)</span>
        <span class="n">fiName</span> <span class="o">=</span> <span class="s1">&#39;splitActions-&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">threadID</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.py&#39;</span>
        <span class="n">fi</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fiName</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span>
        <span class="n">splitActions</span> <span class="o">=</span> <span class="n">loads</span><span class="p">(</span><span class="n">fi</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="n">fi</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">threadID</span><span class="p">,</span><span class="n">splitActions</span><span class="p">)</span>
        <span class="c1"># compute partial correlation</span>
        <span class="n">correlation</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="n">determination</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">splitActions</span><span class="p">:</span>
            <span class="n">grx</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="n">orx</span> <span class="o">=</span> <span class="n">otherRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="n">correlation</span> <span class="o">+=</span> <span class="nb">min</span><span class="p">(</span> <span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="n">grx</span><span class="p">[</span><span class="n">y</span><span class="p">],</span><span class="n">orx</span><span class="p">[</span><span class="n">y</span><span class="p">]),</span>\
                                <span class="nb">max</span><span class="p">(</span><span class="n">grx</span><span class="p">[</span><span class="n">y</span><span class="p">],</span><span class="o">-</span><span class="n">orx</span><span class="p">[</span><span class="n">y</span><span class="p">])</span> <span class="p">)</span>
                    <span class="n">determination</span> <span class="o">+=</span> <span class="nb">min</span><span class="p">(</span> <span class="nb">abs</span><span class="p">(</span><span class="n">grx</span><span class="p">[</span><span class="n">y</span><span class="p">]),</span>\
                                          <span class="nb">abs</span><span class="p">(</span><span class="n">orx</span><span class="p">[</span><span class="n">y</span><span class="p">])</span> <span class="p">)</span>
                    <span class="c1">#if Debug:</span>
                    <span class="c1">#    print(x,y,g.relation[x][y],otherRelation[x][y],correlation,determination)</span>
        <span class="n">splitCorrelation</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;correlation&#39;</span><span class="p">:</span> <span class="n">correlation</span><span class="p">,</span>
                            <span class="s1">&#39;determination&#39;</span><span class="p">:</span> <span class="n">determination</span><span class="p">}</span>
        <span class="c1"># write partial correlation relation </span>
        <span class="n">foName</span> <span class="o">=</span> <span class="s1">&#39;splitCorrelation-&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">threadID</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.py&#39;</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">foName</span><span class="p">,</span><span class="s1">&#39;wb&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">dumps</span><span class="p">(</span><span class="n">splitCorrelation</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<div class="viewcode-block" id="Digraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph">[docs]</a>
<span class="k">class</span> <span class="nc">Digraph</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Genuine root class of all Digraph3 modules.</span>
<span class="sd">    See Digraph3 tutorials.</span>

<span class="sd">    All instances of the :py:class:`digraphs.Digraph` class contain at least the following components: </span>

<span class="sd">    1. A collection of digraph nodes called **actions** (decision alternatives): a list, set or (ordered) dictionary of nodes with &#39;name&#39; and &#39;shortname&#39; attributes,</span>
<span class="sd">    2. A logical characteristic **valuationdomain**, a dictionary with three decimal entries: the minimum (-1.0, means certainly false), the median (0.0, means missing information) and the maximum characteristic value (+1.0, means certainly true),</span>
<span class="sd">    3. The digraph **relation** : a double dictionary indexed by an oriented pair of actions (nodes) and carrying a characteristic value in the range of the previous valuation domain,</span>
<span class="sd">    4. Its associated **gamma function** : a dictionary containing the direct successors, respectively predecessors of each action, automatically added by the object constructor,</span>
<span class="sd">    5. Its associated **notGamma function** : a dictionary containing the actions that are not direct successors respectively predecessors of each action, automatically added by the object constructor.</span>

<span class="sd">    A previously stored :py:class:`digraphs.Digraph` instance may be reloaded with the *file* argument::</span>
<span class="sd">    </span>
<span class="sd">        &gt;&gt;&gt; from randomDigraphs import RandomValuationDigraph</span>
<span class="sd">        &gt;&gt;&gt; dg = RandomValuationDigraph(order=3,Normalized=True,seed=1)</span>
<span class="sd">        &gt;&gt;&gt; dg.save(&#39;testdigraph&#39;)</span>
<span class="sd">        Saving digraph in file: &lt;testdigraph.py&gt; </span>
<span class="sd">        &gt;&gt;&gt; from digraphs import Digraph</span>
<span class="sd">        &gt;&gt;&gt; dg = Digraph(file=&#39;testdigraph&#39;) # without the .py extenseion</span>
<span class="sd">        &gt;&gt;&gt; dg.__dict__</span>
<span class="sd">        {&#39;name&#39;: &#39;testdigraph&#39;,</span>
<span class="sd">        &#39;actions&#39;: {&#39;a1&#39;: {&#39;name&#39;: &#39;random decision action&#39;, &#39;shortName&#39;: &#39;a1&#39;},</span>
<span class="sd">                    &#39;a2&#39;: {&#39;name&#39;: &#39;random decision action&#39;, &#39;shortName&#39;: &#39;a2&#39;},</span>
<span class="sd">                    &#39;a3&#39;: {&#39;name&#39;: &#39;random decision action&#39;, &#39;shortName&#39;: &#39;a3&#39;}},</span>
<span class="sd">        &#39;valuationdomain&#39;: {&#39;min&#39;: Decimal(&#39;-1.0&#39;), &#39;med&#39;: Decimal(&#39;0.0&#39;),</span>
<span class="sd">                                &#39;max&#39;: Decimal(&#39;1.0&#39;), &#39;hasIntegerValuation&#39;: False,},</span>
<span class="sd">        &#39;relation&#39;: {&#39;a1&#39;: {&#39;a1&#39;: Decimal(&#39;0.0&#39;), &#39;a2&#39;: Decimal(&#39;-0.66&#39;), &#39;a3&#39;: Decimal(&#39;0.44&#39;)},</span>
<span class="sd">                     &#39;a2&#39;: {&#39;a1&#39;: Decimal(&#39;0.94&#39;), &#39;a2&#39;: Decimal(&#39;0.0&#39;), &#39;a3&#39;: Decimal(&#39;-0.84&#39;)},</span>
<span class="sd">                     &#39;a3&#39;: {&#39;a1&#39;: Decimal(&#39;-0.36&#39;), &#39;a2&#39;: Decimal(&#39;-0.70&#39;), &#39;a3&#39;: Decimal(&#39;0.0&#39;)}},</span>
<span class="sd">        &#39;order&#39;: 3,</span>
<span class="sd">        &#39;gamma&#39;: {&#39;a1&#39;: ({&#39;a3&#39;}, {&#39;a2&#39;}), &#39;a2&#39;: ({&#39;a1&#39;}, set()), &#39;a3&#39;: (set(), {&#39;a1&#39;})},</span>
<span class="sd">        &#39;notGamma&#39;: {&#39;a1&#39;: ({&#39;a2&#39;}, {&#39;a3&#39;}),</span>
<span class="sd">                     &#39;a2&#39;: ({&#39;a3&#39;}, {&#39;a1&#39;, &#39;a3&#39;}),</span>
<span class="sd">                     &#39;a3&#39;: ({&#39;a1&#39;, &#39;a2&#39;}, {&#39;a2&#39;})}}</span>
<span class="sd">        &gt;&gt;&gt;</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Default presentation method for Digraph instances.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">reprString</span> <span class="o">=</span> <span class="s1">&#39;*------- Digraph instance description ------*</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Instance class      : </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Instance name       : </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Digraph Order       : </span><span class="si">%d</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Digraph Size        : </span><span class="si">%d</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeSize</span><span class="p">()</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Valuation domain    : [</span><span class="si">%.2f</span><span class="s1">;</span><span class="si">%.2f</span><span class="s1">]</span><span class="se">\n</span><span class="s1">&#39;</span>\
                      <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">])</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Determinateness (</span><span class="si">%%</span><span class="s1">) : </span><span class="si">%.2f</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeDeterminateness</span><span class="p">(</span><span class="n">InPercents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Attributes          : </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
       
        <span class="k">return</span> <span class="n">reprString</span>

<div class="viewcode-block" id="Digraph.showAttributes">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showAttributes">[docs]</a>
    <span class="k">def</span> <span class="nf">showAttributes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prints out the attributes of self.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">reprString</span> <span class="o">=</span> <span class="s1">&#39;*------- Attributes of Digraph ------*</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Instance name : </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Instance class: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="n">atts</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">atts</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">reprString</span> <span class="o">+=</span> <span class="s1">&#39;Attributes    : </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">atts</span>       
        <span class="nb">print</span><span class="p">(</span><span class="n">reprString</span><span class="p">)</span>        </div>

    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">order</span><span class="o">=</span><span class="mi">7</span><span class="p">):</span>
        <span class="c1">#import digraphs,sys,copy</span>
        <span class="kn">from</span> <span class="nn">randomDigraphs</span> <span class="kn">import</span> <span class="n">RandomValuationDigraph</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
        <span class="k">if</span> <span class="n">file</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">g</span> <span class="o">=</span> <span class="n">RandomValuationDigraph</span><span class="p">(</span><span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">actions</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">convertValuationToDecimal</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">relation</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">convertRelationToDecimal</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="n">file</span><span class="o">+</span><span class="s1">&#39;.py&#39;</span>
            <span class="n">argDict</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">fi</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
            <span class="n">fileText</span> <span class="o">=</span> <span class="n">fi</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="n">fi</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">exec</span><span class="p">(</span><span class="nb">compile</span><span class="p">(</span><span class="n">fileText</span><span class="p">,</span> <span class="n">fileName</span><span class="p">,</span> <span class="s1">&#39;exec&#39;</span><span class="p">),</span> <span class="n">argDict</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">file</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;actions&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span> <span class="c1"># for compatibility with Digraph2 versions</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;actionset&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;valuationdomain&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">convertValuationToDecimal</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;relation&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">convertRelationToDecimal</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reflections</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;reflections&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rotations</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;rotations&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Make the negation operator -self available for Digraph instances. </span>

<span class="sd">        Returns a DualDigraph instance of self.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">DualDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">new</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span>
        <span class="k">return</span> <span class="n">new</span>

    <span class="k">def</span> <span class="fm">__invert__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Make the inverting operator ~self available for Digraph instances. </span>

<span class="sd">        Returns a ConverseDigraph instance of self.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">ConverseDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">new</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span>
        <span class="k">return</span> <span class="n">new</span>

<span class="c1">#-----------Dias/Castonguay/Longo/Jradi--------*</span>
    
    <span class="k">def</span> <span class="nf">_triplets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; p.15 &quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">tG</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">outAsymGammaU</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">inAsymGammaU</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">outAsymGammaU</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">inAsymGammaU</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">u</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">str</span><span class="p">(</span><span class="n">u</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
<span class="c1">##                            if Debug:</span>
<span class="c1">##                                print(&#39;x,u,y&#39;,x,u,y)</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">Med</span> <span class="ow">and</span>\
                               <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">Med</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Initial triplet: &#39;</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
                                <span class="n">tG</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="n">y</span><span class="p">))</span>
                            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span> <span class="ow">and</span>\
                              <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">Med</span><span class="p">:</span>
                                <span class="n">circ</span> <span class="o">=</span> <span class="p">[</span><span class="n">y</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="n">x</span><span class="p">]</span>
                                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Circuit certificate:&#39;</span><span class="p">,</span> <span class="n">circ</span><span class="p">)</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">circ</span><span class="p">,</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">circ</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">tG</span>

    <span class="c1">#@timefn</span>
<div class="viewcode-block" id="Digraph.computeChordlessCircuitsMP">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeChordlessCircuitsMP">[docs]</a>
    <span class="k">def</span> <span class="nf">computeChordlessCircuitsMP</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Odd</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">nbrOfCPUs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                   <span class="n">startMethod</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                   <span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; </span>
<span class="sd">        Multiprocessing version of computeChordlessCircuits().</span>
<span class="sd">        </span>
<span class="sd">        Renders the set of all chordless odd circuits detected in a digraph.</span>
<span class="sd">        Result (possible empty list) stored in &lt;self.circuitsList&gt;</span>
<span class="sd">        holding a possibly empty list tuples with at position 0 the</span>
<span class="sd">        list of adjacent actions of the circuit and at position 1</span>
<span class="sd">        the set of actions in the stored circuit.</span>
<span class="sd">        Inspired by Dias, Castonguay, Longo, Jradi, Algorithmica (2015).</span>

<span class="sd">        Returns a possibly empty list of tuples (circuit,frozenset(circuit)).</span>

<span class="sd">        If Odd == True, only circuits of odd length are retained in the result. </span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">tG</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_triplets</span><span class="p">(</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;There are </span><span class="si">%d</span><span class="s1"> starting triplets !&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">tG</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">blocked</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">blocked</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">blocked</span> <span class="o">=</span> <span class="n">blocked</span>
        <span class="k">if</span> <span class="n">Threading</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Odd</span> <span class="o">=</span> <span class="n">Odd</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Comments</span> <span class="o">=</span> <span class="n">Comments</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Debug</span> <span class="o">=</span> <span class="n">Debug</span>
            <span class="c1">#from multiprocessing import Pool</span>
            <span class="c1">#from os import cpu_count</span>
            <span class="kn">import</span> <span class="nn">multiprocessing</span> <span class="k">as</span> <span class="nn">mp</span>
            <span class="k">if</span> <span class="n">startMethod</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">startMethod</span> <span class="o">=</span> <span class="s1">&#39;spawn&#39;</span>
            <span class="n">mpctx</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">startMethod</span><span class="p">)</span>
            <span class="n">Pool</span> <span class="o">=</span> <span class="n">mpctx</span><span class="o">.</span><span class="n">Pool</span>
            <span class="n">cpu_count</span> <span class="o">=</span> <span class="n">mpctx</span><span class="o">.</span><span class="n">cpu_count</span>
            <span class="k">if</span> <span class="n">nbrOfCPUs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">nbrOfCPUs</span><span class="o">=</span> <span class="n">cpu_count</span><span class="p">()</span>
            <span class="k">with</span> <span class="n">Pool</span><span class="p">(</span><span class="n">nbrOfCPUs</span><span class="p">)</span> <span class="k">as</span> <span class="n">proc</span><span class="p">:</span>   
                <span class="n">circuits</span> <span class="o">=</span> <span class="n">proc</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_computeChordlessPathsFromInitialTriplet</span><span class="p">,</span><span class="n">tG</span><span class="p">)</span>
                <span class="c1">#print(circuits)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tG</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">circuits</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">circuits</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="p">[]:</span>
                    <span class="k">for</span> <span class="n">circ</span> <span class="ow">in</span> <span class="n">circuits</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                        <span class="c1">#print(circ)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">circ</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">tG</span><span class="p">:</span>
                <span class="n">u</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="c1">##                if Debug:</span>
<span class="c1">##                    print(&#39;===&gt;&gt;&gt;&#39;,p,u)</span>
                <span class="n">gammaU</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">gammaU</span><span class="p">:</span>
                    <span class="c1">#print(x)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">blocked</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_ccVisit</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="n">Odd</span><span class="o">=</span><span class="n">Odd</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">gammaU</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">blocked</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">blocked</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span></div>


    <span class="k">def</span> <span class="nf">_computeChordlessPathsFromInitialTriplet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;===&gt;&gt; thread : &#39;</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
        <span class="n">Debug</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Debug</span>
        <span class="n">u</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="c1">#blocked = self.blocked</span>
        <span class="n">blocked</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">blocked</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">circuits</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">gammaU</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">gammaU</span><span class="p">:</span>
            <span class="n">blocked</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">circuits</span><span class="p">,</span><span class="n">blocked</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ccVisitMP</span><span class="p">(</span><span class="n">circuits</span><span class="p">,</span><span class="n">blocked</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="n">Odd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">Odd</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">gammaU</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">blocked</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">blocked</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">circuits</span><span class="p">)</span>
<span class="c1">##        for x in self.actions:</span>
<span class="c1">##            blocked[x] = 0</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="s1">&#39;return&#39;</span><span class="p">,</span><span class="n">circuits</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">circuits</span>

    <span class="k">def</span> <span class="nf">_ccVisitMP</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">circuits</span><span class="p">,</span><span class="n">blocked</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">u</span><span class="p">,</span>
                   <span class="n">Odd</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; p.15 &quot;&quot;&quot;</span>
        <span class="n">Comments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Comments</span>
        <span class="n">Debug</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Debug</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">ut</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">u1</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">inAsymGammaUt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">ut</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">ut</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">gammaUt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">ut</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">ut</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">ut</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">ut</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">ut</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">gammaUt</span><span class="p">:</span>
            <span class="n">blocked</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">inAsymGammaUt</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">str</span><span class="p">(</span><span class="n">u</span><span class="p">)</span> <span class="ow">and</span> <span class="n">blocked</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">p1</span> <span class="o">=</span> <span class="n">p</span> <span class="o">+</span> <span class="nb">tuple</span><span class="p">([</span><span class="n">v</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">p1</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">u1</span><span class="p">][</span><span class="n">v</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span> <span class="ow">and</span>\
                   <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="n">u1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">Odd</span><span class="p">:</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                            <span class="n">OddFlag</span><span class="o">=</span><span class="kc">False</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">OddFlag</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">OddFlag</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">if</span> <span class="n">OddFlag</span><span class="p">:</span>
                        <span class="n">circ</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">p1</span><span class="p">))</span>
                        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="s1">&#39;circuit certificate: &#39;</span><span class="p">,</span><span class="n">circ</span><span class="p">)</span>
                        <span class="n">circuits</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">circ</span><span class="p">,</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">circ</span><span class="p">)))</span>

                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">u1</span><span class="p">][</span><span class="n">v</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">Med</span> <span class="ow">and</span>\
                    <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="n">u1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">Med</span> <span class="p">:</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="s1">&#39;continue with &#39;</span><span class="p">,</span> <span class="n">p1</span><span class="p">)</span>
                    <span class="n">circuits</span><span class="p">,</span><span class="n">blocked</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ccVisitMP</span><span class="p">(</span><span class="n">circuits</span><span class="p">,</span><span class="n">blocked</span><span class="p">,</span>
                                                    <span class="n">p1</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="n">Odd</span><span class="o">=</span><span class="n">Odd</span><span class="p">)</span>
<span class="c1">##                    circuits.append(circuits1)</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">circuits</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="n">gammaUt</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">blocked</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">blocked</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">circuits</span><span class="p">,</span><span class="n">blocked</span>


<span class="c1">###################################</span>
    <span class="c1">#@timefn</span>
    <span class="k">def</span> <span class="nf">_computeChordlessCircuits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Odd</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; </span>
<span class="sd">        Renders the set of all chordless odd circuits detected in a digraph.</span>
<span class="sd">        Result (possible empty list) stored in &lt;self.circuitsList&gt;</span>
<span class="sd">        holding a possibly empty list tuples with at position 0 the</span>
<span class="sd">        list of adjacent actions of the circuit and at position 1</span>
<span class="sd">        the set of actions in the stored circuit.</span>
<span class="sd">        Inspired by Dias, Castonguay, Longo, Jradi, Algorithmica (2015).</span>

<span class="sd">        Returns a possibly empty list of tuples (circuit,frozenset(circuit)).</span>

<span class="sd">        If Odd == True, only circuits of odd length are retained in the result. </span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">tG</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_triplets</span><span class="p">(</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;There are </span><span class="si">%d</span><span class="s1"> starting triplets !&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">tG</span><span class="p">)</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">blocked</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">blocked</span><span class="p">[</span><span class="n">u</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">tG</span><span class="p">:</span>
            <span class="n">u</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="c1">##            if Debug:</span>
<span class="c1">##                print(&#39;===&gt;&gt;&gt;&#39;,p,u)</span>
            <span class="n">gammaU</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">u</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">gammaU</span><span class="p">:</span>
                <span class="c1">#print(x)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">blocked</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ccVisit</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="n">Odd</span><span class="o">=</span><span class="n">Odd</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">gammaU</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">blocked</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">blocked</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span>

    <span class="k">def</span> <span class="nf">_ccVisit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="n">Odd</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; p.15 &quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">ut</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">u1</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">inAsymGammaUt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">ut</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">ut</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">gammaUt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">ut</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">ut</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
<span class="c1">##        if Debug:</span>
<span class="c1">##            print(self.gamma[ut][1],ut,self.gamma[ut][0])</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">gammaUt</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">blocked</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">inAsymGammaUt</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">str</span><span class="p">(</span><span class="n">u</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">blocked</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">p1</span> <span class="o">=</span> <span class="n">p</span> <span class="o">+</span> <span class="nb">tuple</span><span class="p">([</span><span class="n">v</span><span class="p">])</span>
<span class="c1">##                if Debug:</span>
<span class="c1">##                    print(p1)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">u1</span><span class="p">][</span><span class="n">v</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span> <span class="ow">and</span>\
                   <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="n">u1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">Odd</span><span class="p">:</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                            <span class="n">OddFlag</span><span class="o">=</span><span class="kc">False</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">OddFlag</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">OddFlag</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">if</span> <span class="n">OddFlag</span><span class="p">:</span>
                        <span class="n">circ</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">p1</span><span class="p">))</span>
                        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;circuit certificate: &#39;</span><span class="p">,</span><span class="n">circ</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">circ</span><span class="p">,</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">circ</span><span class="p">)))</span>

                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">u1</span><span class="p">][</span><span class="n">v</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">Med</span> <span class="ow">and</span>\
                    <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="n">u1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">Med</span> <span class="p">:</span>
<span class="c1">##                    if Debug:</span>
<span class="c1">##                        print(&#39;continue with &#39;, p1)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_ccVisit</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="n">Odd</span><span class="o">=</span><span class="n">Odd</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
                    
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="n">gammaUt</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">blocked</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">blocked</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>

        <span class="k">return</span>
          
<span class="c1">#----------------------------------------</span>

<div class="viewcode-block" id="Digraph.computeMaxHoleSize">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeMaxHoleSize">[docs]</a>
    <span class="k">def</span> <span class="nf">computeMaxHoleSize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the length of the largest chordless cycle</span>
<span class="sd">        in the corresponding disjunctive undirected graph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">g</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">digraph2Graph</span><span class="p">(</span><span class="n">ConjunctiveConversion</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">cycles</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">computeChordlessCycles</span><span class="p">()</span>
        <span class="n">nbrOfHoles</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">cycles</span><span class="p">)</span>
        <span class="n">maxHS</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cycles</span><span class="p">:</span>
            <span class="n">nc</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nc</span> <span class="o">&gt;</span> <span class="n">maxHS</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Cycle </span><span class="si">%s</span><span class="s1"> of length </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">c</span><span class="p">),</span><span class="n">nc</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">maxHS</span> <span class="o">=</span> <span class="n">nc</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;# holes           = </span><span class="si">%d</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="n">nbrOfHoles</span> <span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Maximal hole size = </span><span class="si">%d</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="n">maxHS</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nbrOfHoles</span> <span class="o">=</span> <span class="n">nbrOfHoles</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxHoleSize</span> <span class="o">=</span> <span class="n">maxHS</span>
        <span class="k">return</span> <span class="n">maxHS</span></div>

                
<span class="c1">#--------interoperability resources ----</span>

<div class="viewcode-block" id="Digraph.addValuationAttribute">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.addValuationAttribute">[docs]</a>
    <span class="k">def</span> <span class="nf">addValuationAttribute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds the numpy valuation attribute</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
        <span class="n">order</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span>
        <span class="n">valuation</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="n">order</span><span class="p">,</span><span class="n">order</span><span class="p">])</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">actionsList</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span><span class="p">,</span><span class="n">y</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">actionsList</span><span class="p">):</span>
                <span class="n">valuation</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuation</span> <span class="o">=</span> <span class="n">valuation</span></div>


<div class="viewcode-block" id="Digraph.relationFct">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.relationFct">[docs]</a>
    <span class="k">def</span> <span class="nf">relationFct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        wrapper for self.relation dictionary access to ensure interoperability</span>
<span class="sd">        with the sparse and big outranking digraph implementation model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span></div>

<span class="c1">#------------------------------------</span>

<div class="viewcode-block" id="Digraph.topologicalSort">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.topologicalSort">[docs]</a>
    <span class="k">def</span> <span class="nf">topologicalSort</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        If self is acyclic, adds topological sort number to each node of self</span>
<span class="sd">        and renders ordered list of nodes. Otherwise renders None.</span>
<span class="sd">        Source: M. Golumbic Algorithmic Graph heory and Perfect Graphs,</span>
<span class="sd">        Annals Of Discrete Mathematics 57 2nd Ed. , Elsevier 2004, Algorithm 2.4 p.44.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="nf">topSort</span><span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;in&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">i</span><span class="p">,</span><span class="n">v</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">v</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">dfsNbr</span><span class="p">[</span><span class="n">v</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">tsNbr</span><span class="p">[</span><span class="n">v</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dfsNbr</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">i</span>
            <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;successer&#39;</span><span class="p">,</span><span class="n">w</span><span class="p">,</span><span class="s1">&#39;of&#39;</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dfsNbr</span><span class="p">[</span><span class="n">w</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">topSort</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tsNbr</span><span class="p">[</span><span class="n">w</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">Acyclic</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tsNbr</span><span class="p">[</span><span class="n">v</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">j</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">j</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;out&#39;</span><span class="p">,</span><span class="n">v</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">dfsNbr</span><span class="p">[</span><span class="n">v</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">tsNbr</span><span class="p">[</span><span class="n">v</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Acyclic</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dfsNbr</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tsNbr</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dfsNbr</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tsNbr</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">j</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dfsNbr</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">topSort</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Acyclic</span><span class="p">:</span>
            <span class="n">tsLevels</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">tsNbr</span><span class="p">[</span><span class="n">x</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tsNbr</span><span class="p">]</span>
            <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">tsLevels</span><span class="p">,</span>\
                                             <span class="n">key</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">tsLevels</span><span class="p">:</span> <span class="n">tsLevels</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">tsLevels</span><span class="p">,</span><span class="n">ordering</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">ordering</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Digraph instance </span><span class="si">%s</span><span class="s1"> is not acyclic!&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dfsNbr</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">tsNbr</span><span class="p">)</span>             
            <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="Digraph.computeTopologicalRanking">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeTopologicalRanking">[docs]</a>
    <span class="k">def</span> <span class="nf">computeTopologicalRanking</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mimetic Wrapper of the topologicalSort() method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">topologicalSort</span><span class="p">(</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span></div>


    <span class="c1">#---------------</span>
            
<div class="viewcode-block" id="Digraph.digraph2Graph">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.digraph2Graph">[docs]</a>
    <span class="k">def</span> <span class="nf">digraph2Graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">valuationDomain</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">},</span>
                      <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">ConjunctiveConversion</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert a Digraph instance to a Graph instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">graphs</span> <span class="kn">import</span> <span class="n">Graph</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span><span class="p">,</span> <span class="n">deepcopy</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span>
        <span class="n">g</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;_graph&#39;</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">g</span><span class="o">.</span><span class="n">vertices</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="n">g</span><span class="o">.</span><span class="n">vertices</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="s1">&#39;shortName&#39;</span><span class="p">:</span> <span class="n">x</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">g</span><span class="o">.</span><span class="n">vertices</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>    
        <span class="n">g</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">vertices</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">valuationDomain</span> <span class="o">=</span> <span class="n">valuationDomain</span>
        <span class="n">gMin</span> <span class="o">=</span> <span class="n">valuationDomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">gMed</span> <span class="o">=</span> <span class="n">valuationDomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">gMax</span> <span class="o">=</span> <span class="n">valuationDomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">g</span><span class="o">.</span><span class="n">edges</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">verticesKeys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">vertices</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">dgMed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">order</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">g</span><span class="o">.</span><span class="n">order</span><span class="p">):</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">verticesKeys</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">verticesKeys</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="n">vertex</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">([</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">ConjunctiveConversion</span><span class="p">:</span>
                    <span class="n">edgeValue</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">edgeValue</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">edgeValue</span> <span class="o">&gt;</span> <span class="n">dgMed</span><span class="p">:</span>
                    <span class="n">g</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">vertex</span><span class="p">]</span> <span class="o">=</span> <span class="n">gMax</span>
                <span class="k">elif</span> <span class="n">edgeValue</span> <span class="o">&lt;</span> <span class="n">dgMed</span><span class="p">:</span>
                    <span class="n">g</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">vertex</span><span class="p">]</span> <span class="o">=</span> <span class="n">gMin</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">g</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">vertex</span><span class="p">]</span> <span class="o">=</span> <span class="n">gMed</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x,y,self.relation[x][y],self.relation[y][x],vertex,g.edges[vertex]&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">],</span><span class="n">vertex</span><span class="p">,</span><span class="n">g</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">vertex</span><span class="p">])</span>
        <span class="n">g</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">g</span></div>



<div class="viewcode-block" id="Digraph.computeRelationalStructure">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeRelationalStructure">[docs]</a>
    <span class="k">def</span> <span class="nf">computeRelationalStructure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the counted decomposition of the valued relations into</span>
<span class="sd">        the following type of links:</span>
<span class="sd">        gt &#39;&gt;&#39;, eq &#39;=&#39;, lt &#39;&lt;&#39;, incomp &#39;&lt;&gt;&#39;,</span>
<span class="sd">        leq &#39;&lt;=&#39;, geq &#39;&gt;=&#39;, indeterm &#39;?&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">counts</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;&gt;&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;&lt;&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;&lt;&gt;&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;&lt;=&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;&gt;=&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;?&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]:</span>
                        <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]:</span>
                            <span class="n">counts</span><span class="p">[</span><span class="s1">&#39;=&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]:</span>
                            <span class="n">counts</span><span class="p">[</span><span class="s1">&#39;&gt;&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">counts</span><span class="p">[</span><span class="s1">&#39;&gt;=&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]:</span>
                        <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]:</span>
                            <span class="n">counts</span><span class="p">[</span><span class="s1">&#39;&lt;&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]:</span>
                            <span class="n">counts</span><span class="p">[</span><span class="s1">&#39;&lt;&gt;&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">counts</span><span class="p">[</span><span class="s1">&#39;&lt;=&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">else</span><span class="p">:</span>  <span class="c1"># relation[y][x] == self.valuationdomain[&#39;med&#39;]</span>
                        <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]:</span>
                            <span class="n">counts</span><span class="p">[</span><span class="s1">&#39;&lt;=&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]:</span>
                            <span class="n">counts</span><span class="p">[</span><span class="s1">&#39;&gt;=&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">counts</span><span class="p">[</span><span class="s1">&#39;?&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">counts</span><span class="p">)</span>
        <span class="n">nd</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">nd</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
            <span class="n">counts</span><span class="p">[</span><span class="s1">&#39;&lt;&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">counts</span><span class="p">[</span><span class="s1">&#39;&lt;&#39;</span><span class="p">]))</span><span class="o">/</span><span class="p">(</span><span class="n">nd</span><span class="o">*</span><span class="p">(</span><span class="n">nd</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">counts</span><span class="p">[</span><span class="s1">&#39;&lt;=&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">counts</span><span class="p">[</span><span class="s1">&#39;&lt;=&#39;</span><span class="p">]))</span><span class="o">/</span><span class="p">(</span><span class="n">nd</span><span class="o">*</span><span class="p">(</span><span class="n">nd</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">counts</span><span class="p">[</span><span class="s1">&#39;&gt;&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">counts</span><span class="p">[</span><span class="s1">&#39;&gt;&#39;</span><span class="p">]))</span><span class="o">/</span><span class="p">(</span><span class="n">nd</span><span class="o">*</span><span class="p">(</span><span class="n">nd</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">counts</span><span class="p">[</span><span class="s1">&#39;&gt;=&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">counts</span><span class="p">[</span><span class="s1">&#39;&gt;=&#39;</span><span class="p">]))</span><span class="o">/</span><span class="p">(</span><span class="n">nd</span><span class="o">*</span><span class="p">(</span><span class="n">nd</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">counts</span><span class="p">[</span><span class="s1">&#39;&lt;&gt;&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">counts</span><span class="p">[</span><span class="s1">&#39;&lt;&gt;&#39;</span><span class="p">]))</span><span class="o">/</span><span class="p">(</span><span class="n">nd</span><span class="o">*</span><span class="p">(</span><span class="n">nd</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">counts</span><span class="p">[</span><span class="s1">&#39;=&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">counts</span><span class="p">[</span><span class="s1">&#39;=&#39;</span><span class="p">]))</span><span class="o">/</span><span class="p">(</span><span class="n">nd</span><span class="o">*</span><span class="p">(</span><span class="n">nd</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">counts</span><span class="p">[</span><span class="s1">&#39;?&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">counts</span><span class="p">[</span><span class="s1">&#39;?&#39;</span><span class="p">]))</span><span class="o">/</span><span class="p">(</span><span class="n">nd</span><span class="o">*</span><span class="p">(</span><span class="n">nd</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">counts</span></div>


<div class="viewcode-block" id="Digraph.computeRankingByLastChoosing">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeRankingByLastChoosing">[docs]</a>
    <span class="k">def</span> <span class="nf">computeRankingByLastChoosing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">CoDual</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes a weak preordring of the self.actions by iterating</span>
<span class="sd">        worst choice elagations.</span>

<span class="sd">        Stores in self.rankingByLastChoosing[&#39;result&#39;] a list of (P-,worstChoice) pairs</span>
<span class="sd">        where P- gives the worst choice complement outranked</span>
<span class="sd">        average valuation via the computePairwiseClusterComparison</span>
<span class="sd">        method.</span>

<span class="sd">        If self.rankingByChoosing[&#39;CoDual&#39;] is True, the ranking-by-last-chossing </span>
<span class="sd">        was computed on the codual of self.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span><span class="p">,</span> <span class="n">deepcopy</span>
        <span class="k">if</span> <span class="n">CoDual</span><span class="p">:</span>
            <span class="n">currG</span> <span class="o">=</span> <span class="n">CoDualDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">currG</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">remainingActions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">rankingByLastChoosing</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">worstChoice</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">remainingActions</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">worstChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">currG</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">remainingActions</span>
<span class="c1">##            if CoDual:</span>
<span class="c1">##                currGcd = CoDualDigraph(currG)</span>
<span class="c1">##            else:</span>
            <span class="n">currGcd</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">currG</span><span class="p">)</span>
            <span class="n">currGcd</span><span class="o">.</span><span class="n">computeBestChoiceRecommendation</span><span class="p">(</span><span class="n">CoDual</span><span class="o">=</span><span class="n">CoDual</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">k1</span> <span class="o">=</span> <span class="n">currGcd</span><span class="o">.</span><span class="n">flatChoice</span><span class="p">(</span><span class="n">currGcd</span><span class="o">.</span><span class="n">worstChoice</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;k1&#39;</span><span class="p">,</span><span class="n">k1</span><span class="p">)</span>
            <span class="n">ck1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">currG</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span><span class="o">-</span><span class="nb">set</span><span class="p">(</span><span class="n">k1</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">k1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ck1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">k1Outranked</span> <span class="o">=</span> <span class="n">currG</span><span class="o">.</span><span class="n">computePairwiseClusterComparison</span><span class="p">(</span><span class="n">k1</span><span class="p">,</span><span class="n">ck1</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;worst&#39;</span><span class="p">,</span> <span class="n">k1</span><span class="p">,</span> <span class="n">k1Outranked</span><span class="p">)</span>
                    <span class="n">worstChoice</span> <span class="o">=</span> <span class="p">(</span> <span class="nb">min</span><span class="p">(</span><span class="o">-</span><span class="n">k1Outranked</span><span class="p">[</span><span class="s1">&#39;P+&#39;</span><span class="p">],</span><span class="n">k1Outranked</span><span class="p">[</span><span class="s1">&#39;P-&#39;</span><span class="p">]),</span> <span class="n">k1</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span> 
                    <span class="n">worstChoice</span> <span class="o">=</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">],</span> <span class="n">k1</span> <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">worstChoice</span> <span class="o">=</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">],</span> <span class="p">[]</span> <span class="p">)</span>
                
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;worstChoice&#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">worstChoice</span><span class="p">)</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">worstChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="p">[]):</span>
                <span class="n">rankingByLastChoosing</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">worstChoice</span><span class="p">)</span>                
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">worstChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">remainingActions</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">pass</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span> <span class="n">i</span><span class="p">,</span> <span class="n">worstChoice</span><span class="p">,</span> <span class="n">remainingActions</span><span class="p">,</span> <span class="n">rankingByLastChoosing</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">worstChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="p">[]):</span>
            <span class="c1">#### only a singleton choice or a failure quadruple left to rank</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">worstChoice</span><span class="p">)</span>
            <span class="n">worstChoice</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">],</span><span class="n">remainingActions</span><span class="p">)</span>
            <span class="n">rankingByLastChoosing</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">worstChoice</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">rankingByLastChoosing</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">remainingActions</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1">#### only a singleton choice or a failure quadruple left to rank</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">worstChoice</span><span class="p">)</span>
            <span class="n">worstChoice</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">],</span><span class="n">remainingActions</span><span class="p">)</span>
            <span class="n">rankingByLastChoosing</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">worstChoice</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">rankingByLastChoosing</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">rankingByLastChoosing</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;CoDual&#39;</span><span class="p">:</span> <span class="n">CoDual</span><span class="p">,</span> <span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="n">rankingByLastChoosing</span><span class="p">}</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;CoDual&#39;</span><span class="p">:</span> <span class="n">CoDual</span><span class="p">,</span> <span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="n">rankingByLastChoosing</span><span class="p">}</span></div>


    <span class="k">def</span> <span class="nf">_computeRankingByLastChoosing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">CoDual</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes a weak preordring of the self.actions by iterating</span>
<span class="sd">        worst choice elagations.</span>

<span class="sd">        Stores in self.rankingByLastChoosing[&#39;result&#39;] a list of (P-,worstChoice) pairs</span>
<span class="sd">        where P- gives the worst choice complement outranked</span>
<span class="sd">        average valuation via the computePairwiseClusterComparison</span>
<span class="sd">        method.</span>

<span class="sd">        If self.rankingByChoosing[&#39;CoDual&#39;] is True, the ranking-by-last-chossing </span>
<span class="sd">        was computed on the codual of self.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span><span class="p">,</span> <span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>
        <span class="n">currG</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">remainingActions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">rankingByLastChoosing</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">worstChoice</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">remainingActions</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">worstChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">currG</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">remainingActions</span>
            <span class="k">if</span> <span class="n">CoDual</span><span class="p">:</span>
                <span class="n">currGcd</span> <span class="o">=</span> <span class="n">CoDualDigraph</span><span class="p">(</span><span class="n">currG</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">currGcd</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">currG</span><span class="p">)</span>
            <span class="n">currGcd</span><span class="o">.</span><span class="n">computeRubisChoice</span><span class="p">(</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="c1">#currGcd.computeGoodChoices(Comments=Debug)</span>

            <span class="c1">#currGcd.computeBadChoices(Comments=Debug)</span>
            <span class="n">worstChoiceCandidates</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">currGcd</span><span class="o">.</span><span class="n">badChoices</span><span class="p">:</span>
                <span class="n">k1</span> <span class="o">=</span> <span class="n">currGcd</span><span class="o">.</span><span class="n">flatChoice</span><span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span><span class="n">k1</span><span class="p">)</span>
                <span class="n">ck1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">currG</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span><span class="o">-</span><span class="nb">set</span><span class="p">(</span><span class="n">k1</span><span class="p">))</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ck1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">k1Outranked</span> <span class="o">=</span> <span class="n">currG</span><span class="o">.</span><span class="n">computePairwiseClusterComparison</span><span class="p">(</span><span class="n">k1</span><span class="p">,</span><span class="n">ck1</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;worst&#39;</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="n">k1</span><span class="p">,</span> <span class="n">k1Outranked</span><span class="p">)</span>
                    <span class="n">worstChoiceCandidates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">(</span> <span class="nb">min</span><span class="p">(</span><span class="o">-</span><span class="n">k1Outranked</span><span class="p">[</span><span class="s1">&#39;P+&#39;</span><span class="p">],</span><span class="n">k1Outranked</span><span class="p">[</span><span class="s1">&#39;P-&#39;</span><span class="p">]),</span> <span class="n">k1</span> <span class="p">)</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">worstChoiceCandidates</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">],</span><span class="n">k1</span><span class="p">))</span>
            <span class="n">worstChoiceCandidates</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">worstChoice</span> <span class="o">=</span> <span class="n">worstChoiceCandidates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="c1">#print &#39;Error: no worst choice in currGcd&#39;</span>
                <span class="c1">#currGcd.save(&#39;currGcd_errorWorst&#39;)</span>
                <span class="n">worstChoice</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">],[])</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;worstChoice&#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">worstChoice</span><span class="p">,</span> <span class="n">worstChoiceCandidates</span><span class="p">)</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">worstChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="p">[]):</span>
                <span class="n">rankingByLastChoosing</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">worstChoice</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">worstChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">worstChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">remainingActions</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">pass</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span> <span class="n">i</span><span class="p">,</span> <span class="n">worstChoice</span><span class="p">,</span> <span class="n">remainingActions</span><span class="p">,</span> <span class="n">rankingByLastChoosing</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">worstChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="p">[]):</span>
            <span class="c1">#### only a singleton choice or a failure quadruple left to rank</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">worstChoice</span><span class="p">)</span>
            <span class="n">worstChoice</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">],</span><span class="n">remainingActions</span><span class="p">)</span>
            <span class="n">rankingByLastChoosing</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">worstChoice</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">rankingByLastChoosing</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">remainingActions</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1">#### only a singleton choice or a failure quadruple left to rank</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">worstChoice</span><span class="p">)</span>
            <span class="n">worstChoice</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">],</span><span class="n">remainingActions</span><span class="p">)</span>
            <span class="n">rankingByLastChoosing</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">worstChoice</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">rankingByLastChoosing</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">rankingByLastChoosing</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;CoDual&#39;</span><span class="p">:</span> <span class="n">CoDual</span><span class="p">,</span> <span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="n">rankingByLastChoosing</span><span class="p">}</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;CoDual&#39;</span><span class="p">:</span> <span class="n">CoDual</span><span class="p">,</span> <span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="n">rankingByLastChoosing</span><span class="p">}</span>     

<div class="viewcode-block" id="Digraph.computeRankingByChoosing">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeRankingByChoosing">[docs]</a>
    <span class="k">def</span> <span class="nf">computeRankingByChoosing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">actionsSubset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">CoDual</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes a weak preordring of the self.actions by iterating</span>
<span class="sd">        jointly first and last choice elagations.</span>

<span class="sd">        Stores in self.rankingByChoosing[&#39;result&#39;] a list of ((P+,bestChoice),(P-,worstChoice)) pairs</span>
<span class="sd">        where P+ (resp. P-) gives the best (resp. worst) choice complement outranking</span>
<span class="sd">        (resp. outranked) average valuation via the computePairwiseClusterComparison</span>
<span class="sd">        method.</span>

<span class="sd">        If self.rankingByChoosing[&#39;CoDual&#39;] is True, the ranking-by-choosing was computed on the codual of self.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span><span class="p">,</span> <span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>
        <span class="k">if</span> <span class="n">CoDual</span><span class="p">:</span>
            <span class="n">currG</span> <span class="o">=</span> <span class="n">CoDualDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">currG</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">actionsSubset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">remainingActions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">remainingActions</span> <span class="o">=</span> <span class="n">actionsSubset</span>
        <span class="n">rankingByChoosing</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">bestChoice</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">worstChoice</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">remainingActions</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="ow">and</span> <span class="p">(</span><span class="n">bestChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="p">[]</span> <span class="ow">or</span> <span class="n">worstChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="p">[]):</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">currG</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">remainingActions</span>
            <span class="n">currGcd</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">currG</span><span class="p">)</span>
            <span class="n">currGcd</span><span class="o">.</span><span class="n">computeRubisChoice</span><span class="p">(</span><span class="n">Comments</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
            <span class="c1">#currGcd.computeGoodChoices(Comments=Debug)</span>
            <span class="n">bestChoiceCandidates</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">currGcd</span><span class="o">.</span><span class="n">goodChoices</span><span class="p">:</span>
                <span class="n">k1</span> <span class="o">=</span> <span class="n">currGcd</span><span class="o">.</span><span class="n">flatChoice</span><span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span><span class="n">k1</span><span class="p">)</span>
                <span class="n">ck1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">currG</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span><span class="o">-</span><span class="nb">set</span><span class="p">(</span><span class="n">k1</span><span class="p">))</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ck1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">k1Outranking</span> <span class="o">=</span> <span class="n">currG</span><span class="o">.</span><span class="n">computePairwiseClusterComparison</span><span class="p">(</span><span class="n">k1</span><span class="p">,</span><span class="n">ck1</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;good&#39;</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="n">k1</span><span class="p">,</span> <span class="n">k1Outranking</span><span class="p">)</span>
                    <span class="c1">#bestChoiceCandidates.append((k1Outranking[&#39;P+&#39;],k1))</span>
                    <span class="n">bestChoiceCandidates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">(</span> <span class="nb">min</span><span class="p">(</span><span class="n">k1Outranking</span><span class="p">[</span><span class="s1">&#39;P+&#39;</span><span class="p">],</span><span class="o">-</span><span class="n">k1Outranking</span><span class="p">[</span><span class="s1">&#39;P-&#39;</span><span class="p">]),</span> <span class="n">k1</span> <span class="p">)</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">bestChoiceCandidates</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">],</span><span class="n">k1</span><span class="p">))</span>
            <span class="c1">#bestChoiceCandidates.sort(reverse=True)</span>
            <span class="n">bestChoiceCandidates</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">bestChoiceCandidates</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">choice</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">choice</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span> <span class="c1"># lexigr choices</span>
            <span class="n">bestChoiceCandidates</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">bestChoiceCandidates</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">choice</span><span class="p">:</span> <span class="o">-</span><span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c1"># sort by outranking power</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">bestChoice</span> <span class="o">=</span> <span class="n">bestChoiceCandidates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="c1">#print &#39;Error: no best choice in currGcd!&#39;</span>
                <span class="c1">#currGcd.save(&#39;currGcd_errorBest&#39;)</span>
                <span class="n">bestChoice</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">],[])</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;bestChoice&#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">bestChoice</span><span class="p">,</span> <span class="n">bestChoiceCandidates</span><span class="p">)</span>

            <span class="c1">#currGcd.computeBadChoices(Comments=Debug)</span>
            <span class="n">worstChoiceCandidates</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">currGcd</span><span class="o">.</span><span class="n">badChoices</span><span class="p">:</span>
                <span class="n">k1</span> <span class="o">=</span> <span class="n">currGcd</span><span class="o">.</span><span class="n">flatChoice</span><span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span><span class="n">k1</span><span class="p">)</span>
                <span class="n">ck1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">currG</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span><span class="o">-</span><span class="nb">set</span><span class="p">(</span><span class="n">k1</span><span class="p">))</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ck1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">k1Outranked</span> <span class="o">=</span> <span class="n">currG</span><span class="o">.</span><span class="n">computePairwiseClusterComparison</span><span class="p">(</span><span class="n">k1</span><span class="p">,</span><span class="n">ck1</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;worst&#39;</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="n">k1</span><span class="p">,</span> <span class="n">k1Outranked</span><span class="p">)</span>
                    <span class="n">worstChoiceCandidates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">(</span> <span class="nb">min</span><span class="p">(</span><span class="o">-</span><span class="n">k1Outranked</span><span class="p">[</span><span class="s1">&#39;P+&#39;</span><span class="p">],</span><span class="n">k1Outranked</span><span class="p">[</span><span class="s1">&#39;P-&#39;</span><span class="p">]),</span> <span class="n">k1</span> <span class="p">)</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">worstChoiceCandidates</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">],</span><span class="n">k1</span><span class="p">))</span>
            <span class="n">worstChoiceCandidates</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">worstChoice</span> <span class="o">=</span> <span class="n">worstChoiceCandidates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="c1">#print &#39;Error: no worst choice in currGcd&#39;</span>
                <span class="c1">#currGcd.save(&#39;currGcd_errorWorst&#39;)</span>
                <span class="n">worstChoice</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">],[])</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;worstChoice&#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">worstChoice</span><span class="p">,</span> <span class="n">worstChoiceCandidates</span><span class="p">)</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">bestChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="p">[]</span> <span class="ow">or</span> <span class="n">worstChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="p">[]):</span>
                <span class="n">rankingByChoosing</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">bestChoice</span><span class="p">,</span><span class="n">worstChoice</span><span class="p">))</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bestChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">bestChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="n">remainingActions</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">worstChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">worstChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">remainingActions</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">pass</span>
            <span class="c1">#print i, bestChoice, worstChoice, remainingActions, rankingByChoosing</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">bestChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="p">[]</span> <span class="ow">and</span> <span class="n">worstChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="p">[]):</span>
            <span class="c1">#### only a singleton choice or a failure quadruple left to rank</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">bestChoice</span><span class="p">,</span><span class="n">worstChoice</span><span class="p">)</span>
            <span class="n">bestChoice</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">],</span><span class="n">remainingActions</span><span class="p">)</span>
            <span class="n">worstChoice</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">],</span><span class="n">remainingActions</span><span class="p">)</span>
            <span class="n">rankingByChoosing</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">bestChoice</span><span class="p">,</span><span class="n">worstChoice</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">rankingByChoosing</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">remainingActions</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">currG</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">remainingActions</span>
            <span class="k">if</span> <span class="n">CoDual</span><span class="p">:</span>
                <span class="n">currGcd</span> <span class="o">=</span> <span class="n">CoDualDigraph</span><span class="p">(</span><span class="n">currG</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">currGcd</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">currG</span><span class="p">)</span>
            <span class="n">currGcd</span><span class="o">.</span><span class="n">computeRubisChoice</span><span class="p">(</span><span class="n">Comments</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
            <span class="c1">#currGcd.computeGoodChoices(Comments=Debug)</span>
            <span class="n">bestChoiceCandidates</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">currGcd</span><span class="o">.</span><span class="n">goodChoices</span><span class="p">:</span>
                <span class="n">k1</span> <span class="o">=</span> <span class="n">currGcd</span><span class="o">.</span><span class="n">flatChoice</span><span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span><span class="n">k1</span><span class="p">)</span>
                <span class="n">ck1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">currG</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span><span class="o">-</span><span class="nb">set</span><span class="p">(</span><span class="n">k1</span><span class="p">))</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ck1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">k1Outranking</span> <span class="o">=</span> <span class="n">currG</span><span class="o">.</span><span class="n">computePairwiseClusterComparison</span><span class="p">(</span><span class="n">k1</span><span class="p">,</span><span class="n">ck1</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;good&#39;</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="n">k1</span><span class="p">,</span> <span class="n">k1Outranking</span><span class="p">)</span>
                    <span class="c1">#bestChoiceCandidates.append((k1Outranking[&#39;P+&#39;],k1))</span>
                    <span class="n">bestChoiceCandidates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">(</span> <span class="nb">min</span><span class="p">(</span><span class="n">k1Outranking</span><span class="p">[</span><span class="s1">&#39;P+&#39;</span><span class="p">],</span><span class="o">-</span><span class="n">k1Outranking</span><span class="p">[</span><span class="s1">&#39;P-&#39;</span><span class="p">]),</span> <span class="n">k1</span> <span class="p">)</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">bestChoiceCandidates</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">],</span><span class="n">k1</span><span class="p">))</span>
            <span class="n">bestChoiceCandidates</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">bestChoice</span> <span class="o">=</span> <span class="n">bestChoiceCandidates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="c1">#print &#39;Error: no best choice in currGcd!&#39;</span>
                <span class="c1">#currGcd.save(&#39;currGcd_errorBest&#39;)</span>
                <span class="n">bestChoice</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">],[])</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;bestChoice&#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">bestChoice</span><span class="p">,</span> <span class="n">bestChoiceCandidates</span><span class="p">)</span>
            <span class="c1">## ### unique worst choice left</span>
            <span class="n">k1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">currG</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span><span class="o">-</span><span class="nb">set</span><span class="p">(</span><span class="n">bestChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;singleton worst choice left&#39;</span><span class="p">,</span><span class="n">k1</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">k1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">ck1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">currG</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span><span class="o">-</span><span class="nb">set</span><span class="p">(</span><span class="n">k1</span><span class="p">))</span>
                <span class="n">k1Outranked</span> <span class="o">=</span> <span class="n">currG</span><span class="o">.</span><span class="n">computePairwiseClusterComparison</span><span class="p">(</span><span class="n">k1</span><span class="p">,</span><span class="n">ck1</span><span class="p">)</span>
                <span class="n">worstChoice</span> <span class="o">=</span> <span class="p">(</span> <span class="nb">min</span><span class="p">(</span><span class="o">-</span><span class="n">k1Outranked</span><span class="p">[</span><span class="s1">&#39;P+&#39;</span><span class="p">],</span><span class="n">k1Outranked</span><span class="p">[</span><span class="s1">&#39;P-&#39;</span><span class="p">]),</span> <span class="n">k1</span> <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">worstChoice</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">],</span><span class="n">bestChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;worstChoice&#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">worstChoice</span><span class="p">)</span>
            <span class="n">rankingByChoosing</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">bestChoice</span><span class="p">,</span><span class="n">worstChoice</span><span class="p">))</span>

        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">remainingActions</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1">#### only a singleton choice or a failure quadruple left to rank</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">bestChoice</span><span class="p">,</span><span class="n">worstChoice</span><span class="p">)</span>
            <span class="n">bestChoice</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">],</span><span class="n">remainingActions</span><span class="p">)</span>
            <span class="n">worstChoice</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">],</span><span class="n">remainingActions</span><span class="p">)</span>
            <span class="n">rankingByChoosing</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">bestChoice</span><span class="p">,</span><span class="n">worstChoice</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">rankingByChoosing</span><span class="p">)</span>
        <span class="c1"># computing the final ranking</span>
        <span class="n">rbcp</span> <span class="o">=</span> <span class="n">rankingByChoosing</span>
        <span class="n">ranking</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">k</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">rbcp</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
            <span class="n">ranking</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rbcp</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
            <span class="n">ranking</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rbcp</span><span class="p">[</span><span class="n">k</span><span class="o">-</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">k1</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ranking</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">k1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;==&gt;&gt;&#39;</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">ranking</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="n">ranking</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">ci</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ranking</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ranking</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="n">ci</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;==&gt;&gt;&#39;</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">ranking</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="n">ranking</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">ci</span><span class="p">)</span>                
            <span class="n">ranking</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">ranking</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">ci</span><span class="p">)</span>
        <span class="n">rbc</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">k1</span><span class="p">):</span>
            <span class="n">rbc</span> <span class="o">+=</span> <span class="n">ranking</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="c1">#from digraphsTools import flatten</span>
        <span class="c1">#rbc = [ x for x in flatten(rbc)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rankingByChoosing</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;CoDual&#39;</span><span class="p">:</span> <span class="n">CoDual</span><span class="p">,</span> <span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="n">rankingByChoosing</span><span class="p">,</span> <span class="s1">&#39;ranking&#39;</span><span class="p">:</span> <span class="n">rbc</span><span class="p">}</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;CoDual&#39;</span><span class="p">:</span> <span class="n">CoDual</span><span class="p">,</span> <span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="n">rankingByChoosing</span><span class="p">,</span> <span class="s1">&#39;ranking&#39;</span><span class="p">:</span> <span class="n">rbc</span><span class="p">}</span></div>


<div class="viewcode-block" id="Digraph.computeRankingByBestChoosing">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeRankingByBestChoosing">[docs]</a>
    <span class="k">def</span> <span class="nf">computeRankingByBestChoosing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">CoDual</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes a weak preordering of the self.actions by recursive</span>
<span class="sd">        best choice elagations.</span>

<span class="sd">        Stores in self.rankingByBestChoosing[&#39;result&#39;] a list of (P+,bestChoice) tuples</span>
<span class="sd">        where P+ gives the best choice complement outranking</span>
<span class="sd">        average valuation via the computePairwiseClusterComparison</span>
<span class="sd">        method.</span>

<span class="sd">        If self.rankingByBestChoosing[&#39;CoDual&#39;] is True, </span>
<span class="sd">        the ranking-by-choosing was computed on the codual of self.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;===&gt;&gt;&gt;&gt; debugging computeByBestChoosing() digraphs methods&quot;</span><span class="p">)</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span><span class="p">,</span> <span class="n">deepcopy</span>
        <span class="k">if</span> <span class="n">CoDual</span><span class="p">:</span>
            <span class="n">currG</span> <span class="o">=</span> <span class="n">CoDualDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">currG</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">remainingActions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">rankingByBestChoosing</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">bestChoice</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">],</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">remainingActions</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">bestChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">currG</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">remainingActions</span>
<span class="c1">##            if CoDual:</span>
<span class="c1">##                currGcd = CoDualDigraph(currG)</span>
<span class="c1">##            else:</span>
            <span class="n">currGcd</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">currG</span><span class="p">)</span>
            <span class="n">currGcd</span><span class="o">.</span><span class="n">computeBestChoiceRecommendation</span><span class="p">(</span><span class="n">CoDual</span><span class="o">=</span><span class="n">CoDual</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
            <span class="n">k1</span> <span class="o">=</span> <span class="n">currGcd</span><span class="o">.</span><span class="n">flatChoice</span><span class="p">(</span><span class="n">currGcd</span><span class="o">.</span><span class="n">bestChoice</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;flatening the choice:&#39;</span><span class="p">,</span><span class="n">currGcd</span><span class="o">.</span><span class="n">bestChoice</span><span class="p">,</span><span class="n">k1</span><span class="p">)</span>
            <span class="n">ck1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">currG</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span><span class="o">-</span><span class="nb">set</span><span class="p">(</span><span class="n">k1</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">k1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ck1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">k1Outranking</span> <span class="o">=</span> <span class="n">currG</span><span class="o">.</span><span class="n">computePairwiseClusterComparison</span><span class="p">(</span><span class="n">k1</span><span class="p">,</span><span class="n">ck1</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;good&#39;</span><span class="p">,</span><span class="n">currGcd</span><span class="o">.</span><span class="n">bestChoice</span><span class="p">,</span> <span class="n">k1</span><span class="p">,</span> <span class="n">k1Outranking</span><span class="p">)</span>
                        <span class="c1">#bestChoiceCandidates.append((k1Outranking[&#39;P+&#39;],k1))</span>
                    <span class="n">bestChoice</span> <span class="o">=</span> <span class="p">(</span> <span class="nb">min</span><span class="p">(</span><span class="n">k1Outranking</span><span class="p">[</span><span class="s1">&#39;P+&#39;</span><span class="p">],</span><span class="o">-</span><span class="n">k1Outranking</span><span class="p">[</span><span class="s1">&#39;P-&#39;</span><span class="p">]),</span> <span class="n">k1</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">bestChoice</span> <span class="o">=</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">],</span> <span class="n">k1</span> <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">bestChoice</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">],[])</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;bestChoice&#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">bestChoice</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">bestChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="p">[]:</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;bestChoice[1] != []:&#39;</span><span class="p">,</span> <span class="n">bestChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">rankingByBestChoosing</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bestChoice</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">bestChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">remainingActions</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">pass</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">bestChoice</span><span class="p">,</span> <span class="n">remainingActions</span><span class="p">,</span> <span class="n">rankingByBestChoosing</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">bestChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="p">[]:</span>
            <span class="c1">#### no best choice detacted, close the ranking with the remaining actions</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;bestChoice[1] == []:&#39;</span><span class="p">,</span> <span class="n">bestChoice</span><span class="p">)</span>
            <span class="n">bestChoice</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">],</span><span class="n">remainingActions</span><span class="p">)</span>
            <span class="n">rankingByBestChoosing</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bestChoice</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">rankingByBestChoosing</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">remainingActions</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1">#### only a singleton choice or a failure quadruple left to rank</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;!!! len(remainingActions) == 1: !!!&#39;</span><span class="p">,</span> <span class="n">remainingActions</span><span class="p">)</span>
            <span class="n">bestChoice</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">],</span><span class="n">remainingActions</span><span class="p">)</span>
            <span class="n">rankingByBestChoosing</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bestChoice</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">rankingByBestChoosing</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rankingByBestChoosing</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;CoDual&#39;</span><span class="p">:</span> <span class="n">CoDual</span><span class="p">,</span> <span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="n">rankingByBestChoosing</span><span class="p">}</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;CoDual&#39;</span><span class="p">:</span> <span class="n">CoDual</span><span class="p">,</span> <span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="n">rankingByBestChoosing</span><span class="p">}</span></div>



    <span class="k">def</span> <span class="nf">_computeRankingByBestChoosing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">CoDual</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes a weak preordering of the self.actions by recursive</span>
<span class="sd">        best choice elagations.</span>

<span class="sd">        Stores in self.rankingByBestChoosing[&#39;result&#39;] a list of (P+,bestChoice) tuples</span>
<span class="sd">        where P+ gives the best choice complement outranking</span>
<span class="sd">        average valuation via the computePairwiseClusterComparison</span>
<span class="sd">        method.</span>

<span class="sd">        If self.rankingByBestChoosing[&#39;CoDual&#39;] is True, </span>
<span class="sd">        the ranking-by-choosing was computed on the codual of self.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;===&gt;&gt;&gt;&gt; debugging computeByBestChoosing() digraphs methods&quot;</span><span class="p">)</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span><span class="p">,</span> <span class="n">deepcopy</span>
        <span class="n">currG</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">remainingActions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">rankingByBestChoosing</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">bestChoice</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">remainingActions</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">bestChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">currG</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">remainingActions</span>
            <span class="k">if</span> <span class="n">CoDual</span><span class="p">:</span>
                <span class="n">currGcd</span> <span class="o">=</span> <span class="n">CoDualDigraph</span><span class="p">(</span><span class="n">currG</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">currGcd</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">currG</span><span class="p">)</span>
            <span class="n">currGcd</span><span class="o">.</span><span class="n">computeRubisChoice</span><span class="p">(</span><span class="n">Comments</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
            <span class="c1">#currGcd.computeGoodChoices(Comments=Debug)</span>
            <span class="n">bestChoiceCandidates</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">currGcd</span><span class="o">.</span><span class="n">goodChoices</span><span class="p">:</span>
                <span class="n">k1</span> <span class="o">=</span> <span class="n">currGcd</span><span class="o">.</span><span class="n">flatChoice</span><span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;flatening the choice:&#39;</span><span class="p">,</span><span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span><span class="n">k1</span><span class="p">)</span>
                <span class="n">ck1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">currG</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span><span class="o">-</span><span class="nb">set</span><span class="p">(</span><span class="n">k1</span><span class="p">))</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ck1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">k1Outranking</span> <span class="o">=</span> <span class="n">currG</span><span class="o">.</span><span class="n">computePairwiseClusterComparison</span><span class="p">(</span><span class="n">k1</span><span class="p">,</span><span class="n">ck1</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;good&#39;</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="n">k1</span><span class="p">,</span> <span class="n">k1Outranking</span><span class="p">)</span>
                    <span class="c1">#bestChoiceCandidates.append((k1Outranking[&#39;P+&#39;],k1))</span>
                    <span class="n">bestChoiceCandidates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">(</span> <span class="nb">min</span><span class="p">(</span><span class="n">k1Outranking</span><span class="p">[</span><span class="s1">&#39;P+&#39;</span><span class="p">],</span><span class="o">-</span><span class="n">k1Outranking</span><span class="p">[</span><span class="s1">&#39;P-&#39;</span><span class="p">]),</span> <span class="n">k1</span> <span class="p">)</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">bestChoiceCandidates</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">],</span><span class="n">k1</span><span class="p">))</span>
            <span class="c1">#bestChoiceCandidates.sort(reverse=True)</span>
            <span class="n">bestChoiceCandidates</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">bestChoiceCandidates</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">choice</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">choice</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">)</span> <span class="c1"># lexigr choices</span>
            <span class="n">bestChoiceCandidates</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">bestChoiceCandidates</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">choice</span><span class="p">:</span> <span class="o">-</span><span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c1"># sort by outranking power</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">bestChoice</span> <span class="o">=</span> <span class="n">bestChoiceCandidates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: no best choice in currGcd!&#39;</span><span class="p">)</span>
                    <span class="c1">#currGcd.save(&#39;currGcd_errorBest&#39;)</span>
                <span class="n">bestChoice</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">],[])</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;bestChoice&#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">bestChoice</span><span class="p">,</span> <span class="n">bestChoiceCandidates</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">bestChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="p">[]:</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;bestChoice[1] != []:&#39;</span><span class="p">,</span> <span class="n">bestChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">rankingByBestChoosing</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bestChoice</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bestChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">bestChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                        <span class="n">remainingActions</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">bestChoice</span><span class="p">,</span> <span class="n">remainingActions</span><span class="p">,</span> <span class="n">rankingByBestChoosing</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">bestChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="p">[]:</span>
            <span class="c1">#### only a singleton choice or a failure quadruple left to rank</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;bestChoice[1] == []:&#39;</span><span class="p">,</span> <span class="n">bestChoice</span><span class="p">)</span>
            <span class="n">bestChoice</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">],</span><span class="n">remainingActions</span><span class="p">)</span>
            <span class="n">rankingByBestChoosing</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bestChoice</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">rankingByBestChoosing</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">remainingActions</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;len(remainingActions) == 2:&#39;</span><span class="p">,</span><span class="n">remainingActions</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">currG</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">remainingActions</span>
            <span class="k">if</span> <span class="n">CoDual</span><span class="p">:</span>
                <span class="n">currGcd</span> <span class="o">=</span> <span class="n">CoDualDigraph</span><span class="p">(</span><span class="n">currG</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">currGcd</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">currG</span><span class="p">)</span>
            <span class="n">currGcd</span><span class="o">.</span><span class="n">computeRubisChoice</span><span class="p">(</span><span class="n">Comments</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
            <span class="c1">#currGcd.computeGoodChoices(Comments=Debug)</span>
            <span class="n">bestChoiceCandidates</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">currGcd</span><span class="o">.</span><span class="n">goodChoices</span><span class="p">:</span>
                <span class="n">k1</span> <span class="o">=</span> <span class="n">currGcd</span><span class="o">.</span><span class="n">flatChoice</span><span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span><span class="n">k1</span><span class="p">)</span>
                <span class="n">ck1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">currG</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span><span class="o">-</span><span class="nb">set</span><span class="p">(</span><span class="n">k1</span><span class="p">))</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ck1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">k1Outranking</span> <span class="o">=</span> <span class="n">currG</span><span class="o">.</span><span class="n">computePairwiseClusterComparison</span><span class="p">(</span><span class="n">k1</span><span class="p">,</span><span class="n">ck1</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;good&#39;</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="n">k1</span><span class="p">,</span> <span class="n">k1Outranking</span><span class="p">)</span>
                    <span class="c1">#bestChoiceCandidates.append((k1Outranking[&#39;P+&#39;],k1))</span>
                    <span class="n">bestChoiceCandidates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">(</span> <span class="nb">min</span><span class="p">(</span><span class="n">k1Outranking</span><span class="p">[</span><span class="s1">&#39;P+&#39;</span><span class="p">],</span><span class="o">-</span><span class="n">k1Outranking</span><span class="p">[</span><span class="s1">&#39;P-&#39;</span><span class="p">]),</span> <span class="n">k1</span> <span class="p">)</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">bestChoiceCandidates</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">],</span><span class="n">k1</span><span class="p">))</span>

            <span class="n">bestChoiceCandidates</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;bestChoice&#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">bestChoice</span><span class="p">,</span> <span class="n">bestChoiceCandidates</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">bestChoice</span> <span class="o">=</span> <span class="n">bestChoiceCandidates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="c1">#print &#39;Error: no best choice in currGcd!&#39;</span>
                <span class="c1">#currGcd.save(&#39;currGcd_errorBest&#39;)</span>
                <span class="n">bestChoice</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">],[])</span>
            <span class="n">rankingByBestChoosing</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bestChoice</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">bestChoice</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">remainingActions</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">remainingActions</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">lastBestChoice</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">],</span><span class="n">remainingActions</span><span class="p">)</span>
                <span class="n">rankingByBestChoosing</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lastBestChoice</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;lastBestChoice&#39;</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">lastBestChoice</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">remainingActions</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1">#### only a singleton choice or a failure quadruple left to rank</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;!!! len(remainingActions) == 1: !!!&#39;</span><span class="p">,</span> <span class="n">remainingActions</span><span class="p">)</span>
            <span class="n">bestChoice</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">],</span><span class="n">remainingActions</span><span class="p">)</span>
            <span class="n">rankingByBestChoosing</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bestChoice</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">rankingByBestChoosing</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rankingByBestChoosing</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;CoDual&#39;</span><span class="p">:</span> <span class="n">CoDual</span><span class="p">,</span> <span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="n">rankingByBestChoosing</span><span class="p">}</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;CoDual&#39;</span><span class="p">:</span> <span class="n">CoDual</span><span class="p">,</span> <span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="n">rankingByBestChoosing</span><span class="p">}</span>

<div class="viewcode-block" id="Digraph.iterateRankingByChoosing">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.iterateRankingByChoosing">[docs]</a>
    <span class="k">def</span> <span class="nf">iterateRankingByChoosing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Odd</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">CoDual</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Limited</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders a ranking by choosing result when progressively eliminating</span>
<span class="sd">        all chordless (odd only) circuits with rising valuation cut levels.</span>

<span class="sd">        Parameters</span>
<span class="sd">            CoDual = False (default)/True</span>
<span class="sd">            Limited = proportion (in [0,1]) * (max - med) valuationdomain</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span><span class="p">,</span> <span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">time</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="n">Comments</span><span class="o">=</span><span class="kc">True</span>
        <span class="n">gcd</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="n">qualmaj0</span> <span class="o">=</span> <span class="n">gcd</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Limited</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">maxLevel</span> <span class="o">=</span> <span class="n">gcd</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">gcd</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">gcd</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">])</span><span class="o">*</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">Limited</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">maxLevel</span> <span class="o">=</span> <span class="n">gcd</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Ranking by choosing and rejecting after progressive cut elimination of chordless (odd = </span><span class="si">%s</span><span class="s1">) circuits&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">Odd</span><span class="p">))</span> <span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Evaluation domain: [ </span><span class="si">%.3f</span><span class="s1"> ; </span><span class="si">%.3f</span><span class="s1"> ]&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">gcd</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">],</span><span class="n">gcd</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Initial determinateness of the outranking relation: </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeDeterminateness</span><span class="p">())</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Maximum level of circuits elimination: </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">maxLevel</span><span class="p">))</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">qualmaj</span> <span class="o">=</span> <span class="n">gcd</span><span class="o">.</span><span class="n">minimalValuationLevelForCircuitsElimination</span><span class="p">(</span><span class="n">Odd</span><span class="o">=</span><span class="n">Odd</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rankingByChoosing</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">while</span> <span class="n">qualmaj</span> <span class="o">&gt;</span> <span class="n">qualmaj0</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--&gt; Iteration </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">))</span>
                <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">Limited</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">qualmaj</span> <span class="o">&lt;=</span> <span class="n">maxLevel</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">qualmaj</span> <span class="o">&lt;</span> <span class="n">gcd</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]:</span>
                        <span class="c1"># strict cut only possible if &lt; max</span>
                        <span class="n">pg</span> <span class="o">=</span> <span class="n">PolarisedDigraph</span><span class="p">(</span><span class="n">gcd</span><span class="p">,</span><span class="n">qualmaj</span><span class="p">,</span><span class="n">StrictCut</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">pg</span> <span class="o">=</span> <span class="n">PolarisedDigraph</span><span class="p">(</span><span class="n">gcd</span><span class="p">,</span><span class="n">qualmaj</span><span class="p">,</span><span class="n">StrictCut</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">qualmaj</span> <span class="o">=</span> <span class="n">qualmaj0</span>
                    <span class="k">if</span> <span class="n">qualmaj</span> <span class="o">&lt;</span> <span class="n">gcd</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]:</span>
                        <span class="n">pg</span> <span class="o">=</span> <span class="n">PolarisedDigraph</span><span class="p">(</span><span class="n">gcd</span><span class="p">,</span><span class="n">qualmaj</span><span class="p">,</span><span class="n">StrictCut</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">pg</span> <span class="o">=</span> <span class="n">PolarisedDigraph</span><span class="p">(</span><span class="n">gcd</span><span class="p">,</span><span class="n">qualmaj</span><span class="p">,</span><span class="n">StrictCut</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">qualmaj</span> <span class="o">&lt;</span> <span class="n">gcd</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]:</span>
                    <span class="n">pg</span> <span class="o">=</span> <span class="n">PolarisedDigraph</span><span class="p">(</span><span class="n">gcd</span><span class="p">,</span><span class="n">qualmaj</span><span class="p">,</span><span class="n">StrictCut</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pg</span> <span class="o">=</span> <span class="n">PolarisedDigraph</span><span class="p">(</span><span class="n">gcd</span><span class="p">,</span><span class="n">qualmaj</span><span class="p">,</span><span class="n">StrictCut</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Polarised determinateness = </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">pg</span><span class="o">.</span><span class="n">computeDeterminateness</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">qualmaj</span> <span class="o">&gt;</span> <span class="n">gcd</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rankingByChoosing</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">computeRankingByChoosing</span><span class="p">(</span><span class="n">CoDual</span><span class="o">=</span><span class="n">CoDual</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rankingByChoosing</span><span class="p">[</span><span class="s1">&#39;PolarizationLevel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">qualmaj</span>
            <span class="k">elif</span> <span class="n">i</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rankingByChoosing</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">computeRankingByChoosing</span><span class="p">(</span><span class="n">CoDual</span><span class="o">=</span><span class="n">CoDual</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rankingByChoosing</span><span class="p">[</span><span class="s1">&#39;PolarizationLevel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">qualmaj</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">showRankingByChoosing</span><span class="p">()</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Execution time:&#39;</span><span class="p">,</span> <span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">t0</span><span class="p">,</span> <span class="s1">&#39;sec.&#39;</span><span class="p">)</span>
                <span class="c1">## pgRankingByChoosingRelation = self.computeRankingByChoosingRelation()</span>
                <span class="c1">## corr = self.computeOrdinalCorrelation(pgRankingByChoosingRelation)</span>
                <span class="c1">## print &#39;Ordinal (Kendall) correlation with outranking relation: %.3f (%.3f)&#39; % (corr[&#39;correlation&#39;],corr[&#39;determination&#39;])</span>
                <span class="c1">## corr = self.computeOrdinalCorrelation(pgRankingByChoosingRelation,MedianCut=True,Debug=Debug)</span>
                <span class="c1">## print &#39;Ordinal (Kendall) correlation with median cut outranking relation: %.3f (%.3f)&#39; % (corr[&#39;correlation&#39;],corr[&#39;determination&#39;])</span>
            <span class="n">qualmaj0</span> <span class="o">=</span> <span class="n">qualmaj</span>
            <span class="n">newLevel</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">minimalValuationLevelForCircuitsElimination</span><span class="p">(</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Limited</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">qualmaj</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">maxLevel</span><span class="p">,</span><span class="n">newLevel</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">qualmaj</span> <span class="o">=</span> <span class="n">newLevel</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">qualmaj0</span><span class="p">,</span><span class="n">newLevel</span><span class="p">,</span><span class="n">qualmaj</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">i</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rankingByChoosing</span> <span class="o">=</span> <span class="n">gcd</span><span class="o">.</span><span class="n">computeRankingByChoosing</span><span class="p">(</span><span class="n">CoDual</span><span class="o">=</span><span class="n">CoDual</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rankingByChoosing</span><span class="p">[</span><span class="s1">&#39;PolarizationLevel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">qualmaj</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rankingByChoosing</span></div>


    <span class="k">def</span> <span class="nf">_optimalRankingByChoosing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Odd</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">CoDual</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Limited</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders a ranking by choosing result when progressively eliminating</span>
<span class="sd">        all chordless (odd only by default) circuits with rising valuation cut levels.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        </span>
<span class="sd">            * CoDual = False (default)/True</span>
<span class="sd">            * Limited = proportion (in [0,1]) * (max - med) of valuationdomain (default = None)</span>

<span class="sd">        Returns the highest correlated rankingByChoosing with self or </span>
<span class="sd">        codual of self, depending on the CoDual flagg.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span><span class="p">,</span> <span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>
        
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="n">Comments</span><span class="o">=</span><span class="kc">True</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">CoDual</span><span class="p">:</span>
            <span class="n">gcd</span> <span class="o">=</span> <span class="o">~</span><span class="p">(</span><span class="o">-</span><span class="n">g</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">gcd</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
            <span class="n">gcdcd</span> <span class="o">=</span> <span class="o">~</span><span class="p">(</span><span class="o">-</span><span class="n">gcd</span><span class="p">)</span>

        <span class="n">qualmaj0</span> <span class="o">=</span> <span class="n">gcd</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Limited</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">maxLevel</span> <span class="o">=</span> <span class="n">gcd</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">gcd</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">gcd</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">])</span><span class="o">*</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">Limited</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">maxLevel</span> <span class="o">=</span> <span class="n">gcd</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Ranking by choosing and rejecting after progressive cut elimination of chordless (odd = </span><span class="si">%s</span><span class="s1">) circuits&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">Odd</span><span class="p">))</span> <span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Evaluation domain: [ </span><span class="si">%.3f</span><span class="s1"> ; </span><span class="si">%.3f</span><span class="s1"> ]&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">gcd</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">],</span><span class="n">gcd</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Initial determinateness of the outranking relation: </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeDeterminateness</span><span class="p">())</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Maximum level of circuits elimination: </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">maxLevel</span><span class="p">))</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#qualmaj = gcd.minimalValuationLevelForCircuitsElimination(Odd=Odd,Debug=Debug,Comments=Comments)</span>
        <span class="n">qualmaj</span> <span class="o">=</span> <span class="n">gcd</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rankingByChoosing</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">rankings</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">while</span> <span class="n">qualmaj</span> <span class="o">&gt;</span> <span class="n">qualmaj0</span> <span class="ow">and</span> <span class="n">qualmaj</span> <span class="o">&lt;=</span> <span class="n">maxLevel</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--&gt; Iteration </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">Limited</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">qualmaj</span> <span class="o">&lt;=</span> <span class="n">maxLevel</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">qualmaj</span> <span class="o">&lt;</span> <span class="n">gcd</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]:</span>
                        <span class="c1">## strict cut only possible if cut level qualmaj &lt; max</span>
                        <span class="n">pg</span> <span class="o">=</span> <span class="n">PolarisedDigraph</span><span class="p">(</span><span class="n">gcd</span><span class="p">,</span><span class="n">qualmaj</span><span class="p">,</span><span class="n">StrictCut</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">pg</span> <span class="o">=</span> <span class="n">PolarisedDigraph</span><span class="p">(</span><span class="n">gcd</span><span class="p">,</span><span class="n">qualmaj</span><span class="p">,</span><span class="n">StrictCut</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">qualmaj</span> <span class="o">=</span> <span class="n">qualmaj0</span>
                    <span class="c1">#if qualmaj &lt; gcd.valuationdomain[&#39;max&#39;]:</span>
                    <span class="c1">#    pg = PolarisedDigraph(gcd,qualmaj,StrictCut=True)</span>
                    <span class="c1">#else:</span>
                    <span class="c1">#    pg = PolarisedDigraph(gcd,qualmaj,StrictCut=False)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">qualmaj</span> <span class="o">&lt;</span> <span class="n">gcd</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]:</span>
                    <span class="n">pg</span> <span class="o">=</span> <span class="n">PolarisedDigraph</span><span class="p">(</span><span class="n">gcd</span><span class="p">,</span><span class="n">qualmaj</span><span class="p">,</span><span class="n">StrictCut</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pg</span> <span class="o">=</span> <span class="n">PolarisedDigraph</span><span class="p">(</span><span class="n">gcd</span><span class="p">,</span><span class="n">qualmaj</span><span class="p">,</span><span class="n">StrictCut</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
              
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Polarised determinateness = </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">pg</span><span class="o">.</span><span class="n">computeDeterminateness</span><span class="p">())</span>
            <span class="n">rkg</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">computeRankingByChoosing</span><span class="p">(</span><span class="n">CoDual</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
            <span class="n">pgr</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">computeRankingByChoosingRelation</span><span class="p">()</span>
                
            <span class="k">if</span> <span class="n">CoDual</span><span class="p">:</span>
                <span class="n">corr</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">computeOrdinalCorrelation</span><span class="p">(</span><span class="n">pgr</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">corr</span> <span class="o">=</span> <span class="n">gcdcd</span><span class="o">.</span><span class="n">computeOrdinalCorrelation</span><span class="p">(</span><span class="n">pgr</span><span class="p">)</span>
            <span class="n">rankings</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;correlation&#39;</span><span class="p">],</span><span class="n">qualmaj</span><span class="p">,</span><span class="n">rkg</span><span class="p">))</span>
            <span class="c1">#rankings.append((corr[&#39;correlation&#39;]*corr[&#39;determination&#39;],qualmaj,rkg))</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">rankings</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">CoDual</span><span class="p">:</span>
                    <span class="n">g</span><span class="o">.</span><span class="n">showRankingByChoosing</span><span class="p">(</span><span class="n">rkg</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">gcdcd</span><span class="o">.</span><span class="n">showRankingByChoosing</span><span class="p">(</span><span class="n">rkg</span><span class="p">)</span>
            <span class="n">qualmaj0</span> <span class="o">=</span> <span class="n">qualmaj</span>
            <span class="n">newLevel</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">minimalValuationLevelForCircuitsElimination</span><span class="p">(</span><span class="n">Odd</span><span class="o">=</span><span class="n">Odd</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Limited</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">newLevel</span> <span class="o">&lt;=</span> <span class="n">maxLevel</span><span class="p">:</span>
                    <span class="n">qualmaj</span> <span class="o">=</span> <span class="n">newLevel</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">qualmaj0</span> <span class="o">=</span> <span class="n">qualmaj</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">qualmaj</span> <span class="o">=</span> <span class="n">newLevel</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;i,qualmaj0,newLevel,maxLevel,qualmaj&#39;</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">qualmaj0</span><span class="p">,</span><span class="n">newLevel</span><span class="p">,</span><span class="n">maxLevel</span><span class="p">,</span><span class="n">qualmaj</span><span class="p">)</span>
            
        <span class="k">if</span> <span class="n">i</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rankingByChoosing</span> <span class="o">=</span> <span class="n">gcd</span><span class="o">.</span><span class="n">computeRankingByChoosing</span><span class="p">(</span><span class="n">CoDual</span><span class="o">=</span><span class="n">CoDual</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rankingByChoosing</span><span class="p">[</span><span class="s1">&#39;PolarizationLevel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">qualmaj</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">rankings</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rankingByChoosing</span> <span class="o">=</span> <span class="n">rankings</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rankingByChoosing</span><span class="p">[</span><span class="s1">&#39;PolarizationLevel&#39;</span><span class="p">]</span> <span class="o">=</span>  <span class="n">rankings</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
               <span class="nb">print</span><span class="p">(</span><span class="n">rankings</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">CoDual</span><span class="p">:</span>
                <span class="n">g</span><span class="o">.</span><span class="n">showRankingByChoosing</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rankingByChoosing</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">gcdcd</span><span class="o">.</span><span class="n">showRankingByChoosing</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rankingByChoosing</span><span class="p">)</span>
                
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rankingByChoosing</span>

        
    <span class="k">def</span> <span class="nf">_computePrudentBestChoiceRecommendation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">CoDual</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Limited</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the best choice recommendation after eliminating</span>
<span class="sd">        all odd chordless circuits with a minimal cut of the valuation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span> <span class="k">as</span> <span class="n">deepcopy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">optimalRankingByChoosing</span><span class="p">(</span><span class="n">CoDual</span><span class="o">=</span><span class="n">CoDual</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">,</span><span class="n">Limited</span><span class="o">=</span><span class="n">Limited</span><span class="p">)</span>
        <span class="c1">#if Comments:</span>
        <span class="c1">#    self.showRankingByChoosing()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rankingByChoosing</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rankingByChoosing</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: no ranking by choosing result !!&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

<div class="viewcode-block" id="Digraph.computePreRankingRelation">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computePreRankingRelation">[docs]</a>
    <span class="k">def</span> <span class="nf">computePreRankingRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">preRanking</span><span class="p">,</span><span class="n">Normalized</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the bipolar-valued relation obtained from</span>
<span class="sd">        a given preRanking in decreasing levels (list of lists) result.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">Normalized</span><span class="p">:</span>
            <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
            <span class="n">Med</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
            <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>   
            <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
            <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
            <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
            
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">currentActions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">preRankingRelation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">preRankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="n">preRankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>

        <span class="k">for</span> <span class="n">eqcl</span> <span class="ow">in</span> <span class="n">preRanking</span><span class="p">:</span>
            <span class="n">currRest</span> <span class="o">=</span> <span class="n">currentActions</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">eqcl</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">currentActions</span><span class="p">,</span> <span class="n">eqcl</span><span class="p">,</span> <span class="n">currRest</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">eqcl</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">eqcl</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                        <span class="n">preRankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                        <span class="n">preRankingRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>

            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">eqcl</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">currRest</span><span class="p">:</span>
                    <span class="n">preRankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                    <span class="n">preRankingRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
            <span class="n">currentActions</span> <span class="o">=</span> <span class="n">currentActions</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">eqcl</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">preRankingRelation</span></div>


<div class="viewcode-block" id="Digraph.computePreorderRelation">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computePreorderRelation">[docs]</a>
    <span class="k">def</span> <span class="nf">computePreorderRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">preorder</span><span class="p">,</span><span class="n">Normalized</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the bipolar-valued relation obtained from</span>
<span class="sd">        a given preordering in increasing levels (list of lists) result.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">Normalized</span><span class="p">:</span>
            <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
            <span class="n">Med</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
            <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>   
            <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
            <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
            <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
            
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">currentActions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">preorderRelation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">preorderRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="n">preorderRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>

        <span class="k">for</span> <span class="n">eqcl</span> <span class="ow">in</span> <span class="n">preorder</span><span class="p">:</span>
            <span class="n">currRest</span> <span class="o">=</span> <span class="n">currentActions</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">eqcl</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">currentActions</span><span class="p">,</span> <span class="n">eqcl</span><span class="p">,</span> <span class="n">currRest</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">eqcl</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">eqcl</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                        <span class="n">preorderRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                        <span class="n">preorderRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>

            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">eqcl</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">currRest</span><span class="p">:</span>
                    <span class="n">preorderRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                    <span class="n">preorderRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
            <span class="n">currentActions</span> <span class="o">=</span> <span class="n">currentActions</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">eqcl</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">preorderRelation</span></div>


<div class="viewcode-block" id="Digraph.computeRankingByChoosingRelation">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeRankingByChoosingRelation">[docs]</a>
    <span class="k">def</span> <span class="nf">computeRankingByChoosingRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">rankingByChoosing</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">actionsSubset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the bipolar-valued relation obtained from</span>
<span class="sd">        the self.rankingByChoosing result.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">digraphsTools</span> <span class="kn">import</span> <span class="n">omax</span><span class="p">,</span> <span class="n">omin</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span><span class="p">,</span> <span class="n">deepcopy</span>
        <span class="k">if</span> <span class="n">rankingByChoosing</span><span class="o">==</span><span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">rankingByChoosing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rankingByChoosing</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: first run computeRankingByChoosing(CoDual=T/F) !&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;actionsSubset,rankingByChoosing&#39;</span><span class="p">,</span><span class="n">actionsSubset</span><span class="p">,</span><span class="n">rankingByChoosing</span><span class="p">)</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">actionsSubset</span><span class="o">==</span><span class="kc">None</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">actionsSubset</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">currActions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">rankingRelation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">rankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="n">rankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
                <span class="c1">#print(x,y,rankingRelation[x][y])</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">rankingByChoosing</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">ibch</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">rankingByChoosing</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">iwch</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">rankingByChoosing</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">ribch</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">currActions</span><span class="p">)</span> <span class="o">-</span> <span class="n">ibch</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">ibch</span><span class="p">,</span><span class="n">iwch</span><span class="p">,</span><span class="n">ribch</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ibch</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ibch</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                        <span class="n">rankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">omax</span><span class="p">(</span><span class="n">Med</span><span class="p">,[</span><span class="n">rankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])])</span>
                        <span class="n">rankingRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">omax</span><span class="p">(</span><span class="n">Med</span><span class="p">,[</span><span class="n">rankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])])</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ribch</span><span class="p">:</span>
                    <span class="c1">#print(x,y)</span>
                    <span class="c1">#print(rankingRelation[x][y])</span>
                    <span class="c1">#print(relation[x][y])</span>
                    <span class="n">rankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">omax</span><span class="p">(</span><span class="n">Med</span><span class="p">,[</span><span class="n">rankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])])</span>
                    <span class="n">rankingRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">omax</span><span class="p">(</span><span class="n">Med</span><span class="p">,[</span><span class="n">rankingRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">],</span><span class="o">-</span><span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])])</span>
            <span class="n">riwch</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">currActions</span><span class="p">)</span> <span class="o">-</span> <span class="n">iwch</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">iwch</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">iwch</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                        <span class="n">rankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">omax</span><span class="p">(</span><span class="n">Med</span><span class="p">,[</span><span class="n">rankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])])</span>
                        <span class="n">rankingRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">omax</span><span class="p">(</span><span class="n">Med</span><span class="p">,[</span><span class="n">rankingRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">],</span><span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])])</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">riwch</span><span class="p">:</span>
                    <span class="n">rankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">omax</span><span class="p">(</span><span class="n">Med</span><span class="p">,[</span><span class="n">rankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])])</span>
                    <span class="n">rankingRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">omax</span><span class="p">(</span><span class="n">Med</span><span class="p">,[</span><span class="n">rankingRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">],</span><span class="o">-</span><span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])])</span>
            <span class="n">currActions</span> <span class="o">=</span> <span class="n">currActions</span> <span class="o">-</span> <span class="p">(</span><span class="n">ibch</span> <span class="o">|</span> <span class="n">iwch</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rankingRelation</span></div>


<div class="viewcode-block" id="Digraph.computeRankingByBestChoosingRelation">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeRankingByBestChoosingRelation">[docs]</a>
    <span class="k">def</span> <span class="nf">computeRankingByBestChoosingRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">rankingByBestChoosing</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the bipolar-valued relation obtained from</span>
<span class="sd">        the self.rankingByBestChoosing result.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">rankingByBestChoosing</span><span class="o">==</span><span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">rankingByBestChoosing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rankingByBestChoosing</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: first run computeRankingByBestChoosing(CoDual=T/F) !&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>

        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">currActions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">rankingRelation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">rankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="n">rankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">rankingByBestChoosing</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;rankingByBestChoosing&#39;</span><span class="p">,</span><span class="n">rankingByBestChoosing</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">ibch</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">rankingByBestChoosing</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">ribch</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">currActions</span><span class="p">)</span> <span class="o">-</span> <span class="n">ibch</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ibch,ribch&#39;</span><span class="p">,</span><span class="n">ibch</span><span class="p">,</span><span class="n">ribch</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ibch</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ibch</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                        <span class="n">rankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])]</span> <span class="p">)</span>
                        <span class="n">rankingRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])]</span> <span class="p">)</span>
<span class="c1">##                        rankingRelation[x][y] = self.omin( [rankingRelation[x][y],abs(relation[y][x])] )</span>
<span class="c1">##                        rankingRelation[y][x] = self.omin( [rankingRelation[y][x],abs(relation[x][y])] )</span>
<span class="c1">##                    if Debug and (x == &#39;a10&#39; or y == &#39;a07&#39;) :</span>
<span class="c1">##                        print(x,y,rankingRelation[x][y],relation[x][y])</span>
<span class="c1">##                        print(y,x,rankingRelation[y][x],relation[y][x])</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ribch</span><span class="p">:</span>
<span class="c1">##                    rankingRelation[x][y] = self.omin( [rankingRelation[x][y],abs(relation[y][x])] )</span>
<span class="c1">##                    rankingRelation[y][x] = self.omin( [rankingRelation[y][x],-abs(relation[x][y])] )</span>
                    <span class="n">rankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])]</span> <span class="p">)</span>
                    <span class="n">rankingRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="nb">min</span><span class="p">(</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])]</span> <span class="p">)</span>
<span class="c1">##                    if Debug and (x == &#39;a10&#39; or y == &#39;a07&#39;):</span>
<span class="c1">##                        print(&#39;+&#39;,x,y,rankingRelation[x][y],relation[x][y])</span>
<span class="c1">##                        print(&#39;-&#39;,y,x,rankingRelation[y][x],relation[y][x])</span>
            <span class="n">currActions</span> <span class="o">=</span> <span class="n">currActions</span> <span class="o">-</span> <span class="n">ibch</span>
        <span class="k">return</span> <span class="n">rankingRelation</span></div>


 
<div class="viewcode-block" id="Digraph.computeRankingByLastChoosingRelation">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeRankingByLastChoosingRelation">[docs]</a>
    <span class="k">def</span> <span class="nf">computeRankingByLastChoosingRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">rankingByLastChoosing</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the bipolar-valued relation obtained from</span>
<span class="sd">        the self.rankingByLastChoosing result.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">rankingByLastChoosing</span><span class="o">==</span><span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">rankingByLastChoosing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rankingByLastChoosing</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: first run computeRankingByLastChoosing(CoDual=T/F) !&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>

        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">currActions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">rankingRelation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">rankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="n">rankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">rankingByLastChoosing</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">iwch</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">rankingByLastChoosing</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">riwch</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">currActions</span><span class="p">)</span> <span class="o">-</span> <span class="n">iwch</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">iwch</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">iwch</span><span class="p">:</span>
<span class="c1">##                    if Debug and (x == &#39;a10&#39; and y == &#39;a08&#39;) :</span>
<span class="c1">##                        print(x,y,rankingRelation[x][y],relation[x][y])</span>
<span class="c1">##                        print(y,x,rankingRelation[x][y],relation[y][x])</span>
                    <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
<span class="c1">##                        rankingRelation[x][y] = self.omin( [rankingRelation[x][y],abs(relation[y][x])] )</span>
<span class="c1">##                        rankingRelation[y][x] = self.omin( [rankingRelation[y][x],abs(relation[x][y])] )</span>
                        <span class="n">rankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])]</span> <span class="p">)</span>
                        <span class="n">rankingRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])]</span> <span class="p">)</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">riwch</span><span class="p">:</span>
<span class="c1">##                    if Debug and (x == &#39;a10&#39; and y == &#39;a08&#39;) :</span>
<span class="c1">##                        print(x,y,rankingRelation[x][y],relation[x][y])</span>
<span class="c1">##                        print(y,x,rankingRelation[x][y],relation[y][x])</span>
<span class="c1">##                    rankingRelation[x][y] = self.omin( [rankingRelation[x][y],-abs(relation[y][x])] )</span>
<span class="c1">##                    rankingRelation[y][x] = self.omin( [rankingRelation[y][x],abs(relation[x][y])] )</span>
                    <span class="n">rankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="nb">min</span><span class="p">(</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])]</span> <span class="p">)</span>
                    <span class="n">rankingRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])]</span> <span class="p">)</span>
            <span class="n">currActions</span> <span class="o">=</span> <span class="n">currActions</span> <span class="o">-</span> <span class="n">iwch</span>
        <span class="k">return</span> <span class="n">rankingRelation</span></div>


<div class="viewcode-block" id="Digraph.showRankingByChoosing">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showRankingByChoosing">[docs]</a>
    <span class="k">def</span> <span class="nf">showRankingByChoosing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">rankingByChoosing</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">WithCoverCredibility</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A show method for self.rankinByChoosing result.</span>
<span class="sd">        </span>
<span class="sd">        When parameter *WithCoverCredibility* is set to True, the credibility of outranking, respectively being outranked is indicated at each selection step. </span>

<span class="sd">        .. warning::</span>

<span class="sd">             The self.computeRankingByChoosing(CoDual=False/True) method instantiating the self.rankingByChoosing slot is pre-required !</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">rankingByChoosing</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">rankingByChoosing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rankingByChoosing</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: You must first run self.computeRankingByChoosing(CoDual=False(default)|True) !&#39;</span><span class="p">)</span>
            <span class="c1">#rankingByChoosing = self.computeRankingByChoosing(Debug,CoDual)</span>
                <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">rankingByChoosing</span> <span class="o">=</span> <span class="n">rankingByChoosing</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Ranking by Choosing and Rejecting&#39;</span><span class="p">)</span>
        <span class="n">space</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">rankingByChoosing</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">nstr</span><span class="o">=</span><span class="s1">&#39;st&#39;</span>
            <span class="k">elif</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">nstr</span><span class="o">=</span><span class="s1">&#39;nd&#39;</span>
            <span class="k">elif</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">nstr</span><span class="o">=</span><span class="s1">&#39;rd&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">nstr</span><span class="o">=</span><span class="s1">&#39;th&#39;</span>
            <span class="n">ibch</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">rankingByChoosing</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">iwch</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">rankingByChoosing</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">iach</span> <span class="o">=</span> <span class="n">iwch</span> <span class="o">&amp;</span> <span class="n">ibch</span>
            <span class="c1">#print &#39;ibch, iwch, iach&#39;, i, ibch,iwch,iach</span>
            <span class="n">ch</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">ibch</span><span class="p">)</span>
            <span class="n">ch</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">WithCoverCredibility</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; </span><span class="si">%s%s%s</span><span class="s1"> Best Choice </span><span class="si">%s</span><span class="s1"> (</span><span class="si">%.2f</span><span class="s1">)&#39;</span> <span class="o">%</span>\
                      <span class="p">(</span><span class="n">space</span><span class="p">,</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">nstr</span><span class="p">,</span><span class="n">ch</span><span class="p">,</span><span class="n">rankingByChoosing</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; </span><span class="si">%s%s%s</span><span class="s1"> Best Choice </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">space</span><span class="p">,</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">nstr</span><span class="p">,</span><span class="n">ch</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">iach</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  </span><span class="si">%s</span><span class="s1"> Ambiguous Choice </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">space</span><span class="p">,</span><span class="nb">list</span><span class="p">(</span><span class="n">iach</span><span class="p">)))</span>
                <span class="n">space</span> <span class="o">+=</span> <span class="s1">&#39;  &#39;</span>
            <span class="n">space</span> <span class="o">+=</span> <span class="s1">&#39;  &#39;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">n</span><span class="o">-</span><span class="n">i</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">nstr</span><span class="o">=</span><span class="s1">&#39;st&#39;</span>
            <span class="k">elif</span> <span class="n">n</span><span class="o">-</span><span class="n">i</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">nstr</span><span class="o">=</span><span class="s1">&#39;nd&#39;</span>
            <span class="k">elif</span> <span class="n">n</span><span class="o">-</span><span class="n">i</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">nstr</span><span class="o">=</span><span class="s1">&#39;rd&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">nstr</span><span class="o">=</span><span class="s1">&#39;th&#39;</span>
            <span class="n">space</span> <span class="o">=</span> <span class="n">space</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">ibch</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">rankingByChoosing</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">iwch</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">rankingByChoosing</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">iach</span> <span class="o">=</span> <span class="n">iwch</span> <span class="o">&amp;</span> <span class="n">ibch</span>
            <span class="c1">#print &#39;ibch, iwch, iach&#39;, i, ibch,iwch,iach</span>
            <span class="n">ch</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">iwch</span><span class="p">)</span>
            <span class="n">ch</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">iach</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">space</span> <span class="o">=</span> <span class="n">space</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  </span><span class="si">%s</span><span class="s1"> Ambiguous Choice </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">space</span><span class="p">,</span><span class="nb">list</span><span class="p">(</span><span class="n">iach</span><span class="p">)))</span>
            <span class="k">if</span> <span class="n">WithCoverCredibility</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; </span><span class="si">%s%s%s</span><span class="s1"> Worst Choice </span><span class="si">%s</span><span class="s1"> (</span><span class="si">%.2f</span><span class="s1">)&#39;</span> <span class="o">%</span>\
                        <span class="p">(</span><span class="n">space</span><span class="p">,</span><span class="n">n</span><span class="o">-</span><span class="n">i</span><span class="p">,</span><span class="n">nstr</span><span class="p">,</span><span class="n">ch</span><span class="p">,</span><span class="n">rankingByChoosing</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; </span><span class="si">%s%s%s</span><span class="s1"> Worst Choice </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">space</span><span class="p">,</span><span class="n">n</span><span class="o">-</span><span class="n">i</span><span class="p">,</span><span class="n">nstr</span><span class="p">,</span><span class="n">ch</span><span class="p">)</span> <span class="p">)</span>                
        <span class="n">corr1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeBipolarCorrelation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">computeRankingByChoosingRelation</span><span class="p">(</span><span class="n">rankingByChoosing</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Ordinal bipolar correlation with outranking relation: tau = </span><span class="si">%+.3f</span><span class="s1"> (D = </span><span class="si">%.1f</span><span class="s1">)&#39;</span><span class="o">%</span> <span class="p">(</span><span class="n">corr1</span><span class="p">[</span><span class="s1">&#39;correlation&#39;</span><span class="p">],</span><span class="n">corr1</span><span class="p">[</span><span class="s1">&#39;determination&#39;</span><span class="p">]))</span>
        <span class="n">corr2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeBipolarCorrelation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">computeRankingByChoosingRelation</span><span class="p">(</span><span class="n">rankingByChoosing</span><span class="p">),</span><span class="n">MedianCut</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Ordinal bipolar correlation with median cut outranking relation: tau = </span><span class="si">%+.3f</span><span class="s1"> (D = </span><span class="si">%.1f</span><span class="s1">)&#39;</span><span class="o">%</span> <span class="p">(</span><span class="n">corr2</span><span class="p">[</span><span class="s1">&#39;correlation&#39;</span><span class="p">],</span><span class="n">corr2</span><span class="p">[</span><span class="s1">&#39;determination&#39;</span><span class="p">]))</span></div>


<div class="viewcode-block" id="Digraph.showRankingByLastChoosing">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showRankingByLastChoosing">[docs]</a>
    <span class="k">def</span> <span class="nf">showRankingByLastChoosing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">rankingByLastChoosing</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A show method for self.rankinByChoosing result.</span>

<span class="sd">        .. warning::</span>

<span class="sd">             The self.computeRankingByLastChoosing(CoDual=False/True) method instantiating the self.rankingByChoosing slot is pre-required !</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">rankingByLastChoosing</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">rankingByLastChoosing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rankingByLastChoosing</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: You must first run self.computeRankingByLastChoosing(CoDual=False(default)|True) !&#39;</span><span class="p">)</span>
                <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">rankingByLastChoosing</span> <span class="o">=</span> <span class="n">rankingByLastChoosing</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Ranking by recursively rejecting&#39;</span><span class="p">)</span>
        <span class="n">space</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">rankingByLastChoosing</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">nstr</span><span class="o">=</span><span class="s1">&#39;st&#39;</span>
            <span class="k">elif</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">nstr</span><span class="o">=</span><span class="s1">&#39;nd&#39;</span>
            <span class="k">elif</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">nstr</span><span class="o">=</span><span class="s1">&#39;rd&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">nstr</span><span class="o">=</span><span class="s1">&#39;th&#39;</span>
            <span class="n">iwch</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">rankingByLastChoosing</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;i, iwch&#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">iwch</span><span class="p">)</span>
            <span class="n">ch</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">iwch</span><span class="p">)</span>
            <span class="n">ch</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">nstr</span> <span class="o">==</span> <span class="s1">&#39;st&#39;</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; Last Choice </span><span class="si">%s</span><span class="s1"> (</span><span class="si">%.2f</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ch</span><span class="p">,</span><span class="n">rankingByLastChoosing</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; </span><span class="si">%s%s%s</span><span class="s1"> Last Choice </span><span class="si">%s</span><span class="s1"> (</span><span class="si">%.2f</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">space</span><span class="p">,</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">nstr</span><span class="p">,</span><span class="n">ch</span><span class="p">,</span><span class="n">rankingByLastChoosing</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
            <span class="n">space</span> <span class="o">+=</span> <span class="s1">&#39;  &#39;</span></div>


    
<div class="viewcode-block" id="Digraph.showRankingByBestChoosing">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showRankingByBestChoosing">[docs]</a>
    <span class="k">def</span> <span class="nf">showRankingByBestChoosing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">rankingByBestChoosing</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A show method for self.rankinByBestChoosing result.</span>

<span class="sd">        .. warning::</span>

<span class="sd">             The self.computeRankingByBestChoosing(CoDual=False/True) method instantiating the self.rankingByBestChoosing slot is pre-required !</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">rankingByBestChoosing</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">rankingByBestChoosing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rankingByBestChoosing</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: You must first run self.computeRankingByBestChoosing(CoDual=False(default)|True) !&#39;</span><span class="p">)</span>
                <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">rankingByBestChoosing</span> <span class="o">=</span> <span class="n">rankingByBestChoosing</span><span class="p">[</span><span class="s1">&#39;result&#39;</span><span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Ranking by recursively best-choosing&#39;</span><span class="p">)</span>
        <span class="n">space</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">rankingByBestChoosing</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">nstr</span><span class="o">=</span><span class="s1">&#39;st&#39;</span>
            <span class="k">elif</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">nstr</span><span class="o">=</span><span class="s1">&#39;nd&#39;</span>
            <span class="k">elif</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">nstr</span><span class="o">=</span><span class="s1">&#39;rd&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">nstr</span><span class="o">=</span><span class="s1">&#39;th&#39;</span>
            <span class="n">ibch</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">rankingByBestChoosing</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">ch</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">ibch</span><span class="p">)</span>
            <span class="n">ch</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; </span><span class="si">%s%s%s</span><span class="s1"> Best Choice </span><span class="si">%s</span><span class="s1"> (</span><span class="si">%.2f</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">space</span><span class="p">,</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">nstr</span><span class="p">,</span><span class="n">ch</span><span class="p">,</span><span class="n">rankingByBestChoosing</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
            <span class="n">space</span> <span class="o">+=</span> <span class="s1">&#39;  &#39;</span></div>


<div class="viewcode-block" id="Digraph.computeValuationStatistics">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeValuationStatistics">[docs]</a>
    <span class="k">def</span> <span class="nf">computeValuationStatistics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Sampling</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the mean and variance of the valuation</span>
<span class="sd">        of the non reflexive pairs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span>
        <span class="n">mean</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="n">squares</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="c1">#actions = self.actions</span>
        <span class="c1">#n = len(self.actions)</span>
        
        <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span>
        <span class="n">n2</span> <span class="o">=</span> <span class="n">n</span> <span class="o">*</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">n2d</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n2</span><span class="p">))</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">rx</span> <span class="ow">in</span> <span class="n">relation</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">y</span><span class="p">,</span><span class="n">rxy</span> <span class="ow">in</span> <span class="n">rx</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="n">mean</span> <span class="o">+=</span> <span class="n">rxy</span>
                    <span class="n">squares</span> <span class="o">+=</span> <span class="n">rxy</span><span class="o">*</span><span class="n">rxy</span>
        <span class="n">mean</span> <span class="o">=</span> <span class="n">mean</span> <span class="o">/</span> <span class="n">n2d</span>
        <span class="k">if</span> <span class="n">Sampling</span><span class="p">:</span>
            <span class="n">var</span> <span class="o">=</span> <span class="p">(</span> <span class="n">squares</span> <span class="o">/</span> <span class="p">(</span><span class="n">n2d</span><span class="o">-</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">))</span> <span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">mean</span> <span class="o">*</span> <span class="n">mean</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">var</span> <span class="o">=</span> <span class="n">squares</span> <span class="o">/</span> <span class="n">n2d</span> <span class="o">-</span> <span class="p">(</span><span class="n">mean</span> <span class="o">*</span> <span class="n">mean</span><span class="p">)</span>
        <span class="n">stdDev</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;mean: </span><span class="si">%.5f</span><span class="s1">, std. dev.: </span><span class="si">%.5f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">mean</span><span class="p">,</span><span class="n">stdDev</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">mean</span><span class="p">,</span><span class="n">stdDev</span></div>


<div class="viewcode-block" id="Digraph.computeRankingCorrelation">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeRankingCorrelation">[docs]</a>
    <span class="k">def</span> <span class="nf">computeRankingCorrelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ranking</span><span class="p">,</span> <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the ordinal correlation K of a digraph instance</span>
<span class="sd">        when compared with a given linear ranking of its actions</span>
<span class="sd">        </span>
<span class="sd">        K = sum_{x != y} [ min( max(-self.relation(x,y)),other.relation(x,y), max(self.relation(x,y),-other.relation(x,y)) ]</span>

<span class="sd">        K /= sum_{x!=y} [ min(abs(self.relation(x,y),abs(other.relation(x,y)) ]</span>

<span class="sd">        .. note::</span>

<span class="sd">             Renders a tuple with at position 0 the actual bipolar correlation index</span>
<span class="sd">             and in position 1 the minimal determination level D of self and</span>
<span class="sd">             the other relation.</span>

<span class="sd">             D = sum_{x != y} min(abs(self.relation(x,y)),abs(other.relation(x,y)) / n(n-1)</span>

<span class="sd">             where n is the number of actions considered.</span>

<span class="sd">             The correlation index with a completely indeterminate relation</span>
<span class="sd">             is by convention 0.0 at determination level 0.0 .</span>

<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">selfMax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">selfMax</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: self&#39;s valuationdomain  must be normalized !&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ranking</span><span class="p">)</span>
        <span class="n">corrSum</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">determSum</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">ranking</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">ranking</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="c1"># x &gt; y</span>
                <span class="n">selfRelation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>
                <span class="n">otherRelation</span> <span class="o">=</span> <span class="n">selfMax</span>
                <span class="n">corr</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span> <span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="n">selfRelation</span><span class="p">,</span><span class="n">otherRelation</span><span class="p">),</span>\
                            <span class="nb">max</span><span class="p">(</span><span class="n">selfRelation</span><span class="p">,</span><span class="o">-</span><span class="n">otherRelation</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">corrSum</span> <span class="o">+=</span> <span class="n">corr</span>
                <span class="n">determ</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span> <span class="nb">abs</span><span class="p">(</span><span class="n">selfRelation</span><span class="p">),</span><span class="nb">abs</span><span class="p">(</span><span class="n">otherRelation</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">determSum</span> <span class="o">+=</span> <span class="n">determ</span>
                <span class="c1"># y &lt; x</span>
                <span class="n">selfRelation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span>
                <span class="n">otherRelation</span> <span class="o">=</span> <span class="o">-</span><span class="n">selfMax</span>
                <span class="n">corr</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span> <span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="n">selfRelation</span><span class="p">,</span><span class="n">otherRelation</span><span class="p">),</span>\
                            <span class="nb">max</span><span class="p">(</span><span class="n">selfRelation</span><span class="p">,</span><span class="o">-</span><span class="n">otherRelation</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">corrSum</span> <span class="o">+=</span> <span class="n">corr</span>
                <span class="n">determ</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span> <span class="nb">abs</span><span class="p">(</span><span class="n">selfRelation</span><span class="p">),</span><span class="nb">abs</span><span class="p">(</span><span class="n">otherRelation</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">determSum</span> <span class="o">+=</span> <span class="n">determ</span>

        <span class="k">if</span> <span class="n">determSum</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">correlation</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">corrSum</span><span class="p">)</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">determSum</span><span class="p">)</span>
            <span class="n">n2</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span>
            <span class="n">determination</span> <span class="o">=</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">determSum</span><span class="p">)</span> <span class="o">/</span> <span class="n">n2</span><span class="p">)</span>
            <span class="n">determination</span> <span class="o">/=</span> <span class="nb">float</span><span class="p">(</span><span class="n">selfMax</span><span class="p">)</span>
            
            <span class="k">return</span> <span class="p">{</span> <span class="s1">&#39;correlation&#39;</span><span class="p">:</span> <span class="n">correlation</span><span class="p">,</span>
                     <span class="s1">&#39;determination&#39;</span><span class="p">:</span> <span class="n">determination</span> <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span> <span class="s1">&#39;correlation&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                     <span class="s1">&#39;determination&#39;</span><span class="p">:</span> <span class="mf">0.0</span> <span class="p">}</span></div>


<div class="viewcode-block" id="Digraph.computeOrderCorrelation">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeOrderCorrelation">[docs]</a>
    <span class="k">def</span> <span class="nf">computeOrderCorrelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the ordinal correlation K of a digraph instance</span>
<span class="sd">        when compared with a given linear order (from worst to best) of its actions</span>
<span class="sd">        </span>
<span class="sd">        K = sum_{x != y} [ min( max(-self.relation(x,y)),other.relation(x,y), max(self.relation(x,y),-other.relation(x,y)) ]</span>

<span class="sd">        K /= sum_{x!=y} [ min(abs(self.relation(x,y),abs(other.relation(x,y)) ]</span>

<span class="sd">        .. note::</span>

<span class="sd">             Renders a dictionary with the key &#39;correlation&#39; containing the actual bipolar correlation index and the key &#39;determination&#39; containing the minimal determination level D of self and the other relation.</span>

<span class="sd">             D = sum_{x != y} min(abs(self.relation(x,y)),abs(other.relation(x,y)) / n(n-1)</span>

<span class="sd">             where n is the number of actions considered.</span>

<span class="sd">             The correlation index with a completely indeterminate relation</span>
<span class="sd">             is by convention 0.0 at determination level 0.0 .</span>

<span class="sd">        .. warning::</span>

<span class="sd">             self must be a normalized outranking digraph instance !</span>

<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">selfMax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">selfMax</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: self&#39;s valuationdomain  must be normalized !&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
        <span class="n">corrSum</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="n">determSum</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">order</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">order</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="c1"># x &lt; y</span>
                <span class="n">selfRelation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>
                <span class="n">otherRelation</span> <span class="o">=</span> <span class="o">-</span><span class="n">selfMax</span>
                <span class="n">corr</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span> <span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="n">selfRelation</span><span class="p">,</span><span class="n">otherRelation</span><span class="p">),</span>
                            <span class="nb">max</span><span class="p">(</span><span class="n">selfRelation</span><span class="p">,</span><span class="o">-</span><span class="n">otherRelation</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">corrSum</span> <span class="o">+=</span> <span class="n">corr</span>
                <span class="n">determ</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span> <span class="nb">abs</span><span class="p">(</span><span class="n">selfRelation</span><span class="p">),</span><span class="nb">abs</span><span class="p">(</span><span class="n">otherRelation</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">determSum</span> <span class="o">+=</span> <span class="n">determ</span>
                <span class="c1"># y &gt; x</span>
                <span class="n">selfRelation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span>
                <span class="n">otherRelation</span> <span class="o">=</span> <span class="n">selfMax</span>
                <span class="n">corr</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span> <span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="n">selfRelation</span><span class="p">,</span><span class="n">otherRelation</span><span class="p">),</span>
                            <span class="nb">max</span><span class="p">(</span><span class="n">selfRelation</span><span class="p">,</span><span class="o">-</span><span class="n">otherRelation</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">corrSum</span> <span class="o">+=</span> <span class="n">corr</span>
                <span class="n">determ</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span> <span class="nb">abs</span><span class="p">(</span><span class="n">selfRelation</span><span class="p">),</span><span class="nb">abs</span><span class="p">(</span><span class="n">otherRelation</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">determSum</span> <span class="o">+=</span> <span class="n">determ</span>

        <span class="k">if</span> <span class="n">determSum</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">correlation</span> <span class="o">=</span> <span class="n">corrSum</span> <span class="o">/</span> <span class="n">determSum</span>
            <span class="n">n2</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span>
            <span class="n">determination</span> <span class="o">=</span> <span class="n">determSum</span> <span class="o">/</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n2</span><span class="p">))</span>
            <span class="n">determination</span> <span class="o">/=</span> <span class="n">selfMax</span>
            
            <span class="k">return</span> <span class="p">{</span> <span class="s1">&#39;correlation&#39;</span><span class="p">:</span> <span class="n">correlation</span><span class="p">,</span>
                     <span class="s1">&#39;determination&#39;</span><span class="p">:</span> <span class="n">determination</span> <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span> <span class="s1">&#39;correlation&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                     <span class="s1">&#39;determination&#39;</span><span class="p">:</span> <span class="mf">0.0</span> <span class="p">}</span></div>



<div class="viewcode-block" id="Digraph.computeOrdinalCorrelationMP">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeOrdinalCorrelationMP">[docs]</a>
    <span class="k">def</span> <span class="nf">computeOrdinalCorrelationMP</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">MedianCut</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                    <span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">nbrOfCPUs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                    <span class="n">startMethod</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                    <span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Multi processing version of the digraphs.computeOrdinalCorrelation() method.</span>
<span class="sd">        </span>
<span class="sd">        .. note::</span>
<span class="sd">             The relation filtering and the MedinaCut option are not implemented in the MP version.</span>
<span class="sd">             </span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">cpu_count</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span><span class="p">,</span><span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">product</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span> <span class="ow">or</span>\
           <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: the digraph instance self must be normalized - self.recodeValuation(-1,1) -first !&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">g</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">order</span>
        <span class="n">n2</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span><span class="o">*</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,(</span><span class="nb">dict</span><span class="p">)):</span>
            <span class="c1">#if Debug:</span>
            <span class="c1">#    print(&#39;inputting a Digraph instance&#39;)</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span> <span class="ow">or</span>\
               <span class="n">other</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: the digraph instance other must be normalized - other.recodeValuation(-1,1) -first !&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="n">otherRelation</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">relation</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">otherRelation</span> <span class="o">=</span> <span class="n">other</span>
        <span class="c1">#if Debug:</span>
        <span class="c1">#    print(otherRelation)</span>
            
        <span class="n">correlation</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="n">determination</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Threading</span> <span class="ow">and</span> <span class="n">cpu_count</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">pickle</span> <span class="kn">import</span> <span class="n">Pickler</span><span class="p">,</span><span class="n">dumps</span><span class="p">,</span> <span class="n">loads</span><span class="p">,</span> <span class="n">load</span>
            <span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>
            <span class="c1">#from multiprocessing import Process, Lock,\</span>
            <span class="c1">#                            active_children, cpu_count</span>
            <span class="kn">import</span> <span class="nn">multiprocessing</span> <span class="k">as</span> <span class="nn">mp</span>
            <span class="k">if</span> <span class="n">startMethod</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">startMethod</span> <span class="o">=</span> <span class="s1">&#39;spawn&#39;</span>
            <span class="n">mpctx</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">get_context</span><span class="p">(</span><span class="n">startMethod</span><span class="p">)</span>
            <span class="n">Process</span> <span class="o">=</span> <span class="n">mpctx</span><span class="o">.</span><span class="n">Process</span>
            <span class="n">active_children</span> <span class="o">=</span> <span class="n">mpctx</span><span class="o">.</span><span class="n">active_children</span>
            <span class="n">cpu_count</span> <span class="o">=</span> <span class="n">mpctx</span><span class="o">.</span><span class="n">cpu_count</span>
            <span class="c1"># class myThread(Process):</span>
            <span class="c1">#     def __init__(self, threadID,TempDirName,Debug):</span>
            <span class="c1">#         Process.__init__(self)</span>
            <span class="c1">#         self.threadID = threadID</span>
            <span class="c1">#         self.workingDirectory = tempDirName</span>
            <span class="c1">#         self.Debug = Debug</span>
            <span class="c1">#     def run(self):</span>
            <span class="c1">#         from pickle import dumps, loads</span>
            <span class="c1">#         from os import chdir</span>
            <span class="c1">#         from decimal import Decimal</span>
            <span class="c1">#         chdir(self.workingDirectory)</span>
            <span class="c1">#         #Debug=False</span>
            <span class="c1">#         #if Debug:</span>
            <span class="c1">#         #    print(&quot;Starting working in %s on %s&quot; % (self.workingDirectory, self.name))</span>
            <span class="c1">#         fi = open(&#39;dumpActions.py&#39;,&#39;rb&#39;)</span>
            <span class="c1">#         actionsList = loads(fi.read())</span>
            <span class="c1">#         fi.close()</span>
            <span class="c1">#         #if Debug:</span>
            <span class="c1">#         #    print(self.threadID,actionsList)</span>
            <span class="c1">#         fi = open(&#39;dumpRelation.py&#39;,&#39;rb&#39;)</span>
            <span class="c1">#         relation = loads(fi.read())</span>
            <span class="c1">#         fi.close()</span>
            <span class="c1">#         #if Debug:</span>
            <span class="c1">#         #    print(self.threadID,relation)</span>
            <span class="c1">#         fi = open(&#39;dumpOtherRelation.py&#39;,&#39;rb&#39;)</span>
            <span class="c1">#         otherRelation = loads(fi.read())</span>
            <span class="c1">#         fi.close()</span>
            <span class="c1">#         #if Debug:</span>
            <span class="c1">#         #    print(self.threadID,relation)</span>
            <span class="c1">#         fiName = &#39;splitActions-&#39;+str(self.threadID)+&#39;.py&#39;</span>
            <span class="c1">#         fi = open(fiName,&#39;rb&#39;)</span>
            <span class="c1">#         splitActions = loads(fi.read())</span>
            <span class="c1">#         fi.close()</span>
            <span class="c1">#         #if Debug:</span>
            <span class="c1">#         #    print(self.threadID,splitActions)</span>
            <span class="c1">#         # compute partial correlation</span>
            <span class="c1">#         correlation = Decimal(&#39;0&#39;)</span>
            <span class="c1">#         determination = Decimal(&#39;0&#39;)</span>
            <span class="c1">#         for x in splitActions:</span>
            <span class="c1">#             grx = g.relation[x]</span>
            <span class="c1">#             orx = otherRelation[x]</span>
            <span class="c1">#             for y in actionsList:</span>
            <span class="c1">#                 if x != y:</span>
            <span class="c1">#                     correlation += min( max(-grx[y],orx[y]),\</span>
            <span class="c1">#                                 max(grx[y],-orx[y]) )</span>
            <span class="c1">#                     determination += min( abs(grx[y]),\</span>
            <span class="c1">#                                           abs(orx[y]) )</span>
            <span class="c1">#                     #if Debug:</span>
            <span class="c1">#                     #    print(x,y,g.relation[x][y],otherRelation[x][y],correlation,determination)</span>
            <span class="c1">#         splitCorrelation = {&#39;correlation&#39;: correlation,</span>
            <span class="c1">#                             &#39;determination&#39;: determination}</span>
            <span class="c1">#         # write partial correlation relation </span>
            <span class="c1">#         foName = &#39;splitCorrelation-&#39;+str(self.threadID)+&#39;.py&#39;</span>
            <span class="c1">#         fo = open(foName,&#39;wb&#39;)</span>
            <span class="c1">#         fo.write(dumps(splitCorrelation,-1))</span>
            <span class="c1">#         fo.close()</span>

            <span class="c1"># pre-threading operations</span>
            <span class="k">if</span> <span class="n">nbrOfCPUs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">nbrOfCPUs</span> <span class="o">=</span> <span class="n">cpu_count</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Nbr of cpus = &#39;</span><span class="p">,</span><span class="n">nbrOfCPUs</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Starting correlation computation with </span><span class="si">%d</span><span class="s1"> threads ...&#39;</span> <span class="o">%</span> <span class="n">nbrOfCPUs</span><span class="p">)</span>
            <span class="kn">from</span> <span class="nn">tempfile</span> <span class="kn">import</span> <span class="n">TemporaryDirectory</span>
            <span class="c1">#with TemporaryDirectory() as tempDirName:</span>
            <span class="n">tempDir</span> <span class="o">=</span> <span class="n">TemporaryDirectory</span><span class="p">()</span>
            <span class="n">tempDirName</span> <span class="o">=</span> <span class="n">tempDir</span><span class="o">.</span><span class="n">name</span>
            <span class="n">selfFileName</span> <span class="o">=</span> <span class="n">tempDirName</span> <span class="o">+</span><span class="s1">&#39;/dumpActions.py&#39;</span>
            <span class="c1">#if Debug:</span>
            <span class="c1">#    print(&#39;temDirName, selfFileName&#39;, tempDirName,selfFileName)</span>
            <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">selfFileName</span><span class="p">,</span><span class="s1">&#39;wb&#39;</span><span class="p">)</span>
            <span class="n">pd</span> <span class="o">=</span> <span class="n">dumps</span><span class="p">(</span><span class="n">actionsList</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pd</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">selfFileName</span> <span class="o">=</span> <span class="n">tempDirName</span> <span class="o">+</span><span class="s1">&#39;/dumpRelation.py&#39;</span>
            <span class="c1">#if Debug:</span>
            <span class="c1">#    print(&#39;temDirName, selfFileName&#39;, tempDirName,selfFileName)</span>
            <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">selfFileName</span><span class="p">,</span><span class="s1">&#39;wb&#39;</span><span class="p">)</span>
            <span class="n">pd</span> <span class="o">=</span> <span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pd</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">selfFileName</span> <span class="o">=</span> <span class="n">tempDirName</span> <span class="o">+</span><span class="s1">&#39;/dumpOtherRelation.py&#39;</span>
            <span class="c1">#if Debug:</span>
            <span class="c1">#    print(&#39;temDirName, selfFileName&#39;, tempDirName,selfFileName)</span>
            <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">selfFileName</span><span class="p">,</span><span class="s1">&#39;wb&#39;</span><span class="p">)</span>
            <span class="n">pd</span> <span class="o">=</span> <span class="n">dumps</span><span class="p">(</span><span class="n">otherRelation</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pd</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

            
            <span class="n">nit</span> <span class="o">=</span> <span class="n">n</span><span class="o">//</span><span class="n">nbrOfCPUs</span>
            <span class="n">nbrOfJobs</span> <span class="o">=</span> <span class="n">nbrOfCPUs</span>
            <span class="k">if</span> <span class="n">nit</span><span class="o">*</span><span class="n">nbrOfCPUs</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
                <span class="n">nit</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">while</span> <span class="n">nit</span><span class="o">*</span><span class="p">(</span><span class="n">nbrOfJobs</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">n</span><span class="p">:</span>
                <span class="n">nbrOfJobs</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;nbr of actions to split&#39;</span><span class="p">,</span><span class="n">n</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;nbr of jobs = &#39;</span><span class="p">,</span><span class="n">nbrOfJobs</span><span class="p">)</span>    
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;nbr of splitActions = &#39;</span><span class="p">,</span><span class="n">nit</span><span class="p">)</span>

            <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">actions2Split</span> <span class="o">=</span> <span class="n">actionsList</span>
            <span class="n">actionsRemain</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">actions2Split</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">jb</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nbrOfJobs</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Thread = </span><span class="si">%d</span><span class="s1">/</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">jb</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">nbrOfJobs</span><span class="p">),</span><span class="n">end</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
                <span class="n">splitActions</span><span class="o">=</span><span class="p">[]</span>
                <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nit</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">jb</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">nbrOfJobs</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
                        <span class="n">splitActions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">actions2Split</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">splitActions</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">actionsRemain</span><span class="p">)</span>
                    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="c1">#if Debug:</span>
                <span class="c1">#    print(len(splitActions))</span>
                <span class="c1">#    print(splitActions)</span>
                <span class="n">actionsRemain</span> <span class="o">=</span> <span class="n">actionsRemain</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">splitActions</span><span class="p">)</span>
                <span class="c1">#if Debug:</span>
                <span class="c1">#    print(actionsRemain)</span>
                <span class="n">foName</span> <span class="o">=</span> <span class="n">tempDirName</span><span class="o">+</span><span class="s1">&#39;/splitActions-&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">jb</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.py&#39;</span>
                <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">foName</span><span class="p">,</span><span class="s1">&#39;wb&#39;</span><span class="p">)</span>
                <span class="n">spa</span> <span class="o">=</span> <span class="n">dumps</span><span class="p">(</span><span class="n">splitActions</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">spa</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                <span class="n">splitThread</span> <span class="o">=</span> <span class="n">_myThread2</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">jb</span><span class="p">,</span><span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">tempDirName</span><span class="p">,</span><span class="n">Debug</span><span class="p">))</span>
                <span class="n">splitThread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

            <span class="k">while</span> <span class="n">active_children</span><span class="p">()</span> <span class="o">!=</span> <span class="p">[]:</span>
                <span class="k">pass</span>

            <span class="c1"># post threading operations</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>    
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Exiting computing threads&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">jb</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nbrOfJobs</span><span class="p">):</span>
                <span class="c1">#if Debug:</span>
                <span class="c1">#    print(&#39;Post job-%d/%d processing&#39; % (jb+1,nbrOfJobs))</span>
                <span class="c1">#    print(&#39;job&#39;,jb)</span>
                <span class="n">fiName</span> <span class="o">=</span> <span class="n">tempDirName</span><span class="o">+</span><span class="s1">&#39;/splitCorrelation-&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">jb</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.py&#39;</span>
                <span class="n">fi</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fiName</span><span class="p">,</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span>
                <span class="n">splitCorrelation</span> <span class="o">=</span> <span class="n">loads</span><span class="p">(</span><span class="n">fi</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
                <span class="c1">#if Debug:</span>
                <span class="c1">#    print(&#39;splitCorrelation&#39;,splitCorrelation)</span>
                <span class="n">fi</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                <span class="n">correlation</span> <span class="o">+=</span> <span class="n">splitCorrelation</span><span class="p">[</span><span class="s1">&#39;correlation&#39;</span><span class="p">]</span>
                <span class="n">determination</span> <span class="o">+=</span> <span class="n">splitCorrelation</span><span class="p">[</span><span class="s1">&#39;determination&#39;</span><span class="p">]</span>          
                                            
        <span class="k">else</span><span class="p">:</span> <span class="c1">#  no Threading</span>
            
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No threading !&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="n">grx</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
                <span class="n">orx</span> <span class="o">=</span> <span class="n">otherRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">actions</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                        <span class="n">corr</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span> <span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="n">grx</span><span class="p">[</span><span class="n">y</span><span class="p">],</span><span class="n">orx</span><span class="p">[</span><span class="n">y</span><span class="p">]),</span>\
                                    <span class="nb">max</span><span class="p">(</span><span class="n">grx</span><span class="p">[</span><span class="n">y</span><span class="p">],</span><span class="o">-</span><span class="n">orx</span><span class="p">[</span><span class="n">y</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">correlation</span> <span class="o">+=</span> <span class="n">corr</span>
                        <span class="n">determination</span> <span class="o">+=</span> <span class="nb">min</span><span class="p">(</span> <span class="nb">abs</span><span class="p">(</span><span class="n">grx</span><span class="p">[</span><span class="n">y</span><span class="p">]),</span>\
                                              <span class="nb">abs</span><span class="p">(</span><span class="n">orx</span><span class="p">[</span><span class="n">y</span><span class="p">])</span> <span class="p">)</span>
                        <span class="c1">#if Debug:</span>
                        <span class="c1">#    print(x,y,g.relation[x][y],otherRelation[x][y],correlation,determination)</span>
        
                        
        <span class="k">if</span> <span class="n">determination</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
            <span class="n">correlation</span> <span class="o">/=</span> <span class="n">determination</span>
            <span class="k">return</span> <span class="p">{</span> <span class="s1">&#39;correlation&#39;</span><span class="p">:</span> <span class="n">correlation</span><span class="p">,</span>
                     <span class="s1">&#39;determination&#39;</span><span class="p">:</span> <span class="n">determination</span> <span class="o">/</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n2</span><span class="p">))</span> <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;correlation&#39;</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">),</span>
                    <span class="s1">&#39;determination&#39;</span><span class="p">:</span> <span class="n">determination</span><span class="p">}</span></div>

        
<div class="viewcode-block" id="Digraph.computeOrdinalCorrelation">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeOrdinalCorrelation">[docs]</a>
    <span class="k">def</span> <span class="nf">computeOrdinalCorrelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">MedianCut</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">filterRelation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the bipolar correlation K of a</span>
<span class="sd">        self.relation when compared</span>
<span class="sd">        with a given compatible (same actions set)) digraph or</span>
<span class="sd">        a [-1,1] valued compatible relation (same actions set).</span>

<span class="sd">        If MedianCut=True, the correlation is computed on the median polarized relations.</span>

<span class="sd">        If filterRelation is not None, the correlation is computed on the partial domain corresponding to the determined part of the filter relation.</span>

<span class="sd">        .. warning::</span>

<span class="sd">             Notice that the &#39;other&#39; relation and/or the &#39;filterRelation&#39;,</span>
<span class="sd">             the case given, must both be normalized, ie [-1,1]-valued !</span>
<span class="sd">        </span>
<span class="sd">        K = sum_{x != y} [ min( max(-self.relation[x][y]),other.relation[x][y]), max(self.relation[x][y],-other.relation[x][y]) ]</span>

<span class="sd">        K /= sum_{x!=y} [ min(abs(self.relation[x][y]),abs(other.relation[x][y])) ]</span>

<span class="sd">        .. note::</span>

<span class="sd">             Renders a tuple with at position 0 the actual bipolar correlation index</span>
<span class="sd">             and in position 1 the minimal determination level D of self and</span>
<span class="sd">             the other relation.</span>

<span class="sd">             D = sum_{x != y} min(abs(self.relation[x][y]),abs(other.relation[x][y])) / n(n-1)</span>

<span class="sd">             where n is the number of actions considered.</span>

<span class="sd">             The correlation index with a completely indeterminate relation</span>
<span class="sd">             is by convention 0.0 at determination level 0.0 .</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span><span class="p">,</span><span class="n">deepcopy</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="n">MedianCut</span><span class="p">:</span>
            <span class="n">g</span> <span class="o">=</span> <span class="n">PolarisedDigraph</span><span class="p">(</span><span class="n">g</span><span class="p">,</span><span class="n">level</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">),</span><span class="n">KeepValues</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">StrictCut</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,(</span><span class="nb">dict</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;inputting a Digraph instance&#39;</span><span class="p">)</span>
            <span class="n">otherg</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
            <span class="n">otherg</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">MedianCut</span><span class="p">:</span>
                <span class="n">otherg</span> <span class="o">=</span> <span class="n">PolarisedDigraph</span><span class="p">(</span><span class="n">otherg</span><span class="p">,</span><span class="n">level</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">),</span><span class="n">KeepValues</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">StrictCut</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">otherRelation</span> <span class="o">=</span> <span class="n">otherg</span><span class="o">.</span><span class="n">relation</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">otherRelation</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
            
            <span class="k">if</span> <span class="n">MedianCut</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                    <span class="n">rx</span> <span class="o">=</span> <span class="n">otherRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">:</span>
                            <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                                <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                            <span class="k">elif</span> <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                                <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>

        <span class="n">correlation</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="n">determination</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">filterRelation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
            <span class="n">n2</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span><span class="o">*</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="n">grx</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
                <span class="n">orx</span> <span class="o">=</span> <span class="n">otherRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                        <span class="n">corr</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span> <span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="n">grx</span><span class="p">[</span><span class="n">y</span><span class="p">],</span><span class="n">orx</span><span class="p">[</span><span class="n">y</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span><span class="n">grx</span><span class="p">[</span><span class="n">y</span><span class="p">],</span><span class="o">-</span><span class="n">orx</span><span class="p">[</span><span class="n">y</span><span class="p">])</span> <span class="p">)</span>
                        <span class="n">correlation</span> <span class="o">+=</span> <span class="n">corr</span>
                        <span class="n">determination</span> <span class="o">+=</span> <span class="nb">min</span><span class="p">(</span> <span class="nb">abs</span><span class="p">(</span><span class="n">grx</span><span class="p">[</span><span class="n">y</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">orx</span><span class="p">[</span><span class="n">y</span><span class="p">])</span> <span class="p">)</span>
                        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">grx</span><span class="p">[</span><span class="n">y</span><span class="p">],</span><span class="n">orx</span><span class="p">[</span><span class="n">y</span><span class="p">],</span><span class="n">correlation</span><span class="p">,</span><span class="n">determination</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
            <span class="n">n2</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span><span class="o">*</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">filterRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Med</span><span class="p">:</span>
                            <span class="n">corr</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span> <span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="n">g</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="n">otherRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="o">-</span><span class="n">otherRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span> <span class="p">)</span>
                            <span class="n">correlation</span> <span class="o">+=</span> <span class="n">corr</span>
                            <span class="n">determination</span> <span class="o">+=</span> <span class="nb">min</span><span class="p">(</span> <span class="nb">abs</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]),</span><span class="nb">abs</span><span class="p">(</span><span class="n">otherRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span> <span class="p">)</span>
                            <span class="c1">#determination += abs(corr)</span>
                            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">g</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="n">otherRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="n">filterRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="n">correlation</span><span class="p">,</span><span class="n">determination</span><span class="p">)</span>
                        
        <span class="k">if</span> <span class="n">determination</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">):</span>
            <span class="n">correlation</span> <span class="o">/=</span> <span class="n">determination</span>
            <span class="k">return</span> <span class="p">{</span> <span class="s1">&#39;MedianCut&#39;</span><span class="p">:</span><span class="n">MedianCut</span><span class="p">,</span> <span class="s1">&#39;correlation&#39;</span><span class="p">:</span> <span class="n">correlation</span><span class="p">,</span>
                     <span class="s1">&#39;determination&#39;</span><span class="p">:</span> <span class="n">determination</span> <span class="o">/</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n2</span><span class="p">))</span> <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;MedianCut&#39;</span><span class="p">:</span><span class="n">MedianCut</span><span class="p">,</span> <span class="s1">&#39;correlation&#39;</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">),</span>
                    <span class="s1">&#39;determination&#39;</span><span class="p">:</span> <span class="n">determination</span><span class="p">}</span></div>


<div class="viewcode-block" id="Digraph.computeBipolarCorrelation">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeBipolarCorrelation">[docs]</a>
    <span class="k">def</span> <span class="nf">computeBipolarCorrelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">MedianCut</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                  <span class="n">filterRelation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        obsolete: dummy replacement for Digraph.computeOrdinalCorrelation method</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeOrdinalCorrelation</span><span class="p">(</span><span class="n">other</span><span class="o">=</span> <span class="n">other</span><span class="p">,</span><span class="n">MedianCut</span><span class="o">=</span><span class="n">MedianCut</span><span class="p">,</span>
                                   <span class="n">filterRelation</span><span class="o">=</span><span class="n">filterRelation</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span></div>


<div class="viewcode-block" id="Digraph.showCorrelation">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showCorrelation">[docs]</a>
    <span class="k">def</span> <span class="nf">showCorrelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">corr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">ndigits</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the valued ordinal correlation index, the crisp Kendall tau index and their epistemic determination degree.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">corr</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Correlation indexes:&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span> <span class="p">(</span><span class="s1">&#39; Crisp ordinal correlation  : </span><span class="si">%%</span><span class="s1">+.</span><span class="si">%d</span><span class="s1">f&#39;</span> <span class="o">%</span> <span class="n">ndigits</span><span class="p">)</span> <span class="o">%</span> <span class="n">corr</span><span class="p">[</span><span class="s1">&#39;correlation&#39;</span><span class="p">])</span>
            <span class="nb">print</span><span class="p">(</span> <span class="p">(</span><span class="s1">&#39; Epistemic determination    :  </span><span class="si">%%</span><span class="s1">.</span><span class="si">%d</span><span class="s1">f&#39;</span> <span class="o">%</span> <span class="n">ndigits</span><span class="p">)</span> <span class="o">%</span> <span class="n">corr</span><span class="p">[</span><span class="s1">&#39;determination&#39;</span><span class="p">])</span>
            <span class="nb">print</span><span class="p">(</span> <span class="p">(</span><span class="s1">&#39; Bipolar-valued equivalence : </span><span class="si">%%</span><span class="s1">+.</span><span class="si">%d</span><span class="s1">f&#39;</span> <span class="o">%</span> <span class="n">ndigits</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;correlation&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;determination&#39;</span><span class="p">])</span> <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: a computed correlation result is required !!!&#39;</span><span class="p">)</span>  </div>


<div class="viewcode-block" id="Digraph.computeKemenyIndex">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeKemenyIndex">[docs]</a>
    <span class="k">def</span> <span class="nf">computeKemenyIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">otherRelation</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders the Kemeny index of the self.relation</span>
<span class="sd">        compared with a given crisp valued relation of a compatible</span>
<span class="sd">        other digraph (same nodes or actions).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">KemenyIndex</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">actions</span><span class="p">):</span>
            <span class="n">srx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="n">orx</span> <span class="o">=</span> <span class="n">otherRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">actions</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">orx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                        <span class="n">KemenyIndex</span> <span class="o">+=</span> <span class="nb">float</span><span class="p">(</span><span class="n">srx</span><span class="p">[</span><span class="n">y</span><span class="p">])</span>
                    <span class="k">elif</span> <span class="n">orx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
                        <span class="n">KemenyIndex</span> <span class="o">-=</span> <span class="nb">float</span><span class="p">(</span><span class="n">srx</span><span class="p">[</span><span class="n">y</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">KemenyIndex</span></div>


<div class="viewcode-block" id="Digraph.flatChoice">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.flatChoice">[docs]</a>
    <span class="k">def</span> <span class="nf">flatChoice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ch</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts set or list ch recursively to a flat list of items.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ch</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="nb">frozenset</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">flatChoice</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">Debug</span><span class="p">):</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>


<div class="viewcode-block" id="Digraph.convertValuationToDecimal">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.convertValuationToDecimal">[docs]</a>
    <span class="k">def</span> <span class="nf">convertValuationToDecimal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the float valuation limits to Decimals.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]))</span></div>


<div class="viewcode-block" id="Digraph.convertRelationToDecimal">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.convertRelationToDecimal">[docs]</a>
    <span class="k">def</span> <span class="nf">convertRelationToDecimal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts the float valued self.relation in a decimal valued one.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">rx</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="n">srx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">srx</span><span class="p">[</span><span class="n">y</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span></div>

        <span class="c1">#return relation</span>

<div class="viewcode-block" id="Digraph.bipolarKCorrelation">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.bipolarKCorrelation">[docs]</a>
    <span class="k">def</span> <span class="nf">bipolarKCorrelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">digraph</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the bipolar Kendall correlation between two bipolar valued</span>
<span class="sd">        digraphs computed from the average valuation of the</span>
<span class="sd">        XORDigraph(self,digraph) instance.</span>

<span class="sd">        .. warning::</span>

<span class="sd">             Obsolete! Is replaced by the self.computeBipolarCorrelation(other) Digraph method</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">xor</span> <span class="o">=</span> <span class="n">XORDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">digraph</span><span class="p">,</span><span class="n">Debug</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="n">xor</span><span class="o">.</span><span class="n">showRelationTable</span><span class="p">()</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">xor</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>

        <span class="n">kDistance</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.0&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">actions</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">actions</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="n">kDistance</span> <span class="o">+=</span> <span class="n">xor</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>
        <span class="n">kDistance</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">kDistance</span><span class="p">))</span> <span class="o">/</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">((</span><span class="n">n</span> <span class="o">*</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">))))</span>
        <span class="c1"># the negation of the kDistance, i.e. -kDistance gives</span>
        <span class="c1"># the bipolar extended Kendall tau correlation</span>
        <span class="k">return</span> <span class="o">-</span><span class="n">kDistance</span></div>


<div class="viewcode-block" id="Digraph.crispKDistance">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.crispKDistance">[docs]</a>
    <span class="k">def</span> <span class="nf">crispKDistance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">digraph</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the crisp Kendall distance between two bipolar valued</span>
<span class="sd">        digraphs.</span>

<span class="sd">        .. warning::</span>

<span class="sd">             Obsolete! Is replaced by the self.computeBipolarCorrelation(other, MedianCut=True) Digraph method</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">xor</span> <span class="o">=</span> <span class="n">XORDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">digraph</span><span class="p">,</span><span class="n">Debug</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="n">xor</span><span class="o">.</span><span class="n">showRelationTable</span><span class="p">()</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>

        <span class="n">k2Distance</span> <span class="o">=</span> <span class="n">xor</span><span class="o">.</span><span class="n">computeSize</span><span class="p">()</span>
        <span class="n">k2Distance</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">k2Distance</span><span class="p">))</span> <span class="o">/</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">((</span><span class="n">n</span> <span class="o">*</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">))))</span>

        <span class="k">return</span> <span class="n">k2Distance</span></div>


<div class="viewcode-block" id="Digraph.bipolarKDistance">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.bipolarKDistance">[docs]</a>
    <span class="k">def</span> <span class="nf">bipolarKDistance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">digraph</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the bipolar crisp Kendall distance between two bipolar valued</span>
<span class="sd">        digraphs.</span>

<span class="sd">        .. warning::</span>

<span class="sd">             Obsolete! Is replaced by the self.computeBipolarCorrelation(other, MedianCut=True) Digraph method</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">xor</span> <span class="o">=</span> <span class="n">XORDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">digraph</span><span class="p">,</span><span class="n">Debug</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="n">xor</span><span class="o">.</span><span class="n">showRelationTable</span><span class="p">()</span>
        <span class="c1">#actions = [x for x in self.actions]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>

        <span class="n">k2Distance</span> <span class="o">=</span> <span class="n">xor</span><span class="o">.</span><span class="n">computeCoSize</span><span class="p">()</span> <span class="o">-</span> <span class="n">xor</span><span class="o">.</span><span class="n">computeSize</span><span class="p">()</span>
        <span class="n">k2Distance</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">k2Distance</span><span class="p">))</span> <span class="o">/</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">((</span><span class="n">n</span> <span class="o">*</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">))))</span>

        <span class="k">return</span> <span class="n">k2Distance</span></div>


<div class="viewcode-block" id="Digraph.computeWeakCondorcetWinners">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeWeakCondorcetWinners">[docs]</a>
    <span class="k">def</span> <span class="nf">computeWeakCondorcetWinners</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Wrapper for weakCondorcetWinners().</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">weakCondorcetWinners</span><span class="p">()</span></div>


<div class="viewcode-block" id="Digraph.computeWeakCondorcetLosers">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeWeakCondorcetLosers">[docs]</a>
    <span class="k">def</span> <span class="nf">computeWeakCondorcetLosers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Wrapper for weakCondorcetLosers().</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">weakCondorcetLosers</span><span class="p">()</span></div>


<div class="viewcode-block" id="Digraph.weakCondorcetWinners">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.weakCondorcetWinners">[docs]</a>
    <span class="k">def</span> <span class="nf">weakCondorcetWinners</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the set of decision actions x such that</span>
<span class="sd">        self.relation[x][y] &gt;= self.valuationdomain[&#39;med&#39;]</span>
<span class="sd">        for all y != x.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#actions = self.actions</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">wCW</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">rx</span> <span class="ow">in</span> <span class="n">relation</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1">#rx = relation[x]</span>
            <span class="n">Winner</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">for</span> <span class="n">y</span><span class="p">,</span><span class="n">rxy</span> <span class="ow">in</span> <span class="n">rx</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">Winner</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">break</span>
            <span class="k">if</span> <span class="n">Winner</span><span class="p">:</span>
                <span class="n">wCW</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">wCW</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">return</span> <span class="n">wCW</span></div>


<div class="viewcode-block" id="Digraph.weakCondorcetLosers">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.weakCondorcetLosers">[docs]</a>
    <span class="k">def</span> <span class="nf">weakCondorcetLosers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the set of decision actions x such that</span>
<span class="sd">        self.relation[x][y] &lt;= self.valuationdomain[&#39;med&#39;]</span>
<span class="sd">        for all y != x.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#actions = self.actions</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">wCL</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">rx</span> <span class="ow">in</span> <span class="n">relation</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1">#rx = relation[x]</span>
            <span class="n">Loser</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">for</span> <span class="n">y</span><span class="p">,</span><span class="n">rxy</span> <span class="ow">in</span> <span class="n">rx</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">Loser</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">break</span>
            <span class="k">if</span> <span class="n">Loser</span><span class="p">:</span>
                <span class="n">wCL</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">wCL</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">return</span> <span class="n">wCL</span></div>


<div class="viewcode-block" id="Digraph.computeCondorcetWinners">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeCondorcetWinners">[docs]</a>
    <span class="k">def</span> <span class="nf">computeCondorcetWinners</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Wrapper for condorcetWinners().</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">condorcetWinners</span><span class="p">()</span></div>


<div class="viewcode-block" id="Digraph.computeCondorcetLosers">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeCondorcetLosers">[docs]</a>
    <span class="k">def</span> <span class="nf">computeCondorcetLosers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Wrapper for condorcetLosers().</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">condorcetLosers</span><span class="p">()</span></div>


<div class="viewcode-block" id="Digraph.condorcetWinners">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.condorcetWinners">[docs]</a>
    <span class="k">def</span> <span class="nf">condorcetWinners</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the set of decision actions x such that</span>
<span class="sd">        self.relation[x][y] &gt; self.valuationdomain[&#39;med&#39;]</span>
<span class="sd">        for all y != x.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#actions = self.actions</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">CW</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">rx</span> <span class="ow">in</span> <span class="n">relation</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1">#rx = relation[x]</span>
            <span class="n">Winner</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">for</span> <span class="n">y</span><span class="p">,</span><span class="n">rxy</span> <span class="ow">in</span> <span class="n">rx</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">rxy</span> <span class="o">&lt;=</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">Winner</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">break</span>
            <span class="k">if</span> <span class="n">Winner</span><span class="p">:</span>
                <span class="n">CW</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">CW</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">return</span> <span class="n">CW</span></div>


<div class="viewcode-block" id="Digraph.condorcetLosers">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.condorcetLosers">[docs]</a>
    <span class="k">def</span> <span class="nf">condorcetLosers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the set of decision actions x such that</span>
<span class="sd">        self.relation[x][y] &lt; self.valuationdomain[&#39;med&#39;]</span>
<span class="sd">        for all y != x.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#actions = self.actions</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">CL</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">rx</span> <span class="ow">in</span> <span class="n">relation</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1">#rx = relation[x]</span>
            <span class="n">Loser</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">for</span> <span class="n">y</span><span class="p">,</span><span class="n">rxy</span> <span class="ow">in</span> <span class="n">rx</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">rxy</span> <span class="o">&gt;=</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">Loser</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">break</span>
            <span class="k">if</span> <span class="n">Loser</span><span class="p">:</span>
                <span class="n">CL</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">CL</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">return</span> <span class="n">CL</span></div>


<div class="viewcode-block" id="Digraph.forcedBestSingleChoice">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.forcedBestSingleChoice">[docs]</a>
    <span class="k">def</span> <span class="nf">forcedBestSingleChoice</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the set of most determined outranking singletons in self.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">valuationList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">valuationList</span><span class="p">:</span>
                    <span class="n">valuationList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
        <span class="n">valuationList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Credibility levels:&#39;</span><span class="p">,</span> <span class="n">valuationList</span><span class="p">)</span>
        <span class="n">bestSingleChoices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span> <span class="nb">list</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">(</span><span class="n">actions</span><span class="p">))</span> <span class="p">)</span>
        <span class="n">i</span><span class="o">=</span><span class="mi">0</span>
        <span class="k">while</span> <span class="n">bestSingleChoices</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
            <span class="n">current</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">bestSingleChoices</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;i_bestSingleChoices:&#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span>  <span class="n">bestSingleChoices</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;level&#39;</span><span class="p">,</span> <span class="n">valuationList</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">current</span><span class="p">:</span>
                <span class="c1">#print &#39;x&#39;, x</span>
                <span class="n">rx</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
                <span class="n">notBest</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                    <span class="c1">#print &#39;y&#39;, y, relation[x][y]</span>
                    <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span> <span class="ow">and</span> <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">valuationList</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                        <span class="n">notBest</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="n">notBest</span><span class="p">:</span>
                    <span class="n">bestSingleChoices</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;final bestSingleChoice:&#39;</span><span class="p">,</span> <span class="n">current</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;leveal of credibility:&#39;</span><span class="p">,</span>  <span class="n">valuationList</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">valuationList</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">current</span><span class="p">)</span></div>


<div class="viewcode-block" id="Digraph.computeMoreOrLessUnrelatedPairs">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeMoreOrLessUnrelatedPairs">[docs]</a>
    <span class="k">def</span> <span class="nf">computeMoreOrLessUnrelatedPairs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders a list of more or less unrelated pairs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">moreOrLessUnrelatedPairs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Med</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Min</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Med</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Min</span><span class="p">:</span>
                            <span class="k">if</span> <span class="p">((</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">),(</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">],</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]))</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">moreOrLessUnrelatedPairs</span><span class="p">:</span>
                                <span class="n">moreOrLessUnrelatedPairs</span><span class="o">.</span><span class="n">append</span><span class="p">(((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])))</span>
        <span class="k">return</span> <span class="n">moreOrLessUnrelatedPairs</span></div>


<div class="viewcode-block" id="Digraph.computeUnrelatedPairs">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeUnrelatedPairs">[docs]</a>
    <span class="k">def</span> <span class="nf">computeUnrelatedPairs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders a list of more or less unrelated pairs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">unrelatedPairs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                            <span class="k">if</span> <span class="p">((</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">),(</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">],</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]))</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">unrelatedPairs</span><span class="p">:</span>
                                <span class="n">unrelatedPairs</span><span class="o">.</span><span class="n">append</span><span class="p">(((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])))</span>
        <span class="k">return</span> <span class="n">unrelatedPairs</span></div>


<div class="viewcode-block" id="Digraph.closeSymmetric">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.closeSymmetric">[docs]</a>
    <span class="k">def</span> <span class="nf">closeSymmetric</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">InSite</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Produces the symmetric closure of self.relation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">symRelation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">relation</span><span class="p">:</span>
            <span class="n">relx</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="n">symRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span> 
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">relx</span><span class="p">:</span>
                <span class="n">rely</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">]</span>
                <span class="n">symRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">relx</span><span class="p">[</span><span class="n">y</span><span class="p">],</span><span class="n">rely</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">InSite</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">symRelation</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">symRelation</span></div>


<div class="viewcode-block" id="Digraph.computeIncomparabilityDegree">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeIncomparabilityDegree">[docs]</a>
    <span class="k">def</span> <span class="nf">computeIncomparabilityDegree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">InPercents</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the incomparability degree (Decimal), i.e. the relative number of symmetric indeterminate relations of the irreflexive part of a digraph. </span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">na</span>  <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">nLinks</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">notDetLinks</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">na</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">actions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">na</span><span class="p">):</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">actions</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="n">nLinks</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="n">Med</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">notDetLinks</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">notDetLinks</span><span class="p">))</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">nLinks</span><span class="p">))</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Digraph instance </span><span class="si">%s</span><span class="s1"> has order 0&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">InPercents</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">*=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">)</span> 
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">InPercents</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Incomparability degree (</span><span class="si">%%</span><span class="s1">) of digraph &lt;</span><span class="si">%s</span><span class="s1">&gt;:&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; #links x&lt;-&gt;y y: </span><span class="si">%d</span><span class="s1">, #incomparable: </span><span class="si">%d</span><span class="s1">, #comparable: </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span>\
                      <span class="p">(</span><span class="n">nLinks</span><span class="p">,</span><span class="n">notDetLinks</span><span class="p">,</span><span class="n">nLinks</span><span class="o">-</span><span class="n">notDetLinks</span><span class="p">)</span> <span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; (#incomparable/#links) =  </span><span class="si">%.1f</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">res</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Incomparability degree of digraph &lt;</span><span class="si">%s</span><span class="s1">&gt;:&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; #links: </span><span class="si">%d</span><span class="s1">, #incomparable: </span><span class="si">%d</span><span class="s1">, #comparable: </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span>\
                      <span class="p">(</span><span class="n">nLinks</span><span class="p">,</span><span class="n">notDetLinks</span><span class="p">,</span><span class="n">nLinks</span><span class="o">-</span><span class="n">notDetLinks</span><span class="p">)</span> <span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; (#incomparable/#links) =  </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">res</span><span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span></div>


<div class="viewcode-block" id="Digraph.computeSymmetryDegree">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeSymmetryDegree">[docs]</a>
    <span class="k">def</span> <span class="nf">computeSymmetryDegree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">InPercents</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the symmetry degree (Decimal) of the irreflexive part of a digraph.</span>

<span class="sd">        .. note::</span>

<span class="sd">           Empty and indeterminate digraphs are considered to be symmetric.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">na</span>  <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">narcs</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">nsymArc</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">na</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">actions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">na</span><span class="p">):</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">actions</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">narcs</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">nsymArc</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">narcs</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">nsymArc</span><span class="p">))</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">narcs</span><span class="p">))</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Digraph instance </span><span class="si">%s</span><span class="s1"> is empty&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">InPercents</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">*=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">)</span> 
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">InPercents</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Symmetry degree (</span><span class="si">%%</span><span class="s1">) of digraph &lt;</span><span class="si">%s</span><span class="s1">&gt;:&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; #arcs x&gt;y: </span><span class="si">%d</span><span class="s1">, #symmetric: </span><span class="si">%d</span><span class="s1">, #asymmetric: </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span>\
                      <span class="p">(</span><span class="n">narcs</span><span class="p">,</span><span class="n">nsymArc</span><span class="p">,</span><span class="n">narcs</span><span class="o">-</span><span class="n">nsymArc</span><span class="p">)</span> <span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; (#symmetric/#arcs) =  </span><span class="si">%.1f</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">res</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Symmetry degree of digraph &lt;</span><span class="si">%s</span><span class="s1">&gt;:&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; #arcs x&gt;y: </span><span class="si">%d</span><span class="s1">, #symmetric: </span><span class="si">%d</span><span class="s1">, #asymmetric: </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span>\
                      <span class="p">(</span><span class="n">narcs</span><span class="p">,</span><span class="n">nsymArc</span><span class="p">,</span><span class="n">narcs</span><span class="o">-</span><span class="n">nsymArc</span><span class="p">)</span> <span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; (#symmetric/#arcs) =  </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">res</span><span class="p">)</span> <span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span></div>


<div class="viewcode-block" id="Digraph.isSymmetric">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.isSymmetric">[docs]</a>
    <span class="k">def</span> <span class="nf">isSymmetric</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        True if symmetry degree == 1.0.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeSymmetryDegree</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Symmetry degree of graph &lt;</span><span class="si">%s</span><span class="s1">&gt; : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">sd</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">sd</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="Digraph.computeDynamicProgrammingStages">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeDynamicProgrammingStages">[docs]</a>
    <span class="k">def</span> <span class="nf">computeDynamicProgrammingStages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">source</span><span class="p">,</span><span class="n">sink</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the discrete stages of the optimal substructure for</span>
<span class="sd">        dynamic pogramming digrahs from a given source node </span>
<span class="sd">        to a given sink sink node.</span>
<span class="sd">    </span>
<span class="sd">        Returns a list of list of action identifyers.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">stages</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1">#source = &#39;a01&#39;</span>
        <span class="c1">#sink = &#39;a22&#39;</span>
        <span class="n">stages</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">source</span><span class="p">])</span>
        <span class="n">spl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeShortestPathLengths</span><span class="p">()</span>
        <span class="n">nstages</span> <span class="o">=</span> <span class="n">spl</span><span class="p">[</span><span class="n">source</span><span class="p">][</span><span class="n">sink</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">nstages</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;stage: &#39;</span><span class="p">,</span><span class="n">i</span><span class="p">)</span>
            <span class="n">neighbours</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">stages</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">nbx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">nbx</span><span class="p">)</span>
                <span class="n">neighbours</span> <span class="o">|=</span> <span class="n">nbx</span>
            <span class="n">nbList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">neighbours</span><span class="p">)</span>
            <span class="n">nbList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="n">stages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nbList</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">stages</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">stages</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">!=</span> <span class="mi">1</span>  <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">stages</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: the given digraph is not a valid dynamic programming digraph&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">stages</span></div>



<div class="viewcode-block" id="Digraph.computeWeakTransitivityDegree">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeWeakTransitivityDegree">[docs]</a>
    <span class="k">def</span> <span class="nf">computeWeakTransitivityDegree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                <span class="n">InPercents</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">ReturnWeakIntransitiveTriples</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the strict and the weak transitivity degrees (Decimal) of a digraph, i.e. the ratio of the number of closed x&gt;z  , respt. weakly-closed (x&gt;z and x&lt;&gt;y) triples over the number of x&gt;y&gt;z triples of the transitive closure of the digraph.</span>

<span class="sd">        With *ReturnWeakIntransitiveTriples=True* returns a tuple with a list of intransitive triples and a list of weakly intransitive triples.</span>

<span class="sd">        .. note:: </span>

<span class="sd">           Digraphs without connected triples, like empty or indeterminate digraphs are considered to be weakly transitive.</span>

<span class="sd">        &gt;&gt;&gt; from outrankingDigraphs import BipolarOutrankingDigraph</span>
<span class="sd">        &gt;&gt;&gt; from randomDigraphs import RandomCBPerformanceTableau</span>
<span class="sd">        &gt;&gt;&gt; t = RandomCBPerformanceTableau(</span>
<span class="sd">        ...                         weightDistribution=&quot;equiobjectives&quot;,</span>
<span class="sd">        ...                         numberOfActions=10,numberOfCriteria=11,</span>
<span class="sd">        ...                         missingDataProbability=0.05,seed=2)</span>
<span class="sd">        &gt;&gt;&gt; g = BipolarOutrankingDigraph(t)</span>
<span class="sd">        &gt;&gt;&gt; g.computeWeakTransitivityDegree(Comments=True)</span>
<span class="sd">         Transitivity degree of digraph &lt;rel_randomCBperftab&gt;:</span>
<span class="sd">         #triples x&gt;y&gt;z: 720, #closed: 400, #weakly-closed: 80,#open: 240</span>
<span class="sd">         (#closed/#triples) =  0.556</span>
<span class="sd">         (#weakly-closed/#triples) =  0.667</span>
<span class="sd">        </span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">transRel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">closeTransitive</span><span class="p">(</span><span class="n">InSite</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">ntriples</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">trans</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">weakTrans</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">intrans</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">openTriples</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">weakTriples</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">z</span> <span class="o">!=</span> <span class="n">x</span> <span class="ow">and</span> <span class="n">z</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">transRel</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span> <span class="ow">and</span>\
                               <span class="n">transRel</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">z</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                                <span class="n">ntriples</span> <span class="o">+=</span> <span class="mi">1</span>
                                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">z</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                                    <span class="n">trans</span> <span class="o">+=</span> <span class="mi">1</span>
                                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">z</span><span class="p">]</span> <span class="o">==</span> <span class="n">Med</span><span class="p">:</span>
                                    <span class="n">weakTrans</span> <span class="o">+=</span> <span class="mi">1</span>
                                    <span class="n">weakTriples</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">])</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">intrans</span> <span class="o">+=</span> <span class="mi">1</span>
                                    <span class="n">openTriples</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">ntriples</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">tres</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">trans</span><span class="p">))</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ntriples</span><span class="p">))</span>
            <span class="n">wtres</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">trans</span><span class="o">+</span><span class="n">weakTrans</span><span class="p">))</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ntriples</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tres</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
            <span class="n">wtres</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">InPercents</span><span class="p">:</span>
            <span class="n">tres</span> <span class="o">*=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">)</span> 
            <span class="n">wtres</span> <span class="o">*=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">)</span> 
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">InPercents</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Transitivity degree (</span><span class="si">%%</span><span class="s1">) of digraph &lt;</span><span class="si">%s</span><span class="s1">&gt;:&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; #triples x&gt;y&gt;z: </span><span class="si">%d</span><span class="s1">, #closed: </span><span class="si">%d</span><span class="s1">, #weakly-closed: </span><span class="si">%d</span><span class="s1">, #open: </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span>\
                  <span class="p">(</span><span class="n">ntriples</span><span class="p">,</span><span class="n">trans</span><span class="p">,</span><span class="n">weakTrans</span><span class="p">,</span><span class="n">intrans</span><span class="p">)</span> <span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; (#closed/#triples) =  </span><span class="si">%.1f</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">tres</span><span class="p">)</span> <span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; (#weakly-closed/#triples) =  </span><span class="si">%.1f</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">wtres</span><span class="p">)</span> <span class="p">)</span>
                
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Transitivity degree of digraph &lt;</span><span class="si">%s</span><span class="s1">&gt;:&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; #triples x&gt;y&gt;z: </span><span class="si">%d</span><span class="s1">, #closed: </span><span class="si">%d</span><span class="s1">, #weakly-closed: </span><span class="si">%d</span><span class="s1">,#open: </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span>\
                  <span class="p">(</span><span class="n">ntriples</span><span class="p">,</span><span class="n">trans</span><span class="p">,</span><span class="n">weakTrans</span><span class="p">,</span><span class="n">intrans</span><span class="p">)</span> <span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; (#closed/#triples) =  </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">tres</span><span class="p">)</span> <span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; (#weakly-closed/#triples) =  </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">wtres</span><span class="p">)</span> <span class="p">)</span>
        <span class="k">if</span> <span class="n">ReturnWeakIntransitiveTriples</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">openTriples</span><span class="p">,</span> <span class="n">weakTriples</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">tres</span><span class="p">,</span><span class="n">wtres</span></div>


<div class="viewcode-block" id="Digraph.computeTransitivityDegree">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeTransitivityDegree">[docs]</a>
    <span class="k">def</span> <span class="nf">computeTransitivityDegree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                <span class="n">InPercents</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">ReturnIntransitiveTriples</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the transitivity degree (Decimal) of a digraph.</span>

<span class="sd">        .. note:: </span>

<span class="sd">           An empty or indeterminate digraph is considered to be transitive.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">transRel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">closeTransitive</span><span class="p">(</span><span class="n">InSite</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">ntriples</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">nclosed</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">triples</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">z</span> <span class="o">!=</span> <span class="n">x</span> <span class="ow">and</span> <span class="n">z</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">transRel</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span> <span class="ow">and</span>\
                               <span class="n">transRel</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">z</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                                <span class="n">ntriples</span> <span class="o">+=</span> <span class="mi">1</span>
                                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">z</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                                    <span class="n">nclosed</span> <span class="o">+=</span> <span class="mi">1</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">triples</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">ntriples</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">nclosed</span><span class="p">))</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ntriples</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">InPercents</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">*=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">)</span> 
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">InPercents</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Transitivity degree (</span><span class="si">%%</span><span class="s1">) of digraph &lt;</span><span class="si">%s</span><span class="s1">&gt;:&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; #triples x&gt;y&gt;z: </span><span class="si">%d</span><span class="s1">, #closed: </span><span class="si">%d</span><span class="s1">, #open: </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span>\
                  <span class="p">(</span><span class="n">ntriples</span><span class="p">,</span><span class="n">nclosed</span><span class="p">,</span><span class="n">ntriples</span><span class="o">-</span><span class="n">nclosed</span><span class="p">)</span> <span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; (#closed/#triples) =  </span><span class="si">%.1f</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">res</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Transitivity degree of digraph &lt;</span><span class="si">%s</span><span class="s1">&gt;:&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; #triples x&gt;y&gt;z: </span><span class="si">%d</span><span class="s1">, #closed: </span><span class="si">%d</span><span class="s1">, #open: </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span>\
                  <span class="p">(</span><span class="n">ntriples</span><span class="p">,</span><span class="n">nclosed</span><span class="p">,</span><span class="n">ntriples</span><span class="o">-</span><span class="n">nclosed</span><span class="p">)</span> <span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; (#closed/#triples) =  </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="n">res</span><span class="p">)</span> <span class="p">)</span>
        <span class="k">if</span> <span class="n">ReturnIntransitiveTriples</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">triples</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">res</span></div>


<div class="viewcode-block" id="Digraph.computeIntransitiveTriples">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeIntransitiveTriples">[docs]</a>
    <span class="k">def</span> <span class="nf">computeIntransitiveTriples</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the list of intransitive triples detected in self.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeTransitivityDegree</span><span class="p">(</span><span class="n">ReturnIntransitiveTriples</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                              <span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span></div>

            
<div class="viewcode-block" id="Digraph.isTransitive">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.isTransitive">[docs]</a>
    <span class="k">def</span> <span class="nf">isTransitive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        True if transitivity degree == 1.0.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">td</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeTransitivityDegree</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Transitivity degree of graph &lt;</span><span class="si">%s</span><span class="s1">&gt; : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">td</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">td</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="Digraph.computeSizeTransitiveClosure">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeSizeTransitiveClosure">[docs]</a>
    <span class="k">def</span> <span class="nf">computeSizeTransitiveClosure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the size of the transitive closure of a digraph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">copy</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">closeTransitive</span><span class="p">(</span><span class="n">InSite</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">n1</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">rx</span> <span class="ow">in</span> <span class="n">relation</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">rxy</span> <span class="ow">in</span> <span class="n">rx</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">rxy</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">n1</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">n1</span></div>



<div class="viewcode-block" id="Digraph.closeTransitive">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.closeTransitive">[docs]</a>
    <span class="k">def</span> <span class="nf">closeTransitive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Reverse</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">InSite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Produces the transitive closure of self.relation. </span>
<span class="sd">        </span>
<span class="sd">        *Parameters*:</span>

<span class="sd">            - If *Reverse* == True (False default) all transitive links are dropped, otherwise all transitive links are closed with min[r(x,y),r(y,z)];</span>
<span class="sd">            - If *Insite* == False (True by default) the methods return a modified copy of self.relation without altering the original self.relation, otherwise self.relation is modified.</span>
<span class="sd">           </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Change</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">currRelation</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">Change</span><span class="p">:</span>
            <span class="n">Change</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">curriRelation</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">currRelation</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">z</span> <span class="o">!=</span> <span class="n">x</span> <span class="ow">and</span> <span class="n">z</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span> 
                                <span class="k">if</span> <span class="nb">min</span><span class="p">(</span><span class="n">curriRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">],</span><span class="n">curriRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">z</span><span class="p">])</span> <span class="o">&gt;</span> <span class="n">Med</span> \
                                      <span class="ow">and</span> <span class="n">curriRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">z</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">Med</span><span class="p">:</span>
                                    <span class="n">currRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">z</span><span class="p">]</span> <span class="o">=</span>\
                                      <span class="nb">min</span><span class="p">(</span><span class="n">curriRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">],</span><span class="n">curriRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">z</span><span class="p">])</span>
                                    <span class="n">Change</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;iterations: </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span><span class="n">i</span> <span class="p">)</span>
        <span class="k">if</span> <span class="n">Reverse</span><span class="p">:</span>
            <span class="n">Change</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">while</span> <span class="n">Change</span><span class="p">:</span>
                <span class="n">Change</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">curriRelation</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">currRelation</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                                <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="n">z</span> <span class="o">!=</span> <span class="n">x</span> <span class="ow">and</span> <span class="n">z</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                                        <span class="k">if</span> <span class="nb">min</span><span class="p">(</span><span class="n">curriRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">],</span><span class="n">curriRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">z</span><span class="p">])</span> <span class="o">&gt;</span> <span class="n">Med</span> \
                                           <span class="ow">and</span> <span class="n">curriRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">z</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                                            <span class="n">currRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">z</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">curriRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">z</span><span class="p">]</span>
                                            <span class="n">Change</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="c1">#relation[y][z] =\</span>
                <span class="c1">#-(max(relation[y][z],min(relation[y][x],relation[x][z])))</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;reverse iterations: </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span><span class="n">i</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">InSite</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">currRelation</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">currRelation</span></div>


<div class="viewcode-block" id="Digraph.convertValuation2Integer">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.convertValuation2Integer">[docs]</a>
    <span class="k">def</span> <span class="nf">convertValuation2Integer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">InSite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts the self.relation valuation to integer values by converting the Decimals to Fractions and multiply by the least commun multiple of the fraction denominators.</span>
<span class="sd">        </span>
<span class="sd">        *Parameters*:</span>

<span class="sd">            - If *Insite* == False (True by default) the method returns a modified copy of self.relation without altering the original self.relation, otherwise self.relation and self.valuationdomain is modified.</span>
<span class="sd">           </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">fractions</span> <span class="kn">import</span> <span class="n">Fraction</span>
        <span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">lcm</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">Hiv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;hasIntegerValuation&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;hasIntegerValuation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;hasIntegerValuation&#39;</span><span class="p">]:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">actions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="n">actions</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                    <span class="n">t</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Fraction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span><span class="o">.</span><span class="n">as_integer_ratio</span><span class="p">()[</span><span class="mi">1</span><span class="p">])</span>
            <span class="c1"># requires Python3.9+</span>
            <span class="n">valint</span> <span class="o">=</span> <span class="n">lcm</span><span class="p">(</span><span class="o">*</span><span class="n">t</span><span class="p">)</span> 
            <span class="c1"># before Python3.9 uncomment below !</span>
            <span class="c1"># from functools import reduce</span>
            <span class="c1"># valint = reduce(lambda x, y: lcm(x,y),t,t[0])</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Leat common multiple of denominators is &#39;</span><span class="p">,</span><span class="n">valint</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">InSite</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Recoding valuation to [</span><span class="si">%d</span><span class="s1">,</span><span class="si">%d</span><span class="s1">]&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="o">-</span><span class="n">valint</span><span class="p">,</span><span class="n">valint</span><span class="p">)</span> <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="o">-</span><span class="n">valint</span><span class="p">,</span><span class="n">valint</span><span class="p">,</span><span class="n">ndigits</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;hasIntegerValuation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;renders the recode sel.relation to [</span><span class="si">%d</span><span class="s1">,</span><span class="si">%d</span><span class="s1">]&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="o">-</span><span class="n">valint</span><span class="p">,</span><span class="n">valint</span><span class="p">)</span> <span class="p">)</span>
                <span class="n">integerRelation</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                    <span class="n">integerRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                        <span class="n">integerRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.0f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">*</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">valint</span><span class="p">))</span> <span class="p">))</span>
                <span class="k">return</span> <span class="n">integerRelation</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The relation is already integer-valued&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Digraph.isCyclic">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.isCyclic">[docs]</a>
    <span class="k">def</span> <span class="nf">isCyclic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        checks the cyclicity of self.relation by checking</span>
<span class="sd">        for a reflexive loop in its transitive closure-</span>

<span class="sd">        .. warning::</span>

<span class="sd">             self.relation is supposed to be irreflexive !</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">copy</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">Med</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>

        <span class="n">isCyclic</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">z</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">z</span><span class="p">],</span><span class="nb">min</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">],</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">z</span><span class="p">]))</span>

        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x, relation[x][x]&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                <span class="n">isCyclic</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">break</span>

        <span class="k">return</span> <span class="n">isCyclic</span></div>


<div class="viewcode-block" id="Digraph.isStronglyAsymmetric">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.isStronglyAsymmetric">[docs]</a>
    <span class="k">def</span> <span class="nf">isStronglyAsymmetric</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        checks the strong assymetric property of self.relation by checking</span>
<span class="sd">        for r(x&gt;y) + r(y&gt;x) &lt;= Med !</span>

<span class="sd">        .. warning::</span>
<span class="sd">        </span>
<span class="sd">            The reflexive links are ignored !!</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Med = &#39;</span><span class="p">,</span> <span class="n">Med</span><span class="p">)</span>
        <span class="n">listActions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">listActions</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        
        <span class="n">isStronglyAsymmetric</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">listActions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">listActions</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">+</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">isStronglyAsymmetric</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x,y,relation[x][y],relation[y][x]&#39;</span><span class="p">,</span>\
                              <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                    <span class="k">break</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">isStronglyAsymmetric</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="k">return</span> <span class="n">isStronglyAsymmetric</span></div>


<div class="viewcode-block" id="Digraph.isStronglyComplete">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.isStronglyComplete">[docs]</a>
    <span class="k">def</span> <span class="nf">isStronglyComplete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        checks the strongly completeness property of self.relation by checking</span>
<span class="sd">        for r(x&gt;=y) + r(y&gt;=x) &gt;= Med !</span>

<span class="sd">        .. warning::</span>
<span class="sd">        </span>
<span class="sd">            The reflexive links are ignored !!</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Med = &#39;</span><span class="p">,</span> <span class="n">Med</span><span class="p">)</span>
        <span class="n">listActions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">listActions</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        
        <span class="n">isStronglyComplete</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">listActions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">listActions</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">+</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">isStronglyComplete</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x,y,relation[x][y],relation[y][x]&#39;</span><span class="p">,</span>\
                              <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                    <span class="k">break</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">isStronglyComplete</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="k">return</span> <span class="n">isStronglyComplete</span></div>


<div class="viewcode-block" id="Digraph.isWeaklyComplete">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.isWeaklyComplete">[docs]</a>
    <span class="k">def</span> <span class="nf">isWeaklyComplete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        checks the weakly completeness property of self.relation by checking</span>
<span class="sd">        for the absence of a link between two actions!!</span>

<span class="sd">        .. warning::</span>
<span class="sd">        </span>
<span class="sd">            The reflexive links are ignored !!</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Med = &#39;</span><span class="p">,</span> <span class="n">Med</span><span class="p">)</span>
        <span class="n">listActions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">listActions</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        
        <span class="n">isWeaklyComplete</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">listActions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">listActions</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Med</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">isWeaklyComplete</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x,y,relation[x][y],relation[y][x]&#39;</span><span class="p">,</span>\
                              <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                    <span class="k">break</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">isWeaklyComplete</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="k">return</span> <span class="n">isWeaklyComplete</span></div>


<div class="viewcode-block" id="Digraph.isComplete">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.isComplete">[docs]</a>
    <span class="k">def</span> <span class="nf">isComplete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        checks the completeness property of self.relation by checking</span>
<span class="sd">        for the absence of a link between two actions!!</span>

<span class="sd">        .. warning::</span>
<span class="sd">        </span>
<span class="sd">            The reflexive links are ignored !!</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Med = &#39;</span><span class="p">,</span> <span class="n">Med</span><span class="p">)</span>
        <span class="n">listActions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">listActions</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        
        <span class="n">isComplete</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">listActions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">listActions</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">Med</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">isComplete</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x,y,relation[x][y],relation[y][x]&#39;</span><span class="p">,</span>\
                              <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                    <span class="k">break</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">isComplete</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="k">return</span> <span class="n">isComplete</span></div>


<div class="viewcode-block" id="Digraph.isIntegerValued">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.isIntegerValued">[docs]</a>
    <span class="k">def</span> <span class="nf">isIntegerValued</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks whether the decimal valuation of self is integer-valued</span>
<span class="sd">        be using the as_integer_ratio() method of a Decimal </span>
<span class="sd">        giving a tuple (numerator,denominator). If denominator == 1, the</span>
<span class="sd">        number is an integer. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">IntegerValued</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="n">ratio</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">as_integer_ratio</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="n">ratio</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ratio</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">IntegerValued</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">IntegerValued</span><span class="p">:</span>
                    <span class="k">break</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">IntegerValued</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="k">return</span> <span class="n">IntegerValued</span></div>

    
<div class="viewcode-block" id="Digraph.isOutrankingDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.isOutrankingDigraph">[docs]</a>
    <span class="k">def</span> <span class="nf">isOutrankingDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks the outranking digraph characteristic condition (3.3).</span>
<span class="sd">        </span>
<span class="sd">        relation[x][y] + relation[y][x)[y] &gt;= 0.0</span>

<span class="sd">        .. warning::</span>
<span class="sd">        </span>
<span class="sd">            The reflexive links are ignored and the valuation must be bipolar !!</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="c1">#normalizing the valuation domain</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="c1"># if Med != Decimal(&#39;0.0&#39;):</span>
        <span class="c1">#     print(&quot;Error: the digraph&#39;s valuation  must be bipolar !!&quot;)</span>
        <span class="c1">#     print(self.valuationdomain)</span>
        <span class="c1">#     return</span>
        <span class="n">listActions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">listActions</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">relation</span>
        
        <span class="n">IsOutrankingDigraph</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">listActions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">listActions</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x,y,relation[x][y],relation[y][x]&#39;</span><span class="p">,</span>\
                         <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">+</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">IsOutrankingDigraph</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">if</span> <span class="n">Comments</span> <span class="ow">or</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x,y,relation[x][y],relation[y][x]&#39;</span><span class="p">,</span>\
                               <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Not a valid outranking valuation&#39;</span><span class="p">)</span> 
 
        <span class="k">return</span> <span class="n">IsOutrankingDigraph</span></div>


<div class="viewcode-block" id="Digraph.isStrictOutrankingDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.isStrictOutrankingDigraph">[docs]</a>
    <span class="k">def</span> <span class="nf">isStrictOutrankingDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks the strict outranking digraph characteristic condition (3.1).</span>

<span class="sd">        -(relation[x][y] + relation[y][x]) &lt;= 0.0 , x != y</span>

<span class="sd">        .. warning::</span>
<span class="sd">        </span>
<span class="sd">            The reflexive links are ignored and the valuation must be bipolar !!</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>

        <span class="c1"># normalizing the characteristic values</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="c1"># if Med != Decimal(&#39;0.0&#39;):</span>
        <span class="c1">#     print(&quot;Error: the digraph&#39;s valuation  must be bipolar !!&quot;)</span>
        <span class="c1">#     print(self.valuationdomain)</span>
        <span class="c1">#     return</span>
     
        <span class="n">listActions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">listActions</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">relation</span>
        
        <span class="n">IsStrictOutrankingDigraph</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">listActions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">listActions</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                  <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x,y,relation[x][y],relation[y][x]&#39;</span><span class="p">,</span>\
                         <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>

                <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">+</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">IsStrictOutrankingDigraph</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">if</span> <span class="n">Comments</span> <span class="ow">or</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x,y,relation[x][y],relation[y][x]&#39;</span><span class="p">,</span>\
                               <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Not a valid strict outranking valuation&#39;</span><span class="p">)</span>  
 
        <span class="k">return</span> <span class="n">IsStrictOutrankingDigraph</span></div>


<div class="viewcode-block" id="Digraph.isAsymmetricIndeterminate">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.isAsymmetricIndeterminate">[docs]</a>
    <span class="k">def</span> <span class="nf">isAsymmetricIndeterminate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks the self.relation for assymmetric indeterminateness!!</span>

<span class="sd">        .. warning::</span>
<span class="sd">        </span>
<span class="sd">            The reflexive links are ignored !!</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Med = &#39;</span><span class="p">,</span> <span class="n">Med</span><span class="p">)</span>
        <span class="n">listActions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">listActions</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        
        <span class="n">AsymmetricIndeterminate</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">listActions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">listActions</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="n">Med</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Med</span><span class="p">)</span> <span class="ow">or</span>\
                   <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Med</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="n">Med</span><span class="p">):</span>
                    <span class="n">AsymmetricIndeterminate</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x,y,relation[x][y],relation[y][x]&#39;</span><span class="p">,</span>\
                              <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">AsymmetricIndeterminate</span></div>


<div class="viewcode-block" id="Digraph.automorphismGenerators">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.automorphismGenerators">[docs]</a>
    <span class="k">def</span> <span class="nf">automorphismGenerators</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds automorphism group generators to the digraph instance.</span>

<span class="sd">        .. note::</span>

<span class="sd">            Dependency: Uses the dreadnaut command from the nauty software package. See https://www3.cs.stonybrook.edu/~algorith/implement/nauty/implement.shtml</span>

<span class="sd">            On Ubuntu Linux:</span>
<span class="sd">              ...$ sudo apt-get install nauty</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">os</span>
        <span class="n">Name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">savedre</span><span class="p">(</span><span class="n">Name</span><span class="p">)</span>
        <span class="n">aindex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aindex</span>
        <span class="n">arevindex</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">aindex</span><span class="p">:</span>
            <span class="n">arevindex</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">aindex</span><span class="p">[</span><span class="n">i</span><span class="p">])]</span> <span class="o">=</span> <span class="n">i</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">arevindex</span><span class="p">)</span>
        <span class="n">File0</span> <span class="o">=</span> <span class="n">Name</span><span class="o">+</span><span class="s1">&#39;.dre&#39;</span>
        <span class="n">File1</span> <span class="o">=</span> <span class="n">Name</span><span class="o">+</span><span class="s1">&#39;.auto&#39;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;# automorphisms extraction from dre file #&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;# Using input file: &#39;</span> <span class="o">+</span> <span class="n">File0</span><span class="p">)</span>
        <span class="n">String2</span> <span class="o">=</span> <span class="s2">&quot;echo &#39;&lt;&quot;</span><span class="o">+</span><span class="n">File0</span><span class="o">+</span><span class="s1">&#39; -m p &gt;&#39;</span><span class="o">+</span><span class="n">File1</span><span class="o">+</span><span class="s2">&quot; x&#39; | dreadnaut&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">String2</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="n">String2</span><span class="p">)</span>
        <span class="n">NoError</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">f1</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">File1</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The input file: &#39;</span><span class="p">,</span> <span class="n">File1</span><span class="p">,</span><span class="s1">&#39; could not be found!&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Be sure that nauty&#39;s dreadnaut programm is available!&quot;</span><span class="p">)</span>
            <span class="n">NoError</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">NoError</span><span class="p">:</span>
            <span class="n">permutations</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">f1</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
            <span class="n">nl</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">while</span> <span class="n">t</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="n">nl</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">t</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39; &#39;</span><span class="p">:</span>
                    <span class="n">ts</span> <span class="o">=</span> <span class="n">f1</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
                    <span class="k">while</span> <span class="n">ts</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;  &#39;</span><span class="p">:</span>
                        <span class="n">suite</span> <span class="o">=</span> <span class="mi">1</span>
                        <span class="n">t</span> <span class="o">=</span> <span class="n">t</span> <span class="o">+</span> <span class="n">ts</span>
                        <span class="n">ts</span> <span class="o">=</span> <span class="n">f1</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
                    <span class="n">permutation</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;# permutation = &#39;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">nl</span><span class="p">)</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">permutation</span><span class="p">))</span>
                    <span class="n">permutations</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">nl</span><span class="p">)]</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">permutation</span><span class="p">)):</span>
                        <span class="n">permutations</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">nl</span><span class="p">)][</span><span class="nb">str</span><span class="p">(</span><span class="n">arevindex</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)])]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">arevindex</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">permutation</span><span class="p">[</span><span class="n">i</span><span class="p">])])</span>
                    <span class="n">t</span> <span class="o">=</span> <span class="n">ts</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1">#print &#39;# &#39;, t</span>
                    <span class="n">grpsize</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)):</span>
                        <span class="c1">#print t[i],</span>
                        <span class="k">if</span> <span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;=&#39;</span><span class="p">:</span>
                            <span class="c1">#print &#39;ok&#39;</span>
                            <span class="c1">#grpsize = &#39;&#39;</span>
                            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)):</span>
                                <span class="k">if</span> <span class="n">t</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;;&#39;</span><span class="p">:</span>
                                    <span class="c1">#print t[j]</span>
                                    <span class="n">grpsize</span> <span class="o">+=</span> <span class="n">t</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="k">break</span>
                            <span class="k">break</span>
                    <span class="c1">#print eval(grpsize)</span>
                    <span class="c1">#t = f1.readline</span>
                    <span class="k">break</span>
            <span class="n">f1</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reflections</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">permutations</span> <span class="o">=</span> <span class="n">permutations</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">automorphismGroupSize</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">grpsize</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;nauty software not installed&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span></div>

            
<div class="viewcode-block" id="Digraph.showAutomorphismGenerators">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showAutomorphismGenerators">[docs]</a>
    <span class="k">def</span> <span class="nf">showAutomorphismGenerators</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the generators of the automorphism group.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---- Automorphism group generators ----&#39;</span><span class="p">)</span>
        <span class="n">NoError</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">reflections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reflections</span>
            <span class="n">permutations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">permutations</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No permutations or reflections defined yet !!&#39;</span><span class="p">)</span>
            <span class="n">NoError</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">NoError</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Permutations&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">permutations</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">permutations</span><span class="p">[</span><span class="n">g</span><span class="p">])</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Reflections&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">reflections</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reflexions</span><span class="p">[</span><span class="n">g</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Run self.automorphismGenerators()&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Digraph.showOrbits">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showOrbits">[docs]</a>
    <span class="k">def</span> <span class="nf">showOrbits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">InChoices</span><span class="p">,</span><span class="n">withListing</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prints the orbits of Choices along the automorphisms of</span>
<span class="sd">        the Digraph instance.</span>

<span class="sd">        Example Python session for computing the non isomorphic MISs from the 12-cycle graph:</span>

<span class="sd">        &gt;&gt;&gt; from digraphs import *</span>
<span class="sd">        &gt;&gt;&gt; c12 = CirculantDigraph(order=12,circulants=[1,-1])</span>
<span class="sd">        &gt;&gt;&gt; c12.automorphismGenerators()</span>
<span class="sd">        ...</span>
<span class="sd">          Permutations</span>
<span class="sd">          {&#39;1&#39;: &#39;1&#39;, &#39;2&#39;: &#39;12&#39;, &#39;3&#39;: &#39;11&#39;, &#39;4&#39;: &#39;10&#39;, &#39;5&#39;: </span>
<span class="sd">           &#39;9&#39;, &#39;6&#39;: &#39;8&#39;, &#39;7&#39;: &#39;7&#39;, &#39;8&#39;: &#39;6&#39;, &#39;9&#39;: &#39;5&#39;, &#39;10&#39;: </span>
<span class="sd">           &#39;4&#39;, &#39;11&#39;: &#39;3&#39;, &#39;12&#39;: &#39;2&#39;}</span>
<span class="sd">          {&#39;1&#39;: &#39;2&#39;, &#39;2&#39;: &#39;1&#39;, &#39;3&#39;: &#39;12&#39;, &#39;4&#39;: &#39;11&#39;, &#39;5&#39;: &#39;10&#39;, </span>
<span class="sd">           &#39;6&#39;: &#39;9&#39;, &#39;7&#39;: &#39;8&#39;, &#39;8&#39;: &#39;7&#39;, &#39;9&#39;: &#39;6&#39;, &#39;10&#39;: &#39;5&#39;, </span>
<span class="sd">           &#39;11&#39;: &#39;4&#39;, &#39;12&#39;: &#39;3&#39;}</span>
<span class="sd">          Reflections {}</span>
<span class="sd">        &gt;&gt;&gt; print(&#39;grpsize = &#39;, c12.automorphismGroupSize)</span>
<span class="sd">          grpsize = 24</span>
<span class="sd">        &gt;&gt;&gt; c12.showMIS(withListing=False)</span>
<span class="sd">          *---  Maximal independent choices ---*</span>
<span class="sd">          number of solutions:  29</span>
<span class="sd">          cardinality distribution</span>
<span class="sd">          card.:  [0, 1, 2, 3, 4,  5,  6, 7, 8, 9, 10, 11, 12]</span>
<span class="sd">          freq.:  [0, 0, 0, 0, 3, 24,  2, 0, 0, 0,  0,  0,  0]</span>
<span class="sd">          Results in c12.misset</span>
<span class="sd">        &gt;&gt;&gt; c12.showOrbits(c12.misset,withListing=False)</span>
<span class="sd">        ...</span>
<span class="sd">          *---- Global result ----</span>
<span class="sd">          Number of MIS:  29</span>
<span class="sd">          Number of orbits :  4</span>
<span class="sd">          Labelled representatives:</span>
<span class="sd">          1: [&#39;2&#39;,&#39;4&#39;,&#39;6&#39;,&#39;8&#39;,&#39;10&#39;,&#39;12&#39;]</span>
<span class="sd">          2: [&#39;2&#39;,&#39;5&#39;,&#39;8&#39;,&#39;11&#39;]</span>
<span class="sd">          3: [&#39;2&#39;,&#39;4&#39;,&#39;6&#39;,&#39;9&#39;,&#39;11&#39;]</span>
<span class="sd">          4: [&#39;1&#39;,&#39;4&#39;,&#39;7&#39;,&#39;9&#39;,&#39;11&#39;]</span>
<span class="sd">          Symmetry vector</span>
<span class="sd">          stabilizer size: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, ...]</span>
<span class="sd">          frequency      : [0, 2, 0, 0, 0, 0, 0, 1, 0,  0,  0,  1, ...]</span>

<span class="sd">        *Figure*: The symmetry axes of the non isomorphic MISs of the 12-cycle:</span>

<span class="sd">        .. image:: c12.png</span>
<span class="sd">           :width: 400 px</span>
<span class="sd">           :align: center</span>
<span class="sd">           :alt: The 4 non isomorphic MIS of the 12-cycle graph</span>

<span class="sd">        *Reference*: R. Bisdorff and J.L. Marichal (2008). Counting non-isomorphic maximal independent sets of the n-cycle graph. *Journal of Integer Sequences*, Vol. 11 Article 08.5.7 (`openly accessible here &lt;https://www.cs.uwaterloo.ca/journals/JIS/VOL11/Marichal/marichal.html&gt;`_)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">reflections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reflections</span>
            <span class="n">permutations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">permutations</span>
            <span class="n">NoError</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No permutations or reflections defined yet !!&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Run self.automorphismGenerators()&#39;</span><span class="p">)</span>
            <span class="n">NoError</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">NoError</span><span class="p">:</span>
            <span class="n">Choices</span> <span class="o">=</span> <span class="n">InChoices</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*--- Isomorphic reduction of choices&#39;</span><span class="p">)</span>
            <span class="n">Iso</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">automorphismGroupSize</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Number of choices:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">Choices</span><span class="p">))</span>
            <span class="k">while</span> <span class="n">Choices</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
                <span class="n">sCur</span> <span class="o">=</span> <span class="n">Choices</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
                <span class="nb">print</span><span class="p">()</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;current representative: &#39;</span><span class="p">,</span><span class="n">sCur</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;length   : &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">sCur</span><span class="p">))</span>
                <span class="n">IsosCur</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">sCur</span><span class="p">])</span>
                <span class="n">Isos</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                <span class="k">while</span> <span class="n">IsosCur</span> <span class="o">!=</span> <span class="n">Isos</span><span class="p">:</span>
                    <span class="n">Isos</span> <span class="o">=</span> <span class="n">IsosCur</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">IsosRes</span> <span class="o">=</span> <span class="n">IsosCur</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">IsosCur</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">reflections</span><span class="p">:</span>
                            <span class="n">cur</span> <span class="o">=</span> <span class="n">s</span>
                            <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">reflections</span><span class="p">[</span><span class="n">g</span><span class="p">]:</span>
                                <span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">)</span> <span class="ow">and</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
                                    <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
                                    <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">cur</span> <span class="ow">and</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
                                        <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                                        <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
                            <span class="n">IsosRes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cur</span><span class="p">)</span>
                    <span class="n">IsosCur</span> <span class="o">=</span> <span class="n">IsosRes</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">IsosCur</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">permutations</span><span class="p">:</span>
                            <span class="n">cur</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">()</span>
                            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
                                <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">permutations</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)]])</span>
                            <span class="n">IsosRes</span> <span class="o">=</span> <span class="n">IsosRes</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">cur</span><span class="p">])</span>
                    <span class="n">IsosCur</span> <span class="o">=</span> <span class="n">IsosRes</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">Iso</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sCur</span><span class="p">)</span>
                <span class="n">niso</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">Isos</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;number of isomorph choices&#39;</span><span class="p">,</span> <span class="n">niso</span><span class="p">)</span>
                <span class="n">v</span><span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">automorphismGroupSize</span><span class="o">//</span><span class="n">niso</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">withListing</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;isormorph choices&#39;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">Isos</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">ch</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Number of choices before : &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">Choices</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">Choices</span> <span class="o">=</span> <span class="n">Choices</span> <span class="o">-</span> <span class="n">Isos</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Number of choices after  : &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">Choices</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---- Global result ----&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Number of choices: &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">InChoices</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Number of orbits : &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">Iso</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Labelled representatives:&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">Iso</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">ch</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;                     Symmetry vector&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;stabilizer size  : &#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">automorphismGroupSize</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;frequency        : &#39;</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">orbits</span> <span class="o">=</span> <span class="n">Iso</span></div>


<div class="viewcode-block" id="Digraph.showOrbitsFromFile">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showOrbitsFromFile">[docs]</a>
    <span class="k">def</span> <span class="nf">showOrbitsFromFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">InFile</span><span class="p">,</span><span class="n">withListing</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prints the orbits of Choices along the automorphisms of</span>
<span class="sd">        the digraph self by reading in the 0-1 misset file format.</span>
<span class="sd">        See the :py:func:`digraphs.Digraph.readPerrinMisset` method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">reflections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reflections</span>
            <span class="n">permutations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">permutations</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No permutations or reflections defined yet !!&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Run self.automorphismGenerators()&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fi</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">InFile</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;File </span><span class="si">%s</span><span class="s1"> not found ?&#39;</span> <span class="o">%</span> <span class="n">InFile</span><span class="p">)</span>
            <span class="k">return</span>
        
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*--- Isomorphic reduction of choices&#39;</span><span class="p">)</span>
        <span class="n">Iso</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">misset</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
        <span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">fi</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="p">:</span> <span class="k">break</span>
            <span class="n">sCur</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">line</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;1&#39;</span><span class="p">:</span>
                    <span class="n">sCur</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">sCur</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">misset</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;current representative: &#39;</span><span class="p">,</span><span class="n">sCur</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;length   : &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">sCur</span><span class="p">))</span>
                <span class="n">IsosCur</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">sCur</span><span class="p">)])</span>
                <span class="n">Isos</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                <span class="k">while</span> <span class="n">IsosCur</span> <span class="o">!=</span> <span class="n">Isos</span><span class="p">:</span>
                    <span class="n">Isos</span> <span class="o">=</span> <span class="n">IsosCur</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">IsosRes</span> <span class="o">=</span> <span class="n">IsosCur</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">IsosCur</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">reflections</span><span class="p">:</span>
                            <span class="n">cur</span> <span class="o">=</span> <span class="n">s</span>
                            <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">reflections</span><span class="p">[</span><span class="n">g</span><span class="p">]:</span>
                                <span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">)</span> <span class="ow">and</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
                                    <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
                                    <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">cur</span> <span class="ow">and</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
                                        <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                                        <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
                            <span class="n">IsosRes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cur</span><span class="p">)</span>
                    <span class="n">IsosCur</span> <span class="o">=</span> <span class="n">IsosRes</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">IsosCur</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">permutations</span><span class="p">:</span>
                            <span class="n">cur</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">()</span>
                            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
                                <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">permutations</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]])</span>
                            <span class="n">IsosRes</span> <span class="o">=</span> <span class="n">IsosRes</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">cur</span><span class="p">])</span>
                    <span class="n">IsosCur</span> <span class="o">=</span> <span class="n">IsosRes</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">Iso</span> <span class="o">=</span> <span class="n">Iso</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">sCur</span><span class="p">)])</span>
                <span class="n">niso</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">Isos</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;number of isomorph choices&#39;</span><span class="p">,</span> <span class="n">niso</span><span class="p">)</span>
                <span class="n">v</span><span class="p">[((</span><span class="mi">2</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="p">)</span><span class="o">//</span><span class="n">niso</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">withListing</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;isormorph choices&#39;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">Isos</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">ch</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Number of choices before : &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">misset</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">misset</span> <span class="o">=</span> <span class="n">misset</span> <span class="o">|</span> <span class="n">Isos</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Number of choices after  : &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">misset</span><span class="p">))</span>
        <span class="n">fi</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---- Global result ----&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Labelled representatives:&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">Iso</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">ch</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Number of choices: &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">misset</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Number of orbits : &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">Iso</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;symmetry vector  : &#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;frequency        : &#39;</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">orbits</span> <span class="o">=</span> <span class="n">Iso</span></div>


    <span class="c1"># def _readPerrinMisset(self,file):</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     read method for 0-1-char-coded MISs from perrinMIS.c curd.dat file.</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     NoError = True</span>
    <span class="c1">#     try:</span>
    <span class="c1">#         f1 = open(file,&#39;r&#39;)</span>
    <span class="c1">#     except:</span>
    <span class="c1">#         NoError = False</span>
    <span class="c1">#         print(&#39;The input file: &#39;, file,&#39; could not be found ?&#39;)</span>

    <span class="c1">#     if NoError:</span>
    <span class="c1">#         actions = [x for x in self.actions]</span>
    <span class="c1">#         nl = 0</span>
    <span class="c1">#         misset = set()</span>
    <span class="c1">#         while 1:</span>
    <span class="c1">#             line = f1.readline()</span>
    <span class="c1">#             if not line: break</span>
    <span class="c1">#             nl += 1</span>
    <span class="c1">#             mis = set()</span>
    <span class="c1">#             for i in range(len(line)):</span>
    <span class="c1">#                 if ord(line[i]) == 1:</span>
    <span class="c1">#                     mis.add(actions[i])</span>
    <span class="c1">#             #print mis</span>
    <span class="c1">#             misset = misset | set([frozenset(mis)])</span>
    <span class="c1">#         #print &#39;Reading &#39; + str(nl) + &#39; MISs.&#39;</span>
    <span class="c1">#         self.misset = misset</span>

<div class="viewcode-block" id="Digraph.readPerrinMisset">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.readPerrinMisset">[docs]</a>
    <span class="k">def</span> <span class="nf">readPerrinMisset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">file</span><span class="o">=</span><span class="s1">&#39;curd.dat&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        read method for 0-1-char-coded MISs by default from the perrinMIS.c curd.dat result file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fi</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
            <span class="n">noError</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">noError</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The input file: &#39;</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span><span class="s1">&#39; could not be found ?&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">noError</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
            <span class="n">nl</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">misset</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">fi</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="p">:</span> <span class="k">break</span>
                <span class="n">nl</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">mis</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">line</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;1&#39;</span><span class="p">:</span>
                        <span class="n">mis</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="c1">#print mis</span>
                <span class="n">misset</span> <span class="o">=</span> <span class="n">misset</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">mis</span><span class="p">)])</span>
            <span class="n">fi</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="c1">#print &#39;Reading &#39; + str(nl) + &#39; MISs.&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">misset</span> <span class="o">=</span> <span class="n">misset</span></div>


<div class="viewcode-block" id="Digraph.computeOrbit">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeOrbit">[docs]</a>
    <span class="k">def</span> <span class="nf">computeOrbit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">choice</span><span class="p">,</span><span class="n">withListing</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders the set of isomorph copies of a choice following</span>
<span class="sd">        the automorphism of the digraph self</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">reflections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reflections</span>
            <span class="n">permutations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">permutations</span>
            <span class="k">if</span> <span class="n">withListing</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*- ----------------&quot;&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Compute orbit of choice: &#39;</span><span class="p">,</span><span class="n">choice</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;follwoing  automorphisms of digraph: &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Automorphism group size: &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">automorphismGroupSize</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Generators:&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Reflections: &#39;</span><span class="p">,</span> <span class="n">reflections</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Permutations: &#39;</span><span class="p">,</span> <span class="n">permutations</span><span class="p">)</span>
            <span class="n">IsosCur</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">choice</span><span class="p">])</span>
            <span class="n">Isos</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">while</span> <span class="n">IsosCur</span> <span class="o">!=</span> <span class="n">Isos</span><span class="p">:</span>
                <span class="n">Isos</span> <span class="o">=</span> <span class="n">IsosCur</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">IsosRes</span> <span class="o">=</span> <span class="n">IsosCur</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">IsosCur</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">reflections</span><span class="p">:</span>
                        <span class="n">cur</span> <span class="o">=</span> <span class="n">s</span>
                        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">reflections</span><span class="p">[</span><span class="n">g</span><span class="p">]:</span>
                            <span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">)</span> <span class="ow">and</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
                                <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
                                <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">cur</span> <span class="ow">and</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
                                    <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                                    <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
                        <span class="n">IsosRes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cur</span><span class="p">)</span>
                <span class="n">IsosCur</span> <span class="o">=</span> <span class="n">IsosRes</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">IsosCur</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">permutations</span><span class="p">:</span>
                        <span class="n">cur</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">()</span>
                        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
                            <span class="n">cur</span> <span class="o">=</span> <span class="n">cur</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">permutations</span><span class="p">[</span><span class="n">g</span><span class="p">][</span><span class="n">x</span><span class="p">]])</span>
                        <span class="n">IsosRes</span> <span class="o">=</span> <span class="n">IsosRes</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">cur</span><span class="p">])</span>
                <span class="n">IsosCur</span> <span class="o">=</span> <span class="n">IsosRes</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">withListing</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Orbit size: &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">Isos</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;List of isormorph choices&#39;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">Isos</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">ch</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">Isos</span>

        <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No permutations or reflections defined yet !!&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Run self.automorphismGenerators()&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Digraph.showActions">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showActions">[docs]</a>
    <span class="k">def</span> <span class="nf">showActions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        presentation methods for digraphs actions</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----- show digraphs actions --------------*&#39;</span><span class="p">)</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;key: &#39;</span><span class="p">,</span><span class="n">x</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  short name:&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;shortName&#39;</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  name:      &#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  comment:   &#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;comment&#39;</span><span class="p">])</span>
            <span class="nb">print</span><span class="p">()</span></div>


<div class="viewcode-block" id="Digraph.showShort">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showShort">[docs]</a>
    <span class="k">def</span> <span class="nf">showShort</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        concise presentation method for genuine digraphs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----- show short --------------*&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Digraph          :&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Actions          :&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Valuation domain :&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="p">()</span></div>


<div class="viewcode-block" id="Digraph.showAll">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showAll">[docs]</a>
    <span class="k">def</span> <span class="nf">showAll</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Detailed show method for genuine digraphs.&quot;&quot;&quot;</span> 
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----- show detail -------------*&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Digraph          :&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---- Actions ----*&#39;</span><span class="p">)</span>
        <span class="c1">#actionsList = [x for x in self.actions]</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="nb">frozenset</span><span class="p">):</span>
                <span class="n">actionsList</span> <span class="o">+=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">actionsList</span> <span class="o">+=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span>
        <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---- Characteristic valuation domain ----*&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showRelationTable</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showComponents</span><span class="p">()</span>
        <span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Neighborhoods:&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  Gamma     :&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">gamma</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="si">%s</span><span class="se">\&#39;</span><span class="s1">: in =&gt; </span><span class="si">%s</span><span class="s1">, out =&gt; </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  Not Gamma :&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">notGamma</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="si">%s</span><span class="se">\&#39;</span><span class="s1">: in =&gt; </span><span class="si">%s</span><span class="s1">, out =&gt; </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">notGamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">notGamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span></div>


<div class="viewcode-block" id="Digraph.showNeighborhoods">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showNeighborhoods">[docs]</a>
    <span class="k">def</span> <span class="nf">showNeighborhoods</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Lists the gamma and the notGamma function of self.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Neighborhoods:&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  Gamma     :&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">gamma</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="si">%s</span><span class="se">\&#39;</span><span class="s1">: in =&gt; </span><span class="si">%s</span><span class="s1">, out =&gt; </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  Not Gamma :&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">notGamma</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="si">%s</span><span class="se">\&#39;</span><span class="s1">: in =&gt; </span><span class="si">%s</span><span class="s1">, out =&gt; </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">notGamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">notGamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>        </div>


<div class="viewcode-block" id="Digraph.showRelation">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showRelation">[docs]</a>
    <span class="k">def</span> <span class="nf">showRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        prints the relation valuation in ##.## format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* ---- Relation -----&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="nb">frozenset</span><span class="p">):</span>
                <span class="n">actionsList</span> <span class="o">+=</span> <span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">],</span><span class="n">x</span><span class="p">)]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">actionsList</span> <span class="o">+=</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span><span class="n">x</span><span class="p">)]</span>
        <span class="c1">#actionsList = [x for x in self.actions]</span>
        <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">hasIntegerValuation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;hasIntegerValuation&#39;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">hasIntegerValuation</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">hasIntegerValuation</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;, &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;) = &#39;</span><span class="o">+</span><span class="s1">&#39; </span><span class="si">% .2f</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;, &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;) = &#39;</span><span class="o">+</span><span class="s1">&#39; </span><span class="si">%d</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]))</span>

        <span class="nb">print</span><span class="p">()</span></div>


<div class="viewcode-block" id="Digraph.showRelationMap">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showRelationMap">[docs]</a>
    <span class="k">def</span> <span class="nf">showRelationMap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">symbols</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">rankingRule</span><span class="o">=</span><span class="s2">&quot;Copeland&quot;</span><span class="p">,</span><span class="n">fromIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">toIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">actionsList</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prints on the console, in text map format, the location of</span>
<span class="sd">        certainly validated and certainly invalidated outranking situations.</span>

<span class="sd">        By default, symbols = {&#39;max&#39;:&#39;&#39;,&#39;positive&#39;: &#39;+&#39;, &#39;median&#39;: &#39; &#39;,</span>
<span class="sd">                               &#39;negative&#39;: &#39;-&#39;, &#39;min&#39;: &#39;&#39;}</span>

<span class="sd">        The default ordering of the output is following the Copeland ranking rule</span>
<span class="sd">        from best to worst actions. Further available ranking rule is the &#39;NetFlows&#39; net flows rule.</span>
<span class="sd">        </span>

<span class="sd">        Example::</span>

<span class="sd">            &gt;&gt;&gt; from outrankingDigraphs import *</span>
<span class="sd">            &gt;&gt;&gt; t = RandomCBPerformanceTableau(numberOfActions=25,seed=1)</span>
<span class="sd">            &gt;&gt;&gt; g = BipolarOutrankingDigraph(t,Normalized=True)</span>
<span class="sd">            &gt;&gt;&gt; gcd = ~(-g)  # strict outranking relation</span>
<span class="sd">            &gt;&gt;&gt; gcd.showRelationMap(rankingRule=&quot;NetFlows&quot;)</span>
<span class="sd">             -   ++++++++  +++++++</span>
<span class="sd">            - -   + +++++ ++++++++</span>
<span class="sd">            +   + ++  +++++++++</span>
<span class="sd">            -   ++ - ++++-+++++++++</span>
<span class="sd">               - - - ++- - + -++-</span>
<span class="sd">            -----  -      --+  -</span>
<span class="sd">            ----    --+-+++++++++++++</span>
<span class="sd">            -- --+- --++ ++ +++-+-</span>
<span class="sd">            ----  -  -+-- ++--+++++ +</span>
<span class="sd">            ----- ++- --- +---++++ +</span>
<span class="sd">            -- -- ---+ -++-+++-+ +-++</span>
<span class="sd">            -- -----+  + +-++-+ -  +</span>
<span class="sd">            ---- ---+-- ++--++++ - +</span>
<span class="sd">              ----  --- -  --+ --</span>
<span class="sd">             ---------+--+ ----- +-</span>
<span class="sd">            ----- ---+- + ---+++ +</span>
<span class="sd">            ------+--- ++ -++--+++</span>
<span class="sd">            -------- ---+-+- ++---+ </span>
<span class="sd">            ---------------- --++ </span>
<span class="sd">            ------------------ --+ </span>
<span class="sd">            -- ---- --++  ++-+</span>
<span class="sd">            ------------------- -  </span>
<span class="sd">            ----+-+----+---+ +</span>
<span class="sd">            --- - ----+  -</span>
<span class="sd">            -------------  - -- </span>
<span class="sd">            Ranking rule: NetFlows</span>
<span class="sd">            &gt;&gt;&gt; </span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">symbols</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">symbols</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;positive&#39;</span><span class="p">:</span> <span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="s1">&#39;median&#39;</span><span class="p">:</span> <span class="s1">&#39; &#39;</span><span class="p">,</span>
                       <span class="s1">&#39;negative&#39;</span><span class="p">:</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">actionsList</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">rankingRule</span> <span class="o">==</span> <span class="s2">&quot;Copeland&quot;</span><span class="p">:</span>
                <span class="n">ranking</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeCopelandRanking</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">rankingRule</span> <span class="o">==</span> <span class="s2">&quot;NetFlows&quot;</span><span class="p">:</span>
                <span class="n">ranking</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeNetFlowsRanking</span><span class="p">()</span>
            <span class="c1"># elif rankingRule == &quot;RankedPairs&quot;:</span>
            <span class="c1">#     ranking = self.computeRankedPairsRanking()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">rankingRule</span> <span class="o">=</span> <span class="s2">&quot;Alphabetic&quot;</span>
                <span class="n">ranking</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
                <span class="n">ranking</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ranking</span> <span class="o">=</span> <span class="n">actionsList</span>
        <span class="k">if</span> <span class="n">fromIndex</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fromIndex</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">toIndex</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">toIndex</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ranking</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ranking</span><span class="p">[</span><span class="n">fromIndex</span><span class="p">:</span><span class="n">toIndex</span><span class="p">]:</span>
            <span class="n">rx</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="n">pictStr</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ranking</span><span class="p">[</span><span class="n">fromIndex</span><span class="p">:</span><span class="n">toIndex</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="n">Max</span><span class="p">:</span>
                    <span class="n">pictStr</span> <span class="o">+=</span> <span class="n">symbols</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
                <span class="k">elif</span> <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="n">Min</span><span class="p">:</span>
                    <span class="n">pictStr</span> <span class="o">+=</span> <span class="n">symbols</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
                <span class="k">elif</span> <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">pictStr</span> <span class="o">+=</span> <span class="n">symbols</span><span class="p">[</span><span class="s1">&#39;positive&#39;</span><span class="p">]</span>
                <span class="k">elif</span> <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span><span class="n">Med</span><span class="p">:</span>
                    <span class="n">pictStr</span> <span class="o">+=</span> <span class="n">symbols</span><span class="p">[</span><span class="s1">&#39;median&#39;</span><span class="p">]</span>
                <span class="k">elif</span> <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">pictStr</span> <span class="o">+=</span> <span class="n">symbols</span><span class="p">[</span><span class="s1">&#39;negative&#39;</span><span class="p">]</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">pictStr</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">actionsList</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Ranking rule: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">rankingRule</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;List of actions provided.&#39;</span><span class="p">)</span></div>

      

<div class="viewcode-block" id="Digraph.showRelationTable">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showRelationTable">[docs]</a>
    <span class="k">def</span> <span class="nf">showRelationTable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Sorted</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">rankingRule</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">IntegerValues</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">actionsSubset</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">relation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">ndigits</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                          <span class="n">ReflexiveTerms</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                          <span class="n">fromIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">toIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prints the relation valuation in actions X actions table format.</span>
<span class="sd">        Copeland and NetFlows rankings may be used.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">actionsSubset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">rankingRule</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">rankingRule</span> <span class="o">==</span> <span class="s1">&#39;Copeland&#39;</span><span class="p">:</span>
                    <span class="n">computeRanking</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeCopelandRanking</span>
                <span class="k">elif</span> <span class="n">rankingRule</span> <span class="o">==</span> <span class="s1">&#39;NetFlows&#39;</span><span class="p">:</span>
                    <span class="n">computeRanking</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeNetFlowsRanking</span>
                <span class="n">actions</span> <span class="o">=</span> <span class="n">computeRanking</span><span class="p">()</span>
                <span class="n">Sorted</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="n">actionsSubset</span>
        <span class="k">if</span> <span class="n">relation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* ---- Relation Table -----</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; S   | &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="n">actionKeys</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">fromIndex</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fromIndex</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">toIndex</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">toIndex</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionKeys</span><span class="p">)</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionKeys</span><span class="p">[</span><span class="n">fromIndex</span><span class="p">:</span><span class="n">toIndex</span><span class="p">]:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="nb">frozenset</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">actionsList</span> <span class="o">+=</span> <span class="p">[(</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;shortName&#39;</span><span class="p">],</span><span class="n">x</span><span class="p">)]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">actionsList</span> <span class="o">+=</span> <span class="p">[(</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">],</span><span class="n">x</span><span class="p">)]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">actionsList</span> <span class="o">+=</span> <span class="p">[(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="n">x</span><span class="p">)]</span>
        <span class="k">if</span> <span class="n">Sorted</span><span class="p">:</span>
            <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="c1">#print actionsList</span>
        <span class="c1">#actionsList.sort()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">hasIntegerValuation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;hasIntegerValuation&#39;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">hasIntegerValuation</span> <span class="o">=</span> <span class="n">IntegerValues</span>

        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="o">+</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;&#39;</span><span class="se">\t</span><span class="s2"> &quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">------|-------------------------------------------&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; &#39;&quot;</span><span class="o">+</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;&#39; | &quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">hasIntegerValuation</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="se">\t</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%%</span><span class="s1">2.</span><span class="si">%d</span><span class="s1">f</span><span class="se">\t</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ndigits</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">formatString</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">ReflexiveTerms</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">hasIntegerValuation</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="se">\t</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%%</span><span class="s1">2.</span><span class="si">%d</span><span class="s1">f</span><span class="se">\t</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ndigits</span>
                            <span class="nb">print</span><span class="p">(</span><span class="n">formatString</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>  
                        <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39; - </span><span class="se">\t</span><span class="s1">&#39;</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">formatString</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">hasIntegerValuation</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Valuation domain: [</span><span class="si">%d</span><span class="s1">;</span><span class="si">%+d</span><span class="s1">]&#39;</span><span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">],</span>
                                                 <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;Valuation domain: [</span><span class="si">%%</span><span class="s1">2.</span><span class="si">%d</span><span class="s1">f;</span><span class="si">%%</span><span class="s1">2.</span><span class="si">%d</span><span class="s1">f]&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ndigits</span><span class="p">,</span><span class="n">ndigits</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span> <span class="n">formatString</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">],</span>
                                   <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]))</span>
        <span class="k">if</span> <span class="n">rankingRule</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;RankingRule = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">rankingRule</span><span class="p">)</span></div>

            
<div class="viewcode-block" id="Digraph.showHTMLRelationMap">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showHTMLRelationMap">[docs]</a>
    <span class="k">def</span> <span class="nf">showHTMLRelationMap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">actionsList</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">rankingRule</span><span class="o">=</span><span class="s1">&#39;Copeland&#39;</span><span class="p">,</span>
                            <span class="n">Colored</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                            <span class="n">tableTitle</span><span class="o">=</span><span class="s1">&#39;Relation Map&#39;</span><span class="p">,</span>
                            <span class="n">relationName</span><span class="o">=</span><span class="s1">&#39;r(x S y)&#39;</span><span class="p">,</span>
                            <span class="n">symbols</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;+&#39;</span><span class="p">,</span><span class="s1">&#39;&amp;middot;&#39;</span><span class="p">,</span><span class="s1">&#39;&amp;nbsp;&#39;</span><span class="p">,</span><span class="s1">&#39;&amp;#150;&#39;</span><span class="p">,</span><span class="s1">&#39;&amp;#151&#39;</span><span class="p">],</span>
                            <span class="n">fromIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">toIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">htmlFileName</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Launches a browser window with the colored relation map of self.</span>
<span class="sd">        See corresponding Digraph.showRelationMap() method.</span>

<span class="sd">        When *htmlFileName* parameter is set to a string value, a html file</span>
<span class="sd">        with that name will be stored in the current working directory.</span>

<span class="sd">        By default, a temporary file named: tmp*.html will be generated</span>
<span class="sd">        instead in the current working directory.</span>

<span class="sd">        Example::</span>

<span class="sd">            &gt;&gt;&gt; from outrankingDigraphs import *</span>
<span class="sd">            &gt;&gt;&gt; t = RandomCBPerformanceTableau(numberOfActions=25,seed=1)</span>
<span class="sd">            &gt;&gt;&gt; g = BipolarOutrankingDigraph(t,Normalized=True)</span>
<span class="sd">            &gt;&gt;&gt; gcd = ~(-g)  # strict outranking relation</span>
<span class="sd">            &gt;&gt;&gt; gcd.showHTMLRelationMap(rankingRule=&quot;NetFlows&quot;)</span>
<span class="sd">            </span>
<span class="sd">        .. image:: relationMap.png</span>
<span class="sd">           :alt: Browser view of a relation map</span>
<span class="sd">           :width: 600 px</span>
<span class="sd">           :align: center</span>
<span class="sd">    </span>
<span class="sd">   </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">webbrowser</span>
        <span class="k">if</span> <span class="n">htmlFileName</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">tempfile</span> <span class="kn">import</span> <span class="n">NamedTemporaryFile</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="p">(</span><span class="n">NamedTemporaryFile</span><span class="p">(</span><span class="n">suffix</span><span class="o">=</span><span class="s1">&#39;.html&#39;</span><span class="p">,</span><span class="n">delete</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="nb">dir</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">getcwd</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="n">getcwd</span><span class="p">()</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">htmlFileName</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_htmlRelationMap</span><span class="p">(</span><span class="n">actionsSubset</span><span class="o">=</span><span class="n">actionsList</span><span class="p">,</span>
                                      <span class="n">rankingRule</span><span class="o">=</span><span class="n">rankingRule</span><span class="p">,</span>
                                        <span class="n">Colored</span><span class="o">=</span><span class="n">Colored</span><span class="p">,</span>
                                        <span class="n">tableTitle</span><span class="o">=</span><span class="n">tableTitle</span><span class="p">,</span>
                                        <span class="n">symbols</span><span class="o">=</span><span class="n">symbols</span><span class="p">,</span>
                                        <span class="n">ContentCentered</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                        <span class="n">relationName</span><span class="o">=</span><span class="n">relationName</span><span class="p">,</span>
                                       <span class="n">fromIndex</span><span class="o">=</span><span class="n">fromIndex</span><span class="p">,</span>
                                       <span class="n">toIndex</span><span class="o">=</span><span class="n">toIndex</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;file://&#39;</span><span class="o">+</span><span class="n">fileName</span>
        <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">new</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span></div>

        
    <span class="k">def</span> <span class="nf">_htmlRelationMap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tableTitle</span><span class="o">=</span><span class="s1">&#39;Relation Map&#39;</span><span class="p">,</span>
                          <span class="n">relationName</span><span class="o">=</span><span class="s1">&#39;r(x R y)&#39;</span><span class="p">,</span>
                          <span class="n">actionsSubset</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">rankingRule</span><span class="o">=</span><span class="s1">&#39;Copeland&#39;</span><span class="p">,</span>
                          <span class="n">symbols</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;+&#39;</span><span class="p">,</span><span class="s1">&#39;&amp;middot;&#39;</span><span class="p">,</span><span class="s1">&#39;&amp;nbsp;&#39;</span><span class="p">,</span><span class="s1">&#39;-&#39;</span><span class="p">,</span><span class="s1">&#39;_&#39;</span><span class="p">],</span>
                          <span class="n">Colored</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                          <span class="n">ContentCentered</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">fromIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">toIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders the relation map in actions X actions html table format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="c1"># construct ranking and actionsList</span>
        <span class="k">if</span> <span class="n">actionsSubset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ranking</span> <span class="o">=</span> <span class="n">actionsSubset</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">rankingRule</span> <span class="o">==</span> <span class="s2">&quot;Copeland&quot;</span><span class="p">:</span>
                <span class="n">ranking</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeCopelandRanking</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">rankingRule</span> <span class="o">==</span> <span class="s2">&quot;NetFlows&quot;</span><span class="p">:</span>
                <span class="n">ranking</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeNetFlowsRanking</span><span class="p">()</span>
            <span class="c1"># elif rankingRule == &quot;RankedPairs&quot;:</span>
            <span class="c1">#     ranking = self.computeRankedPairsRanking()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">rankingRule</span> <span class="o">=</span> <span class="s2">&quot;Alphabetic&quot;</span>
                <span class="n">ranking</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
                <span class="n">ranking</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">fromIndex</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fromIndex</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">toIndex</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">toIndex</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ranking</span><span class="p">)</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ranking</span><span class="p">[</span><span class="n">fromIndex</span><span class="p">:</span><span class="n">toIndex</span><span class="p">]:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="nb">frozenset</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">actionsList</span> <span class="o">+=</span> <span class="p">[(</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;shortName&#39;</span><span class="p">],</span><span class="n">x</span><span class="p">)]</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="n">actionsList</span> <span class="o">+=</span> <span class="p">[(</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">],</span><span class="n">x</span><span class="p">)]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">actionsList</span> <span class="o">+=</span> <span class="p">[(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))]</span>
        <span class="c1"># construct html text</span>
        <span class="n">s</span>  <span class="o">=</span> <span class="s1">&#39;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;meta charset=&quot;UTF-8&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;title&gt;</span><span class="si">%s</span><span class="s1">&lt;/title&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="s1">&#39;Digraph3 relation map&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;style type=&quot;text/css&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="n">ContentCentered</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;td {text-align: center;}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;td.na {color: rgb(192,192,192);}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/style&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/head&gt;</span><span class="se">\n</span><span class="s1">&lt;body&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h1&gt;</span><span class="si">%s</span><span class="s1">&lt;/h1&gt;&#39;</span> <span class="o">%</span> <span class="n">tableTitle</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h2&gt;Ranking rule: </span><span class="si">%s</span><span class="s1">&lt;/h2&gt;&#39;</span> <span class="o">%</span> <span class="n">rankingRule</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;table border=&quot;0&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="n">Colored</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr bgcolor=&quot;#9acd32&quot;&gt;&lt;th&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">relationName</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;th&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="n">relationName</span>

        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Colored</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;th bgcolor=&quot;#FFF79B&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;th&gt;</span><span class="si">%s</span><span class="s1">&lt;/th</span><span class="se">\n</span><span class="s1">&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&#39;</span>
            <span class="k">if</span> <span class="n">Colored</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;th bgcolor=&quot;#FFF79B&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;th&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">Colored</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">==</span> <span class="n">Max</span><span class="p">:</span>
                        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td bgcolor=&quot;#66ff66&quot;&gt;&lt;b&gt;</span><span class="si">%s</span><span class="s1">&lt;/b&gt;&lt;/td&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">symbols</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td bgcolor=&quot;#ddffdd&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="n">symbols</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">==</span> <span class="n">Min</span><span class="p">:</span>
                        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td bgcolor=&quot;#ff6666&quot;&gt;&lt;b&gt;</span><span class="si">%s</span><span class="s1">&lt;/b&gt;&lt;/td</span><span class="se">\n</span><span class="s1">&gt;&#39;</span> <span class="o">%</span> <span class="n">symbols</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td bgcolor=&quot;#ffdddd&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">symbols</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1">#s += &#39;&lt;td bgcolor=&quot;#ffffff&quot;&gt;%s&lt;/td&gt;\n&#39; % symbols[2]</span>
                        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td class=&quot;na&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">symbols</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">==</span> <span class="n">Max</span><span class="p">:</span>
                        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&lt;b&gt;</span><span class="si">%s</span><span class="s1">&lt;/b&gt;&lt;/td&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>  <span class="o">%</span> <span class="n">symbols</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">symbols</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">==</span> <span class="n">Min</span><span class="p">:</span>
                        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&lt;b&gt;</span><span class="si">%s</span><span class="s1">&lt;/b&gt;&lt;/td&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">symbols</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">symbols</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">symbols</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/table&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="c1"># legend</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;span style=&quot;font-size: 75%&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;table border=&quot;1&quot;&gt;&lt;tr&gt;&lt;th colspan=&quot;2&quot;&gt;&lt;i&gt;Semantics&lt;/i&gt;&lt;/th&gt;&lt;/tr&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="n">Colored</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;td bgcolor=&quot;#66ff66&quot; align=&quot;center&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;certainly valid&lt;/td&gt;&lt;/tr&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">symbols</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;td bgcolor=&quot;#ddffdd&quot; align=&quot;center&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;valid&lt;/td&gt;&lt;/tr&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">symbols</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;indeterminate&lt;/td&gt;&lt;/tr&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">symbols</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;td bgcolor=&quot;#ffdddd&quot; align=&quot;center&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;invalid&lt;/td&gt;&lt;/tr&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">symbols</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;td bgcolor=&quot;#ff6666&quot; align=&quot;center&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;certainly invalid&lt;/td&gt;&lt;/tr&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">symbols</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/table&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;td align=&quot;center&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;certainly valid&lt;/td&gt;&lt;/tr&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">symbols</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;td align=&quot;center&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;valid&lt;/td&gt;&lt;/tr&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">symbols</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;td align=&quot;center&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;indeterminate&lt;/td&gt;&lt;/tr&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">symbols</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;td align=&quot;center&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;invalid&lt;/td&gt;&lt;/tr&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">symbols</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;td align=&quot;center&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;td&gt;certainly invalid&lt;/td&gt;&lt;/tr&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">symbols</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/table&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/span&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="c1"># html footer</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/body&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/html&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">s</span>

<div class="viewcode-block" id="Digraph.showHTMLRelationHeatmap">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showHTMLRelationHeatmap">[docs]</a>
    <span class="k">def</span> <span class="nf">showHTMLRelationHeatmap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">actionsList</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">rankingRule</span><span class="o">=</span><span class="s1">&#39;NetFlows&#39;</span><span class="p">,</span>
                            <span class="n">colorLevels</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
                            <span class="n">tableTitle</span><span class="o">=</span><span class="s1">&#39;Relation Heatmap&#39;</span><span class="p">,</span>
                            <span class="n">relationName</span><span class="o">=</span><span class="s1">&#39;r(x S y)&#39;</span><span class="p">,</span>
                            <span class="n">ndigits</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                            <span class="n">fromIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">toIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="n">htmlFileName</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                            <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Launches a browser window with the colored relation map of self.</span>
<span class="sd">        </span>
<span class="sd">        See corresponding :py:class:`~digraphs.Digraph.showHTMLRelationMap` method.</span>

<span class="sd">        The *colorLevels* parameter may be set to 3, 5, 7 (default) or 9.</span>

<span class="sd">        When the *actionsList* parameter is *None* (default), the digraphs actions list may be ranked with the *rankingRule* parameter set to the &#39;Copeland&#39; (default) or to the &#39;Netlows&#39; ranking rule.</span>

<span class="sd">        When the *htmlFileName* parameter is set to a string value &#39;xxx&#39;, a html file named &#39;xxx.html&#39; will be generated in the current working directory. Otherwise, a temporary file named &#39;tmp*.html&#39; will be generated there.</span>

<span class="sd">        Example::</span>

<span class="sd">            &gt;&gt;&gt; from outrankingDigraphs import *</span>
<span class="sd">            &gt;&gt;&gt; t = RandomCBPerformanceTableau(numberOfActions=25,seed=1)</span>
<span class="sd">            &gt;&gt;&gt; g = BipolarOutrankingDigraph(t,ndigits=2)</span>
<span class="sd">            &gt;&gt;&gt; gcd = ~(-g)  # strict outranking relation</span>
<span class="sd">            &gt;&gt;&gt; gcd.showHTMLRelationHeatmap(colorLevels=7,ndigits=2)</span>
<span class="sd">            </span>
<span class="sd">        .. image:: relationHeatmap.png</span>
<span class="sd">           :alt: Browser view of a relation map</span>
<span class="sd">           :width: 600 px</span>
<span class="sd">           :align: center  </span>
<span class="sd">   </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">webbrowser</span>
        <span class="k">if</span> <span class="n">htmlFileName</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">tempfile</span> <span class="kn">import</span> <span class="n">NamedTemporaryFile</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="p">(</span><span class="n">NamedTemporaryFile</span><span class="p">(</span><span class="n">suffix</span><span class="o">=</span><span class="s1">&#39;.html&#39;</span><span class="p">,</span><span class="n">delete</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="nb">dir</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">getcwd</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="n">getcwd</span><span class="p">()</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">htmlFileName</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_htmlRelationHeatmap</span><span class="p">(</span><span class="n">actionsSubset</span><span class="o">=</span><span class="n">actionsList</span><span class="p">,</span>
                                      <span class="n">rankingRule</span><span class="o">=</span><span class="n">rankingRule</span><span class="p">,</span>
                                        <span class="n">colorLevels</span><span class="o">=</span><span class="n">colorLevels</span><span class="p">,</span>
                                        <span class="n">tableTitle</span><span class="o">=</span><span class="n">tableTitle</span><span class="p">,</span>
                                           <span class="n">ndigits</span><span class="o">=</span><span class="n">ndigits</span><span class="p">,</span>
                                        <span class="n">ContentCentered</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                        <span class="n">relationName</span><span class="o">=</span><span class="n">relationName</span><span class="p">,</span>
                                       <span class="n">fromIndex</span><span class="o">=</span><span class="n">fromIndex</span><span class="p">,</span>
                                       <span class="n">toIndex</span><span class="o">=</span><span class="n">toIndex</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;file://&#39;</span><span class="o">+</span><span class="n">fileName</span>
        <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">new</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span></div>

        
    <span class="k">def</span> <span class="nf">_htmlRelationHeatmap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tableTitle</span><span class="o">=</span><span class="s1">&#39;Relation Heatmap&#39;</span><span class="p">,</span>
                          <span class="n">relationName</span><span class="o">=</span><span class="s1">&#39;r(x R y)&#39;</span><span class="p">,</span>
                          <span class="n">actionsSubset</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">rankingRule</span><span class="o">=</span><span class="s1">&#39;Copeland&#39;</span><span class="p">,</span>
                          <span class="n">colorLevels</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
                          <span class="n">ContentCentered</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                             <span class="n">ndigits</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                          <span class="n">fromIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                             <span class="n">toIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                             <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders the relation map in actions X actions html table format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="c1"># set colo palette</span>
        <span class="n">brewerRdYlGn9Colors</span> <span class="o">=</span> <span class="p">[(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.125&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#D53E4F&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.25&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#F46D43&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.375&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#FDAE61&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.499999&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#FEE08B&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.5&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#FFFFFF&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.625&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#D9EF8B&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.75&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#A6D96A&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.875&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#65BD63&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.000&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#1A9850&quot;&#39;</span><span class="p">)]</span>
        <span class="c1"># _brewerRdYlGn7Colors = [</span>
        <span class="c1">#                        (Decimal(&#39;0.1429&#39;),&#39;&quot;#F46D43&quot;&#39;),</span>
        <span class="c1">#                        (Decimal(&#39;0.2857&#39;),&#39;&quot;#FDAE61&quot;&#39;),</span>
        <span class="c1">#                        (Decimal(&#39;0.4286&#39;),&#39;&quot;#FEE08B&quot;&#39;),</span>
        <span class="c1">#                        (Decimal(&#39;0.5714&#39;),&#39;&quot;#FFFFBF&quot;&#39;),</span>
        <span class="c1">#                        (Decimal(&#39;0.7143&#39;),&#39;&quot;#D9EF8B&quot;&#39;),</span>
        <span class="c1">#                        (Decimal(&#39;0.8571&#39;),&#39;&quot;#A6D96A&quot;&#39;),</span>
        <span class="c1">#                        (Decimal(&#39;1.0000&#39;),&#39;&quot;#65BD63&quot;&#39;)</span>
        <span class="c1">#                        ]</span>
        <span class="n">brewerRdYlGn7Colors</span> <span class="o">=</span> <span class="p">[</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.166666&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#F46D43&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.333333&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#FDAE61&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.499999&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#FEE08B&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.5&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#FFFFFF&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.666666&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#D9EF8B&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.833333&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#A6D96A&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0000&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#65BD63&quot;&#39;</span><span class="p">)</span>
                               <span class="p">]</span>
        <span class="n">brewerRdYlGn5Colors</span> <span class="o">=</span> <span class="p">[</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.25&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#FDAE61&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.499999&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#FEE08B&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.5&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#FFFFFF&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.75&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#D9EF8B&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#A6D96A&quot;&#39;</span><span class="p">)</span>
                               <span class="p">]</span>
        <span class="n">brewerRdYlGn3Colors</span> <span class="o">=</span> <span class="p">[</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.49999&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#FEE08B&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.5&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#FFFFFF&quot;&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">),</span><span class="s1">&#39;&quot;#D9EF8B&quot;&#39;</span><span class="p">),</span>
                               <span class="p">]</span>
        <span class="k">if</span> <span class="n">colorLevels</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">colorLevels</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="k">if</span> <span class="n">colorLevels</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
            <span class="n">colorPalette</span> <span class="o">=</span> <span class="n">brewerRdYlGn7Colors</span>
        <span class="k">elif</span> <span class="n">colorLevels</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span>
            <span class="n">colorPalette</span> <span class="o">=</span> <span class="n">brewerRdYlGn9Colors</span>
        <span class="k">elif</span> <span class="n">colorLevels</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">colorPalette</span> <span class="o">=</span> <span class="n">brewerRdYlGn5Colors</span>
        <span class="k">elif</span> <span class="n">colorLevels</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">colorPalette</span> <span class="o">=</span> <span class="n">brewerRdYlGn3Colors</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">colorPalette</span> <span class="o">=</span> <span class="n">brewerRdYlGn5Colors</span>
        <span class="n">nc</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">colorPalette</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">colorPalette</span><span class="p">)</span>
        <span class="n">backGroundColor</span>   <span class="o">=</span> <span class="s1">&#39;&quot;#FFFFFF&quot;&#39;</span>
        <span class="c1">#naColor           = &#39;&quot;#FFFFFF&quot;&#39;</span>
        <span class="n">columnHeaderColor</span> <span class="o">=</span> <span class="s1">&#39;&quot;#CCFFFF&quot;&#39;</span>
        <span class="n">rowHeaderColor</span>    <span class="o">=</span> <span class="s1">&#39;&quot;#FFFFFF&quot;&#39;</span>

        <span class="c1"># construct ranking and actionsList</span>
        <span class="k">if</span> <span class="n">actionsSubset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ranking</span> <span class="o">=</span> <span class="n">actionsSubset</span>
            <span class="n">rankingRule</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">rankingRule</span> <span class="o">==</span> <span class="s2">&quot;Copeland&quot;</span><span class="p">:</span>
                <span class="n">ranking</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeCopelandRanking</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">rankingRule</span> <span class="o">==</span> <span class="s2">&quot;NetFlows&quot;</span><span class="p">:</span>
                <span class="n">ranking</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeNetFlowsRanking</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">rankingRule</span> <span class="o">==</span> <span class="s1">&#39;Kohler&#39;</span><span class="p">:</span>
                <span class="n">ranking</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeKohlerRanking</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">rankingRule</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">ranking</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
                <span class="c1">#ranking.sort()</span>
        <span class="k">if</span> <span class="n">fromIndex</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fromIndex</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">toIndex</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">toIndex</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ranking</span><span class="p">)</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ranking</span><span class="p">[</span><span class="n">fromIndex</span><span class="p">:</span><span class="n">toIndex</span><span class="p">]:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="nb">frozenset</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">actionsList</span> <span class="o">+=</span> <span class="p">[(</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;shortName&#39;</span><span class="p">],</span><span class="n">x</span><span class="p">)]</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="n">actionsList</span> <span class="o">+=</span> <span class="p">[(</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">],</span><span class="n">x</span><span class="p">)]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">actionsList</span> <span class="o">+=</span> <span class="p">[(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))]</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span>
        <span class="c1"># compute relation characteristic colors</span>
        <span class="n">amplitude</span> <span class="o">=</span> <span class="n">Max</span> <span class="o">-</span> <span class="n">Min</span>
        <span class="n">relationColor</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relationColor</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="n">rxy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">-</span> <span class="n">Min</span>
                <span class="n">xych</span> <span class="o">=</span> <span class="n">rxy</span><span class="o">/</span><span class="n">amplitude</span>
                <span class="k">for</span> <span class="n">cl</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nc</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">xych</span> <span class="o">&lt;=</span> <span class="n">colorPalette</span><span class="p">[</span><span class="n">cl</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
                        <span class="n">relationColor</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">colorPalette</span><span class="p">[</span><span class="n">cl</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">break</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">relationColor</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">colorPalette</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                        
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">rxy</span><span class="p">,</span><span class="n">xych</span><span class="p">,</span><span class="n">relationColor</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
        <span class="c1"># construct html text</span>
        <span class="n">html</span> <span class="o">=</span> <span class="s1">&#39;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;meta charset=&quot;UTF-8&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;title&gt;</span><span class="si">%s</span><span class="s1">&lt;/title&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="s1">&#39;Digraph3 relation map&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;style type=&quot;text/css&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="n">ContentCentered</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;td {text-align: center;}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;td.na {color: rgb(192,192,192);}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/style&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/head&gt;</span><span class="se">\n</span><span class="s1">&lt;body&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h1&gt;</span><span class="si">%s</span><span class="s1">&lt;/h1&gt;&#39;</span> <span class="o">%</span> <span class="n">tableTitle</span>
        <span class="k">if</span> <span class="n">rankingRule</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h2&gt;Ranking rule: </span><span class="si">%s</span><span class="s1">&lt;/h2&gt;&#39;</span> <span class="o">%</span> <span class="n">rankingRule</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;table border=&quot;0&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr bgcolor=&quot;#9acd32&quot;&gt;&lt;th&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">relationName</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;th bgcolor=&quot;#FFF79B&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">xKey</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&#39;</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;th bgcolor=&quot;#FFF79B&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="n">yKey</span> <span class="o">=</span> <span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">xKey</span><span class="p">][</span><span class="n">yKey</span><span class="p">],</span><span class="n">relationColor</span><span class="p">[</span><span class="n">xKey</span><span class="p">][</span><span class="n">yKey</span><span class="p">])</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">xKey</span><span class="p">][</span><span class="n">yKey</span><span class="p">]</span> <span class="o">!=</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;&lt;td bgcolor=</span><span class="si">%s</span><span class="s1"> align=&quot;right&quot;&gt;</span><span class="si">%%</span><span class="s1">+ .</span><span class="si">%d</span><span class="s1">f&lt;/td&gt;&#39;</span> \
                                                <span class="o">%</span> <span class="p">(</span><span class="n">relationColor</span><span class="p">[</span><span class="n">xKey</span><span class="p">][</span><span class="n">yKey</span><span class="p">],</span><span class="n">ndigits</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;&lt;td align=&quot;right&quot;&gt;</span><span class="si">%%</span><span class="s1">+ .</span><span class="si">%d</span><span class="s1">f&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ndigits</span><span class="p">)</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="n">formatString</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">xKey</span><span class="p">][</span><span class="n">yKey</span><span class="p">])</span>
                    
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/table&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="c1"># legend</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;table style=&quot;background-color:</span><span class="si">%s</span><span class="s1">;&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">backGroundColor</span><span class="p">)</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr bgcolor=</span><span class="si">%s</span><span class="s1">&gt;&lt;td&gt;Valuation domain&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">backGroundColor</span><span class="p">)</span>
        <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;&lt;td&gt;[</span><span class="si">%%</span><span class="s1"> .</span><span class="si">%d</span><span class="s1">f;&lt;/td&gt;&lt;td&gt;</span><span class="si">%%</span><span class="s1"> .</span><span class="si">%d</span><span class="s1">f]&lt;/td&gt;&lt;/tr&gt;&#39;</span> \
                                            <span class="o">%</span> <span class="p">(</span><span class="n">ndigits</span><span class="p">,</span><span class="n">ndigits</span><span class="p">)</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="n">formatString</span> <span class="o">%</span> <span class="p">(</span><span class="n">Min</span><span class="p">,</span><span class="n">Max</span><span class="p">)</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/table&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;b&gt;Color legend: &lt;/b&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;table style=&quot;background-color:</span><span class="si">%s</span><span class="s1">;&quot; border=&quot;1&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">backGroundColor</span><span class="p">)</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr bgcolor=</span><span class="si">%s</span><span class="s1">&gt;&lt;td&gt;Levels&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">backGroundColor</span><span class="p">)</span>
        <span class="c1">#mnc = (nc+1)//2</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">nc</span><span class="p">):</span>
            <span class="c1"># if col == (mnc-1):</span>
            <span class="c1">#     html += &#39;&lt;td&gt;&amp;nbsp;%.2f&lt;/td&gt;&#39; % Decimal(&#39;0&#39;)</span>
            <span class="k">if</span> <span class="n">col</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;&lt;td bgcolor=</span><span class="si">%%</span><span class="s1">s&gt;[</span><span class="si">%%</span><span class="s1">+ .</span><span class="si">%d</span><span class="s1">f;</span><span class="si">%%</span><span class="s1">+ .</span><span class="si">%d</span><span class="s1">f]&lt;/td&gt;&#39;</span> \
                                             <span class="o">%</span> <span class="p">(</span><span class="n">ndigits</span><span class="p">,</span><span class="n">ndigits</span><span class="p">)</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="n">formatString</span>  \
                <span class="o">%</span> <span class="p">(</span> <span class="n">colorPalette</span><span class="p">[</span><span class="n">col</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">)</span><span class="o">*</span><span class="n">Max</span><span class="p">),</span>
                  <span class="p">(</span> <span class="p">((</span><span class="n">colorPalette</span><span class="p">[</span><span class="n">col</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">))</span><span class="o">-</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">))</span><span class="o">*</span><span class="n">Max</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;&lt;td bgcolor=</span><span class="si">%%</span><span class="s1">s&gt;&amp;nbsp;</span><span class="si">%%</span><span class="s1">+ .</span><span class="si">%d</span><span class="s1">f]&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="n">ndigits</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="n">formatString</span> \
                <span class="o">%</span> <span class="p">(</span> <span class="n">colorPalette</span><span class="p">[</span><span class="n">col</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
                  <span class="p">(</span> <span class="p">((</span><span class="n">colorPalette</span><span class="p">[</span><span class="n">col</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">))</span><span class="o">-</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">))</span><span class="o">*</span><span class="n">Max</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/table&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/body&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/html&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">html</span>

<div class="viewcode-block" id="Digraph.showHTMLRelationTable">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showHTMLRelationTable">[docs]</a>
    <span class="k">def</span> <span class="nf">showHTMLRelationTable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">actionsList</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                              <span class="n">relation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                              <span class="n">IntegerValues</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                              <span class="n">ndigits</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                              <span class="n">Colored</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                              <span class="n">tableTitle</span><span class="o">=</span><span class="s1">&#39;Valued Adjacency Matrix&#39;</span><span class="p">,</span>
                              <span class="n">relationName</span><span class="o">=</span><span class="s1">&#39;r(x S y)&#39;</span><span class="p">,</span>
                              <span class="n">ReflexiveTerms</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                              <span class="n">htmlFileName</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                              <span class="n">fromIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                              <span class="n">toIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Launches a browser window with the colored relation table of self.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">webbrowser</span>
        <span class="k">if</span> <span class="n">htmlFileName</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">tempfile</span> <span class="kn">import</span> <span class="n">NamedTemporaryFile</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="p">(</span><span class="n">NamedTemporaryFile</span><span class="p">(</span><span class="n">suffix</span><span class="o">=</span><span class="s1">&#39;.html&#39;</span><span class="p">,</span>
                                           <span class="n">delete</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="nb">dir</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">getcwd</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="n">getcwd</span><span class="p">()</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">htmlFileName</span>
        <span class="c1">#fileName = tempDir+&#39;/relationTable.html&#39;</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_htmlRelationTable</span><span class="p">(</span><span class="n">actionsSubset</span><span class="o">=</span><span class="n">actionsList</span><span class="p">,</span>
                                         <span class="n">relation</span><span class="o">=</span><span class="n">relation</span><span class="p">,</span>
                                        <span class="n">isColored</span><span class="o">=</span><span class="n">Colored</span><span class="p">,</span>
                                        <span class="n">ndigits</span><span class="o">=</span><span class="n">ndigits</span><span class="p">,</span>
                                        <span class="n">hasIntegerValues</span><span class="o">=</span><span class="n">IntegerValues</span><span class="p">,</span>
                                        <span class="n">tableTitle</span><span class="o">=</span><span class="n">tableTitle</span><span class="p">,</span>
                                        <span class="n">relationName</span><span class="o">=</span><span class="n">relationName</span><span class="p">,</span>
                                        <span class="n">ReflexiveTerms</span><span class="o">=</span><span class="n">ReflexiveTerms</span><span class="p">,</span>
                                         <span class="n">fromIndex</span><span class="o">=</span><span class="n">fromIndex</span><span class="p">,</span>
                                         <span class="n">toIndex</span><span class="o">=</span><span class="n">toIndex</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;file://&#39;</span><span class="o">+</span><span class="n">fileName</span>
        <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">new</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>     </div>

        
    <span class="k">def</span> <span class="nf">_htmlRelationTable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tableTitle</span><span class="o">=</span><span class="s1">&#39;Valued Relation Table&#39;</span><span class="p">,</span>
                           <span class="n">relation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">relationName</span><span class="o">=</span><span class="s1">&#39;r(x R y)&#39;</span><span class="p">,</span>
                          <span class="n">ndigits</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                          <span class="n">hasIntegerValues</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">actionsSubset</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                          <span class="n">isColored</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                          <span class="n">ReflexiveTerms</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">fromIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">toIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders the relation valuation in actions X actions html table format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">actionsSubset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="n">actionsSubset</span>
        <span class="k">if</span> <span class="n">relation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h1&gt;</span><span class="si">%s</span><span class="s1">&lt;/h1&gt;&#39;</span> <span class="o">%</span> <span class="n">tableTitle</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;table border=&quot;1&quot;&gt;&#39;</span>
        <span class="k">if</span> <span class="n">isColored</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr bgcolor=&quot;#9acd32&quot;&gt;&lt;th&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="n">relationName</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&lt;th&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="n">relationName</span>
        <span class="n">actionKeys</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">fromIndex</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fromIndex</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">toIndex</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">toIndex</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionKeys</span><span class="p">)</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionKeys</span><span class="p">[</span><span class="n">fromIndex</span><span class="p">:</span><span class="n">toIndex</span><span class="p">]:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="nb">frozenset</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">actionsList</span> <span class="o">+=</span> <span class="p">[(</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;shortName&#39;</span><span class="p">],</span><span class="n">x</span><span class="p">)]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">actionsList</span> <span class="o">+=</span> <span class="p">[(</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">],</span><span class="n">x</span><span class="p">)]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">actionsList</span> <span class="o">+=</span> <span class="p">[(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="n">x</span><span class="p">)]</span>
<span class="c1">##        if actionsSubset is None:</span>
<span class="c1">##            actionsList.sort()</span>
        <span class="c1">#print actionsList</span>
        <span class="c1">#actionsList.sort()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">hasIntegerValues</span><span class="p">:</span> 
            <span class="k">try</span><span class="p">:</span>
                <span class="n">hasIntegerValuation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;hasIntegerValuation&#39;</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">hasIntegerValuation</span> <span class="o">=</span> <span class="n">hasIntegerValues</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;hasIntegerValuation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hasIntegerValuation</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">hasIntegerValuation</span> <span class="o">=</span> <span class="n">hasIntegerValues</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;hasIntegerValuation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">hasIntegerValuation</span>

        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">isColored</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;th bgcolor=&quot;#FFF79B&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;th&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;tr&gt;&#39;</span>
            <span class="k">if</span> <span class="n">isColored</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;th bgcolor=&quot;#FFF79B&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;th&gt;</span><span class="si">%s</span><span class="s1">&lt;/th&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">ReflexiveTerms</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">hasIntegerValuation</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">isColored</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                                    <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td bgcolor=&quot;#ddffdd&quot; align=&quot;right&quot;&gt;</span><span class="si">%d</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                                <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                                    <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td bgcolor=&quot;#ffddff&quot;  align=&quot;right&quot;&gt;</span><span class="si">%d</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td bgcolor=&quot;#dddddd&quot; align=&quot;right&quot; &gt;</span><span class="si">%d</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;</span><span class="si">%d</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">ndigitsFormat</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%%</span><span class="s1">2.</span><span class="si">%d</span><span class="s1">f&#39;</span> <span class="o">%</span> <span class="n">ndigits</span>
                            <span class="k">if</span> <span class="n">isColored</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                                    <span class="n">formatStr</span> <span class="o">=</span> <span class="s1">&#39;&lt;td bgcolor=&quot;#ddffdd&quot; align=&quot;right&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="n">ndigitsFormat</span> 
                                    <span class="n">s</span> <span class="o">+=</span> <span class="n">formatStr</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                                <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                                    <span class="n">formatStr</span> <span class="o">=</span> <span class="s1">&#39;&lt;td  bgcolor=&quot;#ffddff&quot; align=&quot;right&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="n">ndigitsFormat</span>
                                    <span class="n">s</span> <span class="o">+=</span>  <span class="n">formatStr</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="n">formatStr</span> <span class="o">=</span> <span class="s1">&#39;&lt;td  bgcolor=&quot;#dddddd&quot; align=&quot;right&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="n">ndigitsFormat</span>
                                    <span class="n">s</span> <span class="o">+=</span> <span class="n">formatStr</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">formatStr</span> <span class="o">=</span> <span class="s1">&#39;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="n">ndigitsFormat</span>
                                <span class="n">s</span> <span class="o">+=</span> <span class="n">formatStr</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td bgcolor=&quot;#eeeeee&quot; align=&quot;center&quot;&gt; &amp;ndash; &lt;/td&gt;&#39;</span>
                    
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">hasIntegerValuation</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">isColored</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td bgcolor=&quot;#ddffdd&quot; align=&quot;right&quot;&gt;</span><span class="si">%d</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                            <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td bgcolor=&quot;#ffddff&quot;  align=&quot;right&quot;&gt;</span><span class="si">%d</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td bgcolor=&quot;#dddddd&quot; align=&quot;right&quot; &gt;</span><span class="si">%d</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;</span><span class="si">%d</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">ndigitsFormat</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%%</span><span class="s1">2.</span><span class="si">%d</span><span class="s1">f&#39;</span> <span class="o">%</span> <span class="n">ndigits</span>
                        <span class="k">if</span> <span class="n">isColored</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                                <span class="n">formatStr</span> <span class="o">=</span> <span class="s1">&#39;&lt;td bgcolor=&quot;#ddffdd&quot; align=&quot;right&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="n">ndigitsFormat</span> 
                                <span class="n">s</span> <span class="o">+=</span> <span class="n">formatStr</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                            <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                                <span class="n">formatStr</span> <span class="o">=</span> <span class="s1">&#39;&lt;td  bgcolor=&quot;#ffddff&quot; align=&quot;right&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="n">ndigitsFormat</span>
                                <span class="n">s</span> <span class="o">+=</span>  <span class="n">formatStr</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">formatStr</span> <span class="o">=</span> <span class="s1">&#39;&lt;td  bgcolor=&quot;#dddddd&quot; align=&quot;right&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="n">ndigitsFormat</span>
                                <span class="n">s</span> <span class="o">+=</span> <span class="n">formatStr</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">formatStr</span> <span class="o">=</span> <span class="s1">&#39;&lt;td&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&#39;</span> <span class="o">%</span> <span class="n">ndigitsFormat</span>
                            <span class="n">s</span> <span class="o">+=</span> <span class="n">formatStr</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/tr&gt;&#39;</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/table&gt;&#39;</span>
        <span class="k">if</span> <span class="n">hasIntegerValuation</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;p&gt;Valuation domain: [</span><span class="si">%d</span><span class="s1">; </span><span class="si">%+d</span><span class="s1">]&lt;/p&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Min</span><span class="p">,</span><span class="n">Max</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;&lt;p&gt;Valuation domain: [</span><span class="si">%.2f</span><span class="s1">; </span><span class="si">%+.2f</span><span class="s1">]&lt;/p&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Min</span><span class="p">,</span><span class="n">Max</span><span class="p">)</span>
            
        <span class="k">return</span> <span class="n">s</span>

<div class="viewcode-block" id="Digraph.showdre">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showdre">[docs]</a>
    <span class="k">def</span> <span class="nf">showdre</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Shows relation in nauty format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----- show dre -------------*&#39;</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">aindex</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Actions index:&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;: &#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
            <span class="n">aindex</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;n=&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; $=1 d g&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">aindex</span><span class="p">[</span><span class="n">x</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">res</span> <span class="o">=</span> <span class="n">res</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">aindex</span><span class="p">[</span><span class="n">y</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">res</span> <span class="o">+</span> <span class="s1">&#39;;&#39;</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span></div>


<div class="viewcode-block" id="Digraph.exportPrincipalImage">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.exportPrincipalImage">[docs]</a>
    <span class="k">def</span> <span class="nf">exportPrincipalImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> 
                             <span class="n">plotFileName</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                             <span class="n">pictureFormat</span><span class="o">=</span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span>
                             <span class="n">bgcolor</span><span class="o">=</span><span class="s1">&#39;cornsilk&#39;</span><span class="p">,</span>
                             <span class="n">fontcolor</span><span class="o">=</span><span class="s1">&#39;red3&#39;</span><span class="p">,</span>
                             <span class="n">fontsize</span><span class="o">=</span><span class="s1">&#39;0.75&#39;</span><span class="p">,</span>
                             <span class="n">Reduced</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                             <span class="n">Colwise</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                             <span class="n">tempDir</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span>
                             <span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Export as PDF (default) the principal projection of</span>
<span class="sd">        the valued relation using the three principal eigen vectors.</span>

<span class="sd">        Implemeted picture formats are: </span>
<span class="sd">        &#39;pdf&#39; (default), &#39;png&#39;, &#39;jpeg&#39; and &#39;xfig&#39;.</span>

<span class="sd">        The background color is set by default to &#39;cornsilk&#39;. </span>
<span class="sd">        </span>
<span class="sd">        Font size and color are set by default to &#39;red3&#39;, resp. &#39;0.75&#39;. </span>

<span class="sd">        When *Reduced==True*, the valued relation characeteristics are centered and reduced.</span>

<span class="sd">        When *Colwise==True*, the column vectors of the adjacency table are used for the principal projection, otherwise the rows (default) are used. Has no incidence when the *Digraph* instance *self*  is symmetric. </span>

<span class="sd">        .. warning::</span>
<span class="sd">        </span>
<span class="sd">            The method, writing and reading temporary files: </span>
<span class="sd">            tempCol.r and rotationCol.csv, resp. tempRow.r and rotationRow.csv,</span>
<span class="sd">            by default in the working directory (./),</span>
<span class="sd">            is hence not safe for multiprocessing programs, unless a</span>
<span class="sd">            temporary directory *tempDir* is provided. </span>

<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----  export 3dplot of format </span><span class="si">%s</span><span class="s1"> -----&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pictureFormat</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">tempDir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">tempDir</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span>
        <span class="kn">import</span> <span class="nn">os</span><span class="o">,</span><span class="nn">time</span>
        <span class="k">if</span> <span class="n">plotFileName</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">plotFileName</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">tempDir</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">plotFileName</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">tempDir</span><span class="p">,</span><span class="n">plotFileName</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Colwise</span><span class="p">:</span>
            <span class="n">plotFileName</span> <span class="o">+=</span> <span class="s2">&quot;_Colwise&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">plotFileName</span> <span class="o">+=</span> <span class="s2">&quot;_Rowwise&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">saveCSV</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/exportTemp&#39;</span> <span class="o">%</span> <span class="n">tempDir</span><span class="p">,</span><span class="n">Diagonal</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Colwise</span><span class="p">:</span>
            <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/tempCol.r&#39;</span> <span class="o">%</span> <span class="n">tempDir</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/tempRow.r&#39;</span> <span class="o">%</span> <span class="n">tempDir</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;x = read.csv(&#39;</span><span class="si">%s</span><span class="s2">/exportTemp.csv&#39;,row.names=1)</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">tempDir</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Colwise</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;x = t(x)</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Reduced</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;x = (x-colMeans(x))/(sapply(x,sd)*sqrt(length(t(x))))</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;x = (x-colMeans(x))</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;X = as.matrix(x)</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;A = X </span><span class="si">%*%</span><span class="s2"> t(X)</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;E = eigen(A, symmetric=TRUE)</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;P = E$values * t(E$vectors)</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Colwise</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;write.csv(t(P),&#39;</span><span class="si">%s</span><span class="s2">/rotationCol.csv&#39;,row.names=F)</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">tempDir</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;write.csv(t(P),&#39;</span><span class="si">%s</span><span class="s2">/rotationRow.csv&#39;,row.names=F)</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">tempDir</span><span class="p">)</span>           
        <span class="k">if</span> <span class="n">pictureFormat</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># no principal image is required</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;valprop = round(E$values/sum(E$values),digits=3)</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;pcaRes = list(x=X,eig=E,a=A,P=P,val=valprop)</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;val = pcaRes$val</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;nval = length(val)</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pictureFormat</span> <span class="o">==</span> <span class="s2">&quot;png&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">bgcolor</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;png(&quot;</span><span class="si">%s</span><span class="s1">.png&quot;,width=480,height=480</span><span class="se">\n</span><span class="s1">&#39;</span>\
                         <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">)</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;png(&quot;</span><span class="si">%s</span><span class="s1">.png&quot;,width=480,height=480,bg=&quot;</span><span class="si">%s</span><span class="s1">&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span>\
                         <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">,</span><span class="n">bgcolor</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">elif</span> <span class="n">pictureFormat</span> <span class="o">==</span> <span class="s2">&quot;jpeg&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">bgcolor</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;jpeg(&quot;</span><span class="si">%s</span><span class="s1">.jpg&quot;,width=480,height=480</span><span class="se">\n</span><span class="s1">&#39;</span>\
                         <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">)</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;jpeg(&quot;</span><span class="si">%s</span><span class="s1">.png&quot;,width=480,height=480,bg=&quot;</span><span class="si">%s</span><span class="s1">&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span>\
                         <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">,</span><span class="n">bgcolor</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">elif</span> <span class="n">pictureFormat</span> <span class="o">==</span> <span class="s2">&quot;xfig&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">bgcolor</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;xfig(&quot;</span><span class="si">%s</span><span class="s1">.fig&quot;,width=480,height=480</span><span class="se">\n</span><span class="s1">&#39;</span>\
                         <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">)</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;xfig(&quot;</span><span class="si">%s</span><span class="s1">.figg&quot;,width=480,height=480,bg=&quot;</span><span class="si">%s</span><span class="s1">&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span>\
                         <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">,</span><span class="n">bgcolor</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">elif</span> <span class="n">pictureFormat</span> <span class="o">==</span> <span class="s2">&quot;pdf&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">bgcolor</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;pdf(&quot;</span><span class="si">%s</span><span class="s1">.pdf&quot;,width=6,height=6,title=&quot;PCA of relation valuation&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">)</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;pdf(&quot;</span><span class="si">%s</span><span class="s1">.pdf&quot;,width=6,height=6,bg=&quot;</span><span class="si">%s</span><span class="s1">&quot;,title=&quot;PCA of relation valuation&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">,</span><span class="n">bgcolor</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: Plotting device </span><span class="si">%s</span><span class="s1"> not defined !&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pictureFormat</span><span class="p">))</span>
                <span class="k">return</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;par(mfrow=c(2,2))</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;a1 = 1</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;a2 = 2</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;a3 = 3</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;plot(pcaRes$P[a1,],pcaRes$P[a2,],&quot;n&quot;,xlab=paste(&quot;axis 1:&quot;,val[a1]*100,&quot;%&quot;),ylab=paste(&quot;axis 2:&quot;,val[a2]*100,&quot;%&quot;),asp=1)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;text(pcaRes$P[a1,],pcaRes$P[a2,],rownames(pcaRes$x),col=&quot;</span><span class="si">%s</span><span class="s1">&quot;,cex=</span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fontcolor</span><span class="p">,</span><span class="n">fontsize</span><span class="p">)</span> <span class="p">)</span> 
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;title(sub=paste(&quot;Total inertia:&quot;,(val[1]+val[2])*100,&quot;%&quot;),main=&quot;Factors 1 and 2&quot;,col.sub=&quot;black&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;abline(h=0,v=0,lty=2,col=&quot;gray&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;plot(pcaRes$P[a3,],pcaRes$P[a2,],&quot;n&quot;,xlab=paste(&quot;axis 3:&quot;,val[a3]*100,&quot;%&quot;),ylab=paste(&quot;axis 2:&quot;,val[a2]*100,&quot;%&quot;),asp=1)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;text(pcaRes$P[a3,],pcaRes$P[a2,],rownames(pcaRes$x),col=&quot;</span><span class="si">%s</span><span class="s1">&quot;,cex=</span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fontcolor</span><span class="p">,</span><span class="n">fontsize</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;title(sub=paste(&quot;Total inertia:&quot;,(val[3]+val[2])*100,&quot;%&quot;),main=&quot;Factors 3 and 2&quot;,col.sub=&quot;black&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>        
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;abline(h=0,v=0,lty=2,col=&quot;gray&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;plot(pcaRes$P[a1,],pcaRes$P[a3,],&quot;n&quot;,xlab=paste(&quot;axis 1:&quot;,val[a1]*100,&quot;%&quot;),ylab=paste(&quot;axis 3:&quot;,val[a3]*100,&quot;%&quot;),asp=1)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;text(pcaRes$P[a1,],pcaRes$P[a3,],rownames(pcaRes$x),col=&quot;</span><span class="si">%s</span><span class="s1">&quot;,cex=</span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fontcolor</span><span class="p">,</span><span class="n">fontsize</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;title(sub=paste(&quot;Total inertia:&quot;,(val[1]+val[3])*100,&quot;%&quot;),main=&quot;Factors 1 and 3&quot;,col.sub=&quot;black&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>        
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;abline(h=0,v=0,lty=2,col=&quot;gray&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;barplot(val[a1:nval]*100,names.arg=a1:nval,main=&quot;Axis inertia (in %)&quot;,col=&quot;orangered&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;dev.off()</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="c1"># fo.write(&quot;par(mfrow=c(2,2))\n&quot;)</span>
            <span class="c1"># fo.write(&quot;a1 = 1\n&quot;)</span>
            <span class="c1"># fo.write(&quot;a2 = 2\n&quot;)</span>
            <span class="c1"># fo.write(&quot;a3 = 3\n&quot;)</span>
            <span class="c1"># fo.write(&#39;plot(pcaRes$P[a1,],pcaRes$P[a2,],&quot;n&quot;,xlab=paste(&quot;axis 1:&quot;,val[a1]*100,&quot;%&quot;),ylab=paste(&quot;axis 2:&quot;,val[a2]*100,&quot;%&quot;),asp=1)\n&#39;)</span>
            <span class="c1"># fo.write(&quot;text(pcaRes$P[a1,],pcaRes$P[a2,],rownames(pcaRes$x),cex=0.75)\n&quot;)</span>
            <span class="c1"># fo.write(&#39;abline(h=0,lty=2,col=&quot;gray&quot;)\n&#39;)</span>
            <span class="c1"># fo.write(&#39;abline(v=0,lty=2,col=&quot;gray&quot;)\n&#39;)</span>
            <span class="c1"># fo.write(&#39;plot(pcaRes$P[a3,],pcaRes$P[a2,],&quot;n&quot;,xlab=paste(&quot;axis 3:&quot;,val[a3]*100,&quot;%&quot;),ylab=paste(&quot;axis 2:&quot;,val[a2]*100,&quot;%&quot;),asp=1)\n&#39;)</span>
            <span class="c1"># fo.write(&#39;text(pcaRes$P[a3,],pcaRes$P[a2,],rownames(pcaRes$x),cex=0.75)\n&#39;)</span>
            <span class="c1"># fo.write(&#39;abline(h=0,lty=2,col=&quot;gray&quot;)\n&#39;)</span>
            <span class="c1"># fo.write(&#39;abline(v=0,lty=2,col=&quot;gray&quot;)\n&#39;)</span>
            <span class="c1"># fo.write(&#39;plot(pcaRes$P[a1,],pcaRes$P[a3,],&quot;n&quot;,xlab=paste(&quot;axis 1:&quot;,val[a1]*100,&quot;%&quot;),ylab=paste(&quot;axis 3:&quot;,val[a3]*100,&quot;%&quot;),asp=1)\n&#39;)</span>
            <span class="c1"># fo.write(&#39;text(pcaRes$P[a1,],pcaRes$P[a3,],rownames(pcaRes$x),cex=0.75)\n&#39;)</span>
            <span class="c1"># fo.write(&#39;abline(h=0,v=0,lty=2,col=&quot;gray&quot;)\n&#39;)</span>
            <span class="c1"># fo.write(&#39;barplot(val[a1:nval]*100,names.arg=a1:nval,main=&quot;Axis inertia (in %)&quot;,col=&quot;orangered&quot;)\n&#39;)</span>
            <span class="c1"># fo.write(&#39;dev.off()\n&#39;)</span>
            <span class="c1"># fo.close()</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Colwise</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;(cd </span><span class="si">%s</span><span class="s1">;env R -q --vanilla --verbose &lt; tempCol.r 2&gt;&amp;1)&#39;</span> <span class="o">%</span> <span class="n">tempDir</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;(cd </span><span class="si">%s</span><span class="s1">;env R -q --vanilla --verbose &lt; tempRow.r 2&gt;&amp;1)&#39;</span> <span class="o">%</span> <span class="n">tempDir</span> <span class="p">)</span>               
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Colwise</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;(cd </span><span class="si">%s</span><span class="s1">;env R -q --vanilla &lt; tempCol.r &gt; /dev/null 2&gt; /dev/null)&#39;</span> <span class="o">%</span> <span class="n">tempDir</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;(cd </span><span class="si">%s</span><span class="s1">;env R -q --vanilla &lt; tempRow.r &gt; /dev/null 2&gt; /dev/null)&#39;</span> <span class="o">%</span> <span class="n">tempDir</span><span class="p">)</span>
                
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>     
        <span class="k">if</span> <span class="n">pictureFormat</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;See </span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1"> ! &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">,</span><span class="n">pictureFormat</span><span class="p">))</span></div>

        
        
<div class="viewcode-block" id="Digraph.exportGraphViz">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.exportGraphViz">[docs]</a>
    <span class="k">def</span> <span class="nf">exportGraphViz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">actionsSubset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                       <span class="n">bestChoice</span><span class="o">=</span><span class="nb">set</span><span class="p">(),</span><span class="n">worstChoice</span><span class="o">=</span><span class="nb">set</span><span class="p">(),</span>
                       <span class="n">firstChoice</span><span class="o">=</span><span class="nb">set</span><span class="p">(),</span><span class="n">lastChoice</span><span class="o">=</span><span class="nb">set</span><span class="p">(),</span>
                       <span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">graphType</span><span class="o">=</span><span class="s1">&#39;png&#39;</span><span class="p">,</span>
                       <span class="n">pictureFormat</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">graphSize</span><span class="o">=</span><span class="s1">&#39;7,7&#39;</span><span class="p">,</span>
                       <span class="n">relation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">bgcolor</span><span class="o">=</span><span class="s1">&#39;cornsilk&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        export GraphViz dot file  for graph drawing filtering.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">os</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---- exporting a dot file for GraphViz tools ---------*&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">actionsSubset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">actionkeys</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">actionkeys</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsSubset</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionkeys</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">relation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">fileName</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">fileName</span>
        <span class="k">if</span> <span class="n">pictureFormat</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">graphType</span> <span class="o">=</span> <span class="n">pictureFormat</span>
        <span class="n">dotName</span> <span class="o">=</span> <span class="n">name</span><span class="o">+</span><span class="s1">&#39;.dot&#39;</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Exporting to &#39;</span><span class="o">+</span><span class="n">dotName</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">firstChoice</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
            <span class="n">bestChoice</span> <span class="o">=</span> <span class="n">firstChoice</span>
        <span class="k">if</span> <span class="n">bestChoice</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
            <span class="n">rankBestString</span> <span class="o">=</span> <span class="s1">&#39;{rank=max; &#39;</span>
        <span class="k">if</span> <span class="n">lastChoice</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
            <span class="n">worstChoice</span> <span class="o">=</span> <span class="n">lastChoice</span>
        <span class="k">if</span> <span class="n">worstChoice</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
            <span class="n">rankWorstString</span> <span class="o">=</span> <span class="s1">&#39;{rank=min; &#39;</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">dotName</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;digraph G {</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">bgcolor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;graph [ bgcolor = </span><span class="si">%s</span><span class="s1">, fontname = &quot;Helvetica-Oblique&quot;,</span><span class="se">\n</span><span class="s1"> fontsize = 12,</span><span class="se">\n</span><span class="s1"> label = &quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">bgcolor</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;graph [ fontname = &quot;Helvetica-Oblique&quot;,</span><span class="se">\n</span><span class="s1"> fontsize = 12,</span><span class="se">\n</span><span class="s1"> label = &quot;&#39;</span><span class="p">)</span>          
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">nDigraph3 (graphviz), R. Bisdorff, 2020&quot;, size=&quot;&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">graphSize</span><span class="p">),</span><span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&quot;];</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">nodeName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="s1">&#39;shortName&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">nodeName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">nodeName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">node</span> <span class="o">=</span> <span class="s1">&#39;n&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; [shape = &quot;circle&quot;, label = &quot;&#39;</span> <span class="o">+</span><span class="n">nodeName</span><span class="o">+</span><span class="s1">&#39;&quot;&#39;</span>
            <span class="k">if</span> <span class="n">actionkeys</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">in</span> <span class="n">bestChoice</span><span class="p">:</span>
                <span class="n">node</span> <span class="o">+=</span> <span class="s1">&#39;, style = &quot;filled&quot;, color = gold];</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="n">rankBestString</span> <span class="o">+=</span> <span class="s1">&#39;n&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; &#39;</span>
            <span class="k">elif</span> <span class="n">actionkeys</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">in</span> <span class="n">worstChoice</span><span class="p">:</span>
                <span class="n">node</span> <span class="o">+=</span> <span class="s1">&#39;, style = &quot;filled&quot;, color = lightblue];</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="n">rankWorstString</span> <span class="o">+=</span> <span class="s1">&#39;n&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; &#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">node</span> <span class="o">+=</span> <span class="s1">&#39;];</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">bestChoice</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
            <span class="n">rankBestString</span> <span class="o">+=</span> <span class="s1">&#39;}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="n">worstChoice</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
            <span class="n">rankWorstString</span> <span class="o">+=</span> <span class="s1">&#39;}</span><span class="se">\n</span><span class="s1">&#39;</span>
<span class="c1">##         for i in range(n):</span>
<span class="c1">##             edge = &#39;n&#39;+str(i+1)</span>
<span class="c1">##             for j in range(n):</span>
<span class="c1">##                 if i != j and relation[actions[i]][actions[j]] &gt; Med:</span>
<span class="c1">##                     edge0 = edge+&#39;-&gt; n&#39;+str(j+1)+&#39;;\n&#39;</span>
<span class="c1">##                     fo.write(edge0)</span>
<span class="c1">##                     j += 1</span>
<span class="c1">##             i += 1</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
                <span class="n">edge</span> <span class="o">=</span> <span class="s1">&#39;n&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span> <span class="o">&gt;</span> <span class="n">Med</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">j</span><span class="p">]][</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">edge0</span> <span class="o">=</span> <span class="n">edge</span><span class="o">+</span><span class="s1">&#39;-&gt; n&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; [dir=both,style=&quot;setlinewidth(2)&quot;,color=black, arrowhead=normal, arrowtail=normal] ;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">edge0</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span> <span class="o">&gt;</span> <span class="n">Med</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">j</span><span class="p">]][</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">==</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">edge0</span> <span class="o">=</span> <span class="n">edge</span><span class="o">+</span><span class="s1">&#39;-&gt; n&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; [dir=both, color=black, arrowhead=normal, arrowtail=empty] ;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">edge0</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span> <span class="o">==</span> <span class="n">Med</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">j</span><span class="p">]][</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">edge0</span> <span class="o">=</span> <span class="n">edge</span><span class="o">+</span><span class="s1">&#39;-&gt; n&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; [dir=both, color=black, arrowtail=normal, arrowhead=empty] ;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">edge0</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span> <span class="o">==</span> <span class="n">Med</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">j</span><span class="p">]][</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">==</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">edge0</span> <span class="o">=</span> <span class="n">edge</span><span class="o">+</span><span class="s1">&#39;-&gt; n&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; [dir=both, color=grey, arrowhead=empty, arrowtail=empty] ;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">edge0</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span> <span class="o">&gt;</span> <span class="n">Med</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">j</span><span class="p">]][</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">&lt;</span>  <span class="n">Med</span><span class="p">:</span>
                    <span class="n">edge0</span> <span class="o">=</span> <span class="n">edge</span><span class="o">+</span><span class="s1">&#39;-&gt; n&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; [dir=forward, color=black] ;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">edge0</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span> <span class="o">==</span> <span class="n">Med</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">j</span><span class="p">]][</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">&lt;</span>  <span class="n">Med</span><span class="p">:</span>
                    <span class="n">edge0</span> <span class="o">=</span> <span class="n">edge</span><span class="o">+</span><span class="s1">&#39;-&gt; n&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; [dir=forward, color=grey, arrowhead=empty] ;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">edge0</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span> <span class="o">&lt;</span> <span class="n">Med</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">j</span><span class="p">]][</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">&gt;</span>  <span class="n">Med</span><span class="p">:</span>
                    <span class="n">edge0</span> <span class="o">=</span> <span class="n">edge</span><span class="o">+</span><span class="s1">&#39;-&gt; n&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; [dir=back, color=black] ;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">edge0</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span> <span class="o">&lt;</span> <span class="n">Med</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">j</span><span class="p">]][</span><span class="n">actionkeys</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">==</span>  <span class="n">Med</span><span class="p">:</span>
                    <span class="n">edge0</span> <span class="o">=</span> <span class="n">edge</span><span class="o">+</span><span class="s1">&#39;-&gt; n&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; [dir=back, color=grey, arrowtail=empty] ;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">edge0</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">bestChoice</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">rankBestString</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">worstChoice</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">rankWorstString</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">==</span> <span class="n">CirculantDigraph</span><span class="p">:</span>
            <span class="n">commandString</span> <span class="o">=</span> <span class="s1">&#39;circo -T&#39;</span><span class="o">+</span><span class="n">graphType</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="n">dotName</span><span class="o">+</span><span class="s1">&#39; -o &#39;</span><span class="o">+</span><span class="n">name</span><span class="o">+</span><span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="n">graphType</span>
        <span class="c1"># elif type(self) == RandomTree:</span>
        <span class="c1">#     commandString = &#39;neato -T&#39;+graphType+&#39; &#39;+dotName+&#39; -o &#39;+name+&#39;.&#39; + graphType</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">commandString</span> <span class="o">=</span> <span class="s1">&#39;dot -Grankdir=BT -T&#39;</span><span class="o">+</span><span class="n">graphType</span><span class="o">+</span><span class="s1">&#39; &#39;</span> <span class="o">+</span><span class="n">dotName</span><span class="o">+</span><span class="s1">&#39; -o &#39;</span><span class="o">+</span><span class="n">name</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">graphType</span>
            <span class="c1">#commandString = &#39;dot -T&#39;+graphType+&#39; &#39; +dotName+&#39; -o &#39;+name+&#39;.&#39;+graphType</span>

        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">commandString</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="n">commandString</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;graphViz tools not avalaible! Please check installation.&#39;</span><span class="p">)</span></div>


    <span class="c1"># def _exportD3(self, fileName=&quot;index&quot;, Comments=True):</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1"># This function was designed and implemented by Gary Cornelius, 2014 for his bachelor thesis at the University of Luxembourg. </span>
    <span class="c1"># The thesis document with more explanations can be found in the literature/Cornelius directory of a Digraph3 working copy. .</span>
    
    <span class="c1"># *Parameters*:</span>
    <span class="c1">#     * fileName, name of the generated html file, default = None (graph name as defined in python);</span>
    <span class="c1">#     * Comments, True = default;</span>

    <span class="c1"># The idea of the project was to find a way that allows you to easily get details about certain nodes or edges of a directed graph in a dynamic format. </span>
    <span class="c1"># Therefore this function allows you to export a html file together with all the needed libraries, including the </span>
    <span class="c1"># D3 Library which we use for graph generation and the physics between nodes, which attracts or pushes nodes away from each other.</span>

    <span class="c1"># Features of our graph include i.e. : </span>
    <span class="c1">#     * A way to only inspect a node and it&#39;s neighbours </span>
    <span class="c1">#     * Dynamic draging and freezing of the graph</span>
    <span class="c1">#     * Export of a newly created general graph</span>

    <span class="c1"># You can find the list of fututres in the Section below which is arranged according to the graph type.</span>
    
    <span class="c1"># *If the graph is an outrankingdigraphs*:</span>
    <span class="c1">#     * Nodes can be dragged and only the name and comment can be edited. </span>
    <span class="c1">#     * Edges can be inspected but not edited for this purpose a special json array containing all possible pairwiseComparisions is generated.</span>

    <span class="c1"># *If the graph is a general graph*:</span>
    <span class="c1">#     * Nodes can be dragged, added, removed and edited.</span>
    <span class="c1">#     * Edges can be added, removed, inverted and edited. But edges cannot be inspected.</span>
    <span class="c1">#     * The pairwiseComparisions key leads to an empty array {}.</span>

    <span class="c1"># In both cases, undefined edges can be hidden and reappear after a simple reload.(right click - reload)</span>

    <span class="c1"># *The generated files*:</span>
    <span class="c1">#     * d3.v3.js, contains the D3 Data-driven Documents source code, containing one small addition that we made in order to be able to easyly import links with a different formatself.</span>
    <span class="c1">#     * digraph3lib.js, contains our library. This file contains everything that we need from import of an XMCDA2 file, visualization of the graph to export of the changed graph.</span>
    <span class="c1">#     * d3export.json, usually named after the python graph name followed by a ticket number if the file is already present. It is the JSON file that is exported with the format &quot;{&quot;xmcda2&quot;: &quot;some xml&quot;,&quot;pairwiseComparisions&quot;:&quot;{&quot;a01&quot;: &quot;some html&quot;,...}&quot;}.</span>

    <span class="c1"># *Example 1*:</span>
    <span class="c1">#     #. python3 session:</span>
    <span class="c1">#         &gt;&gt;&gt; from digraphs import RandomValuationDigraph</span>
    <span class="c1">#         &gt;&gt;&gt; dg = RandomValuationDigraph(order=5,Normalized=True)</span>
    <span class="c1">#         &gt;&gt;&gt; dg.exportD3()</span>
    <span class="c1">#         or</span>
    <span class="c1">#         &gt;&gt; dg.showInteractiveGraph()</span>
    
    <span class="c1">#     #. index.html:   </span>
    <span class="c1">#         * Main Screen:</span>
    <span class="c1">#             .. image:: randomvaluation_d3_main.png</span>
    <span class="c1">#         * Inspect function:</span>
    <span class="c1">#             .. image:: randomvaluation_d3_inspect.png</span>

    <span class="c1"># .. note::</span>
    
    <span class="c1">#         If you want to use the automatic load in Chrome, try using the command: &quot;python -m SimpleHTTPServer&quot;</span>
    <span class="c1">#         and then access the index.html via &quot;http://0.0.0.0:8000/index.html&quot;.</span>
    <span class="c1">#         In order to load the CSS an active internet connection is needed! </span>

    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     import os</span>
    <span class="c1">#     import json</span>
    <span class="c1">#     import urllib</span>
    <span class="c1">#     import htmlmodel,json</span>

    <span class="c1">#     if Comments:</span>
    <span class="c1">#         print(&#39;*---- exporting all needed files ---------*&#39;)</span>

    <span class="c1">#     if fileName == &quot;index&quot;:</span>
    <span class="c1">#         fileName = self.name</span>

    <span class="c1">#     file=fileName+&quot;.html&quot;</span>
    <span class="c1">#     dst_dir=os.getcwd()</span>
    <span class="c1">#     basename = os.path.basename(file)</span>
    <span class="c1">#     head, tail = os.path.splitext(basename)</span>
    <span class="c1">#     dst_file = os.path.join(dst_dir, basename)</span>
    <span class="c1">#     # rename if necessary</span>
    <span class="c1">#     count = 0</span>
    <span class="c1">#     print(dst_file)</span>
    <span class="c1">#     while os.path.exists(dst_file):</span>
    <span class="c1">#         count += 1</span>
    <span class="c1">#         dst_file = os.path.join(dst_dir, &#39;%s-%d%s&#39; % (head, count, tail))</span>

    <span class="c1">#     actionkeys = [x for x in self.actions]</span>
    <span class="c1">#     n = len(actionkeys)</span>
    <span class="c1">#     relation = self.relation</span>
    <span class="c1">#     Med = self.valuationdomain[&#39;med&#39;]</span>
        
    <span class="c1">#     pageName=&quot;&quot;</span>
              
        
    <span class="c1">#     fw = open(&quot;digraph3lib.js&quot;,&#39;w&#39;)</span>
    <span class="c1">#     fw.write(htmlmodel.javascript())</span>
    <span class="c1">#     fw.close()</span>
    <span class="c1">#     if Comments:</span>
    <span class="c1">#         print(&quot;File: digraph3lib.js saved!&quot;)</span>

    <span class="c1">#     fw = open(&quot;d3.v3.js&quot;,&#39;w&#39;)</span>
    <span class="c1">#     fw.write(htmlmodel.d3export())</span>
    <span class="c1">#     fw.close()</span>
    <span class="c1">#     if Comments:</span>
    <span class="c1">#         print(&quot;File: d3.v3.js saved!&quot;)</span>
    <span class="c1">#     pairwise={}</span>
    <span class="c1">#     try:</span>
    <span class="c1">#         for x in self.actions:</span>
    <span class="c1">#             pairwise[x]={}</span>
    <span class="c1">#         for x in actionkeys:</span>
    <span class="c1">#             for y in actionkeys:</span>
    <span class="c1">#                 if(not(x == y)):</span>
    <span class="c1">#                     pairwise[x][y] =  str(self.showPairwiseComparison(x,y,isReturningHTML=True))</span>
    <span class="c1">#     except:</span>
    <span class="c1">#         pairwise={}</span>
    <span class="c1">#     d3export={}</span>
    <span class="c1">#     if(pairwise):</span>
    <span class="c1">#         temp = &quot;outranking_&quot;+fileName</span>
    <span class="c1">#         self.saveXMCDA2(fileName=temp+&quot;-&quot;+str(count))</span>
    <span class="c1">#     else:</span>
    <span class="c1">#         temp = &quot;general_&quot;+fileName</span>
    <span class="c1">#         self.saveXMCDA2(fileName=temp+&quot;-&quot;+str(count))</span>
    <span class="c1">#     with open(temp+&quot;-&quot;+str(count)+&quot;.xmcda2&quot;,&quot;r&quot;) as myFile:</span>
    <span class="c1">#         data=myFile.read().replace(&quot;\n&quot;,&quot;&quot;)</span>
    <span class="c1">#     try:</span>
    <span class="c1">#         os.remove(temp+&quot;-&quot;+str(count)+&quot;.xmcda2&quot;)</span>
    <span class="c1">#     except OSError:</span>
    <span class="c1">#         pass</span>
    <span class="c1">#     d3export[&quot;xmcda2&quot;]= str(data)</span>
    <span class="c1">#     d3export[&quot;pairwiseComparisions&quot;] = json.dumps(pairwise)</span>

    <span class="c1">#     if(count==0):</span>
    <span class="c1">#         fw = open(temp+&quot;.json&quot;,&quot;w&quot;)</span>
    <span class="c1">#         if Comments:</span>
    <span class="c1">#             print(&quot;File: &quot;+temp+&quot;.json saved!&quot;) </span>
    <span class="c1">#     else:</span>
    <span class="c1">#         fw = open(temp+&quot;-&quot;+str(count)+&quot;.json&quot;,&quot;w&quot;)</span>
    <span class="c1">#         if Comments:</span>
    <span class="c1">#             print(&quot;File:&quot;+temp+&quot;-&quot;+str(count)+&quot;.json saved!&quot;) </span>
    <span class="c1">#     fw.write(json.dumps(d3export))</span>
    <span class="c1">#     fw.close()</span>

    <span class="c1">#     if(count==0):</span>
    <span class="c1">#         fw = open(fileName+&quot;.html&quot;,&quot;w&quot;)</span>
    <span class="c1">#         fw.write(htmlmodel.htmlmodel(jsonName=temp+&quot;.json&quot;))</span>
    <span class="c1">#         pageName=fileName+&quot;.html&quot;</span>
    <span class="c1">#         if Comments:</span>
    <span class="c1">#             print(&quot;File: &quot;+fileName+&quot;.html generated!&quot;)</span>
    <span class="c1">#     else:</span>
    <span class="c1">#         fw = open(fileName+&quot;-&quot;+str(count)+&quot;.html&quot;,&#39;w&#39;)</span>
    <span class="c1">#         fw.write(htmlmodel.htmlmodel(jsonName=temp+&quot;-&quot;+str(count)+&quot;.json&quot;))</span>
    <span class="c1">#         pageName=fileName+&quot;-&quot;+str(count)+&quot;.html&quot;</span>
    <span class="c1">#         if Comments:</span>
    <span class="c1">#             print(&quot;File: &quot;+fileName+&quot;-&quot;+str(count)+&quot;.html generated!&quot;)</span>
    <span class="c1">#     fw.close()</span>

    <span class="c1">#     if Comments:</span>
    <span class="c1">#         print(&#39;*---- export done ---------*&#39;)</span>
    <span class="c1">#     return pageName</span>

    <span class="c1"># def _showInteractiveGraph(self):</span>
    <span class="c1">#     &#39;&#39;&#39;</span>
    <span class="c1">#     Save the graph and all needed files for the visualization of an interactive graph generated by the exportD3() function.</span>
    <span class="c1">#     For best experience make sure to use Firefox, because other browser restrict the loading of local files.</span>
    <span class="c1">#     &#39;&#39;&#39;</span>
    <span class="c1">#     import os,webbrowser</span>
    <span class="c1">#     newTab=2</span>
    <span class="c1">#     url = &quot;file://&quot;+os.getcwd()+&quot;/%s&quot; % self.exportD3()</span>
    <span class="c1">#     webbrowser=webbrowser.get(&quot;firefox&quot;)</span>
    <span class="c1">#     webbrowser.open(url,new=newTab)</span>
    
            
<div class="viewcode-block" id="Digraph.savedre">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.savedre">[docs]</a>
    <span class="k">def</span> <span class="nf">savedre</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        save digraph in nauty format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----- saving digraph in nauty dre format  -------------*&#39;</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">Name</span> <span class="o">=</span> <span class="n">fileName</span><span class="o">+</span><span class="s1">&#39;.dre&#39;</span>
        <span class="n">aindex</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Actions index:&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;: &#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
            <span class="n">aindex</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">Name</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;n=&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; $=1 d g</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">aindex</span><span class="p">[</span><span class="n">x</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">res</span> <span class="o">=</span> <span class="n">res</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">aindex</span><span class="p">[</span><span class="n">y</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">res</span> <span class="o">+</span> <span class="s1">&#39;;</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aindex</span> <span class="o">=</span> <span class="n">aindex</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span></div>


    <span class="k">def</span> <span class="nf">_saveXML</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">,</span><span class="n">category</span><span class="o">=</span><span class="s1">&#39;general&#39;</span><span class="p">,</span><span class="n">subcategory</span><span class="o">=</span><span class="s1">&#39;general&#39;</span><span class="p">,</span><span class="n">author</span><span class="o">=</span><span class="s1">&#39;digraphs Module (RB)&#39;</span><span class="p">,</span><span class="n">reference</span><span class="o">=</span><span class="s1">&#39;saved from Python&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        save digraph in XML format. obsolete and deprecated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----- saving digraph in XML format  -------------*&#39;</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">nameExt</span> <span class="o">=</span> <span class="n">fileName</span><span class="o">+</span><span class="s1">&#39;.xml&#39;</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">nameExt</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;digraphs.xsl&quot;?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;!DOCTYPE digraph SYSTEM &quot;digraphs.dtd&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;digraph &#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;category=&quot;&#39;</span> <span class="o">+</span> <span class="n">category</span><span class="o">+</span><span class="s1">&#39;&quot; subcategory=&quot;&#39;</span><span class="o">+</span><span class="n">subcategory</span><span class="o">+</span><span class="s1">&#39;&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;header&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;name&gt;&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">nameExt</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/name&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;author&gt;&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">author</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/author&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;reference&gt;&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">reference</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/reference&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/header&gt;&#39;</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;nodes&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;node&gt;&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/node&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/nodes&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;valuationdomain&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;min&gt;&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">Min</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/min&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;max&gt;&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">Max</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/max&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/valuationdomain&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;relation&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;arc&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;i&gt;&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/i&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;t&gt;&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/t&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;v&gt;&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/v&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/arc&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/relation&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/digraph&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;File: &#39;</span> <span class="o">+</span> <span class="n">nameExt</span> <span class="o">+</span> <span class="s1">&#39; saved !&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_saveXMCDA</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">,</span><span class="n">relationName</span><span class="o">=</span><span class="s1">&#39;R&#39;</span><span class="p">,</span><span class="n">category</span><span class="o">=</span><span class="s1">&#39;random&#39;</span><span class="p">,</span><span class="n">subcategory</span><span class="o">=</span><span class="s1">&#39;valued&#39;</span><span class="p">,</span><span class="n">author</span><span class="o">=</span><span class="s1">&#39;digraphs Module (RB)&#39;</span><span class="p">,</span><span class="n">reference</span><span class="o">=</span><span class="s1">&#39;saved from Python&#39;</span><span class="p">,</span><span class="n">valuationType</span><span class="o">=</span><span class="s1">&#39;standard&#39;</span><span class="p">,</span><span class="n">servingD3</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        save digraph in XMCDA format. Obsolete and deprecated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----- saving digraph in XML format  -------------*&#39;</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">nameExt</span> <span class="o">=</span> <span class="n">fileName</span><span class="o">+</span><span class="s1">&#39;.xmcda&#39;</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">nameExt</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">servingD3</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;!-- ?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;xmcdaDefault.xsl&quot;? --&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;xmcdaDefault.xsl&quot;?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="s1">&#39;&lt;xmcda:XMCDA xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.decision-deck.org/2008/UMCDA-ML-1.0 umcda-ml-1.0.xsd&quot; xmlns:xmcda=&quot;http://www.decision-deck.org/2008/UMCDA-ML-1.0&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
        <span class="c1"># write description</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;caseReference&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;title&gt;Valued Digraph in XMCDA format&lt;/title&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;id&gt;</span><span class="si">%s</span><span class="s1">&lt;/id&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileName</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;name&gt;</span><span class="si">%s</span><span class="s1">&lt;/name&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;type&gt;root&lt;/type&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;user&gt;</span><span class="si">%s</span><span class="s1">&lt;/user&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">author</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;version&gt;</span><span class="si">%s</span><span class="s1">&lt;/version&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">reference</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/caseReference&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1"># write nodes</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">na</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternatives&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;title&gt;</span><span class="si">%s</span><span class="s1">&lt;/title&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;List of Alternatives&#39;</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;type&gt;</span><span class="si">%s</span><span class="s1">&lt;/type&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;alternatives&#39;</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;Potential decision actions.&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">na</span><span class="p">):</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternative id=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;name&gt;&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="s1">&#39;name&#39;</span><span class="p">]))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;nameless&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/name&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="s1">&#39;comment&#39;</span><span class="p">]))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;No comment&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternativeType&gt;potential&lt;/alternativeType&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternative&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternatives&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1"># write valued binary Relation</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;relationOnAlternatives&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;title&gt;</span><span class="si">%s</span><span class="s1">&lt;/title&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Valued Binary Relation&#39;</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;name&gt;</span><span class="si">%s</span><span class="s1">&lt;/name&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relationName</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;type&gt;</span><span class="si">%s</span><span class="s1">&lt;/type&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;valuedBinaryRelation&#39;</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1"> Digraph&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">category</span><span class="p">,</span><span class="n">subcategory</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;valuationDomain&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;subTitle&gt;</span><span class="si">%s</span><span class="s1">&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Valuation Domain&#39;</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;valuationType&gt;</span><span class="si">%s</span><span class="s1">&lt;/valuationType&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">valuationType</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;minimum&gt;&lt;real&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/real&gt;&lt;/minimum&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Min</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;maximum&gt;&lt;real&gt;</span><span class="si">%2.2f</span><span class="s1">&lt;/real&gt;&lt;/maximum&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Max</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/valuationDomain&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;arcs&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;subTitle&gt;</span><span class="si">%s</span><span class="s1">&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Valued Adjacency Table&#39;</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">category</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span>
            <span class="n">subcategory</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subcategory</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1"> Digraph&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">category</span><span class="p">,</span><span class="n">subcategory</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;arc&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;from&gt;&lt;alternativeID&gt;&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternativeID&gt;&lt;/from&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;to&gt;&lt;alternativeID&gt;&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternativeID&gt;&lt;/to&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;&lt;real&gt;</span><span class="si">%2.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span> <span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/real&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/arc&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/arcs&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/relationOnAlternatives&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/xmcda:XMCDA&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;File: &#39;</span> <span class="o">+</span> <span class="n">nameExt</span> <span class="o">+</span> <span class="s1">&#39; saved !&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="Digraph.saveXMCDA2">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.saveXMCDA2">[docs]</a>
    <span class="k">def</span> <span class="nf">saveXMCDA2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">,</span><span class="n">fileExt</span><span class="o">=</span><span class="s1">&#39;xmcda2&#39;</span><span class="p">,</span>
                   <span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">relationName</span><span class="o">=</span><span class="s1">&#39;R&#39;</span><span class="p">,</span><span class="n">relationType</span><span class="o">=</span><span class="s1">&#39;binary&#39;</span><span class="p">,</span>
                   <span class="n">category</span><span class="o">=</span><span class="s1">&#39;random&#39;</span><span class="p">,</span><span class="n">subcategory</span><span class="o">=</span><span class="s1">&#39;valued&#39;</span><span class="p">,</span>
                   <span class="n">author</span><span class="o">=</span><span class="s1">&#39;digraphs Module (RB)&#39;</span><span class="p">,</span><span class="n">reference</span><span class="o">=</span><span class="s1">&#39;saved from Python&#39;</span><span class="p">,</span>
                   <span class="n">valuationType</span><span class="o">=</span><span class="s1">&#39;standard&#39;</span><span class="p">,</span><span class="n">digits</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">servingD3</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        save digraph in XMCDA 2.0 format. Deprecated now.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----- saving digraph in XML format  -------------*&#39;</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">nameExt</span> <span class="o">=</span> <span class="n">fileName</span><span class="o">+</span><span class="s2">&quot;.&quot;</span><span class="o">+</span><span class="n">fileExt</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">nameExt</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">servingD3</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;!-- ?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;xmcda2Rubis.xsl&quot;? --&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;xmcdaXSL.xsl&quot;?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="s1">&#39;&lt;xmcda:XMCDA xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.decision-deck.org/2009/UMCDA-2.0.0 file:../XMCDA-2.0.0.xsd&quot; xmlns:xmcda=&quot;http://www.decision-deck.org/2009/XMCDA-2.0.0&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
        <span class="c1"># write description</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;projectReference id=&quot;</span><span class="si">%s</span><span class="s1">&quot; name=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;title&gt;Stored Digraph in XMCDA-2.0 format&lt;/title&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1">#fo.write(&#39;&lt;id&gt;%s&lt;/id&gt;\n&#39; % (fileName) )</span>
        <span class="c1">#fo.write(&#39;&lt;name&gt;%s&lt;/name&gt;\n&#39; % (self.name) )</span>
        <span class="c1">#fo.write(&#39;&lt;type&gt;root&lt;/type&gt;\n&#39;)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;user&gt;</span><span class="si">%s</span><span class="s1">&lt;/user&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">author</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;version&gt;</span><span class="si">%s</span><span class="s1">&lt;/version&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">reference</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/projectReference&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1"># write nodes</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">na</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternatives mcdaConcept=&quot;Digraph nodes&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;title&gt;</span><span class="si">%s</span><span class="s1">&lt;/title&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Nodes of the digraph&#39;</span><span class="p">))</span>
        <span class="c1">#fo.write(&#39;&lt;type&gt;%s&lt;/type&gt;\n&#39; % (&#39;alternatives&#39;))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;Set of nodes of the digraph.&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">na</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">alternativeName</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">alternativeName</span> <span class="o">=</span> <span class="s1">&#39;nameless&#39;</span>

            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternative id=&quot;</span><span class="si">%s</span><span class="s1">&quot; name=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">alternativeName</span><span class="p">))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="s1">&#39;comment&#39;</span><span class="p">]))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;No comment&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;type&gt;real&lt;/type&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;active&gt;true&lt;/active&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;reference&gt;false&lt;/reference&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternative&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternatives&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1"># write valued binary Relation</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;alternativesComparisons id=&quot;1&quot; name=&quot;</span><span class="si">%s</span><span class="s1">&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relationName</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;title&gt;</span><span class="si">%s</span><span class="s1">&lt;/title&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Randomly Valued Binary Relation&#39;</span><span class="p">))</span>
        <span class="c1">#fo.write(&#39;&lt;name&gt;%s&lt;/name&gt;\n&#39; % (relationName) )</span>
        <span class="c1">#fo.write(&#39;&lt;type&gt;%s&lt;/type&gt;\n&#39; % (&#39;valuedBinaryRelation&#39;))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1"> Digraph&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">category</span><span class="p">,</span><span class="n">subcategory</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;valuation name=&quot;valuationDomain&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;subTitle&gt;</span><span class="si">%s</span><span class="s1">&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Valuation Domain&#39;</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;quantitative&gt;&#39;</span><span class="p">)</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">valuationType</span> <span class="o">==</span> <span class="s1">&#39;integer&#39;</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;minimum&gt;&lt;integer&gt;</span><span class="si">%d</span><span class="s1">&lt;/integer&gt;&lt;/minimum&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Min</span><span class="p">))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;maximum&gt;&lt;integer&gt;</span><span class="si">%d</span><span class="s1">&lt;/integer&gt;&lt;/maximum&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">Max</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%%</span><span class="s1">2.</span><span class="si">%d</span><span class="s1">f&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">digits</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;minimum&gt;&lt;real&gt;&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">formatString</span> <span class="o">%</span> <span class="p">(</span><span class="n">Min</span><span class="p">))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/real&gt;&lt;/minimum&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;maximum&gt;&lt;real&gt;&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">formatString</span> <span class="o">%</span> <span class="p">(</span><span class="n">Max</span><span class="p">))</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/real&gt;&lt;/maximum&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/quantitative&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/valuation&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comparisonType&gt;</span><span class="si">%s</span><span class="s1">&lt;/comparisonType&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">relationName</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;pairs&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;subTitle&gt;</span><span class="si">%s</span><span class="s1">&lt;/subTitle&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;Valued Adjacency Table&#39;</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">category</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span>
            <span class="n">subcategory</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">subcategory</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;comment&gt;</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1"> Digraph&lt;/comment&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">category</span><span class="p">,</span><span class="n">subcategory</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/description&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;pair&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;initial&gt;&lt;alternativeID&gt;&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternativeID&gt;&lt;/initial&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;terminal&gt;&lt;alternativeID&gt;&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternativeID&gt;&lt;/terminal&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">valuationType</span> <span class="o">==</span> <span class="s1">&#39;bipolar&#39;</span><span class="p">:</span>
                    <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%%</span><span class="s1">+2.</span><span class="si">%d</span><span class="s1">f&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">digits</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%%</span><span class="s1">2.</span><span class="si">%d</span><span class="s1">f&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">digits</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;value&gt;&lt;real&gt;&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">formatString</span> <span class="o">%</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span> <span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/real&gt;&lt;/value&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/pair&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/pairs&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/alternativesComparisons&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&lt;/xmcda:XMCDA&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;File: &#39;</span> <span class="o">+</span> <span class="n">nameExt</span> <span class="o">+</span> <span class="s1">&#39; saved !&#39;</span><span class="p">)</span></div>



<div class="viewcode-block" id="Digraph.computeDensities">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeDensities">[docs]</a>
    <span class="k">def</span> <span class="nf">computeDensities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">choice</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        parameter: choice in self</span>
<span class="sd">        renders the four densitiy parameters:</span>
<span class="sd">        arc density, double arc density, single arc density, absence arc density.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">choice</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">order</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">))</span>
        <span class="n">d</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">dd</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">sd</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">ad</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">d</span> <span class="o">+=</span> <span class="mf">1.0</span>
                    <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">dd</span> <span class="o">+=</span> <span class="mf">1.0</span>
                    <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">sd</span> <span class="o">+=</span> <span class="mf">1.0</span>
                    <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">Med</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">ad</span> <span class="o">+=</span> <span class="mf">1.0</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">d</span> <span class="o">/</span> <span class="p">(</span><span class="n">order</span><span class="o">*</span><span class="p">(</span><span class="n">order</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">dd</span> <span class="o">/</span> <span class="p">(</span><span class="n">order</span><span class="o">*</span><span class="p">(</span><span class="n">order</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">sd</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">order</span><span class="o">*</span><span class="p">(</span><span class="n">order</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">ad</span> <span class="o">=</span> <span class="n">ad</span> <span class="o">/</span> <span class="p">(</span><span class="n">order</span><span class="o">*</span><span class="p">(</span><span class="n">order</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">d</span><span class="p">,</span><span class="n">dd</span><span class="p">,</span><span class="n">sd</span><span class="p">,</span><span class="n">ad</span></div>


<div class="viewcode-block" id="Digraph.computeCutLevelDensities">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeCutLevelDensities">[docs]</a>
    <span class="k">def</span> <span class="nf">computeCutLevelDensities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">choice</span><span class="p">,</span><span class="n">level</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        parameter: choice in self, robustness level</span>
<span class="sd">        renders three robust densitiy parameters:</span>
<span class="sd">        robust double arc density,</span>
<span class="sd">        robust single arc density,</span>
<span class="sd">        robust absence arc densitiy.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">choice</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">negLevel</span> <span class="o">=</span> <span class="n">Max</span> <span class="o">-</span> <span class="n">level</span> <span class="o">+</span> <span class="n">Min</span>
        <span class="n">order</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">))</span>
        <span class="n">rdd</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">rsd</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">rad</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">if</span> <span class="n">level</span> <span class="o">&lt;</span> <span class="n">Med</span> <span class="ow">or</span> <span class="n">level</span> <span class="o">&gt;=</span> <span class="n">Max</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: robustness level too low or too high !!!&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">level</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">level</span><span class="p">:</span>
                            <span class="n">rdd</span> <span class="o">+=</span> <span class="mf">1.0</span>
                        <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">level</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">negLevel</span><span class="p">:</span>
                                <span class="n">rsd</span> <span class="o">+=</span> <span class="mf">1.0</span>
                        <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">negLevel</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">negLevel</span><span class="p">:</span>
                            <span class="n">rad</span> <span class="o">+=</span> <span class="mf">1.0</span>
            <span class="n">rdd</span> <span class="o">=</span> <span class="n">rdd</span> <span class="o">/</span> <span class="p">(</span><span class="n">order</span><span class="o">*</span><span class="p">(</span><span class="n">order</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">rsd</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">rsd</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">order</span><span class="o">*</span><span class="p">(</span><span class="n">order</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">rad</span> <span class="o">=</span> <span class="n">rad</span> <span class="o">/</span> <span class="p">(</span><span class="n">order</span><span class="o">*</span><span class="p">(</span><span class="n">order</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">density</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">density</span><span class="p">[</span><span class="s1">&#39;double&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rdd</span>
        <span class="n">density</span><span class="p">[</span><span class="s1">&#39;single&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rsd</span>
        <span class="n">density</span><span class="p">[</span><span class="s1">&#39;absence&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rad</span>
        <span class="k">return</span> <span class="n">density</span></div>


<div class="viewcode-block" id="Digraph.computeAllDensities">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeAllDensities">[docs]</a>
    <span class="k">def</span> <span class="nf">computeAllDensities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">choice</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        parameter: choice in self</span>
<span class="sd">        renders six densitiy parameters:</span>
<span class="sd">        arc density, double arc density,</span>
<span class="sd">        single arc density, strict single arc density,</span>
<span class="sd">        absence arc density, strict absence arc densitiy.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">choice</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">choice</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">order</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">))</span>
        <span class="n">d</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">dd</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">sd</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">ssd</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">ad</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">asd</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">d</span> <span class="o">+=</span> <span class="mf">1.0</span>
                    <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">dd</span> <span class="o">+=</span> <span class="mf">1.0</span>
                    <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                            <span class="n">ssd</span> <span class="o">+=</span> <span class="mf">1.0</span>
                            <span class="n">sd</span> <span class="o">+=</span> <span class="mf">1.0</span>
                        <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="n">Med</span><span class="p">:</span>
                            <span class="n">sd</span> <span class="o">+=</span> <span class="mf">1.0</span>
                    <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">Med</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">ad</span> <span class="o">+=</span> <span class="mf">1.0</span>
                    <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Med</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">asd</span> <span class="o">+=</span> <span class="mf">1.0</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">d</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">order</span><span class="o">*</span><span class="p">(</span><span class="n">order</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">dd</span> <span class="o">=</span> <span class="n">dd</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">order</span><span class="o">*</span><span class="p">(</span><span class="n">order</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">sd</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">sd</span><span class="p">)</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">order</span><span class="o">*</span><span class="p">(</span><span class="n">order</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">ssd</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">ssd</span><span class="p">)</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">order</span><span class="o">*</span><span class="p">(</span><span class="n">order</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">ad</span> <span class="o">=</span> <span class="n">ad</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">order</span><span class="o">*</span><span class="p">(</span><span class="n">order</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">asd</span> <span class="o">=</span> <span class="n">asd</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">order</span><span class="o">*</span><span class="p">(</span><span class="n">order</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">density</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">density</span><span class="p">[</span><span class="s1">&#39;arc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span>
        <span class="n">density</span><span class="p">[</span><span class="s1">&#39;double&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dd</span>
        <span class="n">density</span><span class="p">[</span><span class="s1">&#39;single&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sd</span>
        <span class="n">density</span><span class="p">[</span><span class="s1">&#39;strictSingle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ssd</span>
        <span class="n">density</span><span class="p">[</span><span class="s1">&#39;absence&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ad</span>
        <span class="n">density</span><span class="p">[</span><span class="s1">&#39;strictAbsence&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">asd</span>
        <span class="k">return</span> <span class="n">density</span></div>


<div class="viewcode-block" id="Digraph.computeValuationLevels">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeValuationLevels">[docs]</a>
    <span class="k">def</span> <span class="nf">computeValuationLevels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">choice</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders the symmetric closure of the</span>
<span class="sd">        apparent valuations levels of self</span>
<span class="sd">        in an increasingly ordered list.</span>
<span class="sd">        If parameter choice is given, the</span>
<span class="sd">        computation is limited to the actions</span>
<span class="sd">        of the choice.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">choice</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">choice</span><span class="p">]</span>

        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>

        <span class="n">levels</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">Max</span><span class="p">,</span><span class="n">Min</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="n">levels</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
                <span class="n">levels</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Max</span> <span class="o">-</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">+</span> <span class="n">Min</span><span class="p">)</span>
        <span class="c1">## if Debug:</span>
        <span class="c1">##     print levels</span>
        <span class="n">levelsList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">levels</span><span class="p">)</span>
        <span class="n">levelsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;levelsList&#39;</span><span class="p">,</span> <span class="n">levelsList</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">levelsList</span></div>


<div class="viewcode-block" id="Digraph.computePrudentBetaLevel">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computePrudentBetaLevel">[docs]</a>
    <span class="k">def</span> <span class="nf">computePrudentBetaLevel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        computes alpha, ie the lowest valuation level, for which the</span>
<span class="sd">        bipolarly polarised digraph doesn&#39;t contain a chordless circuit.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">valuationLevels</span><span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeValuationLevels</span><span class="p">(</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;number of levels; </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">valuationLevels</span><span class="p">))</span>
        <span class="n">valuationLevels</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">valuationLevels</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">])):</span>
            <span class="n">level</span> <span class="o">=</span> <span class="n">valuationLevels</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;checking level: &#39;</span><span class="p">,</span> <span class="n">level</span><span class="p">)</span>
            <span class="n">gp</span> <span class="o">=</span> <span class="n">PolarisedDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gp</span><span class="o">.</span><span class="n">computeChordlessCircuits</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="n">gp</span><span class="o">.</span><span class="n">showChordlessCircuits</span><span class="p">()</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;prudent order level = </span><span class="si">%s</span><span class="s1"> (med = </span><span class="si">%.2f</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">valuationLevels</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span><span class="n">Med</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">prudentBetaLevel</span> <span class="o">=</span> <span class="n">valuationLevels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">prudentBetaLevel</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">prudentBetaLevel</span> <span class="o">=</span> <span class="n">Med</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="c1">## self.computeChordlessCircuits()</span>
            <span class="c1">## self.showChordlessCircuits()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;prudent order level = </span><span class="si">%s</span><span class="s1"> = med&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">Med</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">Med</span></div>


<div class="viewcode-block" id="Digraph.computeValuationPercentiles">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeValuationPercentiles">[docs]</a>
    <span class="k">def</span> <span class="nf">computeValuationPercentiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">choice</span><span class="p">,</span> <span class="n">percentages</span><span class="p">,</span> <span class="n">withValues</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters: choice and list of percentages.</span>
<span class="sd">        renders a series of quantiles of the characteristics valuation of</span>
<span class="sd">        the arcs in the digraph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">vx</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">choice</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">choice</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="n">vx</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
        <span class="n">vx</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">withValues</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;values &#39;</span><span class="p">,</span> <span class="n">vx</span><span class="p">)</span>
        <span class="n">nv</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">vx</span><span class="p">)</span>
        <span class="n">percentile</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">percentages</span><span class="p">:</span>
            <span class="n">kq</span> <span class="o">=</span> <span class="n">q</span><span class="o">*</span><span class="n">nv</span><span class="o">//</span><span class="mi">100</span>
            <span class="n">r</span> <span class="o">=</span> <span class="p">(</span><span class="n">nv</span><span class="o">*</span><span class="n">q</span><span class="p">)</span><span class="o">%</span> <span class="mi">100</span>
            <span class="k">if</span> <span class="n">q</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">percentile</span><span class="p">[</span><span class="n">q</span><span class="p">]</span> <span class="o">=</span> <span class="n">vx</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">q</span> <span class="o">==</span> <span class="mi">100</span><span class="p">:</span>
                <span class="n">percentile</span><span class="p">[</span><span class="n">q</span><span class="p">]</span> <span class="o">=</span> <span class="n">vx</span><span class="p">[</span><span class="n">nv</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">percentile</span><span class="p">[</span><span class="n">q</span><span class="p">]</span> <span class="o">=</span> <span class="n">vx</span><span class="p">[</span><span class="n">kq</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">r</span><span class="p">))</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span><span class="n">vx</span><span class="p">[</span><span class="n">kq</span><span class="p">]</span><span class="o">-</span><span class="n">vx</span><span class="p">[</span><span class="n">kq</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">percentile</span></div>


<div class="viewcode-block" id="Digraph.computeValuationPercentages">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeValuationPercentages">[docs]</a>
    <span class="k">def</span> <span class="nf">computeValuationPercentages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">choice</span><span class="p">,</span><span class="n">percentiles</span><span class="p">,</span><span class="n">withValues</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters: choice and list of percentiles.</span>
<span class="sd">        renders a series of percentages of the characteristics valuation of</span>
<span class="sd">        the arcs in the digraph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">vx</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">choice</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">choice</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="n">vx</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
        <span class="n">vx</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">nv</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">vx</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">withValues</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;values &#39;</span><span class="p">,</span> <span class="n">vx</span><span class="p">)</span>
        <span class="n">np</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">percentiles</span><span class="p">)</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">np</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">vx</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">np</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">percentiles</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">val</span><span class="p">:</span>
                    <span class="n">rv</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="mf">1.0</span>
        <span class="n">percentages</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">np</span><span class="p">):</span>
            <span class="n">percentages</span><span class="p">[</span><span class="n">percentiles</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">nv</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">percentages</span></div>


<div class="viewcode-block" id="Digraph.computeAverageValuation">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeAverageValuation">[docs]</a>
    <span class="k">def</span> <span class="nf">computeAverageValuation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes the bipolar average correlation between</span>
<span class="sd">        self and the crisp complete digraph of same order</span>
<span class="sd">        of the irreflexive and determined arcs of the digraph</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">averageValuation</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="n">determined</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="c1">#actionsList = [x for x in self.actions]</span>
        <span class="n">nbDeterm</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">rx</span> <span class="ow">in</span> <span class="n">relation</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">y</span><span class="p">,</span><span class="n">rxy</span> <span class="ow">in</span> <span class="n">rx</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">rxy</span> <span class="o">!=</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">nbDeterm</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="n">averageValuation</span> <span class="o">+=</span> <span class="n">rxy</span>
                        <span class="n">determined</span> <span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">rxy</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">averageValuation</span> <span class="o">/</span> <span class="n">determined</span></div>


<div class="viewcode-block" id="Digraph.computeDeterminateness">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeDeterminateness">[docs]</a>
    <span class="k">def</span> <span class="nf">computeDeterminateness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">InPercents</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes the Kendalll distance of self</span>
<span class="sd">        with the all median-valued indeterminate digraph of order n.</span>

<span class="sd">        Return the average determination of the irreflexive part of the digraph.</span>

<span class="sd">        *determination* = sum_(x,y) { abs[ r(xRy) - Med ] } / n(n-1)</span>
<span class="sd">        </span>
<span class="sd">        If *InPercents* is True, returns the average determination in percentage of</span>
<span class="sd">        (Max - Med) difference.</span>

<span class="sd">        &gt;&gt;&gt; from outrankingDigraphs import BipolarOutrankingDigraph</span>
<span class="sd">        &gt;&gt;&gt; from randomPerfTabs import Random3ObjectivesPerformanceTableau</span>
<span class="sd">        &gt;&gt;&gt; t = Random3ObjectivesPerformanceTableau(numberOfActions=7,numberOfCriteria=7,seed=101)</span>
<span class="sd">        &gt;&gt;&gt; g = BipolarOutrankingDigraph(t,Normalized=True)</span>
<span class="sd">        &gt;&gt;&gt; g</span>
<span class="sd">        *------- Object instance description ------*</span>
<span class="sd">        Instance class      : BipolarOutrankingDigraph</span>
<span class="sd">        Instance name       : rel_random3ObjectivesPerfTab</span>
<span class="sd">        Actions             : 7</span>
<span class="sd">        Criteria            : 7</span>
<span class="sd">        Size                : 27</span>
<span class="sd">        Determinateness (%) : 65.67</span>
<span class="sd">        Valuation domain    : [-1.00;1.00]</span>
<span class="sd">        &gt;&gt;&gt; print(g.computeDeterminateness())</span>
<span class="sd">        0.3134920634920634920634920638</span>
<span class="sd">        &gt;&gt;&gt; print(g.computeDeterminateness(InPercents=True))</span>
<span class="sd">        65.67460317460317460317460320</span>
<span class="sd">        &gt;&gt;&gt; g.recodeValuation(0,1)</span>
<span class="sd">        &gt;&gt;&gt; g</span>
<span class="sd">        *------- Object instance description ------*</span>
<span class="sd">        Instance class      : BipolarOutrankingDigraph</span>
<span class="sd">        Instance name       : rel_random3ObjectivesPerfTab</span>
<span class="sd">        Actions             : 7</span>
<span class="sd">        Criteria            : 7</span>
<span class="sd">        Size                : 27</span>
<span class="sd">        Determinateness (%) : 65.67</span>
<span class="sd">        Valuation domain    : [0.00;1.00]</span>
<span class="sd">        &gt;&gt;&gt; print(g.computeDeterminateness())</span>
<span class="sd">        0.1567460317460317460317460318</span>
<span class="sd">        &gt;&gt;&gt; print(g.computeDeterminateness(InPercents=True))</span>
<span class="sd">        65.67460317460317460317460320</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="c1">#actions = self.actions</span>
        <span class="n">order</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span>
        <span class="n">D</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">rx</span> <span class="ow">in</span> <span class="n">relation</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">y</span><span class="p">,</span><span class="n">rxy</span> <span class="ow">in</span> <span class="n">rx</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="n">D</span> <span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">rxy</span> <span class="o">-</span> <span class="n">Med</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">order</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">determination</span> <span class="o">=</span> <span class="n">D</span> <span class="o">/</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">((</span><span class="n">order</span> <span class="o">*</span> <span class="p">(</span><span class="n">order</span><span class="o">-</span><span class="mi">1</span><span class="p">))))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">determination</span> <span class="o">=</span> <span class="n">D</span>
        <span class="k">if</span> <span class="n">InPercents</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span> <span class="p">(</span><span class="n">determination</span> <span class="o">/</span> <span class="p">(</span><span class="n">Max</span><span class="o">-</span><span class="n">Med</span><span class="p">))</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">))</span> <span class="o">/</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2.0&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">determination</span></div>


<div class="viewcode-block" id="Digraph.showStatistics">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showStatistics">[docs]</a>
    <span class="k">def</span> <span class="nf">showStatistics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes digraph statistics like order, size and arc-density.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#import array</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----- general statistics -------------*&#39;</span><span class="p">)</span>
        <span class="n">nbrcomp</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="p">())</span>
        <span class="n">nbrstrcomp</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">strongComponents</span><span class="p">())</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">size</span><span class="p">,</span><span class="n">undeterm</span><span class="p">,</span><span class="n">arcDensity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sizeSubGraph</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">undeterm</span> <span class="o">=</span> <span class="n">undeterm</span>
        <span class="n">density</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeAllDensities</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">arcDensity</span> <span class="o">=</span> <span class="n">density</span><span class="p">[</span><span class="s1">&#39;arc&#39;</span><span class="p">]</span>
        <span class="n">outDegrees</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outDegreesDistribution</span><span class="p">()</span>
        <span class="n">inDegrees</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inDegreesDistribution</span><span class="p">()</span>
        <span class="n">symDegrees</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">symDegreesDistribution</span><span class="p">()</span>
        <span class="n">nbDepths</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">neighbourhoodDepthDistribution</span><span class="p">()</span>
        <span class="n">nb</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nbDepths</span><span class="p">)</span>
        <span class="n">meanLength</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nb</span><span class="p">):</span>
            <span class="n">meanLength</span> <span class="o">+=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">nbDepths</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">nbDepths</span><span class="p">[</span><span class="n">nb</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">meanLength</span> <span class="o">=</span> <span class="s1">&#39;infinity&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">meanLength</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">meanLength</span><span class="o">/</span><span class="n">order</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">meanNeighbourhoodDepth</span> <span class="o">=</span> <span class="n">meanLength</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">digraphDiameter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeDiameter</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">agglomerationCoefficient</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">meanAgglomerationCoefficient</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">agglomerationDistribution</span><span class="p">()</span>
        <span class="c1"># Outranking determinateness</span>
<span class="c1">##        Max = self.valuationdomain[&#39;max&#39;]</span>
<span class="c1">##        Med = self.valuationdomain[&#39;med&#39;]</span>
<span class="c1">##        deter = Decimal(&#39;0.0&#39;)</span>
<span class="c1">##        for x,rx in relation.items():</span>
<span class="c1">##            for y,rxy in rx.items():</span>
<span class="c1">##                if x != y:</span>
<span class="c1">##                    # print(relation[x][y], Med)</span>
<span class="c1">##                    deter += abs(rxy - Med)</span>
<span class="c1">##        deter /= order * (order-1) * (Max - Med)</span>
        <span class="n">deter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeDeterminateness</span><span class="p">(</span><span class="n">InPercents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">trans</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeTransitivityDegree</span><span class="p">(</span><span class="n">InPercents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">sym</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeSymmetryDegree</span><span class="p">(</span><span class="n">InPercents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="c1">#  output results</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;for digraph              : &lt;&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.py&gt;&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;order                    :&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="p">,</span> <span class="s1">&#39;nodes&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;size                     :&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="s1">&#39;arcs&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;undetermined             :&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">undeterm</span><span class="p">,</span> <span class="s1">&#39;arcs&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;determinateness (</span><span class="si">%%</span><span class="s1">)      : </span><span class="si">%.1f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">deter</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;arc density              : </span><span class="si">%.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">density</span><span class="p">[</span><span class="s1">&#39;arc&#39;</span><span class="p">]))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;double arc density       : </span><span class="si">%.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">density</span><span class="p">[</span><span class="s1">&#39;double&#39;</span><span class="p">]))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;single arc density       : </span><span class="si">%.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">density</span><span class="p">[</span><span class="s1">&#39;single&#39;</span><span class="p">]))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;absence density          : </span><span class="si">%.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">density</span><span class="p">[</span><span class="s1">&#39;absence&#39;</span><span class="p">]))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;strict single arc density: </span><span class="si">%.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">density</span><span class="p">[</span><span class="s1">&#39;strictSingle&#39;</span><span class="p">]))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;strict absence density   : </span><span class="si">%.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">density</span><span class="p">[</span><span class="s1">&#39;strictAbsence&#39;</span><span class="p">]))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;components               :&#39;</span><span class="p">,</span> <span class="n">nbrcomp</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;strong components        :&#39;</span><span class="p">,</span> <span class="n">nbrstrcomp</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;transitivity degree (</span><span class="si">%%</span><span class="s1">)  : </span><span class="si">%.1f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">trans</span><span class="p">)</span> <span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;symmetry degree (</span><span class="si">%%</span><span class="s1">)      : </span><span class="si">%.1f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">sym</span><span class="p">)</span> <span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;                         :&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">outDegrees</span><span class="p">))))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;outdegrees distribution  :&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">outDegrees</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;indegrees distribution   :&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">inDegrees</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;mean outdegree           : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">computeMeanOutDegree</span><span class="p">()))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;mean indegree            : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">computeMeanInDegree</span><span class="p">()))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;                         :&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">symDegrees</span><span class="p">))))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;symmetric degrees dist.  :&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">symDegrees</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;mean symmetric degree    : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">computeMeanSymDegree</span><span class="p">()))</span>

        <span class="n">outgini</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeConcentrationIndex</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">outDegrees</span><span class="p">))),</span><span class="nb">list</span><span class="p">(</span><span class="n">outDegrees</span><span class="p">))</span>
        <span class="n">ingini</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeConcentrationIndex</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">inDegrees</span><span class="p">))),</span><span class="nb">list</span><span class="p">(</span><span class="n">inDegrees</span><span class="p">))</span>
        <span class="n">symgini</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeConcentrationIndex</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">symDegrees</span><span class="p">))),</span><span class="nb">list</span><span class="p">(</span><span class="n">symDegrees</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;outdegrees concentration index    : </span><span class="si">%.4f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">outgini</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;indegrees concentration index     : </span><span class="si">%.4f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ingini</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;symdegrees concentration index    : </span><span class="si">%.4f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">symgini</span><span class="p">))</span>
        <span class="n">listindex</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">order</span><span class="p">))</span>
        <span class="n">listindex</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;                                  :&#39;</span><span class="p">,</span> <span class="n">listindex</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;neighbourhood depths distribution :&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">nbDepths</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">meanLength</span> <span class="o">!=</span> <span class="s1">&#39;infinity&#39;</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;mean neighbourhood depth         : </span><span class="si">%.2f</span><span class="s2"> &quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">meanLength</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;mean neighbourhood length         :&#39;</span><span class="p">,</span> <span class="n">meanLength</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;digraph diameter                  :&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">digraphDiameter</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;agglomeration distribution        :&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;: </span><span class="si">%.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">agglomerationCoefficient</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;agglomeration coefficient         : </span><span class="si">%.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">meanAgglomerationCoefficient</span><span class="p">))</span></div>


<div class="viewcode-block" id="Digraph.meanLength">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.meanLength">[docs]</a>
    <span class="k">def</span> <span class="nf">meanLength</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Oriented</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the (by default non-oriented) mean neighbourhoor depth of self.</span>
<span class="sd">        !!! self.order must be set previously !!!</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nbDepths</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">neighbourhoodDepthDistribution</span><span class="p">(</span><span class="n">Oriented</span><span class="p">)</span>
        <span class="n">nb</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nbDepths</span><span class="p">)</span>
        <span class="n">meanLength</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nb</span><span class="p">):</span>
            <span class="n">meanLength</span> <span class="o">+=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">nbDepths</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">nbDepths</span><span class="p">[</span><span class="n">nb</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">meanLength</span> <span class="o">=</span> <span class="s1">&#39;infinity&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">meanLength</span> <span class="o">=</span> <span class="n">meanLength</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">meanLength</span></div>


<div class="viewcode-block" id="Digraph.meanDegree">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.meanDegree">[docs]</a>
    <span class="k">def</span> <span class="nf">meanDegree</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the mean degree of self.</span>
<span class="sd">        !!! self.size must be set previously !!!</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">outDegrees</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outDegreesDistribution</span><span class="p">()</span>
        <span class="n">inDegrees</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inDegreesDistribution</span><span class="p">()</span>
        <span class="n">degrees</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">nd</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">outDegrees</span><span class="p">)</span>
        <span class="n">meanDegree</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nd</span><span class="p">):</span>
            <span class="n">degrees</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">outDegrees</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="n">inDegrees</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">meanDegree</span> <span class="o">+=</span> <span class="n">i</span> <span class="o">*</span> <span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">outDegrees</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">inDegrees</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">meanDegree</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">meanDegree</span> <span class="o">=</span> <span class="n">meanDegree</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">meanDegree</span></div>


<div class="viewcode-block" id="Digraph.computeMeanOutDegree">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeMeanOutDegree">[docs]</a>
    <span class="k">def</span> <span class="nf">computeMeanOutDegree</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the mean degree of self.</span>
<span class="sd">        !!! self.size must be set previously !!!</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">outDegrees</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outDegreesDistribution</span><span class="p">()</span>
        <span class="n">nd</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">outDegrees</span><span class="p">)</span>
        <span class="n">meanOutDegree</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nd</span><span class="p">):</span>
            <span class="n">meanOutDegree</span> <span class="o">+=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">outDegrees</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">meanOutDegree</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">meanOutDegree</span> <span class="o">=</span> <span class="n">meanOutDegree</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">meanOutDegree</span></div>


<div class="viewcode-block" id="Digraph.computeMeanInDegree">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeMeanInDegree">[docs]</a>
    <span class="k">def</span> <span class="nf">computeMeanInDegree</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the mean indegree of self.</span>
<span class="sd">        !!! self.size must be set previously !!!</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">inDegrees</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inDegreesDistribution</span><span class="p">()</span>
        <span class="n">nd</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">inDegrees</span><span class="p">)</span>
        <span class="n">meanInDegree</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nd</span><span class="p">):</span>
            <span class="n">meanInDegree</span> <span class="o">+=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">inDegrees</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">meanInDegree</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">meanInDegree</span> <span class="o">=</span> <span class="n">meanInDegree</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">order</span>
        <span class="k">return</span> <span class="n">meanInDegree</span></div>


<div class="viewcode-block" id="Digraph.computeMedianOutDegree">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeMedianOutDegree">[docs]</a>
    <span class="k">def</span> <span class="nf">computeMedianOutDegree</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the median outdegree of self.</span>
<span class="sd">        !!! self.size must be set previously !!!</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">outDegrees</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outDegreesDistribution</span><span class="p">()</span>
        <span class="n">nd</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">outDegrees</span><span class="p">)</span>
        <span class="n">outDegreesList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nd</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">outDegrees</span><span class="p">[</span><span class="n">d</span><span class="p">]):</span>
                <span class="n">outDegreesList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
        <span class="n">outDegreesList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="c1">#print &#39;outdegrees sorted&#39;, outDegreesList</span>
        <span class="n">ndl</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">outDegreesList</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ndl</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">medpos</span> <span class="o">=</span> <span class="n">ndl</span><span class="o">//</span><span class="mi">2</span>
            <span class="n">medianOutDegree</span> <span class="o">=</span> <span class="n">outDegreesList</span><span class="p">[</span><span class="n">medpos</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">medpos0</span> <span class="o">=</span> <span class="n">ndl</span><span class="o">//</span><span class="mi">2</span>
            <span class="n">medpos1</span> <span class="o">=</span> <span class="p">(</span><span class="n">ndl</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">//</span><span class="mi">2</span>
            <span class="n">medianOutDegree</span> <span class="o">=</span>  <span class="p">(</span><span class="n">outDegreesList</span><span class="p">[</span><span class="n">medpos0</span><span class="p">]</span> <span class="o">+</span> <span class="n">outDegreesList</span><span class="p">[</span><span class="n">medpos1</span><span class="p">])</span><span class="o">/</span><span class="mi">2</span>
        <span class="k">return</span> <span class="n">medianOutDegree</span></div>


<div class="viewcode-block" id="Digraph.computeMedianSymDegree">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeMedianSymDegree">[docs]</a>
    <span class="k">def</span> <span class="nf">computeMedianSymDegree</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the median symmetric degree of self.</span>
<span class="sd">        !!! self.size must be set previously !!!</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">symDegrees</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">symDegreesDistribution</span><span class="p">()</span>
        <span class="n">nd</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">symDegrees</span><span class="p">)</span>
        <span class="n">symDegreesList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nd</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">symDegrees</span><span class="p">[</span><span class="n">d</span><span class="p">]):</span>
                <span class="n">symDegreesList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
        <span class="n">nd</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">symDegrees</span><span class="p">)</span>
        <span class="n">symDegreesList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">ndl</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">symDegreesList</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ndl</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">medpos</span> <span class="o">=</span> <span class="n">ndl</span><span class="o">//</span><span class="mi">2</span>
            <span class="n">medianSymDegree</span> <span class="o">=</span> <span class="n">symDegreesList</span><span class="p">[</span><span class="n">medpos</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">medpos0</span> <span class="o">=</span> <span class="n">ndl</span><span class="o">/</span><span class="mi">2</span>
            <span class="n">medpos1</span> <span class="o">=</span> <span class="p">(</span><span class="n">ndl</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">//</span><span class="mi">2</span>
            <span class="n">medianSymDegree</span> <span class="o">=</span>  <span class="p">(</span><span class="n">symDegreesList</span><span class="p">[</span><span class="n">medpos0</span><span class="p">]</span> <span class="o">+</span> <span class="n">symDegreesList</span><span class="p">[</span><span class="n">medpos1</span><span class="p">])</span><span class="o">/</span><span class="mi">2</span>
        <span class="k">return</span> <span class="n">medianSymDegree</span></div>


<div class="viewcode-block" id="Digraph.computeMeanSymDegree">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeMeanSymDegree">[docs]</a>
    <span class="k">def</span> <span class="nf">computeMeanSymDegree</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the mean degree of self.</span>
<span class="sd">        !!! self.size must be set previously !!!</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">order</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">))</span>
        <span class="n">symDegrees</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">symDegreesDistribution</span><span class="p">()</span>
        <span class="n">nd</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">symDegrees</span><span class="p">)</span>
        <span class="n">meanSymDegree</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nd</span><span class="p">):</span>
            <span class="n">meanSymDegree</span> <span class="o">+=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">symDegrees</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">meanSymDegree</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">meanSymDegree</span> <span class="o">=</span> <span class="n">meanSymDegree</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">order</span>
        <span class="k">return</span> <span class="n">meanSymDegree</span></div>


<div class="viewcode-block" id="Digraph.computeDiameter">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeDiameter">[docs]</a>
    <span class="k">def</span> <span class="nf">computeDiameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Oriented</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the (by default oriented) diameter of the digraph instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">nbDepths</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">neighbourhoodDepthDistribution</span><span class="p">(</span><span class="n">Oriented</span><span class="o">=</span><span class="n">Oriented</span><span class="p">)</span>
        <span class="n">nbDepths</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">nbDepths</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">diameter</span> <span class="o">=</span> <span class="s1">&#39;infinity&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">diameter</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">nbDepths</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">nbDepths</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">diameter</span> <span class="o">=</span> <span class="n">order</span> <span class="o">-</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
                    <span class="k">break</span>
        <span class="k">return</span> <span class="n">diameter</span></div>


    <span class="k">def</span> <span class="nf">_graphDetermination</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Normalized</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Output: average normalized (by default) arc determination:</span>

<span class="sd">        averageDeterm = ( sum_(x,y) [ abs( relf-relation[x][y] - Med )] / n ) / [( Max-Med ) if Normalized],</span>

<span class="sd">        where Med = self.valuationdomain[&#39;med&#39;] and Max = self.valuationdomain[&#39;max&#39;].</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">determ</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.0&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">rx</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">y</span><span class="p">,</span><span class="n">rxy</span> <span class="ow">in</span> <span class="n">rx</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">rxy</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">determ</span> <span class="o">+=</span> <span class="n">rxy</span> <span class="o">-</span> <span class="n">Med</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">determ</span> <span class="o">+=</span> <span class="n">Med</span> <span class="o">-</span> <span class="n">rxy</span>
        <span class="k">if</span> <span class="n">Normalized</span><span class="p">:</span>
            <span class="n">averageDeterm</span> <span class="o">=</span> <span class="p">(</span><span class="n">determ</span> <span class="o">/</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="p">)))</span><span class="o">/</span><span class="p">(</span><span class="n">Max</span><span class="o">-</span><span class="n">Med</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">averageDeterm</span> <span class="o">=</span> <span class="p">(</span><span class="n">determ</span> <span class="o">/</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="p">)))</span>
        <span class="k">return</span>  <span class="n">averageDeterm</span>

<div class="viewcode-block" id="Digraph.computeSize">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeSize">[docs]</a>
    <span class="k">def</span> <span class="nf">computeSize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the number of validated non reflexive arcs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="c1">#actions = [x for x in self.actions]</span>
        <span class="c1">#actions = self.actions</span>
        <span class="c1">#relation = self.relation</span>
        <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">rx</span>  <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">y</span><span class="p">,</span><span class="n">rxy</span> <span class="ow">in</span> <span class="n">rx</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">rxy</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">size</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">size</span></div>


<div class="viewcode-block" id="Digraph.computeCoSize">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeCoSize">[docs]</a>
    <span class="k">def</span> <span class="nf">computeCoSize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the number of non validated non reflexive arcs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="c1">#actions = [x for x in self.actions]</span>
        <span class="c1">#relation = self.relation</span>
        <span class="n">coSize</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">rx</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">y</span><span class="p">,</span><span class="n">rxy</span> <span class="ow">in</span> <span class="n">rx</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">rxy</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">coSize</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">coSize</span></div>


<div class="viewcode-block" id="Digraph.sizeSubGraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.sizeSubGraph">[docs]</a>
    <span class="k">def</span> <span class="nf">sizeSubGraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">choice</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Output: (size, undeterm,arcDensity).</span>
<span class="sd">        Renders the arc density of the induced subgraph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">order</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">choice</span><span class="p">))</span>
        <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">undeterm</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">choice</span><span class="p">:</span>
            <span class="n">rx</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">choice</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">size</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">undeterm</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">choice</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">arcDensity</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">arcDensity</span> <span class="o">=</span> <span class="p">(</span><span class="n">size</span> <span class="o">*</span> <span class="mf">100.0</span><span class="p">)</span><span class="o">/</span> <span class="p">(</span><span class="n">order</span> <span class="o">*</span> <span class="p">(</span><span class="n">order</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">))</span>
        <span class="k">return</span> <span class="n">size</span><span class="p">,</span> <span class="n">undeterm</span><span class="p">,</span> <span class="n">arcDensity</span></div>


<div class="viewcode-block" id="Digraph.agglomerationDistribution">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.agglomerationDistribution">[docs]</a>
    <span class="k">def</span> <span class="nf">agglomerationDistribution</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Output: aggloCoeffDistribution, meanCoeff</span>
<span class="sd">        Renders the distribution of agglomeration coefficients.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">array</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">aggloCoeff</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">order</span><span class="p">)</span>
        <span class="n">meanCoeff</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
            <span class="n">neighborhood</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">actions</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="mi">0</span><span class="p">]</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">actions</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">size</span><span class="p">,</span> <span class="n">undeterm</span><span class="p">,</span> <span class="n">aggloCoeff</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sizeSubGraph</span><span class="p">(</span><span class="n">neighborhood</span><span class="p">)</span>
            <span class="n">meanCoeff</span> <span class="o">+=</span> <span class="n">aggloCoeff</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">order</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">meanCoeff</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">meanCoeff</span> <span class="o">/=</span> <span class="n">order</span>
        <span class="k">return</span> <span class="n">aggloCoeff</span><span class="p">,</span> <span class="n">meanCoeff</span></div>


<div class="viewcode-block" id="Digraph.outDegreesDistribution">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.outDegreesDistribution">[docs]</a>
    <span class="k">def</span> <span class="nf">outDegreesDistribution</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the distribution of outdegrees.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">array</span>
        <span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">outDegrees</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">order</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">nx</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">outDegrees</span><span class="p">[</span><span class="n">nx</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">outDegrees</span></div>


<div class="viewcode-block" id="Digraph.computeConcentrationIndexTrapez">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeConcentrationIndexTrapez">[docs]</a>
    <span class="k">def</span> <span class="nf">computeConcentrationIndexTrapez</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">X</span><span class="p">,</span><span class="n">N</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the Gini concentration index of the X serie.</span>
<span class="sd">        N contains the partial frequencies.</span>
<span class="sd">        Based on the triangles summation formula.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
        <span class="c1">#dg = self.outDegreesDistribution()</span>
        <span class="n">X</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
        <span class="n">N</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,]</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Xi &#39;</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">N</span><span class="p">)</span>
        <span class="n">Q</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
        <span class="n">F</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
        <span class="n">Qsum</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">Qsum</span> <span class="o">+=</span> <span class="n">X</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">N</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Qsum &#39;</span><span class="p">,</span><span class="n">Qsum</span><span class="p">)</span>
        <span class="n">F</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="n">Q</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">qi</span> <span class="o">=</span> <span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">N</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">/</span><span class="n">Qsum</span>
            <span class="n">Q</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">Q</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">qi</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Q[i] i &#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">Q</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">fi</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">N</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">/</span><span class="n">n</span>
            <span class="n">F</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">F</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">fi</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;i, F[i]&#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">F</span><span class="p">)</span>
        <span class="n">f0</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">N</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="n">gini</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="p">(</span><span class="n">f0</span><span class="o">*</span><span class="n">Q</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;o gini &#39;</span><span class="p">,</span> <span class="n">gini</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
            <span class="n">fi</span> <span class="o">=</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">N</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
            <span class="n">gini</span> <span class="o">-=</span> <span class="n">fi</span> <span class="o">*</span> <span class="p">(</span><span class="n">Q</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">Q</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;i gini&#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">gini</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">gini</span></div>


<div class="viewcode-block" id="Digraph.computeConcentrationIndex">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeConcentrationIndex">[docs]</a>
    <span class="k">def</span> <span class="nf">computeConcentrationIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">X</span><span class="p">,</span><span class="n">N</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the Gini concentration index of the X serie.</span>
<span class="sd">        N contains the partial frequencies.</span>
<span class="sd">        Based on the triangle summation formula.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Qsum</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">r</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">r</span><span class="p">):</span>
            <span class="n">n</span> <span class="o">+=</span> <span class="n">N</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">Qsum</span> <span class="o">+=</span> <span class="n">X</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">N</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Qsum</span> <span class="o">!=</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="n">Q</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">r</span><span class="p">)]</span>
            <span class="n">F</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">r</span><span class="p">)]</span>
            <span class="n">F</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">N</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="n">n</span>
            <span class="n">Q</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">N</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="n">Qsum</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">r</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">qi</span> <span class="o">=</span> <span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">N</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">/</span><span class="n">Qsum</span>
                <span class="n">Q</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">Q</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">qi</span>
                <span class="n">fi</span> <span class="o">=</span> <span class="n">N</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">/</span><span class="n">n</span>
                <span class="n">F</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">F</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">fi</span>
            <span class="n">gini</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">r</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">gini</span> <span class="o">+=</span> <span class="p">(</span><span class="n">F</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">Q</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span> <span class="o">-</span> <span class="p">(</span><span class="n">Q</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">F</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">gini</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">return</span> <span class="n">gini</span></div>


<div class="viewcode-block" id="Digraph.inDegreesDistribution">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.inDegreesDistribution">[docs]</a>
    <span class="k">def</span> <span class="nf">inDegreesDistribution</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the distribution of indegrees.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">array</span>
        <span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">inDegrees</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">order</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">nx</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">inDegrees</span><span class="p">[</span><span class="n">nx</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">inDegrees</span></div>


<div class="viewcode-block" id="Digraph.symDegreesDistribution">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.symDegreesDistribution">[docs]</a>
    <span class="k">def</span> <span class="nf">symDegreesDistribution</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the distribution of symmetric degrees.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">array</span>
        <span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">symDegrees</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="p">((</span><span class="mi">2</span><span class="o">*</span><span class="n">order</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">nx</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">symDegrees</span><span class="p">[</span><span class="n">nx</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">symDegrees</span></div>


<div class="viewcode-block" id="Digraph.neighbourhoodDepthDistribution">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.neighbourhoodDepthDistribution">[docs]</a>
    <span class="k">def</span> <span class="nf">neighbourhoodDepthDistribution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Oriented</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the distribtion of neighbourhood depths.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">array</span><span class="o">,</span><span class="nn">copy</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">nv</span> <span class="o">=</span> <span class="n">order</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">vecNeighbourhoodDepth</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">nv</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">nbx</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">neighbx</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span><span class="p">])</span>
            <span class="n">restactions</span> <span class="o">=</span> <span class="n">actions</span> <span class="o">-</span> <span class="n">neighbx</span>
            <span class="k">while</span> <span class="n">restactions</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">()</span> <span class="ow">and</span> <span class="n">nbx</span> <span class="o">&lt;</span> <span class="n">order</span><span class="p">:</span>
                <span class="n">nbx</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">iterneighbx</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">neighbx</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">iterneighbx</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">Oriented</span><span class="p">:</span>
                        <span class="n">neighbx</span> <span class="o">=</span> <span class="n">neighbx</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">neighbx</span> <span class="o">=</span> <span class="n">neighbx</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">restactions</span> <span class="o">=</span> <span class="n">actions</span> <span class="o">-</span> <span class="n">neighbx</span>
            <span class="k">if</span> <span class="n">restactions</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
                <span class="n">vecNeighbourhoodDepth</span><span class="p">[</span><span class="n">order</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">vecNeighbourhoodDepth</span><span class="p">[</span><span class="n">nbx</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">vecNeighbourhoodDepth</span></div>



<div class="viewcode-block" id="Digraph.neighbourhoodCollection">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.neighbourhoodCollection">[docs]</a>
    <span class="k">def</span> <span class="nf">neighbourhoodCollection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Oriented</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">Potential</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the neighbourhood.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">array</span><span class="o">,</span><span class="nn">copy</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Potential</span><span class="p">:</span>
            <span class="n">weakGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weakGammaSets</span><span class="p">()</span>
        <span class="n">neighbourhoods</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">nbx</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">neighbx</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span><span class="p">])</span>
            <span class="n">restactions</span> <span class="o">=</span> <span class="n">actions</span> <span class="o">-</span> <span class="n">neighbx</span>
            <span class="k">while</span> <span class="n">restactions</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">()</span> <span class="ow">and</span> <span class="n">nbx</span> <span class="o">&lt;</span> <span class="n">order</span><span class="p">:</span>
                <span class="n">nbx</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">iterneighbx</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">neighbx</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">iterneighbx</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">Potential</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">Oriented</span><span class="p">:</span>
                            <span class="n">neighbx</span> <span class="o">=</span> <span class="n">neighbx</span> <span class="o">|</span> <span class="n">weakGamma</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">neighbx</span> <span class="o">=</span> <span class="n">neighbx</span> <span class="o">|</span> <span class="n">weakGamma</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">|</span> <span class="n">weakGamma</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">Oriented</span><span class="p">:</span>
                            <span class="n">neighbx</span> <span class="o">=</span> <span class="n">neighbx</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">neighbx</span> <span class="o">=</span> <span class="n">neighbx</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">restactions</span> <span class="o">=</span> <span class="n">actions</span> <span class="o">-</span> <span class="n">neighbx</span>
            <span class="c1">#print &#39;neighbx&#39;, neighbx</span>
            <span class="n">neighbourhoods</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">=</span> <span class="n">neighbx</span>
        <span class="k">return</span> <span class="n">neighbourhoods</span></div>


<div class="viewcode-block" id="Digraph.strongComponents">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.strongComponents">[docs]</a>
    <span class="k">def</span> <span class="nf">strongComponents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">setPotential</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the set of strong components of self.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">neighbourhoods</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">neighbourhoodCollection</span><span class="p">(</span><span class="n">Oriented</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">Potential</span> <span class="o">=</span> <span class="n">setPotential</span><span class="p">)</span>
        <span class="n">strongComponents</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">componentx</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">neighbourhoods</span><span class="p">[</span><span class="n">x</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">neighbourhoods</span><span class="p">[</span><span class="n">y</span><span class="p">]:</span>
                    <span class="n">componentx</span> <span class="o">=</span> <span class="n">componentx</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">y</span><span class="p">])</span>
            <span class="n">strongComponents</span> <span class="o">=</span> <span class="n">strongComponents</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">componentx</span><span class="p">)])</span>
        <span class="k">return</span> <span class="n">strongComponents</span></div>


<div class="viewcode-block" id="Digraph.showMIS">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showMIS">[docs]</a>
    <span class="k">def</span> <span class="nf">showMIS</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">withListing</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prints all maximal independent choices:</span>
<span class="sd">            Result in self.misset.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">time</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---  Maximal independent choices ---*&#39;</span><span class="p">)</span>
        <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">misset</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">MISgen</span><span class="p">(</span><span class="n">actions</span><span class="p">,</span><span class="nb">frozenset</span><span class="p">()):</span>
            <span class="n">v</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">choice</span><span class="p">)]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">withListing</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">choice</span><span class="p">))</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;number of solutions: &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">misset</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;cardinality distribution&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;card.: &#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;freq.: &#39;</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;execution time: </span><span class="si">%.5f</span><span class="s1"> sec.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">t1</span><span class="o">-</span><span class="n">t0</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Results in self.misset&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Digraph.showMinDom">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showMinDom">[docs]</a>
    <span class="k">def</span> <span class="nf">showMinDom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">withListing</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prints all minimal dominant choices:</span>
<span class="sd">            Result in self.domset.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">time</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*--- Computing minimal dominant choices ---*&#39;</span><span class="p">)</span>
        <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">cover</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">cover</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span><span class="p">])</span>
        <span class="n">dom1</span> <span class="o">=</span> <span class="p">(</span><span class="nb">frozenset</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">actions</span><span class="p">)),</span><span class="n">cover</span><span class="p">)</span>
        <span class="c1">#print dom1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minset</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minhistory</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">minimalChoices</span><span class="p">(</span><span class="n">dom1</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">minset</span><span class="p">:</span>
            <span class="n">v</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">choice</span><span class="p">)]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">withListing</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">choice</span><span class="p">))</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;number of solutions: &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">minset</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;cardinality distribution&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;card.: &#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;freq.: &#39;</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;execution time: </span><span class="si">%.5f</span><span class="s1"> sec.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">t1</span><span class="o">-</span><span class="n">t0</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;iteration history: &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">minhistory</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">domset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">minset</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Results in self.domset&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Digraph.showMinAbs">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showMinAbs">[docs]</a>
    <span class="k">def</span> <span class="nf">showMinAbs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">withListing</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prints minimal absorbent choices:</span>
<span class="sd">            Result in self.absset.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">time</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*--- Computing minimal absorbent choices ---*&#39;</span><span class="p">)</span>
        <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">cover</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">cover</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span><span class="p">])</span>
        <span class="n">abs1</span> <span class="o">=</span> <span class="p">(</span><span class="nb">frozenset</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">actions</span><span class="p">)),</span><span class="n">cover</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">abs1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minset</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minhistory</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">minimalChoices</span><span class="p">(</span><span class="n">abs1</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">minset</span><span class="p">:</span>
            <span class="n">v</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">choice</span><span class="p">)]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">withListing</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">choice</span><span class="p">))</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;number of solutions: &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">minset</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;cardinality distribution&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;card.: &#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;freq.: &#39;</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;execution time: </span><span class="si">%.5f</span><span class="s1"> sec.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">t1</span><span class="o">-</span><span class="n">t0</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;iteration history: &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">minhistory</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">absset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">minset</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Results in self.absset&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Digraph.showMaxDomIrred">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showMaxDomIrred">[docs]</a>
    <span class="k">def</span> <span class="nf">showMaxDomIrred</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">withListing</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computing maximal +irredundant choices:</span>
<span class="sd">           Result in self.domirset.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">time</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*--- Computing maximal +irredundant choices ---*&#39;</span><span class="p">)</span>
        <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">domirset</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plusirredundant</span><span class="p">(</span><span class="n">actions</span><span class="p">):</span>
            <span class="n">add</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">mirsetit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">domirset</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">mir</span> <span class="ow">in</span> <span class="n">mirsetit</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">mir</span> <span class="o">&lt;</span> <span class="n">choice</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">domirset</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">mir</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">choice</span> <span class="o">&lt;=</span> <span class="n">mir</span><span class="p">:</span>
                        <span class="n">add</span> <span class="o">=</span> <span class="mi">0</span>
                        <span class="k">break</span>
            <span class="k">if</span> <span class="n">add</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">domirset</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">choice</span><span class="p">))</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">domirset</span><span class="p">:</span>
            <span class="n">v</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">choice</span><span class="p">)]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">withListing</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">choice</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;number of solutions: &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">domirset</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;cardinality distribution&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;card.: &#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;freq.: &#39;</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;execution time: </span><span class="si">%.5f</span><span class="s1"> sec.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">t1</span><span class="o">-</span><span class="n">t0</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Results in self.domirset&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Digraph.showMaxAbsIrred">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showMaxAbsIrred">[docs]</a>
    <span class="k">def</span> <span class="nf">showMaxAbsIrred</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">withListing</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computing maximal -irredundant choices:</span>
<span class="sd">            Result in self.absirset.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">time</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*--- Computing maximal -irredundant choices ---*&#39;</span><span class="p">)</span>
        <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">absirset</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">absirredundant</span><span class="p">(</span><span class="n">actions</span><span class="p">):</span>
            <span class="n">add</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">mirsetit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">absirset</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">mir</span> <span class="ow">in</span> <span class="n">mirsetit</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">mir</span> <span class="o">&lt;</span> <span class="n">choice</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">absirset</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">mir</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">choice</span> <span class="o">&lt;=</span> <span class="n">mir</span><span class="p">:</span>
                        <span class="n">add</span> <span class="o">=</span> <span class="mi">0</span>
                        <span class="k">break</span>
            <span class="k">if</span> <span class="n">add</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">absirset</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">choice</span><span class="p">))</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">absirset</span><span class="p">:</span>
            <span class="n">v</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">choice</span><span class="p">)]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">withListing</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">choice</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;number of solutions: &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">absirset</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;cardinality distribution&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;card.: &#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;freq.: &#39;</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;execution time: </span><span class="si">%.5f</span><span class="s1"> sec.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">t1</span><span class="o">-</span><span class="n">t0</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Results in self.absirset&#39;</span><span class="p">)</span></div>



<div class="viewcode-block" id="Digraph.showPreKernels">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showPreKernels">[docs]</a>
    <span class="k">def</span> <span class="nf">showPreKernels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">withListing</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Printing dominant and absorbent preKernels:</span>
<span class="sd">            Result in self.dompreKernels and self.abspreKernels</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">time</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*--- Computing preKernels ---*&#39;</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">dompreKernels</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">abspreKernels</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">independentChoices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">singletons</span><span class="p">()):</span>
            <span class="n">restactions</span> <span class="o">=</span> <span class="n">actions</span> <span class="o">-</span> <span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">restactions</span> <span class="o">&lt;=</span> <span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">dompreKernels</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">restactions</span> <span class="o">&lt;=</span> <span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]:</span>
                <span class="n">abspreKernels</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">withListing</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Dominant preKernels :&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="n">dompreKernels</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">choice</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;   independence : &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">intstab</span><span class="p">(</span><span class="n">choice</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;   dominance    : &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">domin</span><span class="p">(</span><span class="n">choice</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;   absorbency   : &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">absorb</span><span class="p">(</span><span class="n">choice</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;   covering     :  </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">averageCoveringIndex</span><span class="p">(</span><span class="n">choice</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;out&#39;</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Absorbent preKernels :&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="n">abspreKernels</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">choice</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;   independence : &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">intstab</span><span class="p">(</span><span class="n">choice</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;   dominance    : &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">domin</span><span class="p">(</span><span class="n">choice</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;   absorbency   : &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">absorb</span><span class="p">(</span><span class="n">choice</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;   covered      :  </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">averageCoveringIndex</span><span class="p">(</span><span class="n">choice</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;in&#39;</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----- statistics -----&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;graph name: &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;number of solutions&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; dominant kernels : &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">dompreKernels</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; absorbent kernels: &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">abspreKernels</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;cardinality frequency distributions&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;cardinality     : &#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)))</span>
        <span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">dompreKernels</span><span class="p">:</span>
            <span class="n">v</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">ch</span><span class="p">)]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;dominant kernel : &#39;</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
        <span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">abspreKernels</span><span class="p">:</span>
            <span class="n">v</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">ch</span><span class="p">)]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;absorbent kernel: &#39;</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Execution time  : </span><span class="si">%.5f</span><span class="s1"> sec.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">t1</span><span class="o">-</span><span class="n">t0</span><span class="p">))</span></div>


<div class="viewcode-block" id="Digraph.computePreKernels">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computePreKernels">[docs]</a>
    <span class="k">def</span> <span class="nf">computePreKernels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        computing dominant and absorbent preKernels:</span>
<span class="sd">            Result in self.dompreKernels and self.abspreKernels</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">dompreKernels</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">abspreKernels</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">independentChoices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">singletons</span><span class="p">()):</span>
            <span class="n">restactions</span> <span class="o">=</span> <span class="n">actions</span> <span class="o">-</span> <span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">restactions</span> <span class="o">&lt;=</span> <span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">dompreKernels</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">restactions</span> <span class="o">&lt;=</span> <span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]:</span>
                <span class="n">abspreKernels</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dompreKernels</span> <span class="o">=</span> <span class="n">dompreKernels</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abspreKernels</span> <span class="o">=</span> <span class="n">abspreKernels</span></div>



<div class="viewcode-block" id="Digraph.generateDomPreKernels">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.generateDomPreKernels">[docs]</a>
    <span class="k">def</span> <span class="nf">generateDomPreKernels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate all dominant prekernels from independent choices generator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">independentChoices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">singletons</span><span class="p">()):</span>
            <span class="n">choice</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">gammaDomChoice</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">restactions</span> <span class="o">=</span> <span class="n">actions</span> <span class="o">-</span> <span class="n">choice</span>
            <span class="k">if</span> <span class="n">restactions</span> <span class="o">&lt;=</span> <span class="n">gammaDomChoice</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">choice</span></div>


<div class="viewcode-block" id="Digraph.generateAbsPreKernels">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.generateAbsPreKernels">[docs]</a>
    <span class="k">def</span> <span class="nf">generateAbsPreKernels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate all absorbent prekernels from independent choices generator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">independentChoices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">singletons</span><span class="p">()):</span>
            <span class="n">choice</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">gammaAbsChoice</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">restactions</span> <span class="o">=</span> <span class="n">actions</span> <span class="o">-</span> <span class="n">choice</span>
            <span class="k">if</span> <span class="n">restactions</span> <span class="o">&lt;=</span> <span class="n">gammaAbsChoice</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">choice</span></div>


<div class="viewcode-block" id="Digraph.components">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.components">[docs]</a>
    <span class="k">def</span> <span class="nf">components</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Renders the list of connected components.&quot;&quot;&quot;</span>
        <span class="n">A</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">A</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">ncomp</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">ConComp</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">A</span><span class="p">:</span>
            <span class="n">Comp</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">A</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">A</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">ncomp</span>
                <span class="n">Comp</span> <span class="o">=</span> <span class="n">Comp</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span><span class="p">])</span>
                <span class="n">Comp</span> <span class="o">=</span> <span class="n">Comp</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collectcomps</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">ncomp</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">Comp</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">ncomp</span> <span class="o">=</span> <span class="n">ncomp</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="n">ConComp</span> <span class="o">=</span> <span class="n">ConComp</span> <span class="o">+</span> <span class="p">[</span><span class="n">Comp</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">ConComp</span></div>


<div class="viewcode-block" id="Digraph.showComponents">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showComponents">[docs]</a>
    <span class="k">def</span> <span class="nf">showComponents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Shows the list of connected components of the digraph instance.&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*--- Connected Components ---*&#39;</span><span class="p">)</span>
        <span class="n">k</span><span class="o">=</span><span class="mi">1</span>
        <span class="k">for</span> <span class="n">Comp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="p">():</span>
            <span class="n">component</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">Comp</span><span class="p">)</span>
            <span class="n">component</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">component</span><span class="p">))</span>
            <span class="n">xk</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">1</span></div>


    <span class="k">def</span> <span class="nf">_collectcomps</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">ncomp</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Internal recursive subroutine of the components method.&quot;&quot;&quot;</span>
        <span class="n">Comp</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">Nx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">Nx</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">A</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">A</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">ncomp</span>
                <span class="n">Comp</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                <span class="n">Comp</span> <span class="o">=</span> <span class="n">Comp</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">_collectcomps</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">ncomp</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Comp</span>

<div class="viewcode-block" id="Digraph.outDegrees">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.outDegrees">[docs]</a>
    <span class="k">def</span> <span class="nf">outDegrees</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders the median cut outdegrees</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">outDegrees</span> <span class="o">=</span><span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">outDegrees</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">outDegrees</span></div>


<div class="viewcode-block" id="Digraph.inDegrees">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.inDegrees">[docs]</a>
    <span class="k">def</span> <span class="nf">inDegrees</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders the median cut indegrees</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">inDegrees</span> <span class="o">=</span><span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">inDegrees</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">inDegrees</span></div>


    <span class="k">def</span> <span class="nf">_bestRanks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders best possible ranks from indegrees account</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">bestRanks</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">inDegrees</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inDegrees</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">bestRanks</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">inDegrees</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">bestRanks</span>

    <span class="k">def</span> <span class="nf">_worstRanks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders worst possible ranks from outdegrees account</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">worstRanks</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">outDegrees</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outDegrees</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">worstRanks</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">-</span> <span class="n">outDegrees</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">worstRanks</span>


<div class="viewcode-block" id="Digraph.gammaSets">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.gammaSets">[docs]</a>
    <span class="k">def</span> <span class="nf">gammaSets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the dictionary of neighborhoods {node: (dx,ax)}</span>
<span class="sd">        with set *dx* gathering the dominated, and set *ax* gathering</span>
<span class="sd">        the absorbed neighborhood.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">gamma</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="n">rx</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">dx</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">ax</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
            <span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">dx</span><span class="p">,</span><span class="n">ax</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">gamma</span></div>


<div class="viewcode-block" id="Digraph.notGammaSets">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.notGammaSets">[docs]</a>
    <span class="k">def</span> <span class="nf">notGammaSets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the dictionary of neighborhoods {node: (dx,ax)}</span>
<span class="sd">        with set *dx* gathering the not dominated, and set *ax* gathering</span>
<span class="sd">        the not absorbed neighborhood.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">notGamma</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="n">rx</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">dx</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">ax</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
            <span class="n">notGamma</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">dx</span><span class="p">,</span><span class="n">ax</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">notGamma</span></div>



    <span class="k">def</span> <span class="nf">_gammaSets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Renders the dictionary of neighborhoods {node: (dx,ax)}&quot;&quot;&quot;</span>
        <span class="n">gamma</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dneighbors</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aneighbors</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">dx</span><span class="p">,</span><span class="n">ax</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">gamma</span>

<div class="viewcode-block" id="Digraph.weakGammaSets">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.weakGammaSets">[docs]</a>
    <span class="k">def</span> <span class="nf">weakGammaSets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Renders the dictionary of neighborhoods {node: (dx,ax)}&quot;&quot;&quot;</span>
        <span class="n">weakGamma</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weakDneighbors</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weakAneighbors</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="n">weakGamma</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">dx</span><span class="p">,</span><span class="n">ax</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">weakGamma</span></div>


    <span class="k">def</span> <span class="nf">_notGammaSets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Renders the dictionary of not neighborhoods {node: (dx,ax)} &quot;&quot;&quot;</span>
        <span class="n">notGamma</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notdneighbors</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notaneighbors</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="n">notGamma</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">dx</span><span class="p">,</span><span class="n">ax</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">notGamma</span>

<div class="viewcode-block" id="Digraph.weakDneighbors">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.weakDneighbors">[docs]</a>
    <span class="k">def</span> <span class="nf">weakDneighbors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">node</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Renders the set of dominated out-neighbors of a node.&quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">nb</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">Med</span><span class="p">:</span>
                <span class="n">nb</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">nb</span></div>


<div class="viewcode-block" id="Digraph.dneighbors">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.dneighbors">[docs]</a>
    <span class="k">def</span> <span class="nf">dneighbors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">node</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Renders the set of dominated out-neighbors of a node.&quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">nb</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                <span class="n">nb</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">nb</span></div>


<div class="viewcode-block" id="Digraph.notdneighbors">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.notdneighbors">[docs]</a>
    <span class="k">def</span> <span class="nf">notdneighbors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">node</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Renders the set of not dominated out-neighbors of a node.&quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">nb</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">node</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">node</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">nb</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">nb</span></div>


<div class="viewcode-block" id="Digraph.aneighbors">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.aneighbors">[docs]</a>
    <span class="k">def</span> <span class="nf">aneighbors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">node</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Renders the set of absorbed in-neighbors of a node.&quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">nb</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">node</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                <span class="n">nb</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">nb</span></div>


<div class="viewcode-block" id="Digraph.weakAneighbors">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.weakAneighbors">[docs]</a>
    <span class="k">def</span> <span class="nf">weakAneighbors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">node</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Renders the set of absorbed in-neighbors of a node.&quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">nb</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">node</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">Med</span><span class="p">:</span>
                <span class="n">nb</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">nb</span></div>


<div class="viewcode-block" id="Digraph.notaneighbors">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.notaneighbors">[docs]</a>
    <span class="k">def</span> <span class="nf">notaneighbors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">node</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; Renders the set of absorbed not in-neighbors of a node.&quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">nb</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
<span class="c1">##            if a != node:</span>
<span class="c1">##                if self.relation[a][node] &lt; Med:</span>
<span class="c1">##                    nb.add(a)</span>
            <span class="k">if</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">node</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">node</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">nb</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">nb</span></div>


<div class="viewcode-block" id="Digraph.singletons">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.singletons">[docs]</a>
    <span class="k">def</span> <span class="nf">singletons</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;list of singletons and neighborhoods</span>
<span class="sd">           [(singx1, +nx1, -nx1, not(+nx1 or -nx1)),.... ]&quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">indep</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="p">[(</span><span class="nb">frozenset</span><span class="p">([</span><span class="n">x</span><span class="p">]),</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">indep</span><span class="p">)]</span>
        <span class="k">return</span> <span class="n">s</span></div>



<div class="viewcode-block" id="Digraph.MISgen">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.MISgen">[docs]</a>
    <span class="k">def</span> <span class="nf">MISgen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">S</span><span class="p">,</span><span class="n">I</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        generator of maximal independent choices (voir Byskov 2004):</span>
<span class="sd">            * S ::= remaining nodes;</span>
<span class="sd">            * I ::= current independent choice</span>

<span class="sd">        .. note::</span>

<span class="sd">                Inititalize: self.MISgen(set(self.actions),frozenset()),</span>
<span class="sd">                (see self.showMIS() method)</span>
<span class="sd">                </span>
<span class="sd">             </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">S</span> <span class="o">==</span> <span class="nb">set</span><span class="p">():</span>
            <span class="n">add</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">missetit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">misset</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">mis</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">missetit</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">mis</span> <span class="o">&lt;</span> <span class="n">I</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">misset</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">mis</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">I</span> <span class="o">&lt;=</span> <span class="n">mis</span><span class="p">:</span>
                        <span class="n">add</span> <span class="o">=</span> <span class="mi">0</span>
                        <span class="k">break</span>
            <span class="k">if</span> <span class="n">add</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">misset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">misset</span> <span class="o">|</span> <span class="nb">frozenset</span><span class="p">([</span><span class="n">I</span><span class="p">])</span>
                <span class="k">yield</span> <span class="n">I</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">S</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="n">Sv</span> <span class="o">=</span> <span class="n">S</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">Iv</span> <span class="o">=</span> <span class="n">I</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">v</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">MISgen</span><span class="p">(</span><span class="n">Sv</span><span class="p">,</span><span class="n">Iv</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">choice</span>
            <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">MISgen</span><span class="p">(</span><span class="n">S</span><span class="p">,</span><span class="n">I</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">choice</span></div>


<div class="viewcode-block" id="Digraph.independentChoices">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.independentChoices">[docs]</a>
    <span class="k">def</span> <span class="nf">independentChoices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">U</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generator for all independent choices with neighborhoods of a bipolar valued digraph:</span>

<span class="sd">        .. note::</span>
<span class="sd">        </span>
<span class="sd">               * Initiate with U = self.singletons().</span>
<span class="sd">               * Yields [(independent choice, domnb, absnb, indnb)].</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">U</span> <span class="o">==</span> <span class="p">[]:</span>
            <span class="k">yield</span> <span class="p">[(</span><span class="nb">frozenset</span><span class="p">(),</span><span class="nb">set</span><span class="p">(),</span><span class="nb">set</span><span class="p">(),</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">))]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">U</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>
            <span class="k">for</span> <span class="n">S</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">independentChoices</span><span class="p">(</span><span class="n">U</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">S</span>
                <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span>  <span class="n">S</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">3</span><span class="p">]:</span>
                    <span class="n">Sxgamdom</span> <span class="o">=</span> <span class="n">S</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">|</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">Sxgamabs</span> <span class="o">=</span> <span class="n">S</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">|</span> <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                    <span class="n">Sxindep</span> <span class="o">=</span> <span class="n">S</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">&amp;</span>  <span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
                    <span class="n">Sxchoice</span> <span class="o">=</span> <span class="n">S</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">|</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">Sx</span> <span class="o">=</span> <span class="p">[(</span><span class="n">Sxchoice</span><span class="p">,</span><span class="n">Sxgamdom</span><span class="p">,</span><span class="n">Sxgamabs</span><span class="p">,</span><span class="n">Sxindep</span><span class="p">)]</span>
                    <span class="k">yield</span> <span class="n">Sx</span></div>


<div class="viewcode-block" id="Digraph.coveringIndex">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.coveringIndex">[docs]</a>
    <span class="k">def</span> <span class="nf">coveringIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">choice</span><span class="p">,</span><span class="n">direction</span><span class="o">=</span><span class="s2">&quot;out&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the covering index of a given choice in a set of objects,</span>
<span class="sd">        ie the minimum number of choice members that cover each</span>
<span class="sd">        non selected object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">])</span>
        <span class="n">nonSelected</span> <span class="o">=</span> <span class="n">actions</span> <span class="o">-</span> <span class="n">choice</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">choice</span><span class="p">)</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">n</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">nonSelected</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s1">&#39;out&#39;</span><span class="p">:</span>
                <span class="n">index</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span> <span class="n">index</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">choice</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">index</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span> <span class="n">index</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">choice</span><span class="p">)</span> <span class="p">)</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">))</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.0&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Digraph.averageCoveringIndex">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.averageCoveringIndex">[docs]</a>
    <span class="k">def</span> <span class="nf">averageCoveringIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">choice</span><span class="p">,</span><span class="n">direction</span><span class="o">=</span><span class="s2">&quot;out&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the average covering index of a given choice in a set of objects,</span>
<span class="sd">        ie the average number of choice members that cover each</span>
<span class="sd">        non selected object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
        <span class="n">choice</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">choice</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">])</span>
        <span class="n">nonSelected</span> <span class="o">=</span> <span class="n">actions</span> <span class="o">-</span> <span class="n">choice</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">choice</span><span class="p">)</span>
        <span class="n">m</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">nonSelected</span><span class="p">)</span>
        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">nonSelected</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s1">&#39;out&#39;</span><span class="p">:</span>
                <span class="n">index</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">choice</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">index</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">choice</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">m</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">))</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">m</span><span class="p">))</span> <span class="p">)</span> <span class="o">/</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;1.0&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.0&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Digraph.zoomValuation">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.zoomValuation">[docs]</a>
    <span class="k">def</span> <span class="nf">zoomValuation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">zoomFactor</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Zooms in or out, depending on the value of the zoomFactor provided,</span>
<span class="sd">        the bipolar valuation of a digraph.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">zoomFactor</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">zoomFactor</span><span class="p">))</span>

        <span class="n">oldMax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">oldMin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">oldMed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>

        <span class="n">newMin</span> <span class="o">=</span> <span class="n">oldMin</span> <span class="o">*</span> <span class="n">zoomFactor</span>
        <span class="n">newMax</span> <span class="o">=</span> <span class="n">oldMax</span> <span class="o">*</span> <span class="n">zoomFactor</span>
        <span class="n">newMed</span> <span class="o">=</span> <span class="n">oldMed</span> <span class="o">*</span> <span class="n">zoomFactor</span>

        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">oldRelation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">newRelation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">newRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="n">newRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">oldRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">*</span> <span class="n">zoomFactor</span>

        <span class="c1"># install new values in self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">newMax</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">newMin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">newMed</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">newRelation</span></div>



<div class="viewcode-block" id="Digraph.recodeValuation">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.recodeValuation">[docs]</a>
    <span class="k">def</span> <span class="nf">recodeValuation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">newMin</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span><span class="n">newMax</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">ndigits</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Recodes the characteristic valuation domain according</span>
<span class="sd">        to the parameters given. </span>

<span class="sd">        *ndigits* indicates the number of decimal digits of the valuation. </span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
        <span class="n">formatString</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%%</span><span class="s1">.</span><span class="si">%d</span><span class="s1">f&#39;</span> <span class="o">%</span> <span class="n">ndigits</span>
        <span class="n">oldMax</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">formatString</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">])</span>
        <span class="n">oldMin</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">formatString</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">])</span>
        <span class="n">oldMed</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">formatString</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">])</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">oldPrecision</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;precision&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">oldPrecision</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">formatString</span> <span class="o">%</span> <span class="mf">0.0</span><span class="p">)</span>

        <span class="n">oldAmplitude</span> <span class="o">=</span> <span class="n">oldMax</span> <span class="o">-</span> <span class="n">oldMin</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">oldMin</span><span class="p">,</span> <span class="n">oldMed</span><span class="p">,</span> <span class="n">oldMax</span><span class="p">,</span> <span class="n">oldAmplitude</span><span class="p">)</span>

        <span class="n">newMin</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">formatString</span> <span class="o">%</span> <span class="n">newMin</span><span class="p">)</span>
        <span class="n">newMax</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">formatString</span> <span class="o">%</span> <span class="n">newMax</span><span class="p">)</span>
        <span class="c1"># the normalized median is set to a strict zero value</span>
        <span class="k">if</span> <span class="n">newMin</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.00&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">newMax</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.00&#39;</span><span class="p">):</span>
            <span class="n">newMed</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">newMed</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">formatString</span> <span class="o">%</span> <span class="p">((</span><span class="n">newMax</span> <span class="o">+</span> <span class="n">newMin</span><span class="p">)</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2.0&#39;</span><span class="p">))</span> <span class="p">)</span>
        <span class="n">newPrecision</span> <span class="o">=</span> <span class="n">oldPrecision</span><span class="o">/</span><span class="n">oldMax</span>

        <span class="n">newAmplitude</span> <span class="o">=</span> <span class="n">newMax</span> <span class="o">-</span> <span class="n">newMin</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">newMin</span><span class="p">,</span> <span class="n">newMed</span><span class="p">,</span> <span class="n">newMax</span><span class="p">,</span> <span class="n">newAmplitude</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;old and new precison&#39;</span><span class="p">,</span> <span class="n">oldPrecision</span><span class="p">,</span> <span class="n">newPrecision</span><span class="p">)</span> 

        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">oldrelation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">newrelation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">newrelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">nrx</span> <span class="o">=</span> <span class="n">newrelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="n">orx</span> <span class="o">=</span> <span class="n">oldrelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">orx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="n">oldMax</span><span class="p">:</span>
                    <span class="n">nrx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">newMax</span>
                <span class="k">elif</span> <span class="n">orx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="n">oldMin</span><span class="p">:</span>
                    <span class="n">nrx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">newMin</span>
                <span class="k">elif</span> <span class="n">orx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="n">oldMed</span><span class="p">:</span>
                    <span class="n">nrx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">newMed</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">newValue</span> <span class="o">=</span> <span class="n">newMin</span> <span class="o">+</span> <span class="p">((</span><span class="n">orx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">-</span> <span class="n">oldMin</span><span class="p">)</span><span class="o">/</span><span class="n">oldAmplitude</span><span class="p">)</span><span class="o">*</span><span class="n">newAmplitude</span>
                    <span class="n">nrx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">formatString</span> <span class="o">%</span> <span class="n">newValue</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">orx</span><span class="p">[</span><span class="n">y</span><span class="p">],</span><span class="n">nrx</span><span class="p">[</span><span class="n">y</span><span class="p">])</span>
        <span class="c1"># install new values in self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">newMax</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">newMin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">newMed</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;precision&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">newPrecision</span>
        <span class="k">if</span> <span class="n">ndigits</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;hasIntegerValuation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;hasIntegerValuation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">newrelation</span></div>


<div class="viewcode-block" id="Digraph.dominantChoices">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.dominantChoices">[docs]</a>
    <span class="k">def</span> <span class="nf">dominantChoices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">S</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates all minimal dominant choices of a bipolar valued digraph.</span>

<span class="sd">        .. note::</span>

<span class="sd">             Initiate with S = self.actions.copy().</span>
<span class="sd">             </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">add</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">domsetit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">domset</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">dom</span> <span class="ow">in</span> <span class="n">domsetit</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">S</span> <span class="o">&lt;</span> <span class="n">dom</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">domset</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">dom</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">S</span> <span class="o">&gt;=</span> <span class="n">dom</span><span class="p">:</span>
                    <span class="n">add</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="k">break</span>
        <span class="k">if</span> <span class="n">add</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">domset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">domset</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">S</span><span class="p">)])</span>
            <span class="k">yield</span> <span class="n">S</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">S</span><span class="p">:</span>
                <span class="n">S1</span> <span class="o">=</span> <span class="n">S</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span><span class="p">])</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">domin</span><span class="p">(</span><span class="n">S1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dominantChoices</span><span class="p">(</span><span class="n">S1</span><span class="p">):</span>
                        <span class="k">yield</span> <span class="n">choice</span></div>


<div class="viewcode-block" id="Digraph.minimalChoices">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.minimalChoices">[docs]</a>
    <span class="k">def</span> <span class="nf">minimalChoices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">S</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates all dominant or absorbent choices of a bipolar</span>
<span class="sd">        valued digraph.</span>

<span class="sd">        .. note:</span>

<span class="sd">           * Initiate with S = (actions, dict of dominant or absorbent closed neighborhoods)</span>
<span class="sd">           * See showMinDom and showMinAbs methods.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">S</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">minhistory</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">minhistory</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">minhistory</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="mi">0</span><span class="p">])])</span>
            <span class="n">add</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">minsetit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">minset</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">minch</span> <span class="ow">in</span> <span class="n">minsetit</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">S</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">minch</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">minset</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">minch</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">S</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">minch</span><span class="p">:</span>
                        <span class="n">add</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">break</span>
            <span class="k">if</span> <span class="n">add</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">minset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">minset</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="mi">0</span><span class="p">])])</span>
                <span class="k">yield</span> <span class="n">S</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">S</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">Sxchoice</span> <span class="o">=</span> <span class="n">S</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span><span class="p">])</span>
                <span class="n">Sx</span> <span class="o">=</span> <span class="p">(</span><span class="n">Sxchoice</span><span class="p">,{})</span>
                <span class="n">covering</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">for</span> <span class="n">cover</span> <span class="ow">in</span> <span class="n">S</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="n">coverx</span> <span class="o">=</span> <span class="n">S</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">cover</span><span class="p">]</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span><span class="p">])</span>
                    <span class="k">if</span> <span class="n">coverx</span> <span class="o">==</span> <span class="nb">set</span><span class="p">():</span>
                        <span class="n">covering</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">break</span>
                    <span class="n">Sx</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">cover</span><span class="p">]</span> <span class="o">=</span> <span class="n">coverx</span>
                <span class="k">if</span> <span class="n">covering</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">minimalChoices</span><span class="p">(</span><span class="n">Sx</span><span class="p">):</span>
                        <span class="k">yield</span> <span class="n">choice</span></div>


<div class="viewcode-block" id="Digraph.absorbentChoices">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.absorbentChoices">[docs]</a>
    <span class="k">def</span> <span class="nf">absorbentChoices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">S</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates all minimal absorbent choices of a bipolar valued digraph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">add</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">abssetit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">absset</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">absch</span> <span class="ow">in</span> <span class="n">abssetit</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">S</span> <span class="o">&lt;</span> <span class="n">absch</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">absset</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">absch</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">S</span> <span class="o">&gt;=</span> <span class="n">absch</span><span class="p">:</span>
                    <span class="n">add</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="k">break</span>
        <span class="k">if</span> <span class="n">add</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">absset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">absset</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">S</span><span class="p">)])</span>
            <span class="k">yield</span> <span class="n">S</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">S</span><span class="p">:</span>
                <span class="n">S1</span> <span class="o">=</span> <span class="n">S</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span><span class="p">])</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">absorb</span><span class="p">(</span><span class="n">S1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">absorbentChoices</span><span class="p">(</span><span class="n">S1</span><span class="p">):</span>
                        <span class="k">yield</span> <span class="n">choice</span></div>


<div class="viewcode-block" id="Digraph.kChoices">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.kChoices">[docs]</a>
    <span class="k">def</span> <span class="nf">kChoices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">A</span><span class="p">,</span><span class="n">k</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders all choices of length k from set A</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">copy</span>
        <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">yield</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">A</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
                <span class="n">Ax</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
                <span class="n">k1</span> <span class="o">=</span> <span class="n">k</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kChoices</span><span class="p">(</span><span class="n">Ax</span><span class="p">,</span><span class="n">k1</span><span class="p">):</span>
                    <span class="k">yield</span> <span class="n">ch</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span><span class="p">])</span></div>



<div class="viewcode-block" id="Digraph.powerset">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.powerset">[docs]</a>
    <span class="k">def</span> <span class="nf">powerset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">U</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates all subsets of a set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">U</span> <span class="o">==</span> <span class="nb">set</span><span class="p">():</span>
            <span class="k">yield</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">U1</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">U</span><span class="p">)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">U1</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">S</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">powerset</span><span class="p">(</span><span class="n">U1</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">S</span>
                <span class="k">yield</span> <span class="n">S</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span><span class="p">])</span></div>


<div class="viewcode-block" id="Digraph.plusirredundant">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.plusirredundant">[docs]</a>
    <span class="k">def</span> <span class="nf">plusirredundant</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">U</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates all +irredundant choices of a digraph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">U</span> <span class="o">==</span> <span class="nb">set</span><span class="p">():</span>
            <span class="k">yield</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">U</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">S</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plusirredundant</span><span class="p">(</span><span class="n">U</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">S</span>
                <span class="n">Sx</span> <span class="o">=</span> <span class="n">S</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span><span class="p">])</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">domirred</span><span class="p">(</span><span class="n">Sx</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="n">Sx</span></div>


<div class="viewcode-block" id="Digraph.absirredundant">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.absirredundant">[docs]</a>
    <span class="k">def</span> <span class="nf">absirredundant</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">U</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates all -irredundant choices of a digraph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">U</span> <span class="o">==</span> <span class="nb">set</span><span class="p">():</span>
            <span class="k">yield</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">U</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">S</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">absirredundant</span><span class="p">(</span><span class="n">U</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">S</span>
                <span class="n">S1</span> <span class="o">=</span> <span class="n">S</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span><span class="p">])</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">absirred</span><span class="p">(</span><span class="n">S1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">Sx</span> <span class="o">=</span> <span class="n">S</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span><span class="p">])</span>
                    <span class="k">yield</span> <span class="n">Sx</span></div>


<div class="viewcode-block" id="Digraph.intstab">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.intstab">[docs]</a>
    <span class="k">def</span> <span class="nf">intstab</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">choice</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes the independence degree of a choice.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">deg</span> <span class="o">=</span> <span class="n">Min</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">choice</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">choice</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">deg</span> <span class="ow">and</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">b</span><span class="p">:</span>
                    <span class="n">deg</span> <span class="o">=</span> <span class="n">x</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">Max</span> <span class="o">-</span> <span class="n">deg</span> <span class="o">+</span> <span class="n">Min</span>
        <span class="k">return</span> <span class="n">res</span></div>




<div class="viewcode-block" id="Digraph.domin">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.domin">[docs]</a>
    <span class="k">def</span> <span class="nf">domin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">choice</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the dominance degree of a choice.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">deg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">restactions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span> <span class="o">-</span> <span class="n">choice</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">restactions</span><span class="p">:</span>
            <span class="n">dega</span> <span class="o">=</span> <span class="n">Min</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">choice</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">b</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">dega</span><span class="p">:</span>
                    <span class="n">dega</span> <span class="o">=</span> <span class="n">x</span>
            <span class="k">if</span> <span class="n">dega</span> <span class="o">&lt;</span> <span class="n">deg</span><span class="p">:</span>
                <span class="n">deg</span> <span class="o">=</span> <span class="n">dega</span>
        <span class="k">return</span> <span class="n">deg</span></div>


<div class="viewcode-block" id="Digraph.absorb">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.absorb">[docs]</a>
    <span class="k">def</span> <span class="nf">absorb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">choice</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the absorbency degree of a choice.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">deg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">restactions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span> <span class="o">-</span> <span class="n">choice</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">restactions</span><span class="p">:</span>
            <span class="n">dega</span> <span class="o">=</span> <span class="n">Min</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">choice</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">dega</span><span class="p">:</span>
                    <span class="n">dega</span> <span class="o">=</span> <span class="n">x</span>
            <span class="k">if</span> <span class="n">dega</span> <span class="o">&lt;</span> <span class="n">deg</span><span class="p">:</span>
                <span class="n">deg</span> <span class="o">=</span> <span class="n">dega</span>
        <span class="k">return</span> <span class="n">deg</span></div>


<div class="viewcode-block" id="Digraph.domirred">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.domirred">[docs]</a>
    <span class="k">def</span> <span class="nf">domirred</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">choice</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the crips +irredundance degree of a choice.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">irred</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">choice</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">choice</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">domirredx</span><span class="p">(</span><span class="n">choice</span><span class="p">,</span><span class="n">x</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">irred</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="k">break</span>
        <span class="k">if</span> <span class="n">irred</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span></div>


<div class="viewcode-block" id="Digraph.domirredval">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.domirredval">[docs]</a>
    <span class="k">def</span> <span class="nf">domirredval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">choice</span><span class="p">,</span><span class="n">relation</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the valued +irredundance degree of a choice.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#import array</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]))</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]))</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]))</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">Max</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">choice</span><span class="p">:</span>
            <span class="n">nbclx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">readabsvector</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">relation</span><span class="p">)</span>
            <span class="n">nbclchoice</span> <span class="o">=</span> <span class="p">[</span><span class="n">Min</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">]</span>
            <span class="n">restchoice</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">choice</span><span class="p">)</span>
            <span class="n">restchoice</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">restchoice</span><span class="p">:</span>
                <span class="n">nbcly</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">readabsvector</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">relation</span><span class="p">)</span>
                <span class="n">nbclchoice</span> <span class="o">=</span> <span class="p">[</span><span class="nb">max</span><span class="p">(</span><span class="n">nbclchoice</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">nbcly</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
            <span class="n">resultx</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="nb">min</span><span class="p">(</span><span class="n">nbclx</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">contra</span><span class="p">(</span><span class="n">nbclchoice</span><span class="p">)[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)])</span>
            <span class="n">result</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">resultx</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>


<div class="viewcode-block" id="Digraph.domirredx">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.domirredx">[docs]</a>
    <span class="k">def</span> <span class="nf">domirredx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">choice</span><span class="p">,</span><span class="n">x</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the crips +irredundance degree of node x in a choice.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">nx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span><span class="p">])</span>
        <span class="n">chx</span> <span class="o">=</span> <span class="n">choice</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span><span class="p">])</span>
        <span class="n">ny</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">chx</span><span class="p">:</span>
            <span class="n">ny</span> <span class="o">=</span> <span class="n">ny</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">y</span><span class="p">])</span>
        <span class="n">nxpriv</span> <span class="o">=</span> <span class="n">nx</span> <span class="o">-</span> <span class="n">ny</span>
        <span class="k">if</span> <span class="n">nxpriv</span> <span class="o">==</span> <span class="nb">set</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">Min</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Max</span></div>


<div class="viewcode-block" id="Digraph.absirredval">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.absirredval">[docs]</a>
    <span class="k">def</span> <span class="nf">absirredval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">choice</span><span class="p">,</span><span class="n">relation</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the valued -irredundance degree of a choice.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#import array</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">Max</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">choice</span><span class="p">:</span>
            <span class="n">nbclx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">readdomvector</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">relation</span><span class="p">)</span>
            <span class="n">nbclchoice</span> <span class="o">=</span> <span class="p">[</span><span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">Min</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">]</span>
            <span class="n">restchoice</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">choice</span><span class="p">)</span>
            <span class="n">restchoice</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">restchoice</span><span class="p">:</span>
                <span class="n">nbcly</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">readdomvector</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">relation</span><span class="p">)</span>
                <span class="n">nbclchoice</span> <span class="o">=</span> <span class="p">[</span><span class="nb">max</span><span class="p">(</span><span class="n">nbclchoice</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">nbcly</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
            <span class="n">resultx</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="nb">min</span><span class="p">(</span><span class="n">nbclx</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">contra</span><span class="p">(</span><span class="n">nbclchoice</span><span class="p">)[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)])</span>
            <span class="n">result</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">resultx</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>


<div class="viewcode-block" id="Digraph.absirred">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.absirred">[docs]</a>
    <span class="k">def</span> <span class="nf">absirred</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">choice</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the crips -irredundance degree of a choice.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">irred</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">choice</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">choice</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">absirredx</span><span class="p">(</span><span class="n">choice</span><span class="p">,</span><span class="n">x</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">irred</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="k">break</span>
        <span class="k">if</span> <span class="n">irred</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span></div>


<div class="viewcode-block" id="Digraph.absirredx">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.absirredx">[docs]</a>
    <span class="k">def</span> <span class="nf">absirredx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">choice</span><span class="p">,</span><span class="n">x</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Computes the crips -irredundance degree of node x in a choice.&quot;&quot;&quot;</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">nx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span><span class="p">])</span>
        <span class="n">chx</span> <span class="o">=</span> <span class="n">choice</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span><span class="p">])</span>
        <span class="n">ny</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">chx</span><span class="p">:</span>
            <span class="n">ny</span> <span class="o">=</span> <span class="n">ny</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">y</span><span class="p">])</span>
        <span class="n">nxpriv</span> <span class="o">=</span> <span class="n">nx</span> <span class="o">-</span> <span class="n">ny</span>
        <span class="k">if</span> <span class="n">nxpriv</span> <span class="o">==</span> <span class="nb">set</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">Min</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Max</span></div>


<div class="viewcode-block" id="Digraph.save">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.save">[docs]</a>
    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;tempdigraph&#39;</span><span class="p">,</span><span class="n">option</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">DecimalValuation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">decDigits</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Persistent storage of a Digraph class instance in the form of</span>
<span class="sd">            a python source code file&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*--- Saving digraph in file: &lt;&#39;</span> <span class="o">+</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s1">&#39;.py&gt; ---*&#39;</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">fileNameExt</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="s1">&#39;.py&#39;</span><span class="p">)</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileNameExt</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;# Saved digraph instance</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">DecimalValuation</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;from decimal import Decimal</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;from collections import OrderedDict</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;actions = OrderedDict([</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;(</span><span class="se">\&#39;</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">,</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;),</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;{</span><span class="se">\&#39;</span><span class="s1">name</span><span class="se">\&#39;</span><span class="s1">: </span><span class="se">\&#39;</span><span class="si">%s</span><span class="se">\&#39;</span><span class="s1">}),</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;])</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">hasIntegerValuation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;hasIntegerValuation&#39;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">hasIntegerValuation</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">DecimalValuation</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">hasIntegerValuation</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;valuationdomain = {</span><span class="se">\&#39;</span><span class="s1">hasIntegerValuation</span><span class="se">\&#39;</span><span class="s1">: False, </span><span class="se">\&#39;</span><span class="s1">min</span><span class="se">\&#39;</span><span class="s1">: Decimal(&quot;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">Min</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&quot;),</span><span class="se">\&#39;</span><span class="s1">med</span><span class="se">\&#39;</span><span class="s1">: Decimal(&quot;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">Med</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&quot;),</span><span class="se">\&#39;</span><span class="s1">max</span><span class="se">\&#39;</span><span class="s1">: Decimal(&quot;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">Max</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&quot;)}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;valuationdomain = {</span><span class="se">\&#39;</span><span class="s1">hasIntegerValuation</span><span class="se">\&#39;</span><span class="s1">: True, </span><span class="se">\&#39;</span><span class="s1">min</span><span class="se">\&#39;</span><span class="s1">: &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">Min</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;,</span><span class="se">\&#39;</span><span class="s1">med</span><span class="se">\&#39;</span><span class="s1">: &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">Med</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;,</span><span class="se">\&#39;</span><span class="s1">max</span><span class="se">\&#39;</span><span class="s1">: &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">Max</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;relation = {</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">: {</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">hasIntegerValuation</span><span class="p">:</span>
                    <span class="n">valueString</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">: Decimal(</span><span class="se">\&#39;</span><span class="si">%%</span><span class="s1">.</span><span class="si">%d</span><span class="s1">f</span><span class="se">\&#39;</span><span class="s1">),</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">decDigits</span><span class="p">)</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">valueString</span> <span class="o">%</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]))</span>
                    <span class="c1">#fo.write(&#39;\&#39;&#39; + str(y) + &#39;\&#39;: Decimal(&quot;&#39; + str(relation[x][y]) + &#39;&quot;),\n&#39;)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;,</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;},</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span> <span class="s1">&#39;}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">option</span> <span class="o">==</span> <span class="s1">&#39;withAutomorphismGenerators&#39;</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;reflections = {</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">ga</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">reflections</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1"> &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">ga</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">:&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reflections</span><span class="p">[</span><span class="n">ga</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;,</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;permutations = {</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">ga</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">permutations</span><span class="p">:</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\&#39;</span><span class="s2">&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">ga</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\&#39;</span><span class="s2">: {</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">permutations</span><span class="p">[</span><span class="n">ga</span><span class="p">]:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">: </span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">permutations</span><span class="p">[</span><span class="n">ga</span><span class="p">][</span><span class="n">p</span><span class="p">])</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">,</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;},</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

        
<div class="viewcode-block" id="Digraph.saveCSV">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.saveCSV">[docs]</a>
    <span class="k">def</span> <span class="nf">saveCSV</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;tempdigraph&#39;</span><span class="p">,</span><span class="n">Normalized</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">Dual</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Converse</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Diagonal</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Persistent storage of a Digraph class instance in the form of</span>
<span class="sd">            a csv file. &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="kn">import</span> <span class="nn">csv</span>
        <span class="n">com</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">Normalized</span><span class="p">:</span>
            <span class="n">com</span> <span class="o">+=</span> <span class="s1">&#39;normalized&#39;</span>
            <span class="k">if</span> <span class="n">Dual</span> <span class="ow">and</span> <span class="n">Converse</span><span class="p">:</span>
                <span class="n">com</span> <span class="o">+=</span> <span class="s1">&#39; and codual&#39;</span>
            <span class="k">elif</span> <span class="n">Dual</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">Converse</span><span class="p">:</span>
                <span class="n">com</span> <span class="o">+=</span> <span class="s1">&#39; and dual&#39;</span>
            <span class="k">elif</span> <span class="n">Converse</span><span class="p">:</span>
                <span class="n">com</span> <span class="o">+=</span> <span class="s1">&#39; and converse&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Dual</span> <span class="ow">and</span> <span class="n">Converse</span><span class="p">:</span>
                <span class="n">com</span> <span class="o">+=</span> <span class="s1">&#39;codual&#39;</span>
            <span class="k">elif</span> <span class="n">Dual</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">Converse</span><span class="p">:</span>
                <span class="n">com</span> <span class="o">+=</span> <span class="s1">&#39;dual&#39;</span>
            <span class="k">elif</span> <span class="n">Converse</span><span class="p">:</span>
                <span class="n">com</span> <span class="o">+=</span> <span class="s1">&#39;converse&#39;</span>
        
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*--- Saving </span><span class="si">%s</span><span class="s1"> digraph in file: </span><span class="si">%s</span><span class="s1">.csv&gt; ---*&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">com</span><span class="p">,</span><span class="n">fileName</span><span class="p">))</span>
        <span class="n">fileNameExt</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="s1">&#39;.csv&#39;</span><span class="p">)</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileNameExt</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">csvfo</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">fo</span><span class="p">,</span><span class="n">quoting</span><span class="o">=</span><span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_NONNUMERIC</span><span class="p">)</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">headerText</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;d&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">actionsList</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">headerText</span><span class="p">)</span>
        <span class="n">csvfo</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">headerText</span><span class="p">)</span>
        <span class="n">dg</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Normalized</span><span class="p">:</span>
            <span class="n">dg</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">()</span> 
        <span class="n">Min</span> <span class="o">=</span> <span class="n">dg</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">dg</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">dg</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Dual</span><span class="p">:</span>
            <span class="n">dg</span> <span class="o">=</span> <span class="o">-</span><span class="n">dg</span>
        <span class="k">if</span> <span class="n">Converse</span><span class="p">:</span>
            <span class="n">dg</span> <span class="o">=</span> <span class="o">~</span><span class="n">dg</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="n">dg</span><span class="o">.</span><span class="n">relation</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">rowText</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">Diagonal</span><span class="p">:</span> 
                        <span class="n">rowText</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">Med</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">rowText</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">rowText</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]))</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">rowText</span><span class="p">)</span>
            <span class="n">csvfo</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">rowText</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>


<span class="c1">##    def saveDistance2MaxCSV(self,fileName=&#39;tempdigraph&#39;,Normalized=False,</span>
<span class="c1">##                Dual=False,Converse=False,Diagonal=True,Debug=False):</span>
<span class="c1">##        &quot;&quot;&quot;Persistent storage of a Digraph class instance in the form of</span>
<span class="c1">##            a csv file. &quot;&quot;&quot;</span>
<span class="c1">##        from copy import deepcopy</span>
<span class="c1">##        import csv</span>
<span class="c1">##        com = &#39;&#39;</span>
<span class="c1">##        if Normalized:</span>
<span class="c1">##            com += &#39;normalized&#39;</span>
<span class="c1">##            if Dual and Converse:</span>
<span class="c1">##                com += &#39; and codual&#39;</span>
<span class="c1">##            elif Dual and not Converse:</span>
<span class="c1">##                com += &#39; and dual&#39;</span>
<span class="c1">##            elif Converse:</span>
<span class="c1">##                com += &#39; and converse&#39;</span>
<span class="c1">##        else:</span>
<span class="c1">##            if Dual and Converse:</span>
<span class="c1">##                com += &#39;codual&#39;</span>
<span class="c1">##            elif Dual and not Converse:</span>
<span class="c1">##                com += &#39;dual&#39;</span>
<span class="c1">##            elif Converse:</span>
<span class="c1">##                com += &#39;converse&#39;</span>
<span class="c1">##        </span>
<span class="c1">##        if Debug:</span>
<span class="c1">##            print(&#39;*--- Saving %s digraph in file: %s.csv&gt; ---*&#39; % (com,fileName))</span>
<span class="c1">##        fileNameExt = str(fileName)+str(&#39;.csv&#39;)</span>
<span class="c1">##        fo = open(fileNameExt, &#39;w&#39;)</span>
<span class="c1">##        csvfo = csv.writer(fo,quoting=csv.QUOTE_NONNUMERIC)</span>
<span class="c1">##        actionsList = [x for x in self.actions]</span>
<span class="c1">##        actionsList.sort()</span>
<span class="c1">##        headerText = [&quot;d&quot;] + actionsList</span>
<span class="c1">##        if Debug:</span>
<span class="c1">##            print(headerText)</span>
<span class="c1">##        csvfo.writerow(headerText)</span>
<span class="c1">##        dg = deepcopy(self)</span>
<span class="c1">##        if Normalized:</span>
<span class="c1">##            dg.recodeValuation(-1,1)</span>
<span class="c1">##        Min = dg.valuationdomain[&#39;min&#39;]</span>
<span class="c1">##        Med = dg.valuationdomain[&#39;med&#39;]</span>
<span class="c1">##        Max = dg.valuationdomain[&#39;max&#39;]</span>
<span class="c1">##        if Dual:</span>
<span class="c1">##            dg = -dg</span>
<span class="c1">##        if Converse:</span>
<span class="c1">##            dg = ~dg</span>
<span class="c1">##        relation = dg.relation</span>
<span class="c1">##        for x in actionsList:</span>
<span class="c1">##            rowText = [x]</span>
<span class="c1">##            for y in actionsList:</span>
<span class="c1">##                if x == y:</span>
<span class="c1">##                    if not Diagonal: # minimal distance</span>
<span class="c1">##                        rowText.append(0.0)</span>
<span class="c1">##                    else:</span>
<span class="c1">##                        rowText.append(float(Max - relation[x][y]))</span>
<span class="c1">##                else:</span>
<span class="c1">##                    rowText.append(float(Max - relation[x][y]))</span>
<span class="c1">##            if Debug:</span>
<span class="c1">##                print(rowText)</span>
<span class="c1">##            csvfo.writerow(rowText)</span>
<span class="c1">##        fo.close()</span>

        <span class="c1">#----------------</span>

<div class="viewcode-block" id="Digraph.computeShortestPathLengths">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeShortestPathLengths">[docs]</a>
    <span class="k">def</span> <span class="nf">computeShortestPathLengths</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">WeakPaths</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                   <span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders a double dictionary with the directed distances, i.e. the shortest path lengths between all self.actions. </span>

<span class="sd">        Equals *None* if there does not exist a directed path between two actions.</span>
<span class="sd">        </span>
<span class="sd">        *Source*: Claude Berge, *The Theory of Graphs*, Dover (2001) pp. 119, original in French Dunod (1958)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">order</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span>
        <span class="n">ri</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">order</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">ri</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">relation</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ri</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                    <span class="n">ri</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                        <span class="n">ri</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
                        <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                            <span class="n">accz</span> <span class="o">=</span> <span class="n">ri</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>
                            <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                                <span class="c1">#if x != z and y != z:</span>
                                <span class="n">accz</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">accz</span><span class="p">,</span><span class="nb">min</span><span class="p">(</span><span class="n">ri</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">x</span><span class="p">][</span><span class="n">z</span><span class="p">],</span><span class="n">ri</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">z</span><span class="p">][</span><span class="n">y</span><span class="p">]))</span>
                            <span class="n">ri</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">accz</span>
        <span class="n">distances</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">distances</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="n">distances</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">:</span>
                    <span class="n">distances</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">order</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">WeakPaths</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">ri</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">Med</span><span class="p">:</span>
                                <span class="n">distances</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">ri</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                                <span class="n">distances</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">WeakPaths</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Shortest weak path lengths&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Shortest path lengths&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x, y, distance&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">distances</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ri</span> <span class="o">=</span> <span class="n">ri</span>
        <span class="k">if</span> <span class="n">WeakPaths</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">shortestWeakPathLengths</span> <span class="o">=</span> <span class="n">distances</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">shortestPathLengths</span> <span class="o">=</span> <span class="n">distances</span>
        <span class="k">return</span> <span class="n">distances</span></div>


    <span class="c1">#-------------------</span>

<div class="viewcode-block" id="Digraph.computeDigraphCentres">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeDigraphCentres">[docs]</a>
    <span class="k">def</span> <span class="nf">computeDigraphCentres</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">WeakDistances</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The centers of a digraph are the nodes with finite minimal shortes path lengths.</span>
<span class="sd">        </span>
<span class="sd">        The maximal neighborhood distances are stored in *self.maximalNeighborhoodDistances*.</span>

<span class="sd">        The corresponding digraph radius and diameter are stored respectively  in *self.radius* and *self.diameter*.</span>

<span class="sd">        With *Comments* = True, all these results are printed out.</span>

<span class="sd">        *Source*: Claude Berge, *The Theory of Graphs*, Dover (2001) pp. 119, original in French Dunod (1958)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">WeakDistances</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">distances</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shortesWeakPathLengths</span><span class="p">()</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">distances</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeShortestPathLengths</span><span class="p">(</span><span class="n">WeakPaths</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">distances</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shortesPathLengths</span><span class="p">()</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">distances</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeShortestPathLengths</span><span class="p">()</span>

                
        <span class="n">aN</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">order</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">aN</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">distances</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">aN</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">aN</span><span class="p">[</span><span class="n">x</span><span class="p">],</span><span class="n">distances</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">aN</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">order</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">WeakDistances</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Maximal weak neighborhood distances&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Maximal neighborhood distances&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">aN</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">order</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">aN</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maximalNeighborhoodDistances</span> <span class="o">=</span> <span class="n">aN</span>
        <span class="n">minAN</span> <span class="o">=</span> <span class="n">order</span>
        <span class="n">maxAN</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">minAN</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">minAN</span><span class="p">,</span><span class="n">aN</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
            <span class="n">maxAN</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">maxAN</span><span class="p">,</span><span class="n">aN</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
        <span class="c1"># raduis and diameter    </span>
        <span class="k">if</span> <span class="n">minAN</span> <span class="o">&lt;</span> <span class="n">order</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">minAN</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">maxAN</span> <span class="o">&lt;</span> <span class="n">order</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">diameter</span> <span class="o">=</span> <span class="n">maxAN</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">diameter</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Radius&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Diameter&#39;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">diameter</span><span class="p">)</span>
            
        <span class="n">centres</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">minAN</span> <span class="o">&lt;</span> <span class="n">order</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">aN</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">==</span> <span class="n">minAN</span><span class="p">:</span>
                    <span class="n">centres</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">aN</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">WeakDistances</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Digraph weak centre(s)&#39;</span><span class="p">,</span> <span class="n">centres</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">weakCentres</span> <span class="o">=</span> <span class="n">centres</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Digraph centre(s)&#39;</span><span class="p">,</span> <span class="n">centres</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">centres</span> <span class="o">=</span> <span class="n">centres</span>
            
        <span class="k">return</span> <span class="n">centres</span></div>

    
<span class="c1">#------------------</span>
<div class="viewcode-block" id="Digraph.chordlessPaths">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.chordlessPaths">[docs]</a>
    <span class="k">def</span> <span class="nf">chordlessPaths</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Pk</span><span class="p">,</span><span class="n">n2</span><span class="p">,</span><span class="n">Odd</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        New procedure from Agrum study April 2009</span>
<span class="sd">        recursive chordless path extraction starting from path</span>
<span class="sd">        Pk = [n2, ...., n1] and ending in node n2.</span>
<span class="sd">        Optimized with marking of visited chordless P1s.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="n">Debug</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">n1</span> <span class="o">=</span> <span class="n">Pk</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visitedArcs</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">n1</span><span class="p">,</span><span class="n">n2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visitedArcs</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">n2</span><span class="p">,</span><span class="n">n1</span><span class="p">))</span>
        <span class="n">med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">n1</span><span class="p">][</span><span class="n">n2</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">med</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">n2</span><span class="p">][</span><span class="n">n1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">med</span><span class="p">:</span>
            <span class="n">detectedChordlessPath</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="c1">#self.visitedArcs.add((n1,n2))</span>
            <span class="c1">#OddFlag = True</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;len(Pk)&#39;</span><span class="p">,</span> <span class="n">Pk</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">Pk</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">Pk</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">Odd</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">Pk</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">OddFlag</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">OddFlag</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">OddFlag</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;OddFlag: &#39;</span><span class="p">,</span> <span class="n">OddFlag</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">OddFlag</span><span class="p">:</span>
                <span class="c1">#Pk.append(n2)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">xCC</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Pk</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Chordless circuit certificate --&gt;&gt;&gt; &#39;</span><span class="p">,</span> <span class="n">Pk</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">detectedChordlessPath</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">NBn1</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">n1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">n1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">while</span> <span class="n">NBn1</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">NBn1</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">n1</span><span class="p">,</span><span class="n">n</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">visitedArcs</span> <span class="ow">and</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">n1</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">visitedArcs</span><span class="p">:</span>
                    <span class="n">P</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">Pk</span><span class="p">)</span>
                    <span class="n">noChord</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">P</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                        <span class="c1">## if x == n1:</span>
                        <span class="c1">##     if self.relation[n][x] &gt; med:</span>
                        <span class="c1">##         noChord = False</span>
                        <span class="c1">## elif x == n2:</span>
                        <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="n">n2</span><span class="p">:</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">n</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">med</span><span class="p">:</span>
                                <span class="n">noChord</span> <span class="o">=</span> <span class="kc">False</span>
                                <span class="k">break</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">n</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">med</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">med</span><span class="p">:</span>
                                <span class="n">noChord</span> <span class="o">=</span> <span class="kc">False</span>
                                <span class="k">break</span>
                    <span class="k">if</span> <span class="n">noChord</span><span class="p">:</span>
                        <span class="n">P</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;P,n2&#39;</span><span class="p">,</span><span class="n">P</span><span class="p">,</span><span class="n">n2</span><span class="p">)</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chordlessPaths</span><span class="p">(</span><span class="n">P</span><span class="p">,</span><span class="n">n2</span><span class="p">,</span><span class="n">Odd</span><span class="p">,</span><span class="n">Comments</span><span class="p">,</span><span class="n">Debug</span><span class="p">):</span>
                            <span class="n">detectedChordlessPath</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="c1">#self.visitedArcs.add((n1,n2))</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No further chordless path from &#39;</span><span class="p">,</span><span class="n">n1</span><span class="p">,</span><span class="s1">&#39; to &#39;</span><span class="p">,</span> <span class="n">n2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">detectedChordlessPath</span></div>


<div class="viewcode-block" id="Digraph.detectChordlessPath">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.detectChordlessPath">[docs]</a>
    <span class="k">def</span> <span class="nf">detectChordlessPath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Pk</span><span class="p">,</span><span class="n">n2</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        New procedure from Agrum study April 2009</span>
<span class="sd">        recursive chordless path extraction starting from path</span>
<span class="sd">        Pk = [n2, ...., n1] and ending in node n2.</span>
<span class="sd">        Optimized with marking of visited chordless P1s.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="n">Debug</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">n1</span> <span class="o">=</span> <span class="n">Pk</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visitedArcs</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">n1</span><span class="p">,</span><span class="n">n2</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visitedArcs</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">n2</span><span class="p">,</span><span class="n">n1</span><span class="p">))</span>
        <span class="n">med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">n1</span><span class="p">][</span><span class="n">n2</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">med</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">n2</span><span class="p">][</span><span class="n">n1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">med</span><span class="p">:</span>
            <span class="n">Detected</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Chordless circuit certificate --&gt;&gt;&gt; &#39;</span><span class="p">,</span> <span class="n">Pk</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Detected</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">NBn1</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">n1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">n1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">while</span> <span class="n">NBn1</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
                <span class="n">n</span> <span class="o">=</span> <span class="n">NBn1</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">n1</span><span class="p">,</span><span class="n">n</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">visitedArcs</span> <span class="ow">and</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">n1</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">visitedArcs</span><span class="p">:</span>
                    <span class="n">P</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">Pk</span><span class="p">)</span>
                    <span class="n">noChord</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">P</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                        <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="n">n2</span><span class="p">:</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">n</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">med</span><span class="p">:</span>
                                <span class="n">noChord</span> <span class="o">=</span> <span class="kc">False</span>
                                <span class="k">break</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">n</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">med</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">med</span><span class="p">:</span>
                                <span class="n">noChord</span> <span class="o">=</span> <span class="kc">False</span>
                                <span class="k">break</span>
                    <span class="k">if</span> <span class="n">noChord</span><span class="p">:</span>
                        <span class="n">P</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;P,n2&#39;</span><span class="p">,</span><span class="n">P</span><span class="p">,</span><span class="n">n2</span><span class="p">)</span>
                        <span class="n">Detected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">detectChordlessPath</span><span class="p">(</span><span class="n">P</span><span class="p">,</span><span class="n">n2</span><span class="p">,</span><span class="n">Comments</span><span class="p">,</span><span class="n">Debug</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">Detected</span><span class="p">:</span>
                        <span class="k">break</span>
        <span class="k">return</span> <span class="n">Detected</span></div>


    <span class="c1"># def detectCppChordlessCircuits(self,Debug=False):</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     python wrapper for the C++/Agrum based chordless circuits detection</span>
    <span class="c1">#     exchange arguments with external temporary files.</span>
        
    <span class="c1">#     Returns a boolean value</span>
        
    <span class="c1">#     .. warning:: Deprecated !!! The pure python version is more efficient</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     import os</span>
    <span class="c1">#     from tempfile import mkstemp</span>
    <span class="c1">#     fd, tempFileName = mkstemp()</span>
    <span class="c1">#     fo = os.fdopen(fd,&#39;w&#39;)</span>
    <span class="c1">#     Med = self.valuationdomain[&#39;med&#39;]</span>
    <span class="c1">#     actions = [x for x in self.actions]</span>
    <span class="c1">#     relation = self.relation</span>
    <span class="c1">#     for i,x in enumerate(actions):</span>
    <span class="c1">#         for j,y in enumerate(actions):</span>
    <span class="c1">#             if i != j:</span>
    <span class="c1">#                 if relation[x][y] &gt; Med:</span>
    <span class="c1">#                     fo.write(&#39;%d %d\n&#39; % (i+1,j+1))</span>
    <span class="c1">#     fo.close()</span>

    <span class="c1">#     resultFile = tempFileName+&#39;.py&#39;</span>
    <span class="c1">#     if os.path.exists(&#39;/usr/bin/detectChordlessCircuits&#39;):</span>
    <span class="c1">#         os.system(&#39;/usr/bin/detectChordlessCircuits &#39; + tempFileName + &#39; &#39; + resultFile)</span>
    <span class="c1">#     elif os.path.exists(&#39;/usr/local/bin/detectChordlessCircuits&#39;):</span>
    <span class="c1">#         os.system(&#39;/usr/local/bin/detectChordlessCircuits &#39; + tempFileName + &#39; &#39; + resultFile)</span>
    <span class="c1">#     elif os.path.exists(&#39;/opt/local/bin/detectChordlessCircuits&#39;):</span>
    <span class="c1">#         os.system(&#39;/opt/local/bin/detectChordlessCircuits &#39; + tempFileName + &#39; &#39; + resultFile)</span>
    <span class="c1">#     elif os.path.exists(&#39;/home/users/rbisdorff/bin/detectChordlessCircuits&#39;):</span>
    <span class="c1">#         os.system(&#39;/home/users/rbisdorff/bin/detectChordlessCircuits &#39; + tempFileName + &#39; &#39; + resultFile)</span>
    <span class="c1">#     else:</span>
    <span class="c1">#         print(&#39;Error: detectChordlessCircuits binary could not be found !!!&#39;)</span>
    <span class="c1">#     argDict = {}</span>
    <span class="c1">#     fi = open(resultFile,&#39;r&#39;)</span>
    <span class="c1">#     fileText = fi.read()</span>
    <span class="c1">#     fi.close()</span>
    <span class="c1">#     exec(compile(fileText, str(resultFile), &#39;exec&#39;),argDict)</span>
    <span class="c1">#     circuits = argDict[&#39;circuitsList&#39;]</span>
    <span class="c1">#     if circuits == []:</span>
    <span class="c1">#         Detected = False</span>
    <span class="c1">#     else:</span>
    <span class="c1">#         Detected = True</span>
    <span class="c1">#     if Debug:</span>
    <span class="c1">#         print(resultFile)</span>
    <span class="c1">#         print(argDict[&#39;circuitsList&#39;])</span>
    <span class="c1">#         if Detected:</span>
    <span class="c1">#             print(&#39;A chordless circuit has been detected !&#39;)</span>
    <span class="c1">#         else:</span>
    <span class="c1">#             print(&#39;No chordless circuit has been detected !&#39;)</span>
    <span class="c1">#         print(&#39;certificate: &#39;, circuits)</span>

    <span class="c1">#     return Detected</span>

    <span class="c1"># def computeCppInOutPipingChordlessCircuits(self,Odd=False,Debug=False):</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     python wrapper for the C++/Agrum based chordless circuits enumeration</span>
    <span class="c1">#     exchange arguments with external temporary files</span>

    <span class="c1">#     Result in *self.circuitsList*.</span>

    <span class="c1">#     .. warning:: Deprecated !!! The pure python version is more efficient</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     import os</span>
    <span class="c1">#     from subprocess import Popen,PIPE</span>

    <span class="c1">#     if os.path.exists(&#39;/usr/bin/enumChordlessCircuitsInOutPiping&#39;):</span>
    <span class="c1">#         p = Popen(args=[&#39;/usr/bin/enumChordlessCircuitsInOutPiping&#39;],stdin=PIPE,stdout=PIPE)</span>
    <span class="c1">#     elif os.path.exists(&#39;/usr/local/bin/enumChordlessCircuitsInOutPiping&#39;):</span>
    <span class="c1">#         p = Popen(args=[&#39;/usr/local/bin/enumChordlessCircuitsInOutPiping&#39;],stdin=PIPE,stdout=PIPE)</span>
    <span class="c1">#     elif os.path.exists(&#39;/opt/local/bin/enumChordlessCircuitsInOutPiping&#39;):</span>
    <span class="c1">#         p = Popen(args=[&#39;/opt/local/bin/enumChordlessCircuitsInOutPiping&#39;],stdin=PIPE,stdout=PIPE)</span>
    <span class="c1">#     elif  os.path.exists(&#39;/home/users/rbisdorff/bin/enumChordlessCircuitsInOutPiping&#39;):</span>
    <span class="c1">#         p = Popen(args=[&#39;/home/users/rbisdorff/bin/enumChordlessCircuitsInOutPiping&#39;],stdin=PIPE,stdout=PIPE)</span>
    <span class="c1">#     else:</span>
    <span class="c1">#         print(&#39;Error: executable enumChordlessCircuitsInOutPiping not found !!!&#39;)</span>
    <span class="c1">#     Med = self.valuationdomain[&#39;med&#39;]</span>
    <span class="c1">#     actions = [x for x in self.actions]</span>
    <span class="c1">#     relation = self.relation</span>
    <span class="c1">#     inputString = &#39;&#39;</span>
    <span class="c1">#     for i,x in enumerate(actions):</span>
    <span class="c1">#         for j,y in enumerate(actions):</span>
    <span class="c1">#             if i != j:</span>
    <span class="c1">#                 if relation[x][y] &gt; Med:</span>
    <span class="c1">#                     inputString += &#39;%d %d \n&#39; % (i+1,j+1)</span>
    <span class="c1">#     circuits = eval(p.communicate(input=inputString.encode(&#39;utf-8&#39;))[0])</span>
    <span class="c1">#     if Debug:</span>
    <span class="c1">#         print(circuits)</span>
    <span class="c1">#     result = []</span>
    <span class="c1">#     history = set()</span>
    <span class="c1">#     for x in circuits:</span>
    <span class="c1">#         # !! a circuit has a length n + 1 !!</span>
    <span class="c1">#         if Odd:</span>
    <span class="c1">#             r = len(x) % 2</span>
    <span class="c1">#             ## if Debug:</span>
    <span class="c1">#             ##     print x, r</span>
    <span class="c1">#             if r != 1:</span>
    <span class="c1">#                 oddCircuit = []</span>
    <span class="c1">#                 for ino in x[:-1]:</span>
    <span class="c1">#                     oddCircuit.append(actions[ino-1])</span>
    <span class="c1">#                 circuitActions = [y for y in flatten(oddCircuit)]</span>
    <span class="c1">#                 circuitSet = frozenset(circuitActions)</span>
    <span class="c1">#                 if circuitSet not in history:</span>
    <span class="c1">#                     result.append( ( circuitActions, circuitSet ) )</span>
    <span class="c1">#                     history.add(circuitSet)</span>
    <span class="c1">#                 #result.append( ( oddCircuit, frozenset(oddCircuit) ) )</span>
    <span class="c1">#         else:</span>
    <span class="c1">#             allCircuit = []</span>
    <span class="c1">#             for ino in x[:-1]:</span>
    <span class="c1">#                 allCircuit.append(actions[ino-1])</span>
    <span class="c1">#             circuitActions = [y for y in flatten(allCircuit)]</span>
    <span class="c1">#             circuitSet = frozenset(circuitActions)</span>
    <span class="c1">#             if circuitSet not in history:</span>
    <span class="c1">#                 result.append( ( circuitActions, circuitSet ) )</span>
    <span class="c1">#                 history.add(circuitSet)</span>
    <span class="c1">#             #result.append( ( allCircuit, frozenset(allCircuit) ) )</span>
    <span class="c1">#     self.circuitsList = result</span>
    <span class="c1">#     return result</span>

    <span class="c1"># def computeCppChordlessCircuits(self,Odd=False,Debug=False):</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     python wrapper for the C++/Agrum based chordless circuits enumeration</span>
    <span class="c1">#     exchange arguments with external temporary files</span>

    <span class="c1">#     Result in *self.circuitsList*.</span>

    <span class="c1">#     .. warning:: Deprecated !!! The pure python version is more efficient</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     import os</span>
    <span class="c1">#     from tempfile import mkstemp</span>
    <span class="c1">#     from digraphsTools import flatten</span>
        
    <span class="c1">#     fd, tempFileName = mkstemp()</span>
    <span class="c1">#     fo = os.fdopen(fd,&#39;w+b&#39;)</span>
    <span class="c1">#     Med = self.valuationdomain[&#39;med&#39;]</span>
    <span class="c1">#     actions = [x for x in self.actions]</span>
    <span class="c1">#     relation = self.relation</span>
    <span class="c1">#     inputString = &#39;&#39;</span>
    <span class="c1">#     for i,x in enumerate(actions):</span>
    <span class="c1">#         for j,y in enumerate(actions):</span>
    <span class="c1">#             if i != j:</span>
    <span class="c1">#                 if relation[x][y] &gt; Med:</span>
    <span class="c1">#                     inputString += &#39;%d %d \n&#39; % (i+1,j+1)</span>
    <span class="c1">#     fo.write(inputString.encode(&#39;utf-8&#39;))</span>
    <span class="c1">#     fo.close()</span>
    <span class="c1">#     ## if Debug:</span>
    <span class="c1">#     ##     print &#39;see file: &#39;, tempFileName</span>
    <span class="c1">#     resultFile = tempFileName+&#39;.py&#39;</span>
    <span class="c1">#     if os.path.exists(&#39;/usr/bin/enumChordlessCircuits&#39;):</span>
    <span class="c1">#         os.system(&#39;/usr/bin/enumChordlessCircuits &#39; + tempFileName + &#39; &#39; + resultFile)</span>
    <span class="c1">#     elif os.path.exists(&#39;/usr/local/bin/enumChordlessCircuits&#39;):</span>
    <span class="c1">#         os.system(&#39;/usr/local/bin/enumChordlessCircuits &#39; + tempFileName + &#39; &#39; + resultFile)</span>
    <span class="c1">#     elif os.path.exists(&#39;/opt/local/bin/enumChordlessCircuits&#39;):</span>
    <span class="c1">#         os.system(&#39;/opt/local/bin/enumChordlessCircuits &#39; + tempFileName + &#39; &#39; + resultFile)</span>
    <span class="c1">#     elif os.path.exists(&#39;/home/users/rbisdorff/bin/enumChordlessCircuits&#39;):</span>
    <span class="c1">#         os.system(&#39;/home/users/rbisdorff/bin/enumChordlessCircuits &#39; + tempFileName + &#39; &#39; + resultFile)</span>
    <span class="c1">#     else:</span>
    <span class="c1">#         print(&#39;Error: enumChordlessCircuits binary not found !!!&#39;)</span>
    <span class="c1">#     argDict = {}</span>
    <span class="c1">#     fi = open(resultFile,&#39;r&#39;)</span>
    <span class="c1">#     fileText = fi.read()</span>
    <span class="c1">#     fi.close</span>
    <span class="c1">#     exec(compile(fileText, str(resultFile), &#39;exec&#39;),argDict)</span>
    <span class="c1">#     circuits = argDict[&#39;circuitsList&#39;]</span>
    <span class="c1">#     if Debug:</span>
    <span class="c1">#         print(resultFile)</span>
    <span class="c1">#         print(argDict[&#39;circuitsList&#39;])</span>
    <span class="c1">#     result = []</span>
    <span class="c1">#     history = set()</span>
    <span class="c1">#     for x in circuits:</span>
    <span class="c1">#         # !! a circuit has a length n + 1 !!</span>
    <span class="c1">#         if Odd:</span>
    <span class="c1">#             r = len(x) % 2</span>
    <span class="c1">#             ## if Debug:</span>
    <span class="c1">#             ##     print x, r</span>
    <span class="c1">#             if r != 1:</span>
    <span class="c1">#                 oddCircuit = []</span>
    <span class="c1">#                 for ino in x[:-1]:</span>
    <span class="c1">#                     oddCircuit.append(actions[ino-1])</span>
    <span class="c1">#                 circuitActions = [y for y in flatten(oddCircuit)]</span>
    <span class="c1">#                 circuitSet = frozenset(circuitActions)</span>
    <span class="c1">#                 if circuitSet not in history:</span>
    <span class="c1">#                     result.append( ( circuitActions, circuitSet ) )</span>
    <span class="c1">#                     history.add(circuitSet)</span>
    <span class="c1">#         else:</span>
    <span class="c1">#             allCircuit = []</span>
    <span class="c1">#             for ino in x[:-1]:</span>
    <span class="c1">#                 allCircuit.append(actions[ino-1])</span>
    <span class="c1">#             circuitActions = [y for y in flatten(allCircuit)]</span>
    <span class="c1">#             circuitSet = frozenset(circuitActions)</span>
    <span class="c1">#             if circuitSet not in history:</span>
    <span class="c1">#                 result.append( ( circuitActions, circuitSet ) )</span>
    <span class="c1">#                 history.add(circuitSet)</span>
    <span class="c1">#     self.circuitsList = result</span>
    <span class="c1">#     return result</span>

    <span class="c1">#@timefn</span>
<div class="viewcode-block" id="Digraph.computeChordlessCircuits">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeChordlessCircuits">[docs]</a>
    <span class="k">def</span> <span class="nf">computeChordlessCircuits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Odd</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the set of all chordless circuits detected in a digraph.</span>
<span class="sd">        Result is stored in &lt;self.circuitsList&gt;</span>
<span class="sd">        holding a possibly empty list of tuples with at position 0 the</span>
<span class="sd">        list of adjacent actions of the circuit and at position 1</span>
<span class="sd">        the set of actions in the stored circuit.</span>

<span class="sd">        When *Odd* is True, only chordless circuits with an odd length</span>
<span class="sd">        are collected.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#import copy</span>
        <span class="kn">from</span> <span class="nn">digraphsTools</span> <span class="kn">import</span> <span class="n">flatten</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Odd</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*--- chordless odd circuits ---*&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*--- chordless circuits ---*&#39;</span><span class="p">)</span>

        <span class="n">actionsList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visitedArcs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">chordlessCircuits</span> <span class="o">=</span> <span class="p">[]</span>       
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">P</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Starting from &#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xCC</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chordlessPaths</span><span class="p">(</span><span class="n">P</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">Odd</span><span class="p">,</span><span class="n">Comments</span><span class="p">,</span><span class="n">Debug</span><span class="p">):</span>
                <span class="n">chordlessCircuits</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xCC</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chordlessCircuits</span> <span class="o">=</span> <span class="n">chordlessCircuits</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;result:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chordlessCircuits</span><span class="p">),</span> <span class="s1">&#39;circuit(s)&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chordlessCircuits</span><span class="p">)</span>

        <span class="n">circuitsList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">history</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">chordlessCircuits</span><span class="p">:</span>
            <span class="c1">#circuitsList.append( (x,frozenset(x)) )</span>
            <span class="n">circuitActions</span> <span class="o">=</span> <span class="p">[</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">flatten</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span>
            <span class="n">circuitSet</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">circuitActions</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;flattening&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">circuitActions</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">circuitSet</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">history</span><span class="p">:</span>
                <span class="n">history</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">circuitSet</span><span class="p">)</span>
                <span class="n">circuitsList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">(</span><span class="n">circuitActions</span><span class="p">,</span><span class="n">circuitSet</span><span class="p">)</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span> <span class="o">=</span> <span class="n">circuitsList</span>
        <span class="k">return</span> <span class="n">circuitsList</span></div>


<div class="viewcode-block" id="Digraph.detectChordlessCircuits">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.detectChordlessCircuits">[docs]</a>
    <span class="k">def</span> <span class="nf">detectChordlessCircuits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Detects a chordless circuit in a digraph.</span>
<span class="sd">        Returns a Boolean</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* ---- detecting a chordless circuit, the case given. ----*&#39;</span><span class="p">)</span>

        <span class="n">actionsList</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visitedArcs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">Detected</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">P</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Starting from &#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xCC</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">detectChordlessPath</span><span class="p">(</span><span class="n">P</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">Comments</span><span class="p">,</span><span class="n">Debug</span><span class="p">):</span>
                <span class="n">Detected</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Detected</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;A chordless circuit has been detected !&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No chordless circuit has been detected !&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">Detected</span></div>


<div class="viewcode-block" id="Digraph.showChordlessCircuits">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showChordlessCircuits">[docs]</a>
    <span class="k">def</span> <span class="nf">showChordlessCircuits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Recompute</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show method for chordless circuits observed in a Digraph instance.</span>

<span class="sd">        If previous computation is required, stores the detected circuits in self.circuitsList attribute.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">Recompute</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Recomputing the chordless circuits list.&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">computeChordlessCircuits</span><span class="p">()</span>
            <span class="n">circuitsList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span>            
        <span class="k">try</span><span class="p">:</span>
            <span class="n">circuitsList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">computeChordlessCircuits</span><span class="p">()</span>
            <span class="n">circuitsList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">circuitsList</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No circuits observed in this digraph.&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---- Chordless circuits ----*&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1"> circuits.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">circuitsList</span><span class="p">)))</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,(</span><span class="n">circList</span><span class="p">,</span><span class="n">circSet</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">circuitsList</span><span class="p">):</span>
                <span class="n">deg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitMinCredibility</span><span class="p">(</span><span class="n">circList</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">: &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="n">circList</span><span class="p">,</span> <span class="s1">&#39;, credibility : </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">deg</span><span class="p">))</span></div>


<div class="viewcode-block" id="Digraph.minimalValuationLevelForCircuitsElimination">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.minimalValuationLevelForCircuitsElimination">[docs]</a>
    <span class="k">def</span> <span class="nf">minimalValuationLevelForCircuitsElimination</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Odd</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders the minimal valuation level &lt;lambda&gt; that eliminates all</span>
<span class="sd">        self.circuitsList stored odd chordless circuits from self.</span>

<span class="sd">        .. warning::</span>

<span class="sd">            The &lt;lambda&gt; level polarised may still contain newly appearing chordless odd circuits !</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># try:</span>
        <span class="c1">#     circuitslist = self.circuitslist</span>
        <span class="c1"># except:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">computeChordlessCircuits</span><span class="p">(</span><span class="n">Odd</span><span class="o">=</span><span class="n">Odd</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
        <span class="n">circuitsList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">qualmaj</span> <span class="o">=</span> <span class="n">Med</span>
        <span class="n">oddCircuitsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">cc</span> <span class="k">for</span> <span class="n">cc</span> <span class="ow">in</span> <span class="n">circuitsList</span> <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)]</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Number of chordless circuits: &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">circuitsList</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">circuitsList</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Number of chordless odd circuits: &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">oddCircuitsList</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">oddCircuitsList</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">cc</span> <span class="ow">in</span> <span class="n">circuitsList</span><span class="p">:</span>
            <span class="n">circuit</span> <span class="o">=</span> <span class="n">cc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">circuit</span><span class="p">)</span>
            <span class="n">ccqualmaj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitMinCredibility</span><span class="p">(</span><span class="n">circuit</span><span class="p">)</span>
            <span class="c1">## n = len(circuit)</span>
            <span class="c1">## for i in range(n-1):</span>
            <span class="c1">##     x = cc[0][i]</span>
            <span class="c1">##     y = cc[0][i+1]</span>
            <span class="c1">##     if Debug:</span>
            <span class="c1">##         print x, y, self.relation[x][y],y,x,self.relation[y][x]</span>
            <span class="c1">##     if self.relation[x][y] &gt; Med:</span>
            <span class="c1">##         if self.relation[x][y] &lt; ccqualmaj:</span>
            <span class="c1">##             ccqualmaj = self.relation[x][y]</span>
            <span class="c1">## else:</span>
            <span class="c1">##     if self.relation[y][x] &lt; Med:</span>
            <span class="c1">##         if abs(self.relation[y][x]) &lt; ccqualmaj:</span>
            <span class="c1">##             ccqualmaj = abs(self.relation[y][x])</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;==&gt;&gt;&#39;</span><span class="p">,</span> <span class="n">circuit</span><span class="p">,</span> <span class="n">ccqualmaj</span><span class="p">)</span>
            <span class="n">qualmaj</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">qualmaj</span><span class="p">,</span><span class="n">ccqualmaj</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span> <span class="ow">or</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="c1"># if Odd:</span>
            <span class="c1">#     print(&#39;Number of chordless odd circuits: &#39;, len(oddCircuitsList))</span>
            <span class="c1"># else:</span>
            <span class="c1">#     print(&#39;Number of chordless circuits: &#39;, len(circuitsList))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Minimal cutting level for eliminating them: </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">qualmaj</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">qualmaj</span></div>


    <span class="c1">## def minimalValuationLevelForCircuitsEliminationOld(self,Debug=False):</span>
    <span class="c1">##     &quot;&quot;&quot;</span>
    <span class="c1">##     renders the minimal valuation level &lt;lambda&gt; that eliminates all</span>
    <span class="c1">##     self.circuitsList stored odd chordless circuits from self.</span>

    <span class="c1">##     .. warning::</span>

    <span class="c1">##         The &lt;lambda&gt; level polarised may still contain newly appearing chordless odd circuits !</span>

    <span class="c1">##     &quot;&quot;&quot;</span>
    <span class="c1">##     try:</span>
    <span class="c1">##         circuitslist = self.circuitslist</span>
    <span class="c1">##     except:</span>
    <span class="c1">##         self.computeChordlessCircuits(Odd=True,Comments=Debug)</span>
    <span class="c1">##         circuitsList = self.circuitsList</span>
    <span class="c1">##     Max = self.valuationdomain[&#39;max&#39;]</span>
    <span class="c1">##     Med = self.valuationdomain[&#39;med&#39;]</span>
    <span class="c1">##     qualmaj = Med</span>
    <span class="c1">##     for cc in circuitsList:</span>
    <span class="c1">##         ccqualmaj = Max</span>
    <span class="c1">##         if Debug:</span>
    <span class="c1">##             print cc</span>
    <span class="c1">##         circuit = cc[0]</span>
    <span class="c1">##         circuit.append(cc[0][0])</span>
    <span class="c1">##         if Debug:</span>
    <span class="c1">##             print circuit</span>
    <span class="c1">##         n = len(circuit)</span>
    <span class="c1">##         for i in range(n-1):</span>
    <span class="c1">##             x = cc[0][i]</span>
    <span class="c1">##             y = cc[0][i+1]</span>
    <span class="c1">##             if Debug:</span>
    <span class="c1">##                 print x, y, self.relation[x][y],y,x,self.relation[y][x]</span>
    <span class="c1">##             if self.relation[x][y] &gt; Med:</span>
    <span class="c1">##                 if self.relation[x][y] &lt; ccqualmaj:</span>
    <span class="c1">##                     ccqualmaj = self.relation[x][y]</span>
    <span class="c1">##         else:</span>
    <span class="c1">##             if self.relation[y][x] &lt; Med:</span>
    <span class="c1">##                 if abs(self.relation[y][x]) &lt; ccqualmaj:</span>
    <span class="c1">##                     ccqualmaj = abs(self.relation[y][x])</span>
    <span class="c1">##         if Debug:</span>
    <span class="c1">##             print &#39;==&gt;&gt;&#39;, circuit, ccqualmaj</span>
    <span class="c1">##         if ccqualmaj &gt; qualmaj:</span>
    <span class="c1">##             qualmaj = ccqualmaj</span>
    <span class="c1">##     if Debug:</span>
    <span class="c1">##         print qualmaj</span>
    <span class="c1">##     return qualmaj</span>

<div class="viewcode-block" id="Digraph.circuitMinCredibility">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.circuitMinCredibility">[docs]</a>
    <span class="k">def</span> <span class="nf">circuitMinCredibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">circ</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the minimal linking credibility of a Chordless Circuit.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">deg</span> <span class="o">=</span> <span class="n">Max</span>
        <span class="n">circuit</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">circ</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">circuit</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">circuit</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
                <span class="n">y</span> <span class="o">=</span>  <span class="n">circuit</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">j</span> <span class="o">==</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">deg</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">deg</span><span class="p">,</span><span class="nb">max</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]))</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">circuit</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">circuit</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">deg</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">deg</span><span class="p">,</span><span class="nb">max</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">deg</span></div>


<div class="viewcode-block" id="Digraph.circuitMaxCredibility">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.circuitMaxCredibility">[docs]</a>
    <span class="k">def</span> <span class="nf">circuitMaxCredibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">circ</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the maximal linking credibility of a Chordless Circuit.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">deg</span> <span class="o">=</span> <span class="n">Min</span>
        <span class="n">circuit</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">circ</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">circuit</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">circuit</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
                <span class="n">y</span> <span class="o">=</span>  <span class="n">circuit</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">j</span> <span class="o">==</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">deg</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">deg</span><span class="p">,</span><span class="nb">max</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]))</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">circuit</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">circuit</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">deg</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">deg</span><span class="p">,</span><span class="nb">max</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">deg</span></div>


    <span class="c1">## def circuitMinCredibilityOld(self,circuit):</span>
    <span class="c1">##     &quot;&quot;&quot;</span>
    <span class="c1">##     Renders the minimal linking credibility of a COC.</span>
    <span class="c1">##     &quot;&quot;&quot;</span>
    <span class="c1">##     actions = self.actions</span>
    <span class="c1">##     Max = self.valuationdomain[&#39;max&#39;]</span>
    <span class="c1">##     Med = self.valuationdomain[&#39;med&#39;]</span>
    <span class="c1">##     relation = self.relation</span>
    <span class="c1">##     deg = Max</span>
    <span class="c1">##     for x in circuit:</span>
    <span class="c1">##         for y in circuit:</span>
    <span class="c1">##             if relation[x][y] &gt; Med:</span>
    <span class="c1">##                 deg = min(deg,relation[x][y])</span>
    <span class="c1">##     return deg</span>

<div class="viewcode-block" id="Digraph.circuitAverageCredibility">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.circuitAverageCredibility">[docs]</a>
    <span class="k">def</span> <span class="nf">circuitAverageCredibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">circ</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the average linking credibility of a Chordless Circuit.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">narcs</span> <span class="o">=</span> <span class="n">n</span> <span class="o">*</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">deg</span> <span class="o">=</span> <span class="n">Min</span>
        <span class="n">circuit</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">circ</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">circuit</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">circuit</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="n">deg</span> <span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
        <span class="n">deg</span> <span class="o">=</span> <span class="n">deg</span> <span class="o">/</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">narcs</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">deg</span></div>


<div class="viewcode-block" id="Digraph.circuitCredibilities">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.circuitCredibilities">[docs]</a>
    <span class="k">def</span> <span class="nf">circuitCredibilities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">circuit</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the average linking credibilities and the minimal link of a Chordless Circuit.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">circuit</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Min</span> <span class="o">!=</span> <span class="o">-</span><span class="n">Max</span><span class="p">:</span>
            <span class="c1"># the characteristic valuation is not bipolar !</span>
            <span class="n">maxAmplitude</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">Max</span><span class="o">-</span><span class="n">Med</span><span class="p">)</span> <span class="o">+</span> <span class="nb">abs</span><span class="p">(</span><span class="n">Min</span><span class="o">-</span><span class="n">Med</span><span class="p">)</span>
            <span class="n">degP</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
            <span class="n">degN</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
            <span class="n">nParcs</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">nNarcs</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">minAmplitude</span> <span class="o">=</span> <span class="n">maxAmplitude</span>
            <span class="n">minLink</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">nc</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">circuit</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nc</span><span class="p">):</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">circuit</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="c1">#for j in range(i+1,nc):</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">nc</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="n">circuit</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="n">circuit</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">end</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
                <span class="n">degP</span> <span class="o">+=</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">-</span><span class="n">Med</span><span class="p">)</span>
                <span class="n">nParcs</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">diffxy</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span><span class="o">-</span><span class="n">Med</span><span class="p">)</span> <span class="o">+</span> <span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span><span class="o">-</span><span class="n">Med</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">],</span><span class="n">diffxy</span><span class="p">,</span><span class="n">end</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">minAmplitude</span> <span class="o">&gt;=</span> <span class="n">diffxy</span><span class="p">:</span>
                    <span class="n">minAmplitude</span> <span class="o">=</span> <span class="n">diffxy</span>
                    <span class="n">minLink</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">minAmplitude</span><span class="p">,</span><span class="n">diffxy</span><span class="p">,</span><span class="n">minLink</span><span class="p">)</span>
                <span class="n">degN</span> <span class="o">+=</span> <span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span><span class="o">-</span><span class="n">Med</span><span class="p">)</span>
                <span class="n">nNarcs</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># the characteristic valuation is bipolar !</span>
            <span class="n">maxAmplitude</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">Max</span><span class="p">)</span> <span class="o">+</span> <span class="nb">abs</span><span class="p">(</span><span class="n">Min</span><span class="p">)</span>
            <span class="n">degP</span> <span class="o">=</span> <span class="n">Med</span>
            <span class="n">degN</span> <span class="o">=</span> <span class="n">Med</span>
            <span class="n">nParcs</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">nNarcs</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">minAmplitude</span> <span class="o">=</span> <span class="n">maxAmplitude</span>
            <span class="n">minLink</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">nc</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">circuit</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nc</span><span class="p">):</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">circuit</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="c1">#for j in range(i+1,nc):</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">nc</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="n">circuit</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="n">circuit</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">end</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
                <span class="n">degP</span> <span class="o">+=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>
                <span class="n">nParcs</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">diffxy</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span> <span class="o">+</span> <span class="nb">abs</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">],</span><span class="n">diffxy</span><span class="p">,</span><span class="n">end</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">minAmplitude</span> <span class="o">&gt;=</span> <span class="n">diffxy</span><span class="p">:</span>
                    <span class="n">minAmplitude</span> <span class="o">=</span> <span class="n">diffxy</span>
                    <span class="n">minLink</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">minLink</span><span class="p">)</span>
                <span class="n">degN</span> <span class="o">+=</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span>
                <span class="n">nNarcs</span> <span class="o">+=</span> <span class="mi">1</span>            
        <span class="k">if</span> <span class="n">nParcs</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">degP</span> <span class="o">/=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">nParcs</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">nNarcs</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">degN</span> <span class="o">/=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">nNarcs</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;degP,degN,minLink&#39;</span><span class="p">,</span><span class="n">degP</span><span class="p">,</span><span class="n">degN</span><span class="p">,</span><span class="n">minLink</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">degP</span><span class="p">,</span><span class="n">degN</span><span class="p">,</span><span class="n">minLink</span></div>


<div class="viewcode-block" id="Digraph.contra">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.contra">[docs]</a>
    <span class="k">def</span> <span class="nf">contra</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameter: choice.</span>
<span class="sd">        Renders the negation of a choice v characteristic&#39;s vector.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]))</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]))</span>
        <span class="c1">#print v</span>
        <span class="n">nv</span> <span class="o">=</span> <span class="p">[</span><span class="n">Max</span> <span class="o">-</span> <span class="n">v</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">+</span> <span class="n">Min</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">))]</span>
        <span class="k">return</span> <span class="n">nv</span></div>


<div class="viewcode-block" id="Digraph.sharpvec">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.sharpvec">[docs]</a>
    <span class="k">def</span> <span class="nf">sharpvec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">w</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Paramaters: choice characteristic vectors.</span>
<span class="sd">        Renders the sharpest of two characteristic vectors v and w.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sv</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">sharp</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="n">x</span><span class="p">],</span><span class="n">w</span><span class="p">[</span><span class="n">x</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">))]</span>
        <span class="k">return</span> <span class="n">sv</span></div>


<div class="viewcode-block" id="Digraph.sharp">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.sharp">[docs]</a>
    <span class="k">def</span> <span class="nf">sharp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Paramaters: choice characteristic values.</span>
<span class="sd">        Renders the sharpest of two characteristic values x and y.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">med</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]))</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="n">med</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">&gt;=</span> <span class="n">med</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">med</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">&lt;=</span> <span class="n">med</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">med</span></div>


<div class="viewcode-block" id="Digraph.inner_prod">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.inner_prod">[docs]</a>
    <span class="k">def</span> <span class="nf">inner_prod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters: two choice characteristic vectors</span>
<span class="sd">        Renders the inner product of two characteristic vetors.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]))</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">v1</span><span class="p">)):</span>
            <span class="n">res</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">v2</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">res</span></div>


<div class="viewcode-block" id="Digraph.matmult2">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.matmult2">[docs]</a>
    <span class="k">def</span> <span class="nf">matmult2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters: digraph relation and choice characteristic vector</span>
<span class="sd">        matrix multiply vector by inner production</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">inner_prod</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">m</span><span class="p">]</span></div>


<div class="viewcode-block" id="Digraph.readdomvector">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.readdomvector">[docs]</a>
    <span class="k">def</span> <span class="nf">readdomvector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span><span class="n">relation</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameter: action x</span>
<span class="sd">        dominant out vector.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#import array</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">vec</span> <span class="o">=</span> <span class="p">[</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">vec</span></div>


<div class="viewcode-block" id="Digraph.readabsvector">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.readabsvector">[docs]</a>
    <span class="k">def</span> <span class="nf">readabsvector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span><span class="n">relation</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameter: action x</span>
<span class="sd">        absorbent in vector.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#import array</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">vec</span> <span class="o">=</span> <span class="p">[</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">vec</span></div>


    <span class="c1"># -----  graph restrictions methods</span>

<div class="viewcode-block" id="Digraph.domkernelrestrict">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.domkernelrestrict">[docs]</a>
    <span class="k">def</span> <span class="nf">domkernelrestrict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prekernel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameter: dominant prekernel</span>
<span class="sd">        Renders dominant prekernel restricted relation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]))</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]))</span>
        <span class="n">relation_k</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation_k</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="c1">#relation_k[x][y] = {}</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">:</span>
                    <span class="n">relation_k</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                <span class="k">elif</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">prekernel</span> <span class="ow">and</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">prekernel</span><span class="p">:</span>
                    <span class="n">relation_k</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>
                <span class="k">elif</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">prekernel</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">relation_k</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>
                <span class="k">elif</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">prekernel</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">relation_k</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">relation_k</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
        <span class="k">return</span> <span class="n">relation_k</span></div>


<div class="viewcode-block" id="Digraph.abskernelrestrict">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.abskernelrestrict">[docs]</a>
    <span class="k">def</span> <span class="nf">abskernelrestrict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prekernel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameter: prekernel</span>
<span class="sd">        Renders absorbent prekernel restricted relation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]))</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]))</span>
        <span class="n">relation_k</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation_k</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="c1">#relation_k[x][y] = {}</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">:</span>
                    <span class="n">relation_k</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                <span class="k">elif</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">prekernel</span> <span class="ow">and</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">prekernel</span><span class="p">:</span>
                    <span class="n">relation_k</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>
                <span class="k">elif</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">prekernel</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">relation_k</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>
                <span class="k">elif</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">prekernel</span> <span class="ow">and</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="n">relation_k</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">relation_k</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
        <span class="k">return</span> <span class="n">relation_k</span></div>



<div class="viewcode-block" id="Digraph.showRubyChoice">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showRubyChoice">[docs]</a>
    <span class="k">def</span> <span class="nf">showRubyChoice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">_OldCoca</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Dummy for showBestChoiceRecommendation()</span>
<span class="sd">        needed for older versions compatibility.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showBestChoiceRecommendation</span><span class="p">(</span><span class="n">Verbose</span><span class="o">=</span><span class="n">Verbose</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">,</span><span class="n">_OldCoca</span><span class="o">=</span><span class="n">_OldCoca</span><span class="p">)</span></div>


<div class="viewcode-block" id="Digraph.computeBestChoiceRecommendation">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeBestChoiceRecommendation">[docs]</a>
    <span class="k">def</span> <span class="nf">computeBestChoiceRecommendation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                          <span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                          <span class="n">ChoiceVector</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                          <span class="n">CoDual</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                          <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                          <span class="n">_OldCoca</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                          <span class="n">BrokenCocs</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets self.bestChoice, self.bestChoiceData, self.worstChoice and self.worstChoiceData</span>
<span class="sd">        with the showBestChoiceRecommendation method.</span>

<span class="sd">        First and last choices data is the following:</span>
<span class="sd">        [(0)-determ,(1)degirred,(2)degi,(3)degd,(4)dega,(5)str(choice),(6)domvec,(7)cover]</span>

<span class="sd">        self.bestChoice = self.bestChoiceData[5]</span>
<span class="sd">        self.worstChoice = self.worstChoiceData[5]</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showBestChoiceRecommendation</span><span class="p">(</span><span class="n">Verbose</span><span class="o">=</span><span class="n">Verbose</span><span class="p">,</span>
                                          <span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">,</span>
                                          <span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">,</span>
                                          <span class="n">CoDual</span><span class="o">=</span><span class="n">CoDual</span><span class="p">,</span>
                                          <span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">,</span>
                                          <span class="n">_OldCoca</span><span class="o">=</span><span class="n">_OldCoca</span><span class="p">,</span>
                                          <span class="n">BrokenCocs</span><span class="o">=</span><span class="n">BrokenCocs</span><span class="p">)</span></div>


    
<div class="viewcode-block" id="Digraph.showFirstChoiceRecommendation">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showFirstChoiceRecommendation">[docs]</a>
    <span class="k">def</span> <span class="nf">showFirstChoiceRecommendation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                          <span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                          <span class="n">ChoiceVector</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                          <span class="n">CoDual</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                          <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                          <span class="n">_OldCoca</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                          <span class="n">BrokenCocs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                          <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Shows a first choice recommendation.</span>

<span class="sd">        .. note::</span>

<span class="sd">            Computes by default a first-choice recommendation on the corresponding strict (codual) outranking digraph.</span>

<span class="sd">            By default, with BrokenCocs=True, we brake all chordless circuits at their weakest determined ( abs(r(x&gt;y)) + abs(r(y&gt;x)) ) link.</span>

<span class="sd">            When BrokenCocs=False we proceed like follows:</span>

<span class="sd">            In case of chordless circuits, if supporting arcs are more credible</span>
<span class="sd">            than the reversed negating arcs, we collapse the circuits into hyper nodes.</span>
<span class="sd">            Inversely,  if supporting arcs are not more credible than the reversed negating arcs,</span>
<span class="sd">            we brake the circuits on their weakest arc.</span>
<span class="sd">         </span>
<span class="sd">        Usage example:</span>
<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; from outrankingDigraphs import *</span>
<span class="sd">        &gt;&gt;&gt; t = Random3ObjectivesPerformanceTableau(seed=5)</span>
<span class="sd">        &gt;&gt;&gt; g = BipolarOutrankingDigraph(t)</span>
<span class="sd">        &gt;&gt;&gt; g.showFirstChoiceRecommendation()</span>
<span class="sd">        ***********************</span>
<span class="sd">        First Choice Recommendation (BCR)</span>
<span class="sd">        (in decreasing order of determinateness)   </span>
<span class="sd">        Credibility domain:  [-100.0, 100.0]</span>
<span class="sd">        === &gt;&gt; potential first choices</span>
<span class="sd">        * choice              : [&#39;a04&#39;, &#39;a14&#39;, &#39;a19&#39;, &#39;a20&#39;]</span>
<span class="sd">           independence        : 1.19</span>
<span class="sd">           dominance           : 4.76</span>
<span class="sd">           absorbency          : -59.52</span>
<span class="sd">           covering (%)        : 75.00</span>
<span class="sd">           determinateness (%) : 57.86</span>
<span class="sd">           - most credible action(s) = { &#39;a14&#39;: 23.81, &#39;a19&#39;: 11.90, &#39;a04&#39;: 2.38, &#39;a20&#39;: 1.19, }  </span>
<span class="sd">        === &gt;&gt; potential last choices </span>
<span class="sd">        * choice              : [&#39;a03&#39;, &#39;a12&#39;, &#39;a17&#39;]</span>
<span class="sd">          independence        : 4.76</span>
<span class="sd">          dominance           : -76.19</span>
<span class="sd">          absorbency          : 4.76</span>
<span class="sd">          covering (%)        : 0.00</span>
<span class="sd">          determinateness (%) : 65.39</span>
<span class="sd">          - most credible action(s) = { &#39;a03&#39;: 38.10, &#39;a12&#39;: 13.10, &#39;a17&#39;: 4.76, }</span>
<span class="sd">        Execution time: 0.024 seconds</span>
<span class="sd">        *****************************</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">time</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;***********************&#39;</span><span class="p">)</span>
        <span class="c1">#print(&#39;RuBis BCR&#39;)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;All comments !!!&#39;</span><span class="p">)</span>
            <span class="n">Comments</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">Verbose</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="n">n0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span>
        <span class="n">cpself</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">CoDual</span><span class="p">:</span>
            <span class="n">g</span> <span class="o">=</span> <span class="o">~</span><span class="p">(</span><span class="o">-</span><span class="n">cpself</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">g</span> <span class="o">=</span> <span class="n">cpself</span>
        <span class="k">if</span> <span class="n">_OldCoca</span><span class="p">:</span>
            <span class="n">_selfwcoc</span> <span class="o">=</span> <span class="n">CocaDigraph</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
            <span class="n">b1</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="n">BrokenCocs</span><span class="p">:</span>
            <span class="n">_selfwcoc</span> <span class="o">=</span> <span class="n">BrokenCocsDigraph</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
            <span class="n">b1</span> <span class="o">=</span> <span class="n">_selfwcoc</span><span class="o">.</span><span class="n">breakings</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_selfwcoc</span> <span class="o">=</span> <span class="n">BreakAddCocsDigraph</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
            <span class="n">b1</span> <span class="o">=</span>  <span class="n">_selfwcoc</span><span class="o">.</span><span class="n">breakings</span>
        <span class="n">n1</span> <span class="o">=</span> <span class="n">_selfwcoc</span><span class="o">.</span><span class="n">order</span>
        <span class="n">nc</span> <span class="o">=</span> <span class="n">n1</span> <span class="o">-</span> <span class="n">n0</span>
        
        <span class="c1">#self.relation_orig = deepcopy(g.relation)</span>
        <span class="k">if</span> <span class="n">b1</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">nc</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1">#self.actions_orig = deepcopy(g.actions)</span>
            <span class="n">g</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">_selfwcoc</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
            <span class="n">g</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
            <span class="n">g</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">_selfwcoc</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;List of pseudo-independent choices&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="n">g</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="n">g</span><span class="o">.</span><span class="n">showRelationTable</span><span class="p">()</span>
        <span class="c1">#self.showPreKernels()</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">actions</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">Verbose</span><span class="p">:</span>
            <span class="n">g</span><span class="o">.</span><span class="n">showPreKernels</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">dompreKernels</span><span class="p">,</span><span class="n">g</span><span class="o">.</span><span class="n">abspreKernels</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">computeGoodChoices</span><span class="p">(</span><span class="n">Comments</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">computeBadChoices</span><span class="p">(</span><span class="n">Comments</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;first and last choices: &#39;</span><span class="p">,</span><span class="n">g</span><span class="o">.</span><span class="n">goodChoices</span><span class="p">,</span><span class="n">g</span><span class="o">.</span><span class="n">badChoices</span><span class="p">)</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;First choice recommendation(s) (BCR)&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; (in decreasing order of determinateness)   &#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Credibility domain: [</span><span class="si">%.2f</span><span class="s1">,</span><span class="si">%.2f</span><span class="s1">]&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">],</span>\
                                                                        <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">])</span> <span class="p">)</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">bestChoice</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">bestChoiceData</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">worstChoice</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">worstChoiceData</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">gch</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">goodChoices</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">gch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">Med</span><span class="p">:</span>
                <span class="n">goodChoice</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">for</span> <span class="n">bch</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">badChoices</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">gch</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="n">bch</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span>
                        <span class="c1">#if gch[0] == bch[0]:</span>
                        <span class="k">if</span> <span class="n">gch</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="n">gch</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span>
                            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; === &gt;&gt; ambiguous first choice(s)&#39;</span><span class="p">)</span>
                                <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">gch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;good&#39;</span><span class="p">,</span>
                                                      <span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; === &gt;&gt; ambiguous last choice(s)&#39;</span><span class="p">)</span>
                                <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">bch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;bad&#39;</span><span class="p">,</span>
                                                       <span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                            <span class="n">goodChoice</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="k">if</span> <span class="n">bestChoice</span> <span class="o">==</span> <span class="nb">set</span><span class="p">():</span>
                                <span class="n">bestChoice</span> <span class="o">=</span> <span class="n">gch</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
                                <span class="n">bestChoiceData</span> <span class="o">=</span> <span class="n">gch</span>
                        <span class="k">elif</span> <span class="n">gch</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">gch</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
                            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; === &gt;&gt; outranked (first) choice &#39;</span><span class="p">)</span>
                                <span class="c1">#g.showChoiceVector(gch,choiceType=&#39;good&#39;,</span>
                                <span class="c1">#                      ChoiceVector=ChoiceVector)</span>
                                <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">bch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;bad&#39;</span><span class="p">,</span>
                                                      <span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                            <span class="n">goodChoice</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">goodChoice</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="n">goodChoice</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; === &gt;&gt; potential first choice(s)&#39;</span><span class="p">)</span>
                        <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">gch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;good&#39;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">bestChoice</span> <span class="o">==</span> <span class="nb">set</span><span class="p">():</span>
                        <span class="n">bestChoice</span> <span class="o">=</span> <span class="n">gch</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
                        <span class="n">bestChoiceData</span> <span class="o">=</span> <span class="n">gch</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; === &gt;&gt; non robust first choice(s)&#39;</span><span class="p">)</span>
                    <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">gch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;good&#39;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">bch</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">badChoices</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">bch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">Med</span><span class="p">:</span>
                <span class="n">badChoice</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">nullChoice</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">for</span> <span class="n">gch</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">goodChoices</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">bch</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="n">gch</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span>
                        <span class="c1">#if gch[0] == bch[0]:</span>
                        <span class="k">if</span> <span class="n">bch</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="n">bch</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span>
                            <span class="k">if</span> <span class="n">Verbose</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; === &gt;&gt; ambiguous (last) choice &#39;</span><span class="p">)</span>
                                <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">gch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;good&#39;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                                <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">bch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;bad&#39;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                            <span class="n">badChoice</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="n">nullChoice</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">elif</span> <span class="n">bch</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">bch</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span>
                            <span class="k">if</span> <span class="n">Verbose</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; === &gt;&gt; outranking (last) choice &#39;</span><span class="p">)</span>
                                <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">gch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;good&#39;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                                <span class="c1">#g.showChoiceVector(bch,choiceType=&#39;bad&#39;,ChoiceVector=ChoiceVector)</span>
                            <span class="n">badChoice</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">badChoice</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="n">badChoice</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; === &gt;&gt; potential last choice(s) &#39;</span><span class="p">)</span>
                        <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">bch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;bad&#39;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">worstChoice</span> <span class="o">==</span> <span class="nb">set</span><span class="p">():</span>
                        <span class="n">worstChoice</span> <span class="o">=</span> <span class="n">bch</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
                        <span class="n">worstChoiceData</span> <span class="o">=</span> <span class="n">bch</span>
                <span class="c1"># elif nullChoice:</span>
                <span class="c1">#     if Comments:</span>
                <span class="c1">#         print(&#39; === &gt;&gt; ambiguous choice(s)&#39;)</span>
                <span class="c1">#         g.showChoiceVector(bch,choiceType=&#39;bad&#39;,ChoiceVector=ChoiceVector)</span>
                <span class="c1">#     if worstChoice == set():</span>
                <span class="c1">#         worstChoice = bch[5]</span>
                <span class="c1">#         worstChoiceData = bch</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;=== &gt;&gt; non robust last choice(s)&#39;</span><span class="p">)</span>
                    <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">bch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;bad&#39;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Execution time: </span><span class="si">%.3f</span><span class="s1"> seconds&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">t1</span><span class="o">-</span><span class="n">t0</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*****************************&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bestChoice</span> <span class="o">=</span> <span class="n">bestChoice</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bestChoiceData</span> <span class="o">=</span> <span class="n">bestChoiceData</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worstChoice</span> <span class="o">=</span> <span class="n">worstChoice</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worstChoiceData</span> <span class="o">=</span> <span class="n">worstChoiceData</span></div>


<div class="viewcode-block" id="Digraph.showBestChoiceRecommendation">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showBestChoiceRecommendation">[docs]</a>
    <span class="k">def</span> <span class="nf">showBestChoiceRecommendation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                          <span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                          <span class="n">ChoiceVector</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                          <span class="n">CoDual</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                          <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                          <span class="n">_OldCoca</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                          <span class="n">BrokenCocs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                          <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Shows a best choice recommendation.</span>

<span class="sd">        .. note::</span>

<span class="sd">            Computes by default a best choice recommendation on the corresponding strict (codual) outranking digraph.</span>

<span class="sd">            By default, with BrokenCocs=True, we brake all chordless circuits at their weakest determined ( abs(r(x&gt;y)) + abs(r(y&gt;x)) ) link.</span>

<span class="sd">            When BrokenCocs=False we proceed like follows:</span>

<span class="sd">            In case of chordless circuits, if supporting arcs are more credible</span>
<span class="sd">            than the reversed negating arcs, we collapse the circuits into hyper nodes.</span>
<span class="sd">            Inversely,  if supporting arcs are not more credible than the reversed negating arcs,</span>
<span class="sd">            we brake the circuits on their weakest arc.</span>
<span class="sd">         </span>
<span class="sd">        Usage example:</span>
<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; from outrankingDigraphs import *</span>
<span class="sd">        &gt;&gt;&gt; t = Random3ObjectivesPerformanceTableau(seed=5)</span>
<span class="sd">        &gt;&gt;&gt; g = BipolarOutrankingDigraph(t)</span>
<span class="sd">        &gt;&gt;&gt; g.showBestChoiceRecommendation()</span>
<span class="sd">        ***********************</span>
<span class="sd">        Best Choice Recommendation (BCR)</span>
<span class="sd">        (in decreasing order of determinateness)   </span>
<span class="sd">        Credibility domain:  [-100.0, 100.0]</span>
<span class="sd">        === &gt;&gt; potential first choices</span>
<span class="sd">        * choice              : [&#39;a04&#39;, &#39;a14&#39;, &#39;a19&#39;, &#39;a20&#39;]</span>
<span class="sd">           independence        : 1.19</span>
<span class="sd">           dominance           : 4.76</span>
<span class="sd">           absorbency          : -59.52</span>
<span class="sd">           covering (%)        : 75.00</span>
<span class="sd">           determinateness (%) : 57.86</span>
<span class="sd">           - most credible action(s) = { &#39;a14&#39;: 23.81, &#39;a19&#39;: 11.90, &#39;a04&#39;: 2.38, &#39;a20&#39;: 1.19, }  </span>
<span class="sd">        === &gt;&gt; potential last choices </span>
<span class="sd">        * choice              : [&#39;a03&#39;, &#39;a12&#39;, &#39;a17&#39;]</span>
<span class="sd">          independence        : 4.76</span>
<span class="sd">          dominance           : -76.19</span>
<span class="sd">          absorbency          : 4.76</span>
<span class="sd">          covering (%)        : 0.00</span>
<span class="sd">          determinateness (%) : 65.39</span>
<span class="sd">          - most credible action(s) = { &#39;a03&#39;: 38.10, &#39;a12&#39;: 13.10, &#39;a17&#39;: 4.76, }</span>
<span class="sd">        Execution time: 0.024 seconds</span>
<span class="sd">        *****************************</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">time</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;***********************&#39;</span><span class="p">)</span>
        <span class="c1">#print(&#39;RuBis BCR&#39;)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;All comments !!!&#39;</span><span class="p">)</span>
            <span class="n">Comments</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">Verbose</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="n">n0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span>
        <span class="n">cpself</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">CoDual</span><span class="p">:</span>
            <span class="n">g</span> <span class="o">=</span> <span class="o">~</span><span class="p">(</span><span class="o">-</span><span class="n">cpself</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">g</span> <span class="o">=</span> <span class="n">cpself</span>
        <span class="k">if</span> <span class="n">_OldCoca</span><span class="p">:</span>
            <span class="n">_selfwcoc</span> <span class="o">=</span> <span class="n">CocaDigraph</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
            <span class="n">b1</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="n">BrokenCocs</span><span class="p">:</span>
            <span class="n">_selfwcoc</span> <span class="o">=</span> <span class="n">BrokenCocsDigraph</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
            <span class="n">b1</span> <span class="o">=</span> <span class="n">_selfwcoc</span><span class="o">.</span><span class="n">breakings</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_selfwcoc</span> <span class="o">=</span> <span class="n">BreakAddCocsDigraph</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
            <span class="n">b1</span> <span class="o">=</span>  <span class="n">_selfwcoc</span><span class="o">.</span><span class="n">breakings</span>
        <span class="n">n1</span> <span class="o">=</span> <span class="n">_selfwcoc</span><span class="o">.</span><span class="n">order</span>
        <span class="n">nc</span> <span class="o">=</span> <span class="n">n1</span> <span class="o">-</span> <span class="n">n0</span>
        
        <span class="c1">#self.relation_orig = deepcopy(g.relation)</span>
        <span class="k">if</span> <span class="n">b1</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">nc</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1">#self.actions_orig = deepcopy(g.actions)</span>
            <span class="n">g</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">_selfwcoc</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
            <span class="n">g</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
            <span class="n">g</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">_selfwcoc</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;List of pseudo-independent choices&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="n">g</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="n">g</span><span class="o">.</span><span class="n">showRelationTable</span><span class="p">()</span>
        <span class="c1">#self.showPreKernels()</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">actions</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">Verbose</span><span class="p">:</span>
            <span class="n">g</span><span class="o">.</span><span class="n">showPreKernels</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">dompreKernels</span><span class="p">,</span><span class="n">g</span><span class="o">.</span><span class="n">abspreKernels</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">computeGoodChoices</span><span class="p">(</span><span class="n">Comments</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">computeBadChoices</span><span class="p">(</span><span class="n">Comments</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;first and last choices: &#39;</span><span class="p">,</span><span class="n">g</span><span class="o">.</span><span class="n">goodChoices</span><span class="p">,</span><span class="n">g</span><span class="o">.</span><span class="n">badChoices</span><span class="p">)</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Best choice recommendation(s) (BCR)&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; (in decreasing order of determinateness)   &#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Credibility domain: [</span><span class="si">%.2f</span><span class="s1">,</span><span class="si">%.2f</span><span class="s1">]&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">],</span>\
                                                                        <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">])</span> <span class="p">)</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">bestChoice</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">bestChoiceData</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">worstChoice</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">worstChoiceData</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">gch</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">goodChoices</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">gch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">Med</span><span class="p">:</span>
                <span class="n">goodChoice</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">for</span> <span class="n">bch</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">badChoices</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">gch</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="n">bch</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span>
                        <span class="c1">#if gch[0] == bch[0]:</span>
                        <span class="k">if</span> <span class="n">gch</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="n">gch</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span>
                            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; === &gt;&gt; ambiguous first choice(s)&#39;</span><span class="p">)</span>
                                <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">gch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;good&#39;</span><span class="p">,</span>
                                                      <span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; === &gt;&gt; ambiguous last choice(s)&#39;</span><span class="p">)</span>
                                <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">bch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;bad&#39;</span><span class="p">,</span>
                                                       <span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                            <span class="n">goodChoice</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="k">if</span> <span class="n">bestChoice</span> <span class="o">==</span> <span class="nb">set</span><span class="p">():</span>
                                <span class="n">bestChoice</span> <span class="o">=</span> <span class="n">gch</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
                                <span class="n">bestChoiceData</span> <span class="o">=</span> <span class="n">gch</span>
                        <span class="k">elif</span> <span class="n">gch</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">gch</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
                            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; === &gt;&gt; outranked (first) choice &#39;</span><span class="p">)</span>
                                <span class="c1">#g.showChoiceVector(gch,choiceType=&#39;good&#39;,</span>
                                <span class="c1">#                      ChoiceVector=ChoiceVector)</span>
                                <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">bch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;bad&#39;</span><span class="p">,</span>
                                                      <span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                            <span class="n">goodChoice</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">goodChoice</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="n">goodChoice</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; === &gt;&gt; potential first choice(s)&#39;</span><span class="p">)</span>
                        <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">gch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;good&#39;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">bestChoice</span> <span class="o">==</span> <span class="nb">set</span><span class="p">():</span>
                        <span class="n">bestChoice</span> <span class="o">=</span> <span class="n">gch</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
                        <span class="n">bestChoiceData</span> <span class="o">=</span> <span class="n">gch</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; === &gt;&gt; non robust first choice(s)&#39;</span><span class="p">)</span>
                    <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">gch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;good&#39;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">bch</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">badChoices</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">bch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">Med</span><span class="p">:</span>
                <span class="n">badChoice</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">nullChoice</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">for</span> <span class="n">gch</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">goodChoices</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">bch</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="n">gch</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span>
                        <span class="c1">#if gch[0] == bch[0]:</span>
                        <span class="k">if</span> <span class="n">bch</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="n">bch</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span>
                            <span class="k">if</span> <span class="n">Verbose</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; === &gt;&gt; ambiguous (last) choice &#39;</span><span class="p">)</span>
                                <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">gch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;good&#39;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                                <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">bch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;bad&#39;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                            <span class="n">badChoice</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="n">nullChoice</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">elif</span> <span class="n">bch</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">bch</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span>
                            <span class="k">if</span> <span class="n">Verbose</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; === &gt;&gt; outranking (last) choice &#39;</span><span class="p">)</span>
                                <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">gch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;good&#39;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                                <span class="c1">#g.showChoiceVector(bch,choiceType=&#39;bad&#39;,ChoiceVector=ChoiceVector)</span>
                            <span class="n">badChoice</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">badChoice</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="n">badChoice</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; === &gt;&gt; potential last choice(s) &#39;</span><span class="p">)</span>
                        <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">bch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;bad&#39;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">worstChoice</span> <span class="o">==</span> <span class="nb">set</span><span class="p">():</span>
                        <span class="n">worstChoice</span> <span class="o">=</span> <span class="n">bch</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
                        <span class="n">worstChoiceData</span> <span class="o">=</span> <span class="n">bch</span>
                <span class="c1"># elif nullChoice:</span>
                <span class="c1">#     if Comments:</span>
                <span class="c1">#         print(&#39; === &gt;&gt; ambiguous choice(s)&#39;)</span>
                <span class="c1">#         g.showChoiceVector(bch,choiceType=&#39;bad&#39;,ChoiceVector=ChoiceVector)</span>
                <span class="c1">#     if worstChoice == set():</span>
                <span class="c1">#         worstChoice = bch[5]</span>
                <span class="c1">#         worstChoiceData = bch</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;=== &gt;&gt; non robust first choice(s)&#39;</span><span class="p">)</span>
                    <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">bch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;bad&#39;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Execution time: </span><span class="si">%.3f</span><span class="s1"> seconds&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">t1</span><span class="o">-</span><span class="n">t0</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*****************************&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bestChoice</span> <span class="o">=</span> <span class="n">bestChoice</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bestChoiceData</span> <span class="o">=</span> <span class="n">bestChoiceData</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worstChoice</span> <span class="o">=</span> <span class="n">worstChoice</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worstChoiceData</span> <span class="o">=</span> <span class="n">worstChoiceData</span></div>


<div class="viewcode-block" id="Digraph.showRubisBestChoiceRecommendation">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showRubisBestChoiceRecommendation">[docs]</a>
    <span class="k">def</span> <span class="nf">showRubisBestChoiceRecommendation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Dummy for backward portable showBestChoiceRecommendation().</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showBestChoiceRecommendation</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="Digraph.showChoiceRecommendation">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showChoiceRecommendation">[docs]</a>
    <span class="k">def</span> <span class="nf">showChoiceRecommendation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Bachet&#39;</span><span class="p">,</span>
                                       <span class="n">Polarised</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                       <span class="n">randomized</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                                       <span class="n">maxNbrOfRankings</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                                       <span class="n">seed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                       <span class="n">ChoiceVector</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                       <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generic choice recommender method.</span>

<span class="sd">        **Parameters**</span>
<span class="sd">        </span>
<span class="sd">        *method*: &#39;Bachet&#39; (default) | &#39;Rubis&#39;; the Bachet method is based on the conjoint</span>
<span class="sd">        extracton of initial and terminal prekernels from the partial Bachet ranking,</span>
<span class="sd">        whereas the Rubis method is based on the extraction of an initial and</span>
<span class="sd">        terminal prekernels directly from the given outranking digraph.</span>

<span class="sd">        *Polarised*: *True* (by default) | False; Bachet parameter</span>

<span class="sd">        *randomized*: positive integer (100 by default); Bachet Parameter</span>

<span class="sd">        *maxNbrOfRankings*: positive integer &gt; 0 (5 by default); Bachet parameter</span>

<span class="sd">        *seed*: Bachet parameter for making the randomization reproducible</span>

<span class="sd">        *ChoiceVector*: Rubis parameter for showing complete prekernel</span>
<span class="sd">        characteristic vectors.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;Bachet&#39;</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Bachet choice recommendation&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">showBachetChoiceRecommendation</span><span class="p">(</span>
                                       <span class="n">Polarised</span><span class="o">=</span><span class="n">Polarised</span><span class="p">,</span>
                                       <span class="n">randomized</span><span class="o">=</span><span class="n">randomized</span><span class="p">,</span>
                                       <span class="n">maxNbrOfRankings</span><span class="o">=</span><span class="n">maxNbrOfRankings</span><span class="p">,</span>
                                       <span class="n">seed</span> <span class="o">=</span> <span class="n">seed</span><span class="p">,</span>
                                       <span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                       <span class="p">)</span>
        <span class="k">elif</span> <span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;Rubis&#39;</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Rubis choice recommendation&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">showFirstChoiceRecommendation</span><span class="p">(</span><span class="n">Verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                          <span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                          <span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">,</span>
                                          <span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: method = &quot;Bachet&quot; or &quot;Rubis&quot;  not &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">method</span><span class="p">)</span> </div>

                

<div class="viewcode-block" id="Digraph.showBachetChoiceRecommendation">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showBachetChoiceRecommendation">[docs]</a>
    <span class="k">def</span> <span class="nf">showBachetChoiceRecommendation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                       <span class="n">Polarised</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                       <span class="n">randomized</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                                       <span class="n">maxNbrOfRankings</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                                       <span class="n">seed</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                                       <span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                       <span class="c1">#ChoiceVector=False,</span>
                                       <span class="n">CoDual</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                       <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                       <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Shows a choice recommendation from the partial transitive Bachet ranking.</span>
<span class="sd">  </span>
<span class="sd">        Usage example:</span>
<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; from outrankingDigraphs import *</span>
<span class="sd">        &gt;&gt;&gt; t = Random3ObjectivesPerformanceTableau(seed=5)</span>
<span class="sd">        &gt;&gt;&gt; g = BipolarOutrankingDigraph(t)</span>
<span class="sd">        &gt;&gt;&gt; g.showBachetChoiceRecommendation(randomized=100,</span>
<span class="sd">        ...                                  maxNbrOfRankings=5,seed=1)</span>
<span class="sd">         *---- Bachet Choice Recommendations ----*</span>
<span class="sd">          Ranking by recursively first and last choosing</span>
<span class="sd">           1st ranked [&#39;p11&#39;, &#39;p19&#39;, &#39;p20&#39;]</span>
<span class="sd">            2nd ranked [&#39;p06&#39;, &#39;p13&#39;, &#39;p14&#39;]</span>
<span class="sd">              3rd ranked [&#39;p04&#39;, &#39;p05&#39;, &#39;p07&#39;, &#39;p18&#39;]</span>
<span class="sd">                4th ranked [&#39;p15&#39;]</span>
<span class="sd">                4th last ranked [&#39;p15&#39;]</span>
<span class="sd">              3rd last ranked [&#39;p08&#39;, &#39;p09&#39;, &#39;p10&#39;, &#39;p16&#39;]</span>
<span class="sd">            2nd last ranked [&#39;p01&#39;, &#39;p02&#39;, &#39;p12&#39;, &#39;p17&#39;]</span>
<span class="sd">          1st last ranked [&#39;p03&#39;]</span>
<span class="sd">         Quality of partial Bachet ranking</span>
<span class="sd">          Crisp ordinal correlation  : +0.954</span>
<span class="sd">          Epistemic determination    : +0.383</span>
<span class="sd">          Bipolar-valued equivalence : +0.365</span>
<span class="sd">         Execution time: 0.673 seconds</span>
<span class="sd">         *****************************</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">time</span>
        <span class="kn">from</span> <span class="nn">transitiveDigraphs</span> <span class="kn">import</span> <span class="n">PartialBachetRanking</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;All comments !!!&#39;</span><span class="p">)</span>
            <span class="n">Comments</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="n">n0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span>
        <span class="c1">#cpself = deepcopy(self)</span>
        <span class="c1">#if CoDual:</span>
        <span class="c1">#    g = ~(-cpself)</span>
        <span class="c1">#else:</span>
        <span class="c1">#    g = cpself</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">()</span>
        <span class="n">pbr</span> <span class="o">=</span> <span class="n">PartialBachetRanking</span><span class="p">(</span><span class="n">g</span><span class="p">,</span><span class="n">randomized</span><span class="o">=</span><span class="n">randomized</span><span class="p">,</span>
                                   <span class="n">Polarised</span><span class="o">=</span><span class="n">Polarised</span><span class="p">,</span>
                                   <span class="n">maxNbrOfRankings</span><span class="o">=</span><span class="n">maxNbrOfRankings</span><span class="p">,</span>
                                   <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">,</span>
                                   <span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pbr</span> <span class="o">=</span> <span class="n">pbr</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---- Bachet Choice Recommendations ----*&#39;</span><span class="p">)</span>
        <span class="n">pbr</span><span class="o">.</span><span class="n">showTransitiveDigraph</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Quality of partial Bachet ranking&#39;</span><span class="p">)</span>
        <span class="n">corr</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">computeOrdinalCorrelation</span><span class="p">(</span><span class="n">pbr</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; Crisp ordinal correlation  : </span><span class="si">%+.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">corr</span><span class="p">[</span><span class="s1">&#39;correlation&#39;</span><span class="p">])</span>          
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; Epistemic determination    : </span><span class="si">%+.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">corr</span><span class="p">[</span><span class="s1">&#39;determination&#39;</span><span class="p">])</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; Bipolar-valued equivalence : </span><span class="si">%+.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;correlation&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">corr</span><span class="p">[</span><span class="s1">&#39;determination&#39;</span><span class="p">])</span> <span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Execution time: </span><span class="si">%.3f</span><span class="s1"> seconds&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">t0</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*****************************&#39;</span><span class="p">)</span></div>


        
<span class="c1">#############</span>

    <span class="k">def</span> <span class="nf">showHTMLBestChoiceRecommendation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">pageTitle</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                      <span class="n">ChoiceVector</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                      <span class="n">CoDual</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                      <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                      <span class="n">_OldCoca</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                      <span class="n">BrokenCocs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                      <span class="c1">#Cpp=False,</span>
                                      <span class="n">htmlFileName</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                     <span class="p">):</span>

        <span class="kn">import</span> <span class="nn">webbrowser</span>
        <span class="k">if</span> <span class="n">htmlFileName</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">tempfile</span> <span class="kn">import</span> <span class="n">NamedTemporaryFile</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="p">(</span><span class="n">NamedTemporaryFile</span><span class="p">(</span><span class="n">suffix</span><span class="o">=</span><span class="s1">&#39;.html&#39;</span><span class="p">,</span><span class="n">delete</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="nb">dir</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">getcwd</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="n">getcwd</span><span class="p">()</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">htmlFileName</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_htmlBestChoiceRecommendation</span><span class="p">(</span>
            <span class="n">pageTitle</span><span class="o">=</span><span class="n">pageTitle</span><span class="p">,</span>
            <span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">,</span>
            <span class="n">CoDual</span><span class="o">=</span><span class="n">CoDual</span><span class="p">,</span>
            <span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">,</span>
            <span class="n">_OldCoca</span><span class="o">=</span><span class="n">_OldCoca</span><span class="p">,</span>
            <span class="n">BrokenCocs</span><span class="o">=</span><span class="n">BrokenCocs</span><span class="p">))</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;file://&#39;</span><span class="o">+</span><span class="n">fileName</span>
        <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">new</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_htmlBestChoiceRecommendation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">pageTitle</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                          <span class="n">ChoiceVector</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                          <span class="n">ContentCentered</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                          <span class="n">CoDual</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                          <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                          <span class="n">_OldCoca</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                          <span class="n">BrokenCocs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                          <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders a best choice recommendation in a browser window.</span>

<span class="sd">        .. note::</span>

<span class="sd">            Computes by default a best choice recommendation on the corresponding strict (codual) outranking digraph.</span>

<span class="sd">            In case of chordless circuits, if supporting arcs are more credible</span>
<span class="sd">            than the reversed negating arcs, we collapse the circuits into hyper nodes.</span>
<span class="sd">            Inversely,  if supporting arcs are not more credible than the reversed negating arcs,</span>
<span class="sd">            we brake the circuits on their weakest arc.</span>
<span class="sd">         </span>
<span class="sd">        Usage example:</span>
<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; from outrankingDigraphs import *</span>
<span class="sd">        &gt;&gt;&gt; t = Random3ObjectivesPerformanceTableau(seed=5)</span>
<span class="sd">        &gt;&gt;&gt; g = BipolarOutrankingDigraph(t)</span>
<span class="sd">        &gt;&gt;&gt; g.showHTMLBestChoiceRecommendation()</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">time</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="n">Comments</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Comments</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1"># construct html text</span>
        <span class="n">html</span>  <span class="o">=</span> <span class="s1">&#39;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;meta charset=&quot;UTF-8&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="n">pageTitle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">pageTitle</span> <span class="o">=</span> <span class="s1">&#39;Best Choice Recommendation&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;title&gt;</span><span class="si">%s</span><span class="s1">&lt;/title&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">pageTitle</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;style type=&quot;text/css&quot;&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="n">ContentCentered</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;td {text-align: center;}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;td.na {color: rgb(192,192,192);}</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/style&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/head&gt;</span><span class="se">\n</span><span class="s1">&lt;body&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h1&gt;</span><span class="si">%s</span><span class="s1">&lt;/h1&gt;&#39;</span> <span class="o">%</span> <span class="n">pageTitle</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h3&gt;Outranking digraph: </span><span class="si">%s</span><span class="s1">&lt;/h3&gt;&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
       
        <span class="c1">#print(&#39;RuBis BCR&#39;)</span>
        <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="n">n0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span>
        <span class="n">cpself</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">CoDual</span><span class="p">:</span>
            <span class="n">g</span> <span class="o">=</span> <span class="o">~</span><span class="p">(</span><span class="o">-</span><span class="n">cpself</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">g</span> <span class="o">=</span> <span class="n">cpself</span>
        <span class="k">if</span> <span class="n">_OldCoca</span><span class="p">:</span>
            <span class="n">_selfwcoc</span> <span class="o">=</span> <span class="n">CocaDigraph</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
            <span class="n">b1</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="n">BrokenCocs</span><span class="p">:</span>
            <span class="c1">#print(&#39;passed here!&#39;)</span>
            <span class="n">_selfwcoc</span> <span class="o">=</span> <span class="n">BrokenCocsDigraph</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
            <span class="n">b1</span> <span class="o">=</span> <span class="n">_selfwcoc</span><span class="o">.</span><span class="n">breakings</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_selfwcoc</span> <span class="o">=</span> <span class="n">BreakAddCocsDigraph</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
            <span class="n">b1</span> <span class="o">=</span>  <span class="n">_selfwcoc</span><span class="o">.</span><span class="n">breakings</span>
        <span class="n">n1</span> <span class="o">=</span> <span class="n">_selfwcoc</span><span class="o">.</span><span class="n">order</span>
        <span class="n">nc</span> <span class="o">=</span> <span class="n">n1</span> <span class="o">-</span> <span class="n">n0</span>
        
        <span class="c1">#self.relation_orig = deepcopy(g.relation)</span>
        <span class="k">if</span> <span class="n">b1</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">nc</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1">#self.actions_orig = deepcopy(g.actions)</span>
            <span class="n">g</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">_selfwcoc</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
            <span class="n">g</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
            <span class="n">g</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">_selfwcoc</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;List of pseudo-independent choices&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="n">g</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="n">g</span><span class="o">.</span><span class="n">showRelationTable</span><span class="p">()</span>
        <span class="c1">#self.showPreKernels()</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">actions</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="n">g</span><span class="o">.</span><span class="n">showPreKernels</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">dompreKernels</span><span class="p">,</span><span class="n">g</span><span class="o">.</span><span class="n">abspreKernels</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">computeGoodChoices</span><span class="p">(</span><span class="n">Comments</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">computeBadChoices</span><span class="p">(</span><span class="n">Comments</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;first and last choices: &#39;</span><span class="p">,</span><span class="n">g</span><span class="o">.</span><span class="n">goodChoices</span><span class="p">,</span><span class="n">g</span><span class="o">.</span><span class="n">badChoices</span><span class="p">)</span>

        <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Best choice recommendation(s) (BCR)&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; (in decreasing order of determinateness)   &#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Credibility domain: [</span><span class="si">%.2f</span><span class="s1">,</span><span class="si">%.2f</span><span class="s1">]&#39;</span> <span class="o">%</span>\
                  <span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">],</span>\
                   <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">])</span> <span class="p">)</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;p&gt;Best choice recommendation(s) (BCR)&lt;/br&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39; (in decreasing order of determinateness)&lt;/br&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;Credibility domain: [</span><span class="si">%.2f</span><span class="s1">,</span><span class="si">%.2f</span><span class="s1">]&lt;/p&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                  <span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">],</span>\
                   <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">])</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">bestChoice</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">worstChoice</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">gch</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">goodChoices</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">gch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">Med</span><span class="p">:</span>
                <span class="n">goodChoice</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">for</span> <span class="n">bch</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">badChoices</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">gch</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="n">bch</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span>
                        <span class="c1">#if gch[0] == bch[0]:</span>
                        <span class="k">if</span> <span class="n">gch</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="n">gch</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span>
                            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; === &gt;&gt; ambigous (first) choice &#39;</span><span class="p">)</span>
                                <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">gch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;good&#39;</span><span class="p">,</span>
                                                      <span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                                <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">bch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;bad&#39;</span><span class="p">,</span>
                                                      <span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h3&gt;Ambiguous (first) choice(s)&lt;/h3&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                            <span class="n">html</span> <span class="o">+=</span> <span class="n">g</span><span class="o">.</span><span class="n">htmlChoiceVector</span><span class="p">(</span><span class="n">gch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;good&#39;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                            <span class="n">goodChoice</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="k">if</span> <span class="n">bestChoice</span> <span class="o">==</span> <span class="nb">set</span><span class="p">():</span>
                                <span class="n">bestChoice</span> <span class="o">=</span> <span class="n">gch</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
                                <span class="n">bestChoiceData</span> <span class="o">=</span> <span class="n">gch</span>
                        <span class="k">elif</span> <span class="n">gch</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">gch</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
                            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; === &gt;&gt; outranked (first) choice &#39;</span><span class="p">)</span>
                                <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">gch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;good&#39;</span><span class="p">,</span>
                                                      <span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                                <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">bch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;bad&#39;</span><span class="p">,</span>
                                                      <span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h3&gt;Outranked (first) choice(s)&lt;/h3&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                            <span class="n">html</span> <span class="o">+=</span> <span class="n">g</span><span class="o">.</span><span class="n">htmlChoiceVector</span><span class="p">(</span><span class="n">gch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;good&#39;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                            <span class="n">goodChoice</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="k">if</span> <span class="n">bestChoice</span> <span class="o">==</span> <span class="nb">set</span><span class="p">():</span>
                                <span class="n">bestChoice</span> <span class="o">=</span> <span class="n">gch</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
                                <span class="n">bestChoiceData</span> <span class="o">=</span> <span class="n">gch</span>
                            <span class="n">goodChoice</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">goodChoice</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="n">goodChoice</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; === &gt;&gt; potential first choice(s)&#39;</span><span class="p">)</span>
                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h3&gt;Potential first choice(s)&lt;/h3&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    
                    <span class="n">html</span> <span class="o">+=</span> <span class="n">g</span><span class="o">.</span><span class="n">htmlChoiceVector</span><span class="p">(</span><span class="n">gch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;good&#39;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">bestChoice</span> <span class="o">==</span> <span class="nb">set</span><span class="p">():</span>
                        <span class="n">bestChoice</span> <span class="o">=</span> <span class="n">gch</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; === &gt;&gt; non robust first choice(s)&#39;</span><span class="p">)</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h3&gt;Non robust first choice(s)&lt;/h3&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="n">g</span><span class="o">.</span><span class="n">htmlChoiceVector</span><span class="p">(</span><span class="n">gch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;good&#39;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">bch</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">badChoices</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">bch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">Med</span><span class="p">:</span>
                <span class="n">badChoice</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">nullChoice</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">for</span> <span class="n">gch</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">goodChoices</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">bch</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="n">gch</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span>
                        <span class="c1">#if gch[0] == bch[0]:</span>
                        <span class="k">if</span> <span class="n">bch</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="n">bch</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span>
                            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; === &gt;&gt; ambiguous (last) choice &#39;</span><span class="p">)</span>
                                <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">gch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;good&#39;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                                <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">bch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;bad&#39;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h3&gt;Ambiguous (last) choice(s)&lt;/h3&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                            <span class="n">html</span> <span class="o">+=</span> <span class="n">g</span><span class="o">.</span><span class="n">htmlChoiceVector</span><span class="p">(</span><span class="n">bch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;bad&#39;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                            <span class="n">badChoice</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="n">nullChoice</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">elif</span> <span class="n">bch</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">bch</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span>
                            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; === &gt;&gt; outranking (last) choice &#39;</span><span class="p">)</span>
                                <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">gch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;good&#39;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                                <span class="n">g</span><span class="o">.</span><span class="n">showChoiceVector</span><span class="p">(</span><span class="n">bch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;bad&#39;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h3&gt;Outranking (last) choice(s)&lt;/h3&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                            <span class="n">html</span> <span class="o">+=</span> <span class="n">g</span><span class="o">.</span><span class="n">htmlChoiceVector</span><span class="p">(</span><span class="n">bch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;bad&#39;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                            <span class="n">badChoice</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">badChoice</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="n">badChoice</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; === &gt;&gt; potential worst choice(s) &#39;</span><span class="p">)</span>
                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h3&gt;Potential worst choice(s)&lt;/h3&gt;</span><span class="se">\n</span><span class="s1"> &#39;</span>
                    <span class="n">html</span> <span class="o">+=</span> <span class="n">g</span><span class="o">.</span><span class="n">htmlChoiceVector</span><span class="p">(</span><span class="n">bch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;bad&#39;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">worstChoice</span> <span class="o">==</span> <span class="nb">set</span><span class="p">():</span>
                        <span class="n">worstChoice</span> <span class="o">=</span> <span class="n">bch</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
                <span class="c1"># elif nullChoice:</span>
                <span class="c1">#     if Debug:</span>
                <span class="c1">#         print(&#39; === &gt;&gt; ambiguous choice(s)&#39;)</span>
                <span class="c1">#     html += &#39;&lt;h3&gt;Ambiguous choice(s)&lt;/h3&gt;\n&#39;</span>
                <span class="c1">#     html += g.htmlChoiceVector(bch,choiceType=&#39;bad&#39;,ChoiceVector=ChoiceVector)</span>
                <span class="c1">#     if worstChoice == set():</span>
                <span class="c1">#         worstChoice = bch[5]</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;=== &gt;&gt; non robust last choice(s)&#39;</span><span class="p">)</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h3&gt;Non robust lasst choice(s)&lt;/h3&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="n">html</span> <span class="o">+=</span> <span class="n">g</span><span class="o">.</span><span class="n">htmlChoiceVector</span><span class="p">(</span><span class="n">bch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s1">&#39;bad&#39;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="n">ChoiceVector</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Execution time: </span><span class="si">%.3f</span><span class="s1"> seconds&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">t1</span><span class="o">-</span><span class="n">t0</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*****************************&#39;</span><span class="p">)</span>

        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;p&gt;Execution time: </span><span class="si">%.3f</span><span class="s1"> seconds&lt;/p&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">t1</span><span class="o">-</span><span class="n">t0</span><span class="p">)</span>
        <span class="c1"># html footer</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/body&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/html&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">html</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">bestChoice</span> <span class="o">=</span> <span class="n">bestChoice</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worstChoice</span> <span class="o">=</span> <span class="n">worstChoice</span>
        <span class="c1">#if nc &gt; 0 or b1 &gt; 0:</span>
<span class="c1">##        self.actions = deepcopy(self.actions_orig)</span>
<span class="c1">##        self.relation = deepcopy(self.relation_orig)</span>
<span class="c1">##        self.order = len(self.actions)</span>
<span class="c1">##        self.gamma = self.gammaSets()</span>
<span class="c1">##        self.notGamma = self.notGammaSets()</span>


<div class="viewcode-block" id="Digraph.computeRubyChoice">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeRubyChoice">[docs]</a>
    <span class="k">def</span> <span class="nf">computeRubyChoice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">_OldCoca</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        dummy for computeRubisChoice()</span>
<span class="sd">        old versions compatibility.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">computeRubisChoice</span><span class="p">(</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">,</span><span class="n">_OldCoca</span><span class="o">=</span><span class="n">_OldCoca</span><span class="p">)</span></div>


<div class="viewcode-block" id="Digraph.computeRubisChoice">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeRubisChoice">[docs]</a>
    <span class="k">def</span> <span class="nf">computeRubisChoice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                           <span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">_OldCoca</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">BrokenCocs</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
                           <span class="c1">#Threading=False,nbrOfCPUs=1):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders self.strictGoodChoices, self.nullChoices</span>
<span class="sd">        self.strictBadChoices, self.nonRobustChoices.</span>

<span class="sd">        .. warning::</span>
<span class="sd">            Changes in site the outranking digraph by</span>
<span class="sd">            adding or braking chordless odd outranking circuits.</span>
<span class="sd">            </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#print(&#39;Passing here&#39;,_OldCoca)</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">time</span>
            <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="c1"># save original actions and relation</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions_orig</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions_orig</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions_orig</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="c1">#self.actions_orig = actions_orig</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation_orig</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        <span class="c1"># computing Coca</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*--- computing the COCA digraph --*&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_OldCoca</span><span class="p">:</span>
            <span class="n">_selfwcoc</span> <span class="o">=</span> <span class="n">CocaDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">breakings</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="n">BrokenCocs</span><span class="p">:</span>
            <span class="n">_selfwcoc</span> <span class="o">=</span> <span class="n">BrokenCocsDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>            
            <span class="bp">self</span><span class="o">.</span><span class="n">breakings</span> <span class="o">=</span> <span class="n">_selfwcoc</span><span class="o">.</span><span class="n">breakings</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_selfwcoc</span> <span class="o">=</span> <span class="n">BreakAddCocsDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">breakings</span> <span class="o">=</span> <span class="n">_selfwcoc</span><span class="o">.</span><span class="n">breakings</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Execution time: </span><span class="si">%.3f</span><span class="s1"> seconds&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">t0</span><span class="p">))</span>
            <span class="n">_selfwcoc</span><span class="o">.</span><span class="n">showPreKernels</span><span class="p">()</span>
        <span class="c1"># transferring coca actions and relation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">_selfwcoc</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">_selfwcoc</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="c1"># computing good and bad choices</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dompreKernels</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abspreKernels</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">independentChoices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">singletons</span><span class="p">()):</span>
            <span class="n">restactions</span> <span class="o">=</span> <span class="n">actions</span> <span class="o">-</span> <span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">restactions</span> <span class="o">&lt;=</span> <span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dompreKernels</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">restactions</span> <span class="o">&lt;=</span> <span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">abspreKernels</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">computeGoodChoices</span><span class="p">(</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">computeBadChoices</span><span class="p">(</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
        <span class="c1"># sorting out the strict choices</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">strictGoodChoices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nullChoices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">strictBadChoices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nonRobustChoices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">gch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">goodChoices</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">gch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">goodChoice</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">for</span> <span class="n">bch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">badChoices</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">gch</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="n">bch</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span>
                        <span class="k">if</span> <span class="n">gch</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="n">gch</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span>
                            <span class="n">goodChoice</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">nullChoices</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">gch</span><span class="p">[</span><span class="mi">5</span><span class="p">]))</span>
                        <span class="k">elif</span> <span class="n">gch</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">gch</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
                            <span class="n">goodChoice</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">strictBadChoices</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">bch</span><span class="p">[</span><span class="mi">5</span><span class="p">]))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">goodChoice</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">if</span> <span class="n">goodChoice</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">strictGoodChoices</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">gch</span><span class="p">[</span><span class="mi">5</span><span class="p">]))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">nonRobustChoices</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">gch</span><span class="p">[</span><span class="mi">5</span><span class="p">]))</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">showGoodChoices</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">showBadChoices</span><span class="p">()</span>
        <span class="c1">#n1 = _selfwcoc.order</span>
        <span class="c1">#nc = n1 - n0</span>
        <span class="c1">#if nc &gt; 0 or b1 &gt; 0:</span>
        <span class="c1">#self.actions = self.actions_orig</span>
        <span class="c1">#self.relation = self.relation_orig</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span></div>


    <span class="k">def</span> <span class="nf">_computeRubisChoice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">_OldCoca</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders self.strictGoodChoices, self.nullChoices</span>
<span class="sd">        self.strictBadChoices, self.nonRobustChoices.</span>

<span class="sd">        .. warning::</span>
<span class="sd">            Changes in site the outranking digraph by</span>
<span class="sd">            adding or braking chordless odd outranking circuits.</span>
<span class="sd">            </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#print(&#39;Passing here&#39;,_OldCoca)</span>
        <span class="kn">import</span> <span class="nn">copy</span><span class="o">,</span><span class="nn">time</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*--- computing the COCA digraph --*&#39;</span><span class="p">)</span>

        <span class="n">n0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span>
        <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">_selfwcoc</span> <span class="o">=</span> <span class="n">CocaDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
        <span class="c1">#b1 = _selfwcoc.brakings</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Execution time: </span><span class="si">%.3f</span><span class="s1"> seconds&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">t1</span><span class="o">-</span><span class="n">t0</span><span class="p">))</span>
            <span class="n">_selfwcoc</span><span class="o">.</span><span class="n">showPreKernels</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions_orig</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions_orig</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions_orig</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="c1">#self.actions_orig = actions_orig</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation_orig</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">_selfwcoc</span><span class="o">.</span><span class="n">actions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">_selfwcoc</span><span class="o">.</span><span class="n">relation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dompreKernels</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abspreKernels</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">independentChoices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">singletons</span><span class="p">()):</span>
            <span class="n">restactions</span> <span class="o">=</span> <span class="n">actions</span> <span class="o">-</span> <span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">restactions</span> <span class="o">&lt;=</span> <span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dompreKernels</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">restactions</span> <span class="o">&lt;=</span> <span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">abspreKernels</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">choice</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">computeGoodChoices</span><span class="p">(</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">computeBadChoices</span><span class="p">(</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">strictGoodChoices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nullChoices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">strictBadChoices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nonRobustChoices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">gch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">goodChoices</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">gch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">goodChoice</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">for</span> <span class="n">bch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">badChoices</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">gch</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="n">bch</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span>
                        <span class="k">if</span> <span class="n">gch</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="n">gch</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span>
                            <span class="n">goodChoice</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">nullChoices</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">gch</span><span class="p">[</span><span class="mi">5</span><span class="p">]))</span>
                        <span class="k">elif</span> <span class="n">gch</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">gch</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
                            <span class="n">goodChoice</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">strictBadChoices</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">bch</span><span class="p">[</span><span class="mi">5</span><span class="p">]))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">goodChoice</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">if</span> <span class="n">goodChoice</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">strictGoodChoices</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">gch</span><span class="p">[</span><span class="mi">5</span><span class="p">]))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">nonRobustChoices</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">gch</span><span class="p">[</span><span class="mi">5</span><span class="p">]))</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">showGoodChoices</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">showBadChoices</span><span class="p">()</span>
        <span class="c1">#n1 = _selfwcoc.order</span>
        <span class="c1">#nc = n1 - n0</span>
        <span class="c1">#if nc &gt; 0 or b1 &gt; 0:</span>
        <span class="c1">#self.actions = self.actions_orig</span>
        <span class="c1">#self.relation = self.relation_orig</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
    

<div class="viewcode-block" id="Digraph.computeGoodChoiceVector">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeGoodChoiceVector">[docs]</a>
    <span class="k">def</span> <span class="nf">computeGoodChoiceVector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ker</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        | Computing Characteristic values for dominant pre-kernels</span>
<span class="sd">        | using the von Neumann dual fixoint equation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">copy</span>
        <span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">temp</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]))</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">temp</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]))</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">temp</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]))</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">temp</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="c1">#actions.sort()</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">relation</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--&gt; kernel:&#39;</span><span class="p">,</span> <span class="n">ker</span><span class="p">)</span>
        <span class="n">choice</span> <span class="o">=</span> <span class="p">[</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ker</span><span class="p">]</span>
<span class="c1">##        degi = temp.intstab(ker)</span>
<span class="c1">##        dega = temp.absorb(ker)</span>
<span class="c1">##        degd = temp.domin(ker)</span>
<span class="c1">##        degirred = temp.domirredval(ker,relation)</span>
<span class="c1">##        degmd = min(degi,degd)</span>
<span class="c1">##        cover = temp.averageCoveringIndex(ker)</span>
        <span class="n">relation_k</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">domkernelrestrict</span><span class="p">(</span><span class="n">choice</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="c1">#vec1_a = array.array(&#39;f&#39;, [Max] * n)</span>
        <span class="n">vec1_a</span> <span class="o">=</span> <span class="p">[</span><span class="n">Max</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
        <span class="c1">#vec0_a = array.array(&#39;f&#39;, [Min] * n)</span>
        <span class="n">vec0_a</span> <span class="o">=</span> <span class="p">[</span><span class="n">Min</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
        <span class="n">mat</span> <span class="o">=</span> <span class="p">[</span><span class="n">temp</span><span class="o">.</span><span class="n">readdomvector</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">relation_k</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">]</span>
        <span class="n">veclowa</span> <span class="o">=</span> <span class="n">vec0_a</span>
        <span class="n">vechigha</span> <span class="o">=</span> <span class="n">vec1_a</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;initial low vector  :&#39;</span><span class="p">,</span><span class="n">veclowa</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;initial high vector :&#39;</span><span class="p">,</span> <span class="n">vechigha</span><span class="p">)</span>
        <span class="n">it</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">while</span> <span class="n">veclowa</span> <span class="o">!=</span> <span class="n">vechigha</span> <span class="ow">and</span> <span class="n">it</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="o">*</span><span class="n">n</span><span class="o">*</span><span class="n">n</span><span class="p">:</span>
            <span class="n">veclowb</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">matmult2</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span><span class="n">veclowa</span><span class="p">)</span>
            <span class="n">vechighb</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">matmult2</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span><span class="n">vechigha</span><span class="p">)</span>
            <span class="n">veclow</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">contra</span><span class="p">(</span><span class="n">vechighb</span><span class="p">)</span>
            <span class="n">vechigh</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">contra</span><span class="p">(</span><span class="n">veclowb</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">veclow</span> <span class="o">==</span> <span class="n">veclowa</span> <span class="ow">and</span> <span class="n">vechigh</span> <span class="o">==</span> <span class="n">vechigha</span> <span class="p">:</span> <span class="k">break</span>
            <span class="n">veclowa</span> <span class="o">=</span> <span class="n">veclow</span>
            <span class="n">vechigha</span> <span class="o">=</span> <span class="n">vechigh</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="s1">&#39;th low vector  :&#39;</span><span class="p">,</span><span class="n">veclowa</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="s1">&#39;th high vector :&#39;</span><span class="p">,</span><span class="n">vechigha</span><span class="p">)</span>
            <span class="n">it</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;final low vector  :&#39;</span><span class="p">,</span> <span class="n">veclowa</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;final high vector :&#39;</span><span class="p">,</span> <span class="n">vechigha</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;#iterations       :&#39;</span><span class="p">,</span> <span class="n">it</span><span class="p">)</span>
        <span class="n">domvec</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">sharpvec</span><span class="p">(</span><span class="n">veclowa</span><span class="p">,</span><span class="n">vechigha</span><span class="p">)</span>
        <span class="n">determ</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">determinateness</span><span class="p">(</span><span class="n">domvec</span><span class="p">)</span>
        <span class="n">goodChoiceVector</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">goodChoiceVector</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">domvec</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="nb">str</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">i</span><span class="p">])))</span>
        <span class="n">goodChoiceVector</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Choice vector for dominant pre-kernel: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">ker</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">goodChoiceVector</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">: </span><span class="si">%+.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">goodChoiceVector</span>        </div>


<div class="viewcode-block" id="Digraph.computeKernelVector">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeKernelVector">[docs]</a>
    <span class="k">def</span> <span class="nf">computeKernelVector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">kernel</span><span class="p">,</span><span class="n">Initial</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        | Computing Characteristic values for dominant pre-kernels</span>
<span class="sd">        | using the von Neumann dual fixpoint equation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">copy</span>
        <span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">temp</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]))</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">temp</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]))</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">temp</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]))</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">temp</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="c1">#actions.sort()</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">ker</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">kernel</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Initial</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--&gt; Initial kernel:&#39;</span><span class="p">,</span> <span class="n">ker</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--&gt; Terminal kernel:&#39;</span><span class="p">,</span> <span class="n">ker</span><span class="p">)</span>
        <span class="n">choice</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ker</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Initial</span><span class="p">:</span>
            <span class="n">relation_k</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">domkernelrestrict</span><span class="p">(</span><span class="n">choice</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">relation_k</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">abskernelrestrict</span><span class="p">(</span><span class="n">choice</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="c1">#vec1_a = array.array(&#39;f&#39;, [Max] * n)</span>
        <span class="n">vec1_a</span> <span class="o">=</span> <span class="p">[</span><span class="n">Max</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
        <span class="c1">#vec0_a = array.array(&#39;f&#39;, [Min] * n)</span>
        <span class="n">vec0_a</span> <span class="o">=</span> <span class="p">[</span><span class="n">Min</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
        <span class="k">if</span> <span class="n">Initial</span><span class="p">:</span>
            <span class="n">mat</span> <span class="o">=</span> <span class="p">[</span><span class="n">temp</span><span class="o">.</span><span class="n">readdomvector</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">relation_k</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mat</span> <span class="o">=</span> <span class="p">[</span><span class="n">temp</span><span class="o">.</span><span class="n">readabsvector</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">relation_k</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">]</span>
        <span class="n">veclowa</span> <span class="o">=</span> <span class="n">vec0_a</span>
        <span class="n">vechigha</span> <span class="o">=</span> <span class="n">vec1_a</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;initial low vector  :&#39;</span><span class="p">,</span><span class="n">veclowa</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;initial high vector :&#39;</span><span class="p">,</span> <span class="n">vechigha</span><span class="p">)</span>
        <span class="n">it</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">while</span> <span class="n">veclowa</span> <span class="o">!=</span> <span class="n">vechigha</span> <span class="ow">and</span> <span class="n">it</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="o">*</span><span class="n">n</span><span class="o">*</span><span class="n">n</span><span class="p">:</span>
            <span class="n">veclowb</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">matmult2</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span><span class="n">veclowa</span><span class="p">)</span>
            <span class="n">vechighb</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">matmult2</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span><span class="n">vechigha</span><span class="p">)</span>
            <span class="n">veclow</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">contra</span><span class="p">(</span><span class="n">vechighb</span><span class="p">)</span>
            <span class="n">vechigh</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">contra</span><span class="p">(</span><span class="n">veclowb</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">veclow</span> <span class="o">==</span> <span class="n">veclowa</span> <span class="ow">and</span> <span class="n">vechigh</span> <span class="o">==</span> <span class="n">vechigha</span> <span class="p">:</span> <span class="k">break</span>
            <span class="n">veclowa</span> <span class="o">=</span> <span class="n">veclow</span>
            <span class="n">vechigha</span> <span class="o">=</span> <span class="n">vechigh</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="s1">&#39;th low vector  :&#39;</span><span class="p">,</span><span class="n">veclowa</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="s1">&#39;th high vector :&#39;</span><span class="p">,</span><span class="n">vechigha</span><span class="p">)</span>
            <span class="n">it</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;final low vector  :&#39;</span><span class="p">,</span> <span class="n">veclowa</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;final high vector :&#39;</span><span class="p">,</span> <span class="n">vechigha</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;#iterations       :&#39;</span><span class="p">,</span> <span class="n">it</span><span class="p">)</span>
        <span class="n">domvec</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">sharpvec</span><span class="p">(</span><span class="n">veclowa</span><span class="p">,</span><span class="n">vechigha</span><span class="p">)</span>
        <span class="n">determ</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">determinateness</span><span class="p">(</span><span class="n">domvec</span><span class="p">)</span>
        <span class="n">choiceVector</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">choiceVector</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">domvec</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="nb">str</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">i</span><span class="p">])))</span>
        <span class="n">choiceVector</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Initial</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Choice vector for initial pre-kernel: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">ker</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Choice vector for terminal pre-kernel: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">ker</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">choiceVector</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">: </span><span class="si">%+.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">choiceVector</span>        </div>


                                
<div class="viewcode-block" id="Digraph.computeGoodChoices">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeGoodChoices">[docs]</a>
    <span class="k">def</span> <span class="nf">computeGoodChoices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes characteristic values for potentially good choices.</span>

<span class="sd">        ..note::</span>

<span class="sd">             Return a tuple with following content:</span>

<span class="sd">             [(0)-determ,(1)degirred,(2)degi,(3)degd,(4)dega,(5)str(choice),(6)domvec,(7)cover]</span>
<span class="sd">             </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">copy</span>
        <span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">temp</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]))</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">temp</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]))</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">temp</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]))</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">temp</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">domChoices</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="s1">&#39;dompreKernels&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">temp</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="n">temp</span><span class="o">.</span><span class="n">showPreKernels</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">temp</span><span class="o">.</span><span class="n">computePreKernels</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">ker</span> <span class="ow">in</span> <span class="n">temp</span><span class="o">.</span><span class="n">dompreKernels</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--&gt; kernel:&#39;</span><span class="p">,</span> <span class="n">ker</span><span class="p">)</span>
            <span class="n">choice</span> <span class="o">=</span> <span class="p">[</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ker</span><span class="p">]</span>
            <span class="c1">#choice.sort()</span>
            <span class="n">degi</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">intstab</span><span class="p">(</span><span class="n">ker</span><span class="p">)</span>
            <span class="n">dega</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">absorb</span><span class="p">(</span><span class="n">ker</span><span class="p">)</span>
            <span class="n">degd</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">domin</span><span class="p">(</span><span class="n">ker</span><span class="p">)</span>
            <span class="n">degirred</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">domirredval</span><span class="p">(</span><span class="n">ker</span><span class="p">,</span><span class="n">relation</span><span class="p">)</span>
            <span class="n">degmd</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">degi</span><span class="p">,</span><span class="n">degd</span><span class="p">)</span>
            <span class="n">cover</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">averageCoveringIndex</span><span class="p">(</span><span class="n">ker</span><span class="p">)</span>
            <span class="n">relation_k</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">domkernelrestrict</span><span class="p">(</span><span class="n">choice</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
            <span class="c1">#vec1_a = array.array(&#39;f&#39;, [Max] * n)</span>
            <span class="n">vec1_a</span> <span class="o">=</span> <span class="p">[</span><span class="n">Max</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
            <span class="c1">#vec0_a = array.array(&#39;f&#39;, [Min] * n)</span>
            <span class="n">vec0_a</span> <span class="o">=</span> <span class="p">[</span><span class="n">Min</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
            <span class="n">mat</span> <span class="o">=</span> <span class="p">[</span><span class="n">temp</span><span class="o">.</span><span class="n">readdomvector</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">relation_k</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">]</span>
            <span class="n">veclowa</span> <span class="o">=</span> <span class="n">vec0_a</span>
            <span class="n">vechigha</span> <span class="o">=</span> <span class="n">vec1_a</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;initial veclow&#39;</span><span class="p">,</span><span class="n">veclowa</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;initial vechigh&#39;</span><span class="p">,</span> <span class="n">vechigha</span><span class="p">)</span>
            <span class="n">it</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">while</span> <span class="n">veclowa</span> <span class="o">!=</span> <span class="n">vechigha</span> <span class="ow">and</span> <span class="n">it</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="o">*</span><span class="n">n</span><span class="o">*</span><span class="n">n</span><span class="p">:</span>
                <span class="n">veclowb</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">matmult2</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span><span class="n">veclowa</span><span class="p">)</span>
                <span class="n">vechighb</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">matmult2</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span><span class="n">vechigha</span><span class="p">)</span>
                <span class="n">veclow</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">contra</span><span class="p">(</span><span class="n">vechighb</span><span class="p">)</span>
                <span class="n">vechigh</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">contra</span><span class="p">(</span><span class="n">veclowb</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">veclow</span> <span class="o">==</span> <span class="n">veclowa</span> <span class="ow">and</span> <span class="n">vechigh</span> <span class="o">==</span> <span class="n">vechigha</span> <span class="p">:</span> <span class="k">break</span>
                <span class="n">veclowa</span> <span class="o">=</span> <span class="n">veclow</span>
                <span class="n">vechigha</span> <span class="o">=</span> <span class="n">vechigh</span>
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="s1">&#39;th veclow  :&#39;</span><span class="p">,</span><span class="n">veclowa</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="s1">&#39;th vechigh :&#39;</span><span class="p">,</span><span class="n">vechigha</span><span class="p">)</span>
                <span class="n">it</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;final veclow  :&#39;</span><span class="p">,</span> <span class="n">veclowa</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;final vechigh :&#39;</span><span class="p">,</span> <span class="n">vechigha</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;#iterations    :&#39;</span><span class="p">,</span> <span class="n">it</span><span class="p">)</span>
            <span class="c1">#domvec = temp.sharpvec(veclowa,vechigha)</span>
            <span class="n">domvecsharp</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">sharpvec</span><span class="p">(</span><span class="n">veclowa</span><span class="p">,</span><span class="n">vechigha</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;final result   ;&#39;</span><span class="p">,</span><span class="n">domvecsharp</span><span class="p">)</span>
            <span class="n">domvec</span> <span class="o">=</span> <span class="p">[(</span><span class="n">domvecsharp</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="nb">str</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
            <span class="n">domvec</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">determ</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">determinateness</span><span class="p">(</span><span class="n">domvec</span><span class="p">)</span>
            <span class="n">domChoices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">determ</span><span class="p">,</span><span class="n">degirred</span><span class="p">,</span><span class="n">degi</span><span class="p">,</span><span class="n">degd</span><span class="p">,</span><span class="o">-</span><span class="n">dega</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">choice</span><span class="p">),</span><span class="n">domvec</span><span class="p">,</span><span class="n">cover</span><span class="p">])</span>
        <span class="n">domChoicesSort</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">domChoices</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">goodChoicesDic</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">domChoicesSort</span><span class="p">:</span>
            <span class="n">ch</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">ch</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
            <span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
            <span class="n">goodChoicesDic</span><span class="p">[</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">])]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;determ&#39;</span><span class="p">:</span><span class="n">ch</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                    <span class="s1">&#39;degirred&#39;</span><span class="p">:</span><span class="n">ch</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                                    <span class="s1">&#39;degi&#39;</span><span class="p">:</span><span class="n">ch</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                                    <span class="s1">&#39;degd&#39;</span><span class="p">:</span><span class="n">ch</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
                                    <span class="s1">&#39;dega&#39;</span><span class="p">:</span><span class="n">ch</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
                                    <span class="s1">&#39;cover&#39;</span><span class="p">:</span><span class="n">ch</span><span class="p">[</span><span class="mi">7</span><span class="p">],</span>
                                    <span class="s1">&#39;bpv&#39;</span><span class="p">:</span><span class="n">ch</span><span class="p">[</span><span class="mi">6</span><span class="p">]}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">goodChoices</span> <span class="o">=</span> <span class="n">domChoicesSort</span>
        <span class="k">return</span> <span class="n">goodChoicesDic</span></div>


<div class="viewcode-block" id="Digraph.computeGoodPirlotChoices">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeGoodPirlotChoices">[docs]</a>
    <span class="k">def</span> <span class="nf">computeGoodPirlotChoices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Characteristic values for potentially good choices</span>
<span class="sd">        using the Pirlot fixpoint algorithm.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">domChoicesSort</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="s1">&#39;dompreKernels&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">computePreKernels</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">ker</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dompreKernels</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--&gt; kernel:&#39;</span><span class="p">,</span> <span class="n">ker</span><span class="p">)</span>
            <span class="n">choice</span> <span class="o">=</span> <span class="p">[</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ker</span><span class="p">]</span>
            <span class="c1">#choice.sort()</span>
            <span class="n">degi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">intstab</span><span class="p">(</span><span class="n">ker</span><span class="p">)</span>
            <span class="n">dega</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">absorb</span><span class="p">(</span><span class="n">ker</span><span class="p">)</span>
            <span class="n">degd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">domin</span><span class="p">(</span><span class="n">ker</span><span class="p">)</span>
            <span class="n">degirred</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">domirredval</span><span class="p">(</span><span class="n">ker</span><span class="p">,</span><span class="n">relation</span><span class="p">)</span>
            <span class="n">degmd</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">degi</span><span class="p">,</span><span class="n">degd</span><span class="p">)</span>
            <span class="c1">#vecmed = array.array(&#39;f&#39;, [Med] * n)</span>
            <span class="c1">#vecsol0 = array.array(&#39;f&#39;, [Min] * n)</span>
            <span class="n">vecmed</span> <span class="o">=</span> <span class="p">[</span><span class="n">Med</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
            <span class="n">vecsol0</span> <span class="o">=</span> <span class="p">[</span><span class="n">Min</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="ow">in</span> <span class="n">choice</span><span class="p">:</span>
                    <span class="n">vecsol0</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;initial solution&#39;</span><span class="p">,</span> <span class="n">vecsol0</span><span class="p">)</span>
            <span class="n">mat0</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">readdomvector</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">relation</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">]</span>
            <span class="n">mat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">irreflex</span><span class="p">(</span><span class="n">mat0</span><span class="p">)</span>
            <span class="n">vecsol</span> <span class="o">=</span> <span class="n">vecsol0</span>
            <span class="n">vecsolfin</span> <span class="o">=</span> <span class="n">vecmed</span>
            <span class="n">it</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">while</span> <span class="n">it</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="o">*</span><span class="n">n</span><span class="o">*</span><span class="n">n</span><span class="p">:</span>
                <span class="n">vecsolfin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matmult2</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span><span class="n">vecsol</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="s1">&#39;th vecsol  :&#39;</span><span class="p">,</span><span class="n">vecsol</span><span class="p">)</span>
                <span class="n">veccur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contra</span><span class="p">(</span><span class="n">vecsolfin</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">vecsol</span> <span class="o">==</span> <span class="n">veccur</span> <span class="p">:</span> <span class="k">break</span>
                <span class="n">vecsol</span> <span class="o">=</span> <span class="n">veccur</span>
                <span class="n">it</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Final Solution=&#39;</span><span class="p">,</span> <span class="n">vecsol</span><span class="p">)</span>
            <span class="n">determ</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determinateness</span><span class="p">(</span><span class="n">vecsol</span><span class="p">)</span>
            <span class="n">domChoicesSort</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="o">-</span><span class="n">determ</span><span class="p">,</span><span class="n">degirred</span><span class="p">,</span><span class="n">degi</span><span class="p">,</span><span class="n">degd</span><span class="p">,</span><span class="n">dega</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">choice</span><span class="p">),</span><span class="n">vecsol</span><span class="p">])</span>
        <span class="n">domChoicesSort</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">domChoicesSort</span><span class="p">:</span>
            <span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">goodChoices</span> <span class="o">=</span> <span class="n">domChoicesSort</span></div>



<div class="viewcode-block" id="Digraph.computeBadPirlotChoices">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeBadPirlotChoices">[docs]</a>
    <span class="k">def</span> <span class="nf">computeBadPirlotChoices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Characteristic values for potentially bad choices</span>
<span class="sd">        using the Pirlot&#39;s fixpoint algorithm.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">array</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">absChoicesSort</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="s1">&#39;abspreKernels&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">computePreKernels</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">ker</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">abspreKernels</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--&gt; kernel:&#39;</span><span class="p">,</span> <span class="n">ker</span><span class="p">)</span>
            <span class="n">choice</span> <span class="o">=</span> <span class="p">[</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ker</span><span class="p">]</span>
            <span class="c1">#choice.sort()</span>
            <span class="n">degi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">intstab</span><span class="p">(</span><span class="n">ker</span><span class="p">)</span>
            <span class="n">dega</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">absorb</span><span class="p">(</span><span class="n">ker</span><span class="p">)</span>
            <span class="n">degd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">domin</span><span class="p">(</span><span class="n">ker</span><span class="p">)</span>
            <span class="n">degirred</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">absirredval</span><span class="p">(</span><span class="n">ker</span><span class="p">,</span><span class="n">relation</span><span class="p">)</span>
            <span class="n">degmd</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">degi</span><span class="p">,</span><span class="n">degd</span><span class="p">)</span>
            <span class="c1">#vecmed = array.array(&#39;f&#39;, [Med] * n)</span>
            <span class="c1">#vecsol0 = array.array(&#39;f&#39;, [Min] * n)</span>
            <span class="n">vecmed</span> <span class="o">=</span> <span class="p">[</span><span class="n">Med</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
            <span class="n">vecsol0</span> <span class="o">=</span> <span class="p">[</span><span class="n">Min</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="ow">in</span> <span class="n">choice</span><span class="p">:</span>
                    <span class="n">vecsol0</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;initial solution&#39;</span><span class="p">,</span> <span class="n">vecsol0</span><span class="p">)</span>
            <span class="n">mat0</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">readabsvector</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">relation</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">]</span>
            <span class="n">mat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">irreflex</span><span class="p">(</span><span class="n">mat0</span><span class="p">)</span>
            <span class="n">vecsol</span> <span class="o">=</span> <span class="n">vecsol0</span>
            <span class="n">vecsolfin</span> <span class="o">=</span> <span class="n">vecmed</span>
            <span class="n">it</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">while</span> <span class="n">it</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="o">*</span><span class="n">n</span><span class="o">*</span><span class="n">n</span><span class="p">:</span>
                <span class="n">vecsolfin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matmult2</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span><span class="n">vecsol</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="s1">&#39;th vesol :&#39;</span><span class="p">,</span><span class="n">vecsol</span><span class="p">)</span>
                <span class="n">veccur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contra</span><span class="p">(</span><span class="n">vecsolfin</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">vecsol</span> <span class="o">==</span> <span class="n">veccur</span> <span class="p">:</span> <span class="k">break</span>
                <span class="n">vecsol</span> <span class="o">=</span> <span class="n">veccur</span>
                <span class="n">it</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Final Solution=&#39;</span><span class="p">,</span> <span class="n">vecsol</span><span class="p">)</span>
            <span class="n">determ</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determinateness</span><span class="p">(</span><span class="n">vecsol</span><span class="p">)</span>
            <span class="n">absChoicesSort</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="o">-</span><span class="n">determ</span><span class="p">,</span><span class="n">degirred</span><span class="p">,</span><span class="n">degi</span><span class="p">,</span><span class="n">degd</span><span class="p">,</span><span class="n">dega</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">choice</span><span class="p">),</span><span class="n">vecsol</span><span class="p">])</span>
        <span class="n">absChoicesSort</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">absChoicesSort</span><span class="p">:</span>
            <span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">badChoices</span> <span class="o">=</span> <span class="n">absChoicesSort</span></div>


<div class="viewcode-block" id="Digraph.determinateness">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.determinateness">[docs]</a>
    <span class="k">def</span> <span class="nf">determinateness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">vec</span><span class="p">,</span><span class="n">inPercent</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the determinateness of a characteristic vector *vec* = </span>
<span class="sd">        [(r(x),x),(r(y),y), ...] of length *n* in valuationdomain [Min,Med,Max]:</span>
<span class="sd">        </span>
<span class="sd">        *result* =  sum_x( abs(r(x)-Med) ) / ( n*(Max-Med) )</span>

<span class="sd">        If inPercent, *result* shifted (+1) and reduced (/2) to [0,1] range. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]))</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]))</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]))</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">Med</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-</span><span class="n">Med</span><span class="p">)</span>
            <span class="c1">#print result</span>
        <span class="n">result</span> <span class="o">/=</span> <span class="n">n</span><span class="o">*</span><span class="p">(</span><span class="n">Max</span><span class="o">-</span><span class="n">Med</span><span class="p">)</span>
        <span class="c1">#print result</span>
        <span class="k">if</span> <span class="n">inPercent</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">result</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">))</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2.0&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span><span class="o">*</span><span class="p">(</span><span class="n">Max</span><span class="o">-</span><span class="n">Med</span><span class="p">)</span></div>



<div class="viewcode-block" id="Digraph.computeBadChoices">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeBadChoices">[docs]</a>
    <span class="k">def</span> <span class="nf">computeBadChoices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes characteristic values for potentially bad choices.</span>

<span class="sd">        .. note::</span>

<span class="sd">             Returns a tuple with following content:</span>

<span class="sd">             [(0)-determ,(1)degirred,(2)degi,(3)degd,(4)dega,(5)str(choice),(6)absvec]</span>
<span class="sd">             </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">copy</span>
        <span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>

        <span class="n">temp</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">temp</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]))</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">temp</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]))</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">temp</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]))</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">temp</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">absChoices</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="s1">&#39;abspreKernels&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">temp</span><span class="p">):</span>
            <span class="n">temp</span><span class="o">.</span><span class="n">computePreKernels</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">ker</span> <span class="ow">in</span> <span class="n">temp</span><span class="o">.</span><span class="n">abspreKernels</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--&gt; kernel:&#39;</span><span class="p">,</span> <span class="n">ker</span><span class="p">)</span>
            <span class="n">choice</span> <span class="o">=</span> <span class="p">[</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ker</span><span class="p">]</span>
            <span class="c1">#choice.sort()</span>
            <span class="n">degi</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">intstab</span><span class="p">(</span><span class="n">ker</span><span class="p">)</span>
            <span class="n">dega</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">absorb</span><span class="p">(</span><span class="n">ker</span><span class="p">)</span>
            <span class="n">degd</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">domin</span><span class="p">(</span><span class="n">ker</span><span class="p">)</span>
            <span class="n">degirred</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">absirredval</span><span class="p">(</span><span class="n">ker</span><span class="p">,</span><span class="n">relation</span><span class="p">)</span>
            <span class="n">cover</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">averageCoveringIndex</span><span class="p">(</span><span class="n">ker</span><span class="p">,</span><span class="n">direction</span><span class="o">=</span><span class="s2">&quot;in&quot;</span><span class="p">)</span>
            <span class="n">relation_k</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">abskernelrestrict</span><span class="p">(</span><span class="n">choice</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
            <span class="c1">#vec1_a = array.array(&#39;f&#39;, [Max] * n)</span>
            <span class="c1">#vec0_a = array.array(&#39;f&#39;, [Min] * n)</span>
            <span class="n">vec1_a</span> <span class="o">=</span> <span class="p">[</span><span class="n">Max</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
            <span class="n">vec0_a</span> <span class="o">=</span> <span class="p">[</span><span class="n">Min</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
            <span class="n">mat</span> <span class="o">=</span> <span class="p">[</span><span class="n">temp</span><span class="o">.</span><span class="n">readabsvector</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">relation_k</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">]</span>
            <span class="n">veclowa</span> <span class="o">=</span> <span class="n">vec0_a</span>
            <span class="n">vechigha</span> <span class="o">=</span> <span class="n">vec1_a</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;initial veclowa&#39;</span><span class="p">,</span><span class="n">veclowa</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;initial vechigha&#39;</span><span class="p">,</span> <span class="n">vechigha</span><span class="p">)</span>
            <span class="n">it</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">while</span> <span class="n">veclowa</span> <span class="o">!=</span> <span class="n">vechigha</span> <span class="ow">and</span> <span class="n">it</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="o">*</span><span class="n">n</span><span class="o">*</span><span class="n">n</span><span class="p">:</span>
                <span class="n">veclowb</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">matmult2</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span><span class="n">veclowa</span><span class="p">)</span>
                <span class="n">vechighb</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">matmult2</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span><span class="n">vechigha</span><span class="p">)</span>
                <span class="n">veclow</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">contra</span><span class="p">(</span><span class="n">vechighb</span><span class="p">)</span>
                <span class="n">vechigh</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">contra</span><span class="p">(</span><span class="n">veclowb</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">veclow</span> <span class="o">==</span> <span class="n">veclowa</span> <span class="ow">and</span> <span class="n">vechigh</span> <span class="o">==</span> <span class="n">vechigha</span> <span class="p">:</span> <span class="k">break</span>
                <span class="n">veclowa</span> <span class="o">=</span> <span class="n">veclow</span>
                <span class="n">vechigha</span> <span class="o">=</span> <span class="n">vechigh</span>
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="s1">&#39;th veclowa  :&#39;</span><span class="p">,</span><span class="n">veclowa</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="s1">&#39;th vechigha :&#39;</span><span class="p">,</span><span class="n">vechigha</span><span class="p">)</span>
                <span class="n">it</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;final veclowa&#39;</span><span class="p">,</span><span class="n">veclowa</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;final vechigha&#39;</span><span class="p">,</span> <span class="n">vechigha</span><span class="p">)</span>
            <span class="n">absvecsharp</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">sharpvec</span><span class="p">(</span><span class="n">veclowa</span><span class="p">,</span><span class="n">vechigha</span><span class="p">)</span>
            <span class="n">absvec</span> <span class="o">=</span> <span class="p">[(</span><span class="n">absvecsharp</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="nb">str</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
            <span class="n">absvec</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">determ</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">determinateness</span><span class="p">(</span><span class="n">absvec</span><span class="p">)</span>
            <span class="n">absChoices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">determ</span><span class="p">,</span><span class="n">degirred</span><span class="p">,</span><span class="n">degi</span><span class="p">,</span><span class="o">-</span><span class="n">degd</span><span class="p">,</span><span class="n">dega</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">choice</span><span class="p">),</span><span class="n">absvec</span><span class="p">,</span><span class="n">cover</span><span class="p">])</span>
        <span class="n">absChoicesSort</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">absChoices</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="c1">#absChoicesSort.sort()</span>
        <span class="c1">## absChoicesSort.sort(reverse=True, key=itemgetter(7))</span>
        <span class="c1">## for ch in absChoicesSort:</span>
        <span class="c1">##     ch[5] = eval(ch[5])</span>
        <span class="c1">## self.badChoices = absChoicesSort</span>
        <span class="n">badChoicesDic</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">absChoicesSort</span><span class="p">:</span>
            <span class="n">ch</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">ch</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
            <span class="n">badChoicesDic</span><span class="p">[</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">])]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;determ&#39;</span><span class="p">:</span><span class="n">ch</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                    <span class="s1">&#39;degirred&#39;</span><span class="p">:</span><span class="n">ch</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                                    <span class="s1">&#39;degi&#39;</span><span class="p">:</span><span class="n">ch</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                                    <span class="s1">&#39;degd&#39;</span><span class="p">:</span><span class="n">ch</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
                                    <span class="s1">&#39;dega&#39;</span><span class="p">:</span><span class="n">ch</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
                                    <span class="s1">&#39;cover&#39;</span><span class="p">:</span><span class="n">ch</span><span class="p">[</span><span class="mi">7</span><span class="p">],</span>
                                    <span class="s1">&#39;bpv&#39;</span><span class="p">:</span><span class="n">ch</span><span class="p">[</span><span class="mi">6</span><span class="p">]}</span>
            
        <span class="bp">self</span><span class="o">.</span><span class="n">badChoices</span> <span class="o">=</span> <span class="n">absChoicesSort</span>
        
        <span class="k">return</span> <span class="n">badChoicesDic</span></div>


<div class="viewcode-block" id="Digraph.htmlChoiceVector">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.htmlChoiceVector">[docs]</a>
    <span class="k">def</span> <span class="nf">htmlChoiceVector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ch</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s2">&quot;good&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show procedure for annotated bipolar choices.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">digraphsTools</span> <span class="kn">import</span> <span class="n">flatten</span>
        <span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">determ</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">degirred</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">degi</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">degd</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">dega</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="n">choice</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">flatten</span><span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">])]</span>
        <span class="n">choice</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">vec</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
        <span class="n">vec</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="n">html</span>  <span class="o">=</span> <span class="s1">&#39;&lt;p&gt;Choice              : &lt;b&gt;</span><span class="si">%s</span><span class="s1">&lt;/b&gt;&lt;br/&gt;</span><span class="se">\n</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">choice</span><span class="p">)</span>
        <span class="c1">#html += &#39;  +-irredundancy      : %.2f&lt;br/&gt;\n&#39; % (degirred)</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;  independence        : </span><span class="si">%.2f</span><span class="s1">&lt;br/&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">degi</span><span class="p">)</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;  dominance           : </span><span class="si">%.2f</span><span class="s1">&lt;br/&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">degd</span><span class="p">)</span>
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;  absorbency          : </span><span class="si">%.2f</span><span class="s1">&lt;br/&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dega</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">choiceType</span> <span class="o">==</span> <span class="s2">&quot;good&quot;</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;  covering (</span><span class="si">%%</span><span class="s1">): </span><span class="si">%.2f</span><span class="s1">&lt;br/&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">averageCoveringIndex</span><span class="p">(</span><span class="n">choice</span><span class="p">,</span><span class="n">direction</span><span class="o">=</span><span class="s1">&#39;out&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100&#39;</span><span class="p">)</span> <span class="p">)</span>
        <span class="k">elif</span> <span class="n">choiceType</span> <span class="o">==</span> <span class="s2">&quot;bad&quot;</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;  covered (</span><span class="si">%%</span><span class="s1">) : </span><span class="si">%.2f</span><span class="s1">&lt;br/&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">averageCoveringIndex</span><span class="p">(</span><span class="n">choice</span><span class="p">,</span><span class="n">direction</span><span class="o">=</span><span class="s1">&#39;in&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100&#39;</span><span class="p">)</span> <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;  covering (</span><span class="si">%%</span><span class="s1">): </span><span class="si">%.2f</span><span class="s1">&lt;br/&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>\
                <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">averageCoveringIndex</span><span class="p">(</span><span class="n">choice</span><span class="p">)</span> <span class="o">*</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100&#39;</span><span class="p">)</span> <span class="p">)</span>            
            
        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;  determinateness (in </span><span class="si">%%</span><span class="s1">) : </span><span class="si">%.2f</span><span class="s1">&lt;/p&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">determ</span><span class="o">*</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">ChoiceVector</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;&lt;p&gt;  - characteristic vector = {</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">choice</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">eval</span><span class="p">(</span><span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">])]</span>
                    <span class="n">choice</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\&#39;</span><span class="si">%s</span><span class="se">\&#39;</span><span class="s1">: </span><span class="si">%.2f</span><span class="s1">,</span><span class="se">\n</span><span class="s1"> &#39;</span> <span class="o">%</span>  <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">choice</span><span class="p">),</span><span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\&#39;</span><span class="si">%s</span><span class="se">\&#39;</span><span class="s1">: </span><span class="si">%.2f</span><span class="s1">,</span><span class="se">\n</span><span class="s1"> &#39;</span> <span class="o">%</span>  <span class="p">(</span><span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">html</span> <span class="o">+=</span><span class="s1">&#39;}&lt;/p&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
<span class="c1">##        elif determ &gt; Decimal(&#39;0&#39;):</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;  - most credible action(s) = {</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">choice</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">eval</span><span class="p">(</span><span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">])]</span>
                        <span class="n">choice</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
                        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\&#39;</span><span class="si">%s</span><span class="se">\&#39;</span><span class="s1">: </span><span class="si">%.2f</span><span class="s1">,</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>  <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">choice</span><span class="p">),</span><span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\&#39;</span><span class="si">%s</span><span class="se">\&#39;</span><span class="s1">: </span><span class="si">%.2f</span><span class="s1">,</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span>  <span class="p">(</span><span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">html</span> <span class="o">+=</span> <span class="s1">&#39;}&lt;/p&gt;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">return</span> <span class="n">html</span></div>


<div class="viewcode-block" id="Digraph.showChoiceVector">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showChoiceVector">[docs]</a>
    <span class="k">def</span> <span class="nf">showChoiceVector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ch</span><span class="p">,</span><span class="n">choiceType</span><span class="o">=</span><span class="s2">&quot;good&quot;</span><span class="p">,</span><span class="n">ChoiceVector</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show procedure for annotated bipolar choices.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">digraphsTools</span> <span class="kn">import</span> <span class="n">flatten</span>
        <span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">determ</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">degirred</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">degi</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">degd</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">dega</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="n">choice</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">flatten</span><span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">])]</span>
        <span class="n">choice</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">vec</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
        <span class="n">vec</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* choice              : &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">choice</span><span class="p">))</span>
        <span class="c1">#print(&#39;  +-irredundancy      : %.2f&#39; % (degirred))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  independence        : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">degi</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  dominance           : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">degd</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  absorbency          : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dega</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">choiceType</span> <span class="o">==</span> <span class="s2">&quot;good&quot;</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  covering (%)&#39;</span> <span class="o">+</span> <span class="s1">&#39;        : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                  <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">averageCoveringIndex</span><span class="p">(</span><span class="n">choice</span><span class="p">,</span><span class="n">direction</span><span class="o">=</span><span class="s1">&#39;out&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100&#39;</span><span class="p">)</span> <span class="p">))</span>
        <span class="k">elif</span> <span class="n">choiceType</span> <span class="o">==</span> <span class="s2">&quot;bad&quot;</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  covered (%) &#39;</span> <span class="o">+</span> <span class="s1">&#39;        : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                  <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">averageCoveringIndex</span><span class="p">(</span><span class="n">choice</span><span class="p">,</span><span class="n">direction</span><span class="o">=</span><span class="s1">&#39;in&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100&#39;</span><span class="p">)</span> <span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  covering (%)&#39;</span> <span class="o">+</span> <span class="s1">&#39;        : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span>\
                  <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">averageCoveringIndex</span><span class="p">(</span><span class="n">choice</span><span class="p">)</span> <span class="o">*</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100&#39;</span><span class="p">)</span> <span class="p">))</span>
            
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  determinateness (%)&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;: </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">determ</span><span class="o">*</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;100.0&#39;</span><span class="p">)))</span>
        <span class="k">if</span> <span class="n">ChoiceVector</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  - characteristic vector = {&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)):</span>
                <span class="c1">#print(&#39;\&#39;%s\&#39;: %.2f,&#39; %  (str(actions[i]),vec[i]), end=&#39; &#39;)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">choice</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">eval</span><span class="p">(</span><span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">])]</span>
                    <span class="n">choice</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="si">%s</span><span class="se">\&#39;</span><span class="s1">: </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span>  <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">choice</span><span class="p">),</span><span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="si">%s</span><span class="se">\&#39;</span><span class="s1">: </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span>  <span class="p">(</span><span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
                
                <span class="c1">#print(&#39;\&#39;%s\&#39;: %.2f,&#39; %  (vec[i][1],vec[i][0]), end=&#39; &#39;)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;}&#39;</span><span class="p">)</span>
<span class="c1">##        elif determ &gt; Decimal(&#39;0&#39;):</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  - most credible action(s) = {&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Med</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">choice</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">eval</span><span class="p">(</span><span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">])]</span>
                        <span class="n">choice</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="si">%s</span><span class="se">\&#39;</span><span class="s1">: </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span>  <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">choice</span><span class="p">),</span><span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="si">%s</span><span class="se">\&#39;</span><span class="s1">: </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span>  <span class="p">(</span><span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span><span class="n">vec</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;}&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">()</span></div>


<div class="viewcode-block" id="Digraph.showGoodChoices">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showGoodChoices">[docs]</a>
    <span class="k">def</span> <span class="nf">showGoodChoices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Recompute</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Characteristic values for potentially good choices.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">array</span><span class="o">,</span><span class="nn">copy</span>
        <span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="n">Max</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">temp</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">relation</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*** Potentially good choices ***&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;    valuationdomain&#39;</span><span class="p">,</span> <span class="n">temp</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
        <span class="n">domChoices</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="s1">&#39;dompreKernels&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span> <span class="ow">or</span> <span class="n">Recompute</span><span class="p">:</span>
            <span class="n">temp</span><span class="o">.</span><span class="n">computePreKernels</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">ker</span> <span class="ow">in</span> <span class="n">temp</span><span class="o">.</span><span class="n">dompreKernels</span><span class="p">:</span>
            <span class="n">choice</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ker</span><span class="p">]</span>
            <span class="n">choice</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="n">degi</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">intstab</span><span class="p">(</span><span class="n">ker</span><span class="p">)</span>
            <span class="n">dega</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">absorb</span><span class="p">(</span><span class="n">ker</span><span class="p">)</span>
            <span class="n">degd</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">domin</span><span class="p">(</span><span class="n">ker</span><span class="p">)</span>
            <span class="n">degirred</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">domirredval</span><span class="p">(</span><span class="n">ker</span><span class="p">,</span><span class="n">relation</span><span class="p">)</span>
            <span class="n">degmd</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">degi</span><span class="p">,</span><span class="n">degd</span><span class="p">)</span>
            <span class="n">cover</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">averageCoveringIndex</span><span class="p">(</span><span class="n">ker</span><span class="p">,</span><span class="n">direction</span><span class="o">=</span><span class="s2">&quot;out&quot;</span><span class="p">)</span>
            <span class="n">domChoices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">degmd</span><span class="p">,</span><span class="n">degirred</span><span class="p">,</span><span class="n">degi</span><span class="p">,</span><span class="n">degd</span><span class="p">,</span><span class="o">-</span><span class="n">dega</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">choice</span><span class="p">),</span><span class="n">cover</span><span class="p">])</span>
        <span class="n">domChoicesSort</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">domChoices</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;domChoicesSort&#39;</span><span class="p">,</span> <span class="n">domChoicesSort</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">domChoicesSort</span><span class="p">:</span>
            <span class="n">choice</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
            <span class="n">degirred</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">degi</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">degd</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="n">dega</span> <span class="o">=</span> <span class="o">-</span><span class="n">ch</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* choice           : &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">choice</span><span class="p">))</span>
            <span class="c1">#print(&#39;  +irredundance    : %.2f&#39; % (degirred))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  independence     : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">degi</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  dominance        : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">degd</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  absorbency       : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dega</span><span class="p">))</span>
            <span class="n">relation_k</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">domkernelrestrict</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">choice</span><span class="p">))</span>
            <span class="n">vec1_a</span> <span class="o">=</span> <span class="p">[</span><span class="n">Max</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
            <span class="n">vec0_a</span> <span class="o">=</span> <span class="p">[</span><span class="n">Min</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
            <span class="n">mat</span> <span class="o">=</span> <span class="p">[</span><span class="n">temp</span><span class="o">.</span><span class="n">readdomvector</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">relation_k</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">]</span>
            <span class="n">veclowa</span> <span class="o">=</span> <span class="n">vec0_a</span>
            <span class="n">vechigha</span> <span class="o">=</span> <span class="n">vec1_a</span>
            <span class="n">it</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">while</span> <span class="n">veclowa</span> <span class="o">!=</span> <span class="n">vechigha</span> <span class="ow">and</span> <span class="n">it</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="o">*</span><span class="n">n</span><span class="o">*</span><span class="n">n</span><span class="p">:</span>
                <span class="n">veclowb</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">matmult2</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span><span class="n">veclowa</span><span class="p">)</span>
                <span class="n">vechighb</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">matmult2</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span><span class="n">vechigha</span><span class="p">)</span>
                <span class="n">veclow</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">contra</span><span class="p">(</span><span class="n">vechighb</span><span class="p">)</span>
                <span class="n">vechigh</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">contra</span><span class="p">(</span><span class="n">veclowb</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">veclow</span> <span class="o">==</span> <span class="n">veclowa</span> <span class="ow">and</span> <span class="n">vechigh</span> <span class="o">==</span> <span class="n">vechigha</span> <span class="p">:</span> <span class="k">break</span>
                <span class="n">veclowa</span> <span class="o">=</span> <span class="n">veclow</span>
                <span class="n">vechigha</span> <span class="o">=</span> <span class="n">vechigh</span>
                <span class="n">it</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  + characteristic vector = [&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="n">bestvec</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">sharpvec</span><span class="p">(</span><span class="n">veclowa</span><span class="p">,</span><span class="n">vechigha</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">: &#39;</span><span class="p">,</span><span class="n">bestvec</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">()</span></div>


<div class="viewcode-block" id="Digraph.irreflex">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.irreflex">[docs]</a>
    <span class="k">def</span> <span class="nf">irreflex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">mat</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Puts diagonal entries of mat to valuationdomain[&#39;min&#39;]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">mat</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
        <span class="k">return</span> <span class="n">mat</span></div>


<div class="viewcode-block" id="Digraph.showBadChoices">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showBadChoices">[docs]</a>
    <span class="k">def</span> <span class="nf">showBadChoices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Recompute</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Characteristic values for potentially bad choices.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">copy</span>
        <span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="n">Max</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">temp</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="c1">#actions.sort()</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">relation</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*** Potentially bad choices ***&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;    valuationdomain&#39;</span><span class="p">,</span> <span class="n">temp</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
        <span class="n">absChoices</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="s1">&#39;abspreKernels&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span> <span class="ow">or</span> <span class="n">Recompute</span><span class="p">:</span>
            <span class="n">temp</span><span class="o">.</span><span class="n">computePreKernels</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">ker</span> <span class="ow">in</span> <span class="n">temp</span><span class="o">.</span><span class="n">abspreKernels</span><span class="p">:</span>
            <span class="n">choice</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ker</span><span class="p">]</span>
            <span class="n">choice</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="n">degi</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">intstab</span><span class="p">(</span><span class="n">ker</span><span class="p">)</span>
            <span class="n">dega</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">absorb</span><span class="p">(</span><span class="n">ker</span><span class="p">)</span>
            <span class="n">degd</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">domin</span><span class="p">(</span><span class="n">ker</span><span class="p">)</span>
            <span class="n">degirred</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">absirredval</span><span class="p">(</span><span class="n">ker</span><span class="p">,</span><span class="n">relation</span><span class="p">)</span>
            <span class="n">degmd</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">degi</span><span class="p">,</span><span class="n">dega</span><span class="p">)</span>
            <span class="n">cover</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">averageCoveringIndex</span><span class="p">(</span><span class="n">ker</span><span class="p">,</span><span class="n">direction</span><span class="o">=</span><span class="s2">&quot;in&quot;</span><span class="p">)</span>
            <span class="n">absChoices</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">degmd</span><span class="p">,</span><span class="n">degirred</span><span class="p">,</span><span class="n">degi</span><span class="p">,</span><span class="o">-</span><span class="n">degd</span><span class="p">,</span><span class="n">dega</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">choice</span><span class="p">),</span><span class="n">cover</span><span class="p">))</span>
        <span class="n">absChoicesSort</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">absChoices</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;absChoicesSort&#39;</span><span class="p">,</span> <span class="n">absChoicesSort</span><span class="p">)</span>
        <span class="n">absChoicesSort</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">absChoicesSort</span><span class="p">:</span>
            <span class="n">choice</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
            <span class="n">degirred</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">degi</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">degd</span> <span class="o">=</span> <span class="o">-</span><span class="n">ch</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="n">dega</span> <span class="o">=</span> <span class="n">ch</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* choice           : &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">choice</span><span class="p">))</span>
            <span class="c1">#print(&#39;  -irredundance    : %.2f&#39; % (degirred))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  independence     : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">degi</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  dominance        : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">degd</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  absorbency       : </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">dega</span><span class="p">))</span>
            <span class="n">relation_k</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">abskernelrestrict</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">choice</span><span class="p">))</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
            <span class="n">vec1_a</span> <span class="o">=</span> <span class="p">[</span><span class="n">Max</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
            <span class="n">vec0_a</span> <span class="o">=</span> <span class="p">[</span><span class="n">Min</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
            <span class="n">mat</span> <span class="o">=</span> <span class="p">[</span><span class="n">temp</span><span class="o">.</span><span class="n">readabsvector</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">relation_k</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">]</span>
            <span class="n">veclowa</span> <span class="o">=</span> <span class="n">vec0_a</span>
            <span class="n">vechigha</span> <span class="o">=</span> <span class="n">vec1_a</span>
            <span class="n">it</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">while</span> <span class="n">veclowa</span> <span class="o">!=</span> <span class="n">vechigha</span> <span class="ow">and</span> <span class="n">it</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="o">*</span><span class="n">n</span><span class="o">*</span><span class="n">n</span><span class="p">:</span>
                <span class="n">veclowb</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">matmult2</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span><span class="n">veclowa</span><span class="p">)</span>
                <span class="n">vechighb</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">matmult2</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span><span class="n">vechigha</span><span class="p">)</span>
                <span class="n">veclow</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">contra</span><span class="p">(</span><span class="n">vechighb</span><span class="p">)</span>
                <span class="n">vechigh</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">contra</span><span class="p">(</span><span class="n">veclowb</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">veclow</span> <span class="o">==</span> <span class="n">veclowa</span> <span class="ow">and</span> <span class="n">vechigh</span> <span class="o">==</span> <span class="n">vechigha</span> <span class="p">:</span> <span class="k">break</span>
                <span class="n">veclowa</span> <span class="o">=</span> <span class="n">veclow</span>
                <span class="n">vechigha</span> <span class="o">=</span> <span class="n">vechigh</span>
                <span class="n">it</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  - characteristic vector = [&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="n">bestvec</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">sharpvec</span><span class="p">(</span><span class="n">veclowa</span><span class="p">,</span><span class="n">vechigha</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">: &#39;</span><span class="p">,</span><span class="n">bestvec</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">()</span></div>


<div class="viewcode-block" id="Digraph.showMIS_AH">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showMIS_AH">[docs]</a>
    <span class="k">def</span> <span class="nf">showMIS_AH</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">withListing</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prints all MIS using the Hertz method.</span>

<span class="sd">        Result saved in self.hertzmisset.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span><span class="nn">random</span><span class="o">,</span><span class="nn">copy</span><span class="o">,</span><span class="nn">time</span>
        <span class="n">relationBackup</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">V</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">V</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">V</span><span class="p">:</span>
                <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
        <span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="c1"># MIS extraction</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*-----------------------------------*&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;* Python implementation of Hertz&#39;s  *&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* algorithm for generating all MIS  *&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* R.B. version 7(6)-25-Apr-06       *&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*-----------------------------------*&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---- MIS extraction ----&#39;</span><span class="p">)</span>
        <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="c1"># initialize MIS extraction</span>
        <span class="n">hertzmisset</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>  <span class="c1"># global MIS collector set to empty</span>
        <span class="c1"># compute inital MIS</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">V</span><span class="p">)</span>
        <span class="n">S</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span> <span class="c1"># initial MIS</span>
        <span class="n">gammaS</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span> <span class="c1"># initial MIS neighborhood</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">S</span> <span class="o">|</span> <span class="n">gammaS</span><span class="p">)</span> <span class="o">!=</span> <span class="n">V</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">V</span><span class="o">-</span><span class="n">S</span><span class="o">-</span><span class="n">gammaS</span><span class="p">))</span>
            <span class="n">S</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">gammaS</span> <span class="o">=</span> <span class="n">gammaS</span> <span class="o">|</span> <span class="n">gamma</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">withListing</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;===&gt;&gt;&gt; Initial solution : &#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">S</span><span class="p">))</span>
        <span class="n">hertzmisset</span> <span class="o">=</span> <span class="n">hertzmisset</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">S</span><span class="p">)])</span>
        <span class="c1"># initialize all variables</span>
        <span class="n">R</span> <span class="o">=</span> <span class="n">V</span> <span class="o">-</span> <span class="n">S</span>
        <span class="n">ns</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">S</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">P</span>  <span class="o">=</span> <span class="p">[</span><span class="nb">set</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
        <span class="n">M</span>  <span class="o">=</span> <span class="p">[</span><span class="nb">set</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
        <span class="n">NR</span> <span class="o">=</span> <span class="p">[</span><span class="nb">set</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
        <span class="n">Q</span>  <span class="o">=</span> <span class="p">[</span><span class="nb">set</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
        <span class="n">v</span>  <span class="o">=</span> <span class="p">[</span><span class="mi">0</span>     <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
        <span class="n">NON_R</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">OUI_R</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">NON_S</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">OUI_S</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">hist</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># core of the algorithm</span>
        <span class="k">while</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">hist</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="c1"># Part 1</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">NON_R</span> <span class="k">if</span> <span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">OUI_R</span> <span class="o">|</span> <span class="n">OUI_S</span><span class="p">)</span> <span class="o">==</span> <span class="nb">set</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">NON_R</span> <span class="o">-</span> <span class="n">NON_S</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]:</span>
                <span class="n">sr</span> <span class="o">=</span> <span class="n">gamma</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">NON_R</span><span class="o">-</span><span class="n">NON_S</span>
                <span class="k">if</span> <span class="n">sr</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">sr</span> <span class="o">&lt;</span> <span class="n">R</span><span class="p">:</span>
                        <span class="n">P</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">P</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">|</span> <span class="n">sr</span>
                        <span class="n">OUI_R</span> <span class="o">=</span> <span class="n">OUI_R</span> <span class="o">|</span> <span class="n">sr</span>
                        <span class="n">r</span> <span class="o">=</span> <span class="n">sr</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
                        <span class="n">NR</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">NR</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">|</span> <span class="p">(</span><span class="n">gamma</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">R</span><span class="o">-</span><span class="n">NON_R</span><span class="p">))</span>
                        <span class="n">NON_R</span> <span class="o">=</span> <span class="n">NON_R</span> <span class="o">|</span> <span class="p">(</span><span class="n">gamma</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">R</span><span class="p">)</span>
                        <span class="n">M</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">M</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">|</span> <span class="p">(</span><span class="n">gamma</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">S</span><span class="o">-</span><span class="n">NON_S</span><span class="p">))</span>
                        <span class="n">NON_S</span> <span class="o">=</span> <span class="n">NON_S</span> <span class="o">|</span> <span class="p">(</span><span class="n">gamma</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">S</span><span class="p">)</span>
                        <span class="n">test</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="k">for</span> <span class="n">vr</span> <span class="ow">in</span> <span class="p">(</span><span class="n">R</span> <span class="o">-</span> <span class="n">OUI_R</span><span class="p">):</span>
                            <span class="k">if</span> <span class="n">gamma</span><span class="p">[</span><span class="n">vr</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;</span> <span class="p">((</span><span class="n">S</span> <span class="o">-</span> <span class="n">NON_S</span><span class="p">)</span> <span class="o">|</span> <span class="n">OUI_R</span><span class="p">)</span> <span class="o">==</span> <span class="nb">set</span><span class="p">():</span>
                                <span class="n">test</span> <span class="o">=</span> <span class="kc">False</span>
                                <span class="k">break</span>
                        <span class="k">if</span> <span class="n">test</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                            <span class="n">hertzmisset</span> <span class="o">=</span> <span class="n">hertzmisset</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">((</span><span class="n">S</span> <span class="o">-</span> <span class="n">NON_S</span><span class="p">)</span> <span class="o">|</span> <span class="n">OUI_R</span><span class="p">)])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">Q</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">Q</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">|</span> <span class="n">sr</span>
                        <span class="n">OUI_S</span> <span class="o">=</span> <span class="n">OUI_S</span> <span class="o">|</span> <span class="n">sr</span>
                        <span class="n">r</span> <span class="o">=</span> <span class="n">sr</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
                        <span class="n">NR</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">NR</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">|</span> <span class="p">(</span><span class="n">gamma</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">R</span><span class="o">-</span><span class="n">NON_R</span><span class="p">))</span>
                        <span class="n">NON_R</span> <span class="o">=</span> <span class="n">NON_R</span> <span class="o">|</span> <span class="p">(</span><span class="n">gamma</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">R</span><span class="p">)</span>

           <span class="c1"># Part 2</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">NON_R</span> <span class="o">|</span> <span class="n">OUI_R</span><span class="p">)</span> <span class="o">!=</span> <span class="n">R</span><span class="p">:</span>
                <span class="n">i</span> <span class="o">+=</span><span class="mi">1</span>
                <span class="n">setPart2v</span> <span class="o">=</span> <span class="n">R</span> <span class="o">-</span> <span class="n">NON_R</span> <span class="o">-</span> <span class="n">OUI_R</span>
                <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">setPart2v</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
                <span class="n">P</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span>
                <span class="n">OUI_R</span> <span class="o">=</span> <span class="n">OUI_R</span> <span class="o">|</span> <span class="n">P</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">M</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">gamma</span><span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">S</span> <span class="o">-</span> <span class="n">NON_S</span><span class="p">)</span>
                <span class="n">NON_S</span> <span class="o">=</span> <span class="n">NON_S</span> <span class="o">|</span> <span class="n">M</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">NR</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">gamma</span><span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">R</span> <span class="o">-</span> <span class="n">NON_R</span><span class="p">)</span>
                <span class="n">NON_R</span> <span class="o">=</span> <span class="n">NON_R</span> <span class="o">|</span> <span class="n">NR</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">test</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">for</span> <span class="n">vr</span> <span class="ow">in</span> <span class="p">(</span><span class="n">R</span> <span class="o">-</span> <span class="n">OUI_R</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">gamma</span><span class="p">[</span><span class="n">vr</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;</span> <span class="p">((</span><span class="n">S</span> <span class="o">-</span> <span class="n">NON_S</span><span class="p">)</span> <span class="o">|</span> <span class="n">OUI_R</span><span class="p">)</span> <span class="o">==</span> <span class="nb">set</span><span class="p">():</span>
                        <span class="n">test</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">break</span>
                <span class="k">if</span> <span class="n">test</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">hertzmisset</span> <span class="o">=</span> <span class="n">hertzmisset</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">((</span><span class="n">S</span> <span class="o">-</span> <span class="n">NON_S</span><span class="p">)</span> <span class="o">|</span> <span class="n">OUI_R</span><span class="p">)])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">i</span> <span class="o">-=</span> <span class="mi">1</span>
                <span class="n">NR</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">NR</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]])</span>
                <span class="n">NON_R</span> <span class="o">=</span> <span class="p">(</span><span class="n">NON_R</span> <span class="o">-</span> <span class="n">NR</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]])</span>
                <span class="n">NON_S</span> <span class="o">=</span> <span class="n">NON_S</span> <span class="o">-</span> <span class="n">M</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">OUI_R</span> <span class="o">=</span> <span class="n">OUI_R</span> <span class="o">-</span> <span class="n">P</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">OUI_S</span> <span class="o">=</span> <span class="n">OUI_S</span> <span class="o">-</span> <span class="n">Q</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">Q</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="c1"># end of algorithm</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">withListing</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---- results ----*&#39;</span><span class="p">)</span>
        <span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span>
        <span class="n">mislen</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">hertzmisset</span><span class="p">:</span>
            <span class="n">v</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">ch</span><span class="p">)]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">withListing</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">ch</span><span class="p">))</span>
            <span class="n">mislen</span> <span class="o">=</span> <span class="n">mislen</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span><span class="n">ch</span><span class="p">)])</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---- statistics ----*&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;mis lengths      : &#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="o">+</span><span class="mi">1</span><span class="p">)))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;frequency        : &#39;</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
        <span class="n">mislenlist</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">mislen</span><span class="p">)</span>
        <span class="n">mislenlist</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;mis lengths      : &#39;</span><span class="p">,</span> <span class="n">mislenlist</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;mis solutions    : &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">hertzmisset</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;execution time   : </span><span class="si">%.5f</span><span class="s1"> sec.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">t1</span> <span class="o">-</span> <span class="n">t0</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;iteration history: &#39;</span><span class="p">,</span> <span class="n">hist</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;result in self.hertzmisset&#39;</span><span class="p">)</span>
        <span class="c1"># store global results</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mislen</span> <span class="o">=</span> <span class="n">mislenlist</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hertzmisset</span> <span class="o">=</span> <span class="n">hertzmisset</span>
        <span class="c1"># restore original relation and neigborhooods</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relationBackup</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span></div>



<div class="viewcode-block" id="Digraph.showMIS_RB">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showMIS_RB">[docs]</a>
    <span class="k">def</span> <span class="nf">showMIS_RB</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">withListing</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prints all MIS using the Bisdorff method.</span>

<span class="sd">        Result saved in self.newmisset.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span><span class="nn">random</span><span class="o">,</span><span class="nn">copy</span><span class="o">,</span><span class="nn">time</span>
        <span class="n">relationBackup</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">V</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">V</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">V</span><span class="p">:</span>
                <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="c1"># initialize MIS extraction</span>
        <span class="n">newmisset</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>  <span class="c1"># global MIS collector set to empty</span>
        <span class="c1"># compute inital MIS</span>
        <span class="n">initmisset</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># initial MISs collector</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">V</span><span class="p">)</span>
        <span class="n">S</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span> <span class="c1"># initial MIS</span>
        <span class="n">gammaS</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span> <span class="c1"># initial MIS neighborhood</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">S</span> <span class="o">|</span> <span class="n">gammaS</span><span class="p">)</span> <span class="o">!=</span> <span class="n">V</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">V</span><span class="o">-</span><span class="n">S</span><span class="o">-</span><span class="n">gammaS</span><span class="p">))</span>
            <span class="n">S</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">gammaS</span> <span class="o">=</span> <span class="n">gammaS</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">newmisset</span> <span class="o">=</span> <span class="n">newmisset</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">S</span><span class="p">)])</span>
        <span class="n">initmisset</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">S</span><span class="p">),</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">S</span><span class="p">)))</span>
        <span class="n">R</span> <span class="o">=</span> <span class="n">V</span> <span class="o">-</span> <span class="n">S</span> <span class="c1"># remaining unused nodes</span>
        <span class="c1"># find disjoint further inital MISs</span>
        <span class="k">while</span> <span class="n">R</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
            <span class="n">S</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span> <span class="c1"># current MIS candidate</span>
            <span class="n">gammaS</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span> <span class="c1"># current MIS neighborhood</span>
            <span class="n">Cr</span> <span class="o">=</span> <span class="n">R</span> <span class="c1"># current remaining unused nodes</span>
            <span class="k">while</span> <span class="n">Cr</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">()</span> <span class="ow">and</span> <span class="n">S</span> <span class="o">|</span> <span class="n">gammaS</span> <span class="o">!=</span> <span class="n">V</span><span class="p">:</span> <span class="c1"># independence condition</span>
                <span class="n">i</span> <span class="o">=</span> <span class="n">Cr</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
                <span class="n">S</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="n">gammaS</span> <span class="o">=</span> <span class="n">gammaS</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">Cr</span> <span class="o">=</span> <span class="n">R</span> <span class="o">-</span> <span class="n">S</span> <span class="o">-</span> <span class="n">gammaS</span>
            <span class="k">if</span> <span class="n">S</span> <span class="o">|</span> <span class="n">gammaS</span> <span class="o">==</span> <span class="n">V</span><span class="p">:</span> <span class="c1"># cover condition</span>
                <span class="n">newmisset</span> <span class="o">=</span> <span class="n">newmisset</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">S</span><span class="p">)])</span>
                <span class="n">initmisset</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">S</span><span class="p">),</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">S</span><span class="p">)))</span>
            <span class="n">R</span> <span class="o">=</span> <span class="n">R</span> <span class="o">-</span> <span class="n">S</span> <span class="c1"># further remaining unused nodes</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">inital MISs &#39;</span><span class="p">)</span>
        <span class="c1"># sorting MIS by increasing length</span>
        <span class="n">initmisset</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">mis</span> <span class="ow">in</span> <span class="n">initmisset</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">mis</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">mis</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">i</span> <span class="o">+=</span><span class="mi">1</span>

        <span class="c1"># MIS extraction</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---- MIS extraction ----&#39;</span><span class="p">)</span>
        <span class="n">mislen</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>   <span class="c1"># list of MIS length observed</span>
        <span class="n">S</span> <span class="o">=</span> <span class="n">initmisset</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># start with largest init MIS</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;===&gt;&gt;&gt; Initial solution : &#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">S</span><span class="p">))</span>
        <span class="n">ns</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">S</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--&gt; iteration 0 &#39;</span><span class="p">)</span>
        <span class="n">mislen</span> <span class="o">=</span> <span class="n">mislen</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">ns</span><span class="p">])</span>

        <span class="n">upmis</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>  <span class="c1"># independent choices as MIS candidates</span>
        <span class="n">R</span> <span class="o">=</span> <span class="n">V</span> <span class="o">-</span> <span class="n">S</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">R</span><span class="p">:</span>   <span class="c1"># add a node from outside S</span>
            <span class="n">Sr</span> <span class="o">=</span> <span class="p">(</span><span class="n">S</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">r</span><span class="p">])</span> <span class="c1"># Sr independent</span>
            <span class="n">upmis</span> <span class="o">=</span> <span class="n">upmis</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">Sr</span><span class="p">)])</span>

        <span class="nb">iter</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">uphistory</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">while</span> <span class="n">upmis</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
            <span class="nb">iter</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># next iteration init</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--&gt; up iteration: &#39;</span><span class="p">,</span> <span class="nb">iter</span><span class="p">)</span>
            <span class="n">upmisiter</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">upmis</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;potential choices: &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">upmisiter</span><span class="p">))</span>
            <span class="n">uphistory</span> <span class="o">=</span> <span class="n">uphistory</span> <span class="o">|</span> <span class="n">upmis</span>
            <span class="n">upmis</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="c1"># up movement</span>
            <span class="k">for</span> <span class="n">Sch</span> <span class="ow">in</span> <span class="n">upmisiter</span><span class="p">:</span>

                <span class="n">gammaSch</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">Sch</span><span class="p">:</span>
                    <span class="n">gammaSch</span> <span class="o">=</span> <span class="n">gammaSch</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

                <span class="k">while</span> <span class="p">(</span><span class="n">Sch</span> <span class="o">|</span> <span class="n">gammaSch</span><span class="p">)</span> <span class="o">!=</span> <span class="n">V</span><span class="p">:</span>
                    <span class="n">i</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">V</span><span class="o">-</span><span class="n">Sch</span><span class="o">-</span><span class="n">gammaSch</span><span class="p">))</span>
                    <span class="n">Sch</span> <span class="o">=</span> <span class="n">Sch</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">i</span><span class="p">])</span>
                    <span class="n">gammaSch</span> <span class="o">=</span> <span class="n">gammaSch</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

                <span class="k">if</span> <span class="n">Sch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">newmisset</span><span class="p">:</span>
                    <span class="n">mislen</span> <span class="o">=</span> <span class="n">mislen</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span><span class="n">Sch</span><span class="p">)])</span>
                    <span class="n">newmisset</span> <span class="o">=</span> <span class="n">newmisset</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">Sch</span><span class="p">)])</span>

                    <span class="n">Rch</span> <span class="o">=</span> <span class="n">V</span> <span class="o">-</span> <span class="n">Sch</span>
                    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">Rch</span><span class="p">:</span>   <span class="c1"># add a node from outside S</span>
                        <span class="n">Srch</span> <span class="o">=</span> <span class="p">(</span><span class="n">Sch</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">r</span><span class="p">])</span> <span class="c1"># Sr independent</span>
                        <span class="k">if</span> <span class="n">Srch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">uphistory</span><span class="p">:</span>
                            <span class="n">upmis</span> <span class="o">=</span> <span class="n">upmis</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">Srch</span><span class="p">)])</span>

        <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---- results ----*&#39;</span><span class="p">)</span>
        <span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">newmisset</span><span class="p">:</span>
            <span class="n">v</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">ch</span><span class="p">)]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">withListing</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">ch</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---- statistics ----*&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;mis lengths   : &#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="o">+</span><span class="mi">1</span><span class="p">)))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;frequency     : &#39;</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
        <span class="n">mislenlist</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">mislen</span><span class="p">)</span>
        <span class="n">mislenlist</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;mis lengths   : &#39;</span><span class="p">,</span> <span class="n">mislenlist</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;mis solutions : &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">newmisset</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;execution time: </span><span class="si">%.5f</span><span class="s1"> sec.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">t1</span> <span class="o">-</span> <span class="n">t0</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;up-history    : &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">uphistory</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;result in self.newmisset&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*-----------------------------------*&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;* Python implementation of Hertz&#39;s  *&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* algorithm for generating all MIS  *&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* R.B. version Ronda  April 2006    *&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*-----------------------------------*&#39;</span><span class="p">)</span>
        <span class="c1"># store global results</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mislen</span> <span class="o">=</span> <span class="n">mislenlist</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span> <span class="o">=</span> <span class="n">newmisset</span>
        <span class="c1"># restore original relation and neigborhooods</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relationBackup</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span></div>



<div class="viewcode-block" id="Digraph.showMIS_UD">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showMIS_UD">[docs]</a>
    <span class="k">def</span> <span class="nf">showMIS_UD</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">withListing</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prints all MIS using the Hertz-Bisdorff method.</span>

<span class="sd">        Result saved in self.newmisset.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span><span class="nn">random</span><span class="o">,</span><span class="nn">copy</span><span class="o">,</span><span class="nn">time</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">setrecursionlimit</span><span class="p">(</span><span class="mi">15000</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relationBackup</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">V</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">V</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">V</span><span class="p">:</span>
                <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showAll</span><span class="p">()</span>
        <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="c1"># initilaize MIS extraction</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>  <span class="c1"># global MIS collector set to empty</span>
        <span class="c1"># compute inital MIS</span>
        <span class="n">initmisset</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># initial MISs collector</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">V</span><span class="p">)</span>
        <span class="n">S</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span> <span class="c1"># initial MIS</span>
        <span class="n">gammaS</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span> <span class="c1"># initial MIS neighborhood</span>
        <span class="n">V</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">S</span> <span class="o">|</span> <span class="n">gammaS</span><span class="p">)</span> <span class="o">!=</span> <span class="n">V</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">V</span><span class="o">-</span><span class="n">S</span><span class="o">-</span><span class="n">gammaS</span><span class="p">))</span>
            <span class="n">S</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">gammaS</span> <span class="o">=</span> <span class="n">gammaS</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">S</span><span class="p">)])</span>
        <span class="n">initmisset</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">S</span><span class="p">),</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">S</span><span class="p">)))</span>
        <span class="n">R</span> <span class="o">=</span> <span class="n">V</span> <span class="o">-</span> <span class="n">S</span> <span class="c1"># remaining unused nodes</span>
        <span class="c1"># find disjoint further inital MISs</span>
        <span class="k">while</span> <span class="n">R</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
            <span class="n">S</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span> <span class="c1"># current MIS candidate</span>
            <span class="n">gammaS</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span> <span class="c1"># current MIS neighborhood</span>
            <span class="n">Cr</span> <span class="o">=</span> <span class="n">R</span> <span class="c1"># current remaining unused nodes</span>
            <span class="k">while</span> <span class="n">Cr</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">()</span> <span class="ow">and</span> <span class="n">S</span> <span class="o">|</span> <span class="n">gammaS</span> <span class="o">!=</span> <span class="n">V</span><span class="p">:</span> <span class="c1"># independence condition</span>
                <span class="n">i</span> <span class="o">=</span> <span class="n">Cr</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
                <span class="n">S</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="n">gammaS</span> <span class="o">=</span> <span class="n">gammaS</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">Cr</span> <span class="o">=</span> <span class="n">R</span> <span class="o">-</span> <span class="n">S</span> <span class="o">-</span> <span class="n">gammaS</span>
            <span class="k">if</span> <span class="n">S</span> <span class="o">|</span> <span class="n">gammaS</span> <span class="o">==</span> <span class="n">V</span><span class="p">:</span> <span class="c1"># cover condition</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">S</span><span class="p">)])</span>
                <span class="n">initmisset</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">S</span><span class="p">),</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">S</span><span class="p">)))</span>
            <span class="n">R</span> <span class="o">=</span> <span class="n">R</span> <span class="o">-</span> <span class="n">S</span> <span class="c1"># further remaining unused nodes</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">inital MISs &#39;</span><span class="p">)</span>
        <span class="c1"># sorting MIS by increasing length</span>
        <span class="n">initmisset</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">mis</span> <span class="ow">in</span> <span class="n">initmisset</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">mis</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">mis</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---- same mises with up and down potentials ----&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">upmis</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>    <span class="c1"># independent choices as MIS candidates</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">downmis</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>  <span class="c1"># covering choices as MIS candidates</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mislen</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>   <span class="c1"># list of MIS length observed</span>
        <span class="k">for</span> <span class="n">mis</span> <span class="ow">in</span> <span class="n">initmisset</span><span class="p">:</span>
            <span class="n">S</span> <span class="o">=</span> <span class="n">mis</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;===&gt;&gt;&gt; Inital solution : &#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">S</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--&gt; compute MIS of same size &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">S</span><span class="p">))</span>
            <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">ns</span> <span class="o">=</span> <span class="n">mis</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mislen</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mislen</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">ns</span><span class="p">])</span>
            <span class="n">V</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">computeupdown1</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">S</span><span class="p">)</span>  <span class="c1"># compute all MIS of length ns</span>
            <span class="nb">iter</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">upmis</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">()</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">downmis</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
                <span class="nb">iter</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># next iteration init</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">--&gt; up iteration: &#39;</span><span class="p">,</span> <span class="nb">iter</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">upmisiter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">upmis</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">upmis</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">downmisiter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">downmis</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">downmis</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                <span class="n">V</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
                <span class="c1"># up movement</span>
                <span class="k">for</span> <span class="n">Sup</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">upmisiter</span><span class="p">:</span>
                    <span class="n">Sch</span> <span class="o">=</span> <span class="n">Sup</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">gammaSch</span> <span class="o">=</span> <span class="n">Sup</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">while</span> <span class="p">(</span><span class="n">Sch</span> <span class="o">|</span> <span class="n">gammaSch</span><span class="p">)</span> <span class="o">!=</span> <span class="n">V</span><span class="p">:</span>
                        <span class="n">i</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">V</span><span class="o">-</span><span class="n">Sch</span><span class="o">-</span><span class="n">gammaSch</span><span class="p">))</span>
                        <span class="n">Sch</span> <span class="o">=</span> <span class="n">Sch</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">i</span><span class="p">])</span>
                        <span class="n">gammaSch</span> <span class="o">=</span> <span class="n">gammaSch</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">Sch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">mislen</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mislen</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span><span class="n">Sch</span><span class="p">)])</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">Sch</span><span class="p">)])</span>
                        <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">computeupdown1</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">Sch</span><span class="p">)</span>
                <span class="c1"># down movement</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">*    &lt;&lt;&lt; down potentials in&#39;</span><span class="p">,</span> <span class="nb">iter</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">Sch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">downmisiter</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">Sch</span><span class="p">:</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">Sch</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
                            <span class="n">Sch</span> <span class="o">=</span> <span class="n">Sch</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">v</span><span class="p">])</span>
                            <span class="n">gammaSch</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">Sch</span><span class="p">:</span>
                                <span class="n">gammaSch</span> <span class="o">=</span> <span class="n">gammaSch</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                            <span class="k">if</span> <span class="n">gammaSch</span> <span class="o">&amp;</span> <span class="n">Sch</span> <span class="o">==</span> <span class="nb">set</span><span class="p">():</span>
                                <span class="k">if</span> <span class="n">Sch</span> <span class="o">|</span> <span class="n">gammaSch</span> <span class="o">==</span> <span class="n">V</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="n">Sch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span><span class="p">:</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">mislen</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mislen</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span><span class="n">Sch</span><span class="p">)])</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">Sch</span><span class="p">)])</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">computeupdown1</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">Sch</span><span class="p">)</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">Sch</span> <span class="o">|</span> <span class="n">gammaSch</span> <span class="o">==</span> <span class="n">V</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">downmis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">downmis</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">Sch</span><span class="p">)])</span>

            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;solutions: &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span><span class="p">))</span>

        <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---- results ----*&#39;</span><span class="p">)</span>
        <span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span><span class="p">:</span>
            <span class="n">v</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">ch</span><span class="p">)]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">withListing</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">ch</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---- statistics ----*&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;mis lengths   : &#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="o">+</span><span class="mi">1</span><span class="p">)))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;frequency     : &#39;</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;mis lengths   : &#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mislen</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;mis solutions : &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;execution time: </span><span class="si">%.5f</span><span class="s1"> sec.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">t1</span> <span class="o">-</span> <span class="n">t0</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;result in self.newmisset&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*-----------------------------------*&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;* Python implementation of Hertz&#39;s  *&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* algorithm for generating all MIS  *&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* R.B. April 2006                   *&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*-----------------------------------*&#39;</span><span class="p">)</span>
        <span class="c1"># restore original relation and neigborhooods</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relationBackup</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span></div>


<div class="viewcode-block" id="Digraph.computeupdown1">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeupdown1">[docs]</a>
    <span class="k">def</span> <span class="nf">computeupdown1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">S</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Help method for show_MIS_HB2 method.</span>
<span class="sd">        fills self.newmisset, self.upmis, self.downmis.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">V</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">R</span> <span class="o">=</span> <span class="n">V</span> <span class="o">-</span> <span class="n">S</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span> <span class="c1"># recursion depth: traces the discovery of MISs</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">S</span><span class="p">:</span> <span class="c1"># choose a leaving node</span>
            <span class="n">Sv</span> <span class="o">=</span> <span class="n">S</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">v</span><span class="p">])</span>
            <span class="n">gammaSv</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span> <span class="c1"># recompute neighborhood</span>
            <span class="k">for</span> <span class="n">sv</span> <span class="ow">in</span> <span class="n">Sv</span><span class="p">:</span>
                <span class="n">gammaSv</span> <span class="o">=</span> <span class="n">gammaSv</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">sv</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">R</span><span class="p">:</span>   <span class="c1"># add a node from outside S</span>
                <span class="n">Svr</span> <span class="o">=</span> <span class="n">Sv</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">r</span><span class="p">])</span>
                <span class="n">gammaSvr</span> <span class="o">=</span> <span class="n">gammaSv</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">gammaSvr</span> <span class="o">&amp;</span> <span class="n">Svr</span> <span class="o">==</span> <span class="nb">set</span><span class="p">():</span> <span class="c1"># if independent</span>
                    <span class="k">if</span> <span class="n">gammaSvr</span> <span class="o">|</span> <span class="n">Svr</span> <span class="o">==</span> <span class="n">V</span><span class="p">:</span> <span class="c1"># and if covering</span>
                        <span class="k">if</span> <span class="n">Svr</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span><span class="p">:</span>
                            <span class="c1">#print &#39;MIS &#39;, Svr</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">Svr</span><span class="p">)])</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">computeupdown1</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">Svr</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>                   <span class="c1"># indep. and not covering</span>
                        <span class="c1">#print &#39;up -&gt;&#39;,Svr</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">upmis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">upmis</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([(</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">Svr</span><span class="p">),</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">gammaSvr</span><span class="p">))])</span>
                <span class="k">elif</span> <span class="n">Svr</span> <span class="o">|</span> <span class="n">gammaSvr</span> <span class="o">==</span> <span class="n">V</span><span class="p">:</span>   <span class="c1"># covering but not independent</span>
                    <span class="c1">#print &#39;down-&gt;&#39;,Svr</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">downmis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">downmis</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">Svr</span><span class="p">)])</span></div>



<div class="viewcode-block" id="Digraph.showMIS_HB2">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showMIS_HB2">[docs]</a>
    <span class="k">def</span> <span class="nf">showMIS_HB2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">withListing</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prints all MIS using the Hertz-Bisdorff method.</span>

<span class="sd">        Result saved in self.newmisset.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span><span class="nn">random</span><span class="o">,</span><span class="nn">copy</span><span class="o">,</span><span class="nn">time</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">setrecursionlimit</span><span class="p">(</span><span class="mi">15000</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relationBackup</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">V</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">V</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">V</span><span class="p">:</span>
                <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showAll</span><span class="p">()</span>
        <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="c1"># initilaize MIS extraction</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>  <span class="c1"># global MIS collector set to empty</span>
        <span class="c1"># compute inital MIS</span>
        <span class="n">initmisset</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># initial MISs collector</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">V</span><span class="p">)</span>
        <span class="n">S</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span> <span class="c1"># initial MIS</span>
        <span class="n">gammaS</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span> <span class="c1"># initial MIS neighborhood</span>
        <span class="n">V</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">S</span> <span class="o">|</span> <span class="n">gammaS</span><span class="p">)</span> <span class="o">!=</span> <span class="n">V</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">V</span><span class="o">-</span><span class="n">S</span><span class="o">-</span><span class="n">gammaS</span><span class="p">))</span>
            <span class="n">S</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">gammaS</span> <span class="o">=</span> <span class="n">gammaS</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">S</span><span class="p">)])</span>
        <span class="n">initmisset</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">S</span><span class="p">),</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">S</span><span class="p">)))</span>
        <span class="n">R</span> <span class="o">=</span> <span class="n">V</span> <span class="o">-</span> <span class="n">S</span> <span class="c1"># remaining unused nodes</span>
        <span class="c1"># find disjoint further inital MISs</span>
        <span class="k">while</span> <span class="n">R</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
            <span class="n">S</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span> <span class="c1"># current MIS candidate</span>
            <span class="n">gammaS</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span> <span class="c1"># current MIS neighborhood</span>
            <span class="n">Cr</span> <span class="o">=</span> <span class="n">R</span> <span class="c1"># current remaining unused nodes</span>
            <span class="k">while</span> <span class="n">Cr</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">()</span> <span class="ow">and</span> <span class="n">S</span> <span class="o">|</span> <span class="n">gammaS</span> <span class="o">!=</span> <span class="n">V</span><span class="p">:</span> <span class="c1"># independence condition</span>
                <span class="n">i</span> <span class="o">=</span> <span class="n">Cr</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
                <span class="n">S</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="n">gammaS</span> <span class="o">=</span> <span class="n">gammaS</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">Cr</span> <span class="o">=</span> <span class="n">R</span> <span class="o">-</span> <span class="n">S</span> <span class="o">-</span> <span class="n">gammaS</span>
            <span class="k">if</span> <span class="n">S</span> <span class="o">|</span> <span class="n">gammaS</span> <span class="o">==</span> <span class="n">V</span><span class="p">:</span> <span class="c1"># cover condition</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">S</span><span class="p">)])</span>
                <span class="n">initmisset</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">S</span><span class="p">),</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">S</span><span class="p">)))</span>
            <span class="n">R</span> <span class="o">=</span> <span class="n">R</span> <span class="o">-</span> <span class="n">S</span> <span class="c1"># further remaining unused nodes</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">inital MISs &#39;</span><span class="p">)</span>
        <span class="c1"># sorting MIS by increasing length</span>
        <span class="n">initmisset</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">mis</span> <span class="ow">in</span> <span class="n">initmisset</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">mis</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">mis</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---- same mises with up and down potentials ----&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">upmis</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>    <span class="c1"># independent choices as MIS candidates</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">uphistory</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">downmis</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>  <span class="c1"># covering choices as MIS candidates</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">downhistory</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mislen</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>   <span class="c1"># list of MIS length observed</span>
        <span class="k">for</span> <span class="n">mis</span> <span class="ow">in</span> <span class="n">initmisset</span><span class="p">:</span>
            <span class="n">S</span> <span class="o">=</span> <span class="n">mis</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;===&gt;&gt;&gt; Inital solution : &#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">S</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--&gt; compute MIS of same size &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">S</span><span class="p">))</span>
            <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">ns</span> <span class="o">=</span> <span class="n">mis</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mislen</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mislen</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">ns</span><span class="p">])</span>
            <span class="n">V</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">computeupdown2</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">S</span><span class="p">)</span>  <span class="c1"># starting from S compute all MIS of same length</span>
            <span class="nb">iter</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">upmis</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">()</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">downmis</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
                <span class="nb">iter</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># next iteration init</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">upmisiter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">upmis</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">uphistory</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">uphistory</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">upmis</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">upmis</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">downmisiter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">downmis</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">downhistory</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">downhistory</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">downmis</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">downmis</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                <span class="n">V</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
                <span class="c1"># up movement</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">  &gt;&gt;&gt; up iteration: &#39;</span><span class="p">,</span> <span class="nb">iter</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">Sup</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">upmisiter</span><span class="p">:</span>
                    <span class="n">Sch</span> <span class="o">=</span> <span class="n">Sup</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">gammaSch</span> <span class="o">=</span> <span class="n">Sup</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">while</span> <span class="p">(</span><span class="n">Sch</span> <span class="o">|</span> <span class="n">gammaSch</span><span class="p">)</span> <span class="o">!=</span> <span class="n">V</span><span class="p">:</span>
                        <span class="n">i</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">V</span><span class="o">-</span><span class="n">Sch</span><span class="o">-</span><span class="n">gammaSch</span><span class="p">))</span>
                        <span class="n">Sch</span> <span class="o">=</span> <span class="n">Sch</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">i</span><span class="p">])</span>
                        <span class="n">gammaSch</span> <span class="o">=</span> <span class="n">gammaSch</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">Sch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">mislen</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mislen</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span><span class="n">Sch</span><span class="p">)])</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">Sch</span><span class="p">)])</span>
                        <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">computeupdown2</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">Sch</span><span class="p">)</span>
                <span class="c1"># down movement</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">*    &lt;&lt;&lt; down potentials in&#39;</span><span class="p">,</span> <span class="nb">iter</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">Sch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">downmisiter</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">Sch</span><span class="p">:</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">Sch</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
                            <span class="n">Sch</span> <span class="o">=</span> <span class="n">Sch</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">v</span><span class="p">])</span>
                            <span class="n">gammaSch</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">Sch</span><span class="p">:</span>
                                <span class="n">gammaSch</span> <span class="o">=</span> <span class="n">gammaSch</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                            <span class="k">if</span> <span class="n">gammaSch</span> <span class="o">&amp;</span> <span class="n">Sch</span> <span class="o">==</span> <span class="nb">set</span><span class="p">():</span>
                                <span class="k">if</span> <span class="n">Sch</span> <span class="o">|</span> <span class="n">gammaSch</span> <span class="o">==</span> <span class="n">V</span> <span class="ow">and</span> <span class="n">Sch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">mislen</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mislen</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span><span class="n">Sch</span><span class="p">)])</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">Sch</span><span class="p">)])</span>
                                    <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">computeupdown2</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">Sch</span><span class="p">)</span>
                                <span class="c1">#elif Sch not in self.uphistory:</span>
                                    <span class="c1">#print &#39;up -&gt;&#39;,Sch</span>
                                    <span class="c1">#self.upmis = self.upmis | set([(frozenset(Sch),frozenset(gammaSch))])</span>

                            <span class="k">else</span><span class="p">:</span>
                                <span class="k">if</span> <span class="n">Sch</span> <span class="o">|</span> <span class="n">gammaSch</span> <span class="o">==</span> <span class="n">V</span> <span class="ow">and</span> <span class="n">Sch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">downhistory</span><span class="p">:</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">downmis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">downmis</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">Sch</span><span class="p">)])</span>

            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;solutions: &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span><span class="p">))</span>

        <span class="n">t1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---- results ----*&#39;</span><span class="p">)</span>
        <span class="n">v</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span><span class="p">:</span>
            <span class="n">v</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">ch</span><span class="p">)]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">withListing</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">ch</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---- statistics ----*&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;mis lengths   : &#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="o">+</span><span class="mi">1</span><span class="p">)))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;frequency     : &#39;</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;mis lengths   : &#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mislen</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;mis solutions : &#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;execution time: </span><span class="si">%.5f</span><span class="s1"> sec.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">t1</span> <span class="o">-</span> <span class="n">t0</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;result in self.newmisset&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*-----------------------------------*&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;* Python implementation of Hertz&#39;s  *&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* algorithm for generating all MIS  *&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* R.B. April 2006                   *&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*-----------------------------------*&#39;</span><span class="p">)</span>
        <span class="c1"># restore original relation and neigborhooods</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relationBackup</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span></div>


<div class="viewcode-block" id="Digraph.computeupdown2irred">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeupdown2irred">[docs]</a>
    <span class="k">def</span> <span class="nf">computeupdown2irred</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">S</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Help method for show_MIS_HB1 method.</span>
<span class="sd">        Fills self.newmisset, self.upmis, self.downmis.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#import copy</span>
        <span class="n">newmis</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">S</span><span class="p">)])</span>
        <span class="n">V</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">newmis</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span> <span class="o">|</span> <span class="n">newmis</span>
            <span class="n">S</span> <span class="o">=</span> <span class="n">newmis</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="n">R</span> <span class="o">=</span> <span class="n">V</span> <span class="o">-</span> <span class="n">S</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span> <span class="c1"># recursion depth: traces the discovery of MISs</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="c1">#Siter = copy.copy(S)</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">S</span><span class="p">:</span> <span class="c1"># choose a leaving node</span>
                <span class="n">Sv</span> <span class="o">=</span> <span class="n">S</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">v</span><span class="p">])</span>
                <span class="n">gammaSv</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span> <span class="c1"># recompute Sv neighborhood</span>
                <span class="k">for</span> <span class="n">sv</span> <span class="ow">in</span> <span class="n">Sv</span><span class="p">:</span>
                    <span class="n">gammaSv</span> <span class="o">=</span> <span class="n">gammaSv</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">sv</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">privgammav</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">v</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">v</span><span class="p">]))</span> <span class="o">-</span> <span class="p">(</span><span class="n">gammaSv</span> <span class="o">|</span> <span class="n">Sv</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">R</span><span class="p">:</span>   <span class="c1"># add a node from outside S</span>
                    <span class="k">if</span> <span class="n">privgammav</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>  <span class="c1"># covering</span>
                        <span class="n">Svr</span> <span class="o">=</span> <span class="n">Sv</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">r</span><span class="p">])</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">Sv</span> <span class="o">==</span> <span class="nb">set</span><span class="p">():</span>  <span class="c1"># independent</span>
                            <span class="k">if</span> <span class="n">Svr</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;new MIS &#39;</span><span class="p">,</span> <span class="n">Svr</span><span class="p">)</span>
                                <span class="n">newmis</span> <span class="o">=</span> <span class="n">newmis</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">Svr</span><span class="p">)])</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">Svr</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">downhistory</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;down-&gt;&#39;</span><span class="p">,</span><span class="n">Svr</span><span class="p">)</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">downmis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">downmis</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">Svr</span><span class="p">)])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">Sv</span> <span class="o">==</span> <span class="nb">set</span><span class="p">():</span>  <span class="c1"># independent</span>
                            <span class="n">Svr</span> <span class="o">=</span> <span class="n">Sv</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">r</span><span class="p">])</span>
                            <span class="k">if</span> <span class="n">Svr</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">uphistory</span><span class="p">:</span>
                                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;up -&gt;&#39;</span><span class="p">,</span><span class="n">Svr</span><span class="p">)</span>
                                <span class="n">gammaSvr</span> <span class="o">=</span> <span class="n">gammaSv</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">upmis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">upmis</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([(</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">Svr</span><span class="p">),</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">gammaSvr</span><span class="p">))])</span></div>


<div class="viewcode-block" id="Digraph.computeupdown2">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeupdown2">[docs]</a>
    <span class="k">def</span> <span class="nf">computeupdown2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">S</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Help method for show_MIS_HB1 method.</span>
<span class="sd">        Fills self.newmisset, self.upmis, self.downmis.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#import copy</span>
        <span class="n">newmis</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">S</span><span class="p">)])</span>
        <span class="n">V</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">newmis</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span> <span class="o">|</span> <span class="n">newmis</span>
            <span class="n">S</span> <span class="o">=</span> <span class="n">newmis</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="n">R</span> <span class="o">=</span> <span class="n">V</span> <span class="o">-</span> <span class="n">S</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span> <span class="c1"># recursion depth: traces the discovery of MISs</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="c1">#Siter = copy.copy(S)</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">S</span><span class="p">:</span> <span class="c1"># choose a leaving node</span>
                <span class="n">Sv</span> <span class="o">=</span> <span class="n">S</span> <span class="o">-</span> <span class="nb">set</span><span class="p">([</span><span class="n">v</span><span class="p">])</span>
                <span class="n">gammaSv</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span> <span class="c1"># recompute neighborhood</span>
                <span class="k">for</span> <span class="n">sv</span> <span class="ow">in</span> <span class="n">Sv</span><span class="p">:</span>
                    <span class="n">gammaSv</span> <span class="o">=</span> <span class="n">gammaSv</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">sv</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="c1">#privgammav = (self.gamma[v][0] | set([v])) - gammaSv</span>
                <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">R</span><span class="p">:</span>   <span class="c1"># add a node from outside S</span>
                    <span class="n">Svr</span> <span class="o">=</span> <span class="n">Sv</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">r</span><span class="p">])</span>
                    <span class="n">gammaSvr</span> <span class="o">=</span> <span class="n">gammaSv</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">gammaSvr</span> <span class="o">&amp;</span> <span class="n">Svr</span> <span class="o">==</span> <span class="nb">set</span><span class="p">():</span> <span class="c1"># if independent</span>
                        <span class="k">if</span> <span class="n">gammaSvr</span> <span class="o">|</span> <span class="n">Svr</span> <span class="o">==</span> <span class="n">V</span><span class="p">:</span> <span class="c1"># and if covering</span>
                            <span class="k">if</span> <span class="n">Svr</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">newmisset</span><span class="p">:</span>
                                <span class="c1">#print &#39;new MIS &#39;, Svr</span>
                                <span class="n">newmis</span> <span class="o">=</span> <span class="n">newmis</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">Svr</span><span class="p">)])</span>
                        <span class="k">else</span><span class="p">:</span>                   <span class="c1"># indep. and not covering</span>
                            <span class="k">if</span> <span class="n">Svr</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">uphistory</span><span class="p">:</span>
                                <span class="c1">#print &#39;up -&gt;&#39;,Svr</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">upmis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">upmis</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([(</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">Svr</span><span class="p">),</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">gammaSvr</span><span class="p">))])</span>
                    <span class="k">elif</span> <span class="n">Svr</span> <span class="o">|</span> <span class="n">gammaSvr</span> <span class="o">==</span> <span class="n">V</span><span class="p">:</span>   <span class="c1"># covering but not independent</span>
                        <span class="k">if</span> <span class="n">Svr</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">downhistory</span><span class="p">:</span>
                            <span class="c1">#print &#39;down-&gt;&#39;,Svr</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">downmis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">downmis</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">Svr</span><span class="p">)])</span></div>



<div class="viewcode-block" id="Digraph.computeODistance">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeODistance">[docs]</a>
    <span class="k">def</span> <span class="nf">computeODistance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">op2</span><span class="p">,</span><span class="n">comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders the squared normalized distance of</span>
<span class="sd">        two digraph valuations.</span>

<span class="sd">        .. note::</span>

<span class="sd">             op2 = digraphs of same order as self.</span>
<span class="sd">             </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">math</span><span class="o">,</span><span class="nn">copy</span>

        <span class="n">op1</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="n">Debug</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* --- compute O Distance of two digraphs ---- *&#39;</span><span class="p">)</span>
        <span class="n">ODistance</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">actionsList1</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">op1</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">actionsList2</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">op2</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionsList1</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionsList2</span><span class="p">):</span>
            <span class="n">ODistance</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;actionsList1&#39;</span><span class="p">,</span> <span class="n">actionsList1</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;actionsList2&#39;</span><span class="p">,</span> <span class="n">actionsList2</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: Actions sets are not comaptible ?&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;       ODistance = None !!!&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Minop1</span> <span class="o">=</span> <span class="n">op1</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
            <span class="n">Maxop1</span> <span class="o">=</span> <span class="n">op1</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
            <span class="n">Minop2</span> <span class="o">=</span> <span class="n">op2</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
            <span class="n">Maxop2</span> <span class="o">=</span> <span class="n">op2</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
            <span class="n">op1</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>
            <span class="n">op2</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionsList1</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
                    <span class="n">ODistance</span> <span class="o">+=</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="n">op1</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">actionsList1</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">actionsList1</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span> <span class="o">-</span> <span class="n">op2</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">actionsList2</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">actionsList2</span><span class="p">[</span><span class="n">j</span><span class="p">]],</span><span class="mi">2</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;==&gt;&gt;&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">actionsList1</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">actionsList1</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="s1">&#39;op1 =&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">op1</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">actionsList1</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">actionsList1</span><span class="p">[</span><span class="n">j</span><span class="p">]])</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">actionsList2</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">actionsList2</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="s1">&#39;op2 =&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">op2</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">actionsList2</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">actionsList2</span><span class="p">[</span><span class="n">j</span><span class="p">]])</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ODistance +=&#39;</span><span class="p">,</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="n">op1</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">actionsList1</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">actionsList1</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span> <span class="o">-</span> <span class="n">op2</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">actionsList2</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">actionsList2</span><span class="p">[</span><span class="n">j</span><span class="p">]],</span><span class="mi">2</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ODistance between&#39;</span><span class="p">,</span><span class="n">op1</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39; and&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">op2</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="n">ODistance</span><span class="p">)</span>
            <span class="n">op1</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="n">Minop1</span><span class="p">,</span><span class="n">Maxop1</span><span class="p">)</span>
            <span class="n">op2</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="n">Minop1</span><span class="p">,</span><span class="n">Maxop2</span><span class="p">)</span>


        <span class="k">return</span> <span class="n">ODistance</span></div>


<div class="viewcode-block" id="Digraph.computeSingletonRanking">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeSingletonRanking">[docs]</a>
    <span class="k">def</span> <span class="nf">computeSingletonRanking</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">Debug</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the sorted bipolar net determinatation of outrankingness</span>
<span class="sd">        minus outrankedness credibilities of all singleton choices.</span>

<span class="sd">        res = ((netdet,singleton,dom,absorb)+)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">copy</span>
        <span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>

        <span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">100.0</span><span class="p">)</span>


        <span class="n">sigs</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">singletons</span><span class="p">()]</span>

        <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sigs</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">sigs</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">domin</span><span class="p">(</span><span class="n">sigs</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">absorb</span><span class="p">(</span><span class="n">sigs</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
            <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">domin</span><span class="p">(</span><span class="n">sigs</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">absorb</span><span class="p">(</span><span class="n">sigs</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span><span class="n">sigs</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">domin</span><span class="p">(</span><span class="n">sigs</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span><span class="bp">self</span><span class="o">.</span><span class="n">absorb</span><span class="p">(</span><span class="n">sigs</span><span class="p">[</span><span class="n">i</span><span class="p">])))</span>

        <span class="n">res</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>


        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">res</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;{</span><span class="si">%s</span><span class="s2">} : </span><span class="si">%.3f</span><span class="s2"> &quot;</span> <span class="o">%</span> <span class="p">(</span> <span class="p">[</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="mi">0</span><span class="p">],</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="mf">100.0</span><span class="p">)</span><span class="o">/</span><span class="mf">2.0</span> <span class="p">))</span>

        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">],</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">res</span></div>


<div class="viewcode-block" id="Digraph.showSingletonRanking">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.showSingletonRanking">[docs]</a>
    <span class="k">def</span> <span class="nf">showSingletonRanking</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">Debug</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calls self.computeSingletonRanking(comments=True,Debug = False).</span>
<span class="sd">        Renders and prints the sorted bipolar net determinatation of outrankingness</span>
<span class="sd">        minus outrankedness credibilities of all singleton choices.</span>

<span class="sd">        res = ((netdet,sigleton,dom,absorb)+)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeSingletonRanking</span><span class="p">(</span><span class="n">Comments</span><span class="p">,</span><span class="n">Debug</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span></div>


    <span class="c1"># def omax(self,L, Debug=False):</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     Epistemic **disjunction** for bipolar outranking characteristics</span>
    <span class="c1">#     computation: Med is the valuation domain median and L is a list of</span>
    <span class="c1">#     r-valued statement characteristics.</span>

    <span class="c1">#     With **positive** arguments, omax operates a **max**,</span>
    <span class="c1">#     with **negative** arguments, a **min**.</span>

    <span class="c1">#     The mixture of **both positive and negative** arguments results in</span>
    <span class="c1">#     an **indeterminate** value.</span>

    <span class="c1">#     Likewise to a mean, the *omax* operator is not associative. We therefore first assemble all positive, negative and null terms</span>
    <span class="c1">#     and operate omax on the three assembled arguments.</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     Med = self.valuationdomain[&#39;med&#39;]</span>
    <span class="c1">#     terms = list(L)</span>
    <span class="c1">#     termsPlus = []</span>
    <span class="c1">#     termsMinus = []</span>
    <span class="c1">#     termsNuls = []</span>
    <span class="c1">#     for i in range(len(terms)):</span>
    <span class="c1">#         if terms[i] &gt; Med:</span>
    <span class="c1">#             termsPlus.append(terms[i])</span>
    <span class="c1">#         elif terms[i] &lt; Med:</span>
    <span class="c1">#             termsMinus.append(terms[i])</span>
    <span class="c1">#         else:</span>
    <span class="c1">#             termsNuls.append(terms[i])</span>
    <span class="c1">#     if Debug:</span>
    <span class="c1">#         print(&#39;terms&#39;, terms)</span>
    <span class="c1">#         print(&#39;termsPlus&#39;,termsPlus)</span>
    <span class="c1">#         print(&#39;termsMinus&#39;, termsMinus)</span>
    <span class="c1">#         print(&#39;termsNuls&#39;, termsNuls)</span>
    <span class="c1">#     np = len(termsPlus)</span>
    <span class="c1">#     nm = len(termsMinus)</span>
    <span class="c1">#     if np &gt; 0 and nm == 0:</span>
    <span class="c1">#         return max(termsPlus)</span>
    <span class="c1">#     elif nm &gt; 0 and np == 0:</span>
    <span class="c1">#         return min(termsMinus)</span>
    <span class="c1">#     else:</span>
    <span class="c1">#         return Med</span>

    <span class="c1"># def omin(self,L, Debug=False):</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     Epistemic **conjunction** of a list L of bipolar outranking characteristics.</span>
    <span class="c1">#     Med is the given valuation domain median.</span>

    <span class="c1">#     With **positive** arguments, omax operates a **min**,</span>
    <span class="c1">#     with **negative** arguments, a **max**.</span>

    <span class="c1">#     The mixture of both **positive and negative** arguments results</span>
    <span class="c1">#     in an **indeterminate** value.</span>

    <span class="c1">#     Likewise to a mean, the *omin* operator is not associative. We therefore first assemble all positive, negative and null terms</span>
    <span class="c1">#     and operate omin on the three assembled arguments. </span>

    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     Med = self.valuationdomain[&#39;med&#39;]</span>
    <span class="c1">#     terms = list(L)</span>
    <span class="c1">#     termsPlus = []</span>
    <span class="c1">#     termsMinus = []</span>
    <span class="c1">#     termsNuls = []</span>
    <span class="c1">#     for i in range(len(terms)):</span>
    <span class="c1">#         if terms[i] &gt;= Med:</span>
    <span class="c1">#             termsPlus.append(terms[i])</span>
    <span class="c1">#         elif terms[i] &lt;= Med:</span>
    <span class="c1">#             termsMinus.append(terms[i])</span>
    <span class="c1">#         else:</span>
    <span class="c1">#             termsNuls.append(terms[i])</span>
    <span class="c1">#     if Debug:</span>
    <span class="c1">#         print(&#39;terms&#39;, terms)</span>
    <span class="c1">#         print(&#39;termsPlus&#39;,termsPlus)</span>
    <span class="c1">#         print(&#39;termsMinus&#39;, termsMinus)</span>
    <span class="c1">#         print(&#39;termsNuls&#39;, termsNuls)</span>
    <span class="c1">#     np = len(termsPlus)</span>
    <span class="c1">#     nm = len(termsMinus)</span>
    <span class="c1">#     if np &gt; 0:</span>
    <span class="c1">#         if nm &gt; 0:</span>
    <span class="c1">#             return Med</span>
    <span class="c1">#         else:</span>
    <span class="c1">#             return min(termsPlus)</span>
    <span class="c1">#     else:</span>
    <span class="c1">#         if nm &gt; 0:</span>
    <span class="c1">#             return max(termsMinus)</span>
    <span class="c1">#         else:</span>
    <span class="c1">#             return Med</span>

    <span class="k">def</span> <span class="nf">_computeNetFlowsRankingDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Stored</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Tenders an ordered dictionary of the actions (from best to worst)</span>
<span class="sd">        following the net flows ranking rule with rank and net flow attributes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>

        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">netFlows</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Med</span> <span class="o">==</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">rx</span> <span class="ow">in</span> <span class="n">relation</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">xnetflows</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">-</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span>\
                                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">)</span>
<span class="c1">##                if Debug:</span>
<span class="c1">##                    print(&#39;netflow for %s = %.2f&#39; % (x, xnetflows))</span>
                <span class="n">netFlows</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="o">-</span><span class="n">xnetflows</span><span class="p">,</span><span class="n">x</span><span class="p">))</span>
                <span class="c1"># reversed sorting with keeping the actions natural ordering</span>
            
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
            <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">rx</span> <span class="ow">in</span> <span class="n">relation</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">xnetflows</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">Max</span> <span class="o">-</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">+</span> <span class="n">Min</span><span class="p">)</span>\
                                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">)</span>
<span class="c1">##                if Debug:</span>
<span class="c1">##                    print(&#39;netflow for %s = %.2f&#39; % (x, xnetflows))</span>
                <span class="n">netFlows</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="o">-</span><span class="n">xnetflows</span><span class="p">,</span><span class="n">x</span><span class="p">))</span>
                <span class="c1"># reversed sorting with keeping the actions natural ordering</span>
        <span class="n">netFlows</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="c1">##        if Debug:</span>
<span class="c1">##            print(netFlows)</span>

        <span class="n">netFlowsRanking</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">netFlows</span><span class="p">):</span>
            <span class="n">netFlowsRanking</span><span class="p">[</span><span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;rank&#39;</span><span class="p">:</span><span class="n">k</span><span class="p">,</span><span class="s1">&#39;netFlow&#39;</span><span class="p">:</span><span class="o">-</span><span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]}</span>
        <span class="k">if</span> <span class="n">Stored</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">netFlowsRankingDict</span> <span class="o">=</span> <span class="n">netFlowsRanking</span>
        <span class="k">return</span> <span class="n">netFlowsRanking</span>

    <span class="k">def</span> <span class="nf">_computeNetFlowsRanking</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Stored</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Tenders an ordered dictionary of the actions (from best to worst)</span>
<span class="sd">        following the net flows ranking rule with rank and net flow attributes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>

        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">incNetFlowsScores</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">decNetFlowsScores</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1">#Med = self.valuationdomain[&#39;med&#39;]</span>
        <span class="c1">#if Med == Decimal(&#39;0&#39;):</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">xnetFlows</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="n">xnetFlows</span> <span class="o">+=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">-</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> 
            <span class="n">incNetFlowsScores</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">xnetFlows</span><span class="p">,</span><span class="n">x</span><span class="p">))</span>
            <span class="n">decNetFlowsScores</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">xnetFlows</span><span class="p">,</span><span class="n">x</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">incNetFlowsScores</span><span class="p">)</span>
                                     
        <span class="n">incNetFlowsScores</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="n">decNetFlowsScores</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">incNetFlowsScores</span> <span class="o">=</span> <span class="n">incNetFlowsScores</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">decNetFlowsScores</span> <span class="o">=</span> <span class="n">decNetFlowsScores</span>
        <span class="n">netFlowsRanking</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">decNetFlowsScores</span><span class="p">]</span>
        <span class="n">netFlowsOrder</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">incNetFlowsScores</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">netFlowsRanking</span> <span class="o">=</span> <span class="n">netFlowsRanking</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">netFlowsOrder</span> <span class="o">=</span> <span class="n">netFlowsOrder</span>

<div class="viewcode-block" id="Digraph.computeNetFlowsRankingDict">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeNetFlowsRankingDict">[docs]</a>
    <span class="k">def</span> <span class="nf">computeNetFlowsRankingDict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders an ordered list (from best to worst) of the actions</span>
<span class="sd">        following the net flows ranking rule.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">netFlowsRankingDict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">netFlowsRankingDict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_computeNetFlowsRankingDict</span><span class="p">()</span>
            <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">netFlowsRankingDict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span></div>


<div class="viewcode-block" id="Digraph.computeNetFlowsRanking">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeNetFlowsRanking">[docs]</a>
    <span class="k">def</span> <span class="nf">computeNetFlowsRanking</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders an ordered list (from best to worst) of the actions</span>
<span class="sd">        following the net flows ranking rule.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">netFlowsRanking</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_computeNetFlowsRanking</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">netFlowsRanking</span></div>

        <span class="c1"># try:</span>
        <span class="c1">#     return list(self.netFlowsRankingDict.keys())</span>
        <span class="c1"># except AttributeError:</span>
        <span class="c1">#     netFlowsRankingDict = self._computeNetFlowsRankingDict()</span>
        <span class="c1">#     return list(netFlowsRankingDict.keys())</span>

<div class="viewcode-block" id="Digraph.computeNetFlowsOrder">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeNetFlowsOrder">[docs]</a>
    <span class="k">def</span> <span class="nf">computeNetFlowsOrder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders an ordered list (from best to worst) of the actions</span>
<span class="sd">        following the net flows ranking rule.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">netFlowsOrder</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_computeNetFlowsRanking</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">netFlowsOrder</span></div>

        <span class="c1"># try:</span>
        <span class="c1">#     return list(self.netFlowsRankingDict.keys())</span>
        <span class="c1"># except AttributeError:</span>
        <span class="c1">#     netFlowsRankingDict = self._computeNetFlowsRankingDict()</span>
        <span class="c1">#     return list(netFlowsRankingDict.keys())</span>

<div class="viewcode-block" id="Digraph.computeNetFlowsOrderDict">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeNetFlowsOrderDict">[docs]</a>
    <span class="k">def</span> <span class="nf">computeNetFlowsOrderDict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders an ordered list (from worst to best) of the actions</span>
<span class="sd">        following the net flows ranking rule.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">netFlowsRankingDict</span><span class="o">.</span><span class="n">keys</span><span class="p">())))</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">netFlowsRankingDict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_computeNetFlowsRankingDict</span><span class="p">()</span>
            <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">netFlowsRankingDict</span><span class="o">.</span><span class="n">keys</span><span class="p">())))</span></div>

        
    <span class="k">def</span> <span class="nf">_computeKohlerRankingDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders a ranking from the best to the worst of the actions following Kohler&#39;s rule as an</span>
<span class="sd">        ordered dictionary with rank and majorityMargin attributes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">rank</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="n">k</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">while</span> <span class="n">actionsList</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="n">maximin</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="n">xmin</span> <span class="o">=</span> <span class="n">Max</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">xmin</span><span class="p">:</span>
                            <span class="n">xmin</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x, xmin&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">xmin</span><span class="p">)</span>
                <span class="n">maximin</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">xmin</span><span class="p">,</span><span class="n">x</span><span class="p">))</span>
            <span class="n">maximin</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">maximin</span><span class="p">,</span> <span class="n">maximin</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">rank</span><span class="p">[</span><span class="n">maximin</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;rank&#39;</span><span class="p">:</span><span class="n">k</span><span class="p">,</span><span class="s1">&#39;majorityMargin&#39;</span><span class="p">:</span><span class="n">maximin</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]}</span>
            <span class="n">actionsList</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">maximin</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">k</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;actionsList&#39;</span><span class="p">,</span> <span class="n">actionsList</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">rank</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rank</span>

<div class="viewcode-block" id="Digraph.computeKohlerOrder">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeKohlerOrder">[docs]</a>
    <span class="k">def</span> <span class="nf">computeKohlerOrder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders an ordering (worst to best) of the actions following Kohler&#39;s rule.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ranking</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_computeKohlerRankingDict</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ranking</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">res</span><span class="p">))</span></div>

    
<div class="viewcode-block" id="Digraph.computeKohlerRanking">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeKohlerRanking">[docs]</a>
    <span class="k">def</span> <span class="nf">computeKohlerRanking</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders a ranking (best to worst) of the actions following Kohler&#39;s rule.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ranking</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_computeKohlerRankingDict</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ranking</span><span class="p">]</span></div>


    <span class="k">def</span> <span class="nf">_computeArrowRaynaudRankingDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders a ranking of the actions following Arrow&amp;Raynaud&#39;s rule.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">rank</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="n">k</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">while</span> <span class="n">actionsList</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="n">minimax</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="n">xmax</span> <span class="o">=</span> <span class="n">Min</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">xmax</span><span class="p">:</span>
                            <span class="n">xmax</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x, xmax&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">xmax</span><span class="p">)</span>
                <span class="n">minimax</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">xmax</span><span class="p">,</span><span class="n">x</span><span class="p">))</span>
            <span class="n">minimax</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">minimax</span><span class="p">,</span> <span class="n">minimax</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">rank</span><span class="p">[</span><span class="n">minimax</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;rank&#39;</span><span class="p">:</span><span class="n">n</span><span class="o">-</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;majorityMargin&#39;</span><span class="p">:</span><span class="n">minimax</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]}</span>
            <span class="n">actionsList</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">minimax</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">k</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;actionsList&#39;</span><span class="p">,</span> <span class="n">actionsList</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">rank</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rank</span>

<div class="viewcode-block" id="Digraph.computeArrowRaynaudOrder">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeArrowRaynaudOrder">[docs]</a>
    <span class="k">def</span> <span class="nf">computeArrowRaynaudOrder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders a linear ordering from worst to best of the actions following Arrow&amp;Raynaud&#39;s rule.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ranking</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_computeArrowRaynaudRankingDict</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ranking</span><span class="p">]</span></div>

    
<div class="viewcode-block" id="Digraph.computeArrowRaynaudRanking">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeArrowRaynaudRanking">[docs]</a>
    <span class="k">def</span> <span class="nf">computeArrowRaynaudRanking</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders a linear ranking from best to worst of the actions following Arrow&amp;Raynaud&#39;s rule.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ranking</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_computeArrowRaynaudRankingDict</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ranking</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">res</span><span class="p">))</span></div>


    <span class="k">def</span> <span class="nf">_computeCopelandRanking</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders a linear ranking from best to worst of the actions</span>
<span class="sd">        following Copelands&#39;s rule.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">PolarisedDigraph</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">cRelation</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">incCopelandScores</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">decCopelandScores</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">copelandScore</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="n">copelandScore</span> <span class="o">+=</span> <span class="n">cRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">-</span> <span class="n">cRelation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span>
            <span class="c1">#actions[x][&#39;score&#39;] = copelandScore</span>
            <span class="n">incCopelandScores</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">copelandScore</span><span class="p">,</span><span class="n">x</span><span class="p">))</span>
            <span class="n">decCopelandScores</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">copelandScore</span><span class="p">,</span><span class="n">x</span><span class="p">))</span>

        <span class="c1"># reversed sorting with keeping the actions initial ordering</span>
        <span class="c1"># in case of ties</span>
        <span class="n">incCopelandScores</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="n">decCopelandScores</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">incCopelandScores</span> <span class="o">=</span> <span class="n">incCopelandScores</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">decCopelandScores</span> <span class="o">=</span> <span class="n">decCopelandScores</span>
<span class="c1">##        gamma = self.gamma</span>
<span class="c1">##        copelandScores = []</span>
<span class="c1">##        for x in self.actions:</span>
<span class="c1">##            copelandScore = len(gamma[x][1]) - len(gamma[x][0])</span>
<span class="c1">##            copelandScores.append((copelandScore,x))</span>
<span class="c1">##        # reversed sorting with keeping the actions initial ordering</span>
<span class="c1">##        # in case of ties</span>
<span class="c1">##        copelandScores.sort()</span>
        <span class="n">copelandRanking</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">decCopelandScores</span><span class="p">]</span>
        <span class="n">copelandOrder</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">incCopelandScores</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">copelandRanking</span> <span class="o">=</span> <span class="n">copelandRanking</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">copelandOrder</span> <span class="o">=</span> <span class="n">copelandOrder</span>

<div class="viewcode-block" id="Digraph.computeCopelandRanking">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeCopelandRanking">[docs]</a>
    <span class="k">def</span> <span class="nf">computeCopelandRanking</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders a linear ranking from best to worst of the actions following Arrow&amp;Raynaud&#39;s rule.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">ranking</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copelandRanking</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_computeCopelandRanking</span><span class="p">()</span>
            <span class="n">ranking</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copelandRanking</span>
        <span class="k">return</span> <span class="n">ranking</span></div>


<div class="viewcode-block" id="Digraph.computeCopelandOrder">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeCopelandOrder">[docs]</a>
    <span class="k">def</span> <span class="nf">computeCopelandOrder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        renders a linear ordering from worst to best of the actions following Arrow&amp;Raynaud&#39;s rule.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">ordering</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copelandOrder</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_computeCopelandRanking</span><span class="p">()</span>
            <span class="n">ordering</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copelandOrder</span>
        <span class="k">return</span> <span class="n">ordering</span></div>


<span class="c1">##    def _computeRankedPairsOrder(self,Cpp=False,Debug=False):</span>
<span class="c1">##        &quot;&quot;&quot;</span>
<span class="c1">##        Renders an actions ordering from the worst to the best obtained from the</span>
<span class="c1">##        ranked pairs rule.</span>
<span class="c1">##        &quot;&quot;&quot;</span>
<span class="c1">##        relation = self.relation</span>
<span class="c1">##        #actions = self.actions</span>
<span class="c1">##        actions = [x for x in self.actions]</span>
<span class="c1">##        actions.sort()</span>
<span class="c1">##</span>
<span class="c1">##        n = len(actions)</span>
<span class="c1">##</span>
<span class="c1">##        listPairs = []</span>
<span class="c1">##        for x,rx in relation.items():</span>
<span class="c1">##            for y,rxy in rx.items():</span>
<span class="c1">##                if x != y:</span>
<span class="c1">##                    listPairs.append((rxy,(x,y),x,y))</span>
<span class="c1">##        listPairs.sort(reverse=False)</span>
<span class="c1">##        if Debug:</span>
<span class="c1">##            print(listPairs)</span>
<span class="c1">##</span>
<span class="c1">##        g = IndeterminateDigraph(order=n)</span>
<span class="c1">##        g.actions = self.actions</span>
<span class="c1">##        g.valuationdomain = {&#39;min&#39;:Decimal(&#39;-1&#39;), &#39;med&#39;: Decimal(&#39;0&#39;), &#39;max&#39;: Decimal(&#39;1&#39;)}</span>
<span class="c1">##        Min = g.valuationdomain[&#39;min&#39;]</span>
<span class="c1">##        Max = g.valuationdomain[&#39;max&#39;]</span>
<span class="c1">##        Med = g.valuationdomain[&#39;med&#39;]</span>
<span class="c1">##        g.relation = {}</span>
<span class="c1">##        for x in g.actions:</span>
<span class="c1">##            g.relation[x] = {}</span>
<span class="c1">##            grx = g.relation[x]</span>
<span class="c1">##            for y in g.actions:</span>
<span class="c1">##                grx[y] = Med</span>
<span class="c1">##</span>
<span class="c1">##        rankedPairs = [x[1] for x in listPairs]</span>
<span class="c1">##        for pair in rankedPairs:</span>
<span class="c1">##            if Debug:</span>
<span class="c1">##                print(&#39;next pair: &#39;, pair)</span>
<span class="c1">##            x = pair[0]</span>
<span class="c1">##            y = pair[1]</span>
<span class="c1">##            grxy = g.relation[x][y]</span>
<span class="c1">##            gryx = g.relation[y][x]</span>
<span class="c1">##            if grxy == Min and gryx == Min:</span>
<span class="c1">##                grxy = Max</span>
<span class="c1">##                g.gamma = g.gammaSets()</span>
<span class="c1">##                g.notGamma = g.notGammaSets()</span>
<span class="c1">##                if Cpp:</span>
<span class="c1">##                    circ = g.computeCppChordlessCircuits()</span>
<span class="c1">##                else:</span>
<span class="c1">##                    circ = g.computeChordlessCircuits()</span>
<span class="c1">##                if len(circ) != 0:</span>
<span class="c1">##                    if Debug:</span>
<span class="c1">##                        print(circ)</span>
<span class="c1">##                    grxy = Min</span>
<span class="c1">####                else:</span>
<span class="c1">####                    if Debug:</span>
<span class="c1">####                        print(&#39;added: (%s,%s) characteristic: %.2f&#39; %\</span>
<span class="c1">####                              (x,y, self.relation[x][y]))</span>
<span class="c1">##</span>
<span class="c1">##        g.gamma = g.gammaSets()</span>
<span class="c1">##</span>
<span class="c1">##        outdegrees = []</span>
<span class="c1">##        for x in g.actions:</span>
<span class="c1">##            outdegrees.append((len(g.gamma[x][0]),x))</span>
<span class="c1">##        outdegrees.sort(reverse=True)</span>
<span class="c1">##</span>
<span class="c1">##        rankedPairsOrder = []</span>
<span class="c1">##        for x in outdegrees:</span>
<span class="c1">##            rankedPairsOrder.append(x[1])</span>
<span class="c1">##        if Debug:</span>
<span class="c1">##            print(&#39;Ranked Pairs Order = &#39;, rankedPairsOrder)</span>
<span class="c1">##        return rankedPairsOrder</span>
<span class="c1">##</span>
<span class="c1">##    def _computeRankedPairsRanking(self):</span>
<span class="c1">##        &quot;&quot;&quot;</span>
<span class="c1">##        Renders an actions ordering from the best to the worst obtained from the</span>
<span class="c1">##        ranked pairs rule.</span>
<span class="c1">##        &quot;&quot;&quot;</span>
<span class="c1">##        ordering = self.computeRankedPairsOrder()</span>
<span class="c1">##        return list(reversed(ordering))</span>

<span class="c1">#     def computeMedianRanking(self,</span>
<span class="c1">#                            orderLimit=7,Threading=False,nbrOfCPUs=1,</span>
<span class="c1">#                            Comments=False,Debug=False):</span>
<span class="c1">#         &quot;&quot;&quot;</span>
<span class="c1">#         Renders a ranking from best to worst of the actions with maximal marginal correlation  and minimal marginal correlation amplitude.</span>

<span class="c1">#         .. note::</span>
        
<span class="c1">#              Returns a triple: (medianRanking (from best to worst),</span>
<span class="c1">#              maxMarginalCorrelation, minMarginalCorrelationAmplitude)</span>
             
<span class="c1">#         &quot;&quot;&quot;</span>
<span class="c1">#         from digraphsTools import all_perms</span>
<span class="c1">#         from math import factorial</span>


<span class="c1">#         Min = self.valuationdomain[&#39;min&#39;]</span>
<span class="c1">#         relation = self.relation</span>
<span class="c1">#         actions = [x for x in self.actions]</span>
<span class="c1">#         n = len(actions)</span>

<span class="c1">#         if n &gt; orderLimit:</span>
<span class="c1">#             return None</span>
<span class="c1">#         maxMarginalCorrelation = Decimal(&#39;-1.0&#39;)</span>
<span class="c1">#         minMarginalCorrelationAmplitude = Decimal(&#39;2.0&#39;)</span>
<span class="c1">#         s = 1</span>
<span class="c1">#         maxs = factorial(n)</span>
<span class="c1">#         maximalRankings = []</span>
<span class="c1">#         for a in all_perms(list(actions)):</span>
<span class="c1">#             s += 1</span>
<span class="c1">#             if Comments:</span>
<span class="c1">#                 print(&#39;%d/%d&#39; % (s,maxs))</span>
<span class="c1">#             kcurr = self.computeRankingConsensusQuality(a,Threading=Threading,nbrOfCPUs=nbrOfCPUs)</span>
<span class="c1"># ##            kcurr = sum((relation[a[i]][a[j]] - relation[a[j]][a[i]])\</span>
<span class="c1"># ##                        for i in range(n) for j in range(i+1,n))</span>
<span class="c1"># ##                for i in range(n):</span>
<span class="c1"># ##                    for j in range(i+1,n):</span>
<span class="c1"># ##                        kcurr += relation[a[i]][a[j]] - relation[a[j]][a[i]]</span>
<span class="c1">#             if Debug:</span>
<span class="c1">#                 print(kcurr)</span>
<span class="c1">#             kcurrAmp = kcurr[0][0][0] - kcurr[0][-1][0]</span>
<span class="c1">#             if Debug:</span>
<span class="c1">#                 print(s, a, kcurrAmp)</span>
<span class="c1">#             if kcurr[1] &gt; maxMarginalCorrelation:</span>
<span class="c1">#                 maxMarginalCorrelation = kcurr[1]</span>
<span class="c1">#                 minMarginalCorrelationAmplitude = kcurrAmp</span>
<span class="c1">#                 medianRanking = list(a)</span>
<span class="c1">#                 maximalRankings = [medianRanking]</span>
<span class="c1">#                 if Debug:</span>
<span class="c1">#                     print(maximalRankings)</span>
<span class="c1">#             elif kcurr[1] == maxMarginalCorrelation:</span>
<span class="c1">#                 if kcurrAmp &lt; minMarginalCorrelationAmplitude:</span>
<span class="c1">#                     maxMarginalCorrelation = kcurr[1]</span>
<span class="c1">#                     minMarginalCorrelationAmplitude = kcurrAmp</span>
<span class="c1">#                     medianRanking = list(a)</span>
<span class="c1">#                     maximalRankings = [medianRanking]</span>
<span class="c1">#                     if Debug:</span>
<span class="c1">#                         print(maximalRankings)</span>
<span class="c1">#                 elif kcurrAmp == minMarginalCorrelationAmplitude:              </span>
<span class="c1">#                     minMarginalCorrelationAmplitude = kcurrAmp</span>
<span class="c1">#                     maximalRankings.append(list(a))</span>
<span class="c1">#                     if Debug:</span>
<span class="c1">#                         print(maximalRankings)</span>
                    
<span class="c1">#             self.maximalRankings = maximalRankings</span>
<span class="c1">#             self.maxMarginalCorrelation = maxMarginalCorrelation</span>
<span class="c1">#             self.minMarginalCorrelationAmplitude = minMarginalCorrelationAmplitude</span>
<span class="c1">#             if Debug:</span>
<span class="c1">#                 print(&#39;First optimal median ranking = &#39;, maximalRankings[0])</span>
<span class="c1">#                 print(&#39;Optimal maxMarginalCorrelation = &#39;, maxMarginalCorrelation)</span>
<span class="c1">#                 print(&#39;Optimal minMarginalCorrelationAmplitude = &#39;, minMarginalCorrelationAmplitude)</span>
<span class="c1">#                 print(&#39;# of permutations  = &#39;, s)</span>

<span class="c1">#         #kemenyOrder.reverse()</span>
<span class="c1">#         return maximalRankings[0], maxMarginalCorrelation, minMarginalCorrelationAmplitude</span>


<div class="viewcode-block" id="Digraph.computeKemenyRanking">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeKemenyRanking">[docs]</a>
    <span class="k">def</span> <span class="nf">computeKemenyRanking</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                           <span class="n">orderLimit</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                           <span class="n">sampleSize</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders a ranking from best to worst of the actions with maximal Kemeny index.</span>

<span class="sd">        .. note::</span>
<span class="sd">        </span>
<span class="sd">             Returns a tuple: kemenyRanking (from best to worst), kemenyIndex.</span>
<span class="sd">             </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">seed</span><span class="p">,</span> <span class="n">shuffle</span>
        <span class="kn">from</span> <span class="nn">digraphsTools</span> <span class="kn">import</span> <span class="n">all_perms</span>


        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>

        <span class="c1">## Exact computation of a Kemeny order</span>
        <span class="c1">## respecting a maximum of marginal majority margins</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="n">orderLimit</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">kemenyIndex</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">))</span> <span class="o">*</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">))</span> <span class="o">*</span> <span class="n">Min</span>
        <span class="n">s</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">maximalRankings</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">all_perms</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">actions</span><span class="p">)):</span>
            <span class="n">kcurr</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">kcurr</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">((</span><span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span> <span class="o">-</span> <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]][</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span>\
                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">))</span>
<span class="c1">##                for i in range(n):</span>
<span class="c1">##                    for j in range(i+1,n):</span>
<span class="c1">##                        kcurr += relation[a[i]][a[j]] - relation[a[j]][a[i]]</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">kcurr</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">kcurr</span> <span class="o">&gt;</span> <span class="n">kemenyIndex</span><span class="p">:</span>
                <span class="n">kemenyIndex</span> <span class="o">=</span> <span class="n">kcurr</span>
                <span class="n">kemenyRanking</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
                <span class="n">maximalRankings</span> <span class="o">=</span> <span class="p">[</span><span class="n">kemenyRanking</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">maximalRankings</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">kcurr</span> <span class="o">==</span> <span class="n">kemenyIndex</span><span class="p">:</span>
                <span class="n">maximalRankings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">maximalRankings</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">maximalRankings</span> <span class="o">=</span> <span class="n">maximalRankings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kemenyIndex</span> <span class="o">=</span> <span class="n">kemenyIndex</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Exact Kemeny Orders = &#39;</span><span class="p">,</span> <span class="n">kemenyRanking</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Exact Kemeny Index = &#39;</span><span class="p">,</span> <span class="n">kemenyIndex</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;# of permutations  = &#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>

        <span class="c1">#kemenyOrder.reverse()</span>
        <span class="k">return</span> <span class="n">kemenyRanking</span><span class="p">,</span> <span class="n">kemenyIndex</span></div>


<div class="viewcode-block" id="Digraph.computeKemenyOrder">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeKemenyOrder">[docs]</a>
    <span class="k">def</span> <span class="nf">computeKemenyOrder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">orderLimit</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders a ordering from worst to best of the actions with maximal Kemeny index.</span>
<span class="sd">        Return a tuple: kemenyOrder (from worst to best), kemenyIndex</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">ranking</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">maximalRankings</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">ranking</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">computeKemenyRanking</span><span class="p">(</span><span class="n">orderLimit</span><span class="o">=</span><span class="n">orderLimit</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
            <span class="n">ranking</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">maximalRankings</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">ranking</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ranking</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">kemenyIndex</span></div>


<div class="viewcode-block" id="Digraph.computePrincipalScores">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computePrincipalScores">[docs]</a>
    <span class="k">def</span> <span class="nf">computePrincipalScores</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plotFileName</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                              <span class="n">Colwise</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">imageType</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                              <span class="n">tempDir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                               <span class="n">bgcolor</span><span class="o">=</span><span class="s1">&#39;cornsilk&#39;</span><span class="p">,</span>
                              <span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders a ordered list of the first principal eigenvector of the covariance of the valued outdegrees of self.</span>

<span class="sd">        .. note::</span>

<span class="sd">           The method, relying on writing and reading temporary files by default in a temporary directory is threading and multiprocessing safe !</span>
<span class="sd">           (see Digraph.exportPrincipalImage method)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">csv</span> <span class="kn">import</span> <span class="n">reader</span>
        <span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>
        <span class="kn">from</span> <span class="nn">tempfile</span> <span class="kn">import</span> <span class="n">TemporaryDirectory</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
        <span class="n">tempd</span> <span class="o">=</span> <span class="n">TemporaryDirectory</span><span class="p">(</span><span class="nb">dir</span><span class="o">=</span><span class="n">tempDir</span><span class="p">)</span>
        <span class="n">tempDirName</span> <span class="o">=</span> <span class="n">tempd</span><span class="o">.</span><span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exportPrincipalImage</span><span class="p">(</span><span class="n">Colwise</span><span class="o">=</span><span class="n">Colwise</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">,</span>
                                  <span class="n">pictureFormat</span><span class="o">=</span><span class="n">imageType</span><span class="p">,</span>
                                  <span class="n">plotFileName</span><span class="o">=</span><span class="n">plotFileName</span><span class="p">,</span>
                                  <span class="n">bgcolor</span><span class="o">=</span><span class="n">bgcolor</span><span class="p">,</span>
                                  <span class="n">tempDir</span><span class="o">=</span><span class="n">tempDirName</span><span class="p">,</span>
                                  <span class="p">)</span>
        <span class="k">if</span> <span class="n">Colwise</span><span class="p">:</span>
            <span class="n">fi</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/rotationCol.csv&#39;</span> <span class="o">%</span> <span class="n">tempDirName</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fi</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/rotationRow.csv&#39;</span> <span class="o">%</span> <span class="n">tempDirName</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>

        <span class="n">csvReader</span> <span class="o">=</span> <span class="n">reader</span><span class="p">(</span><span class="n">fi</span><span class="p">)</span>
        <span class="n">R</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">csvReader</span><span class="p">]</span>
        <span class="n">fi</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="n">listActions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">listActions</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">principalScores</span> <span class="o">=</span> <span class="p">[(</span><span class="n">Decimal</span><span class="p">(</span><span class="n">R</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span><span class="n">listActions</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>\
                           <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">listActions</span><span class="p">))]</span>
        <span class="n">principalScores</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">principalScores</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tempd</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">principalScores</span></div>

 
<div class="viewcode-block" id="Digraph.computePrincipalRanking">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computePrincipalRanking">[docs]</a>
    <span class="k">def</span> <span class="nf">computePrincipalRanking</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Colwise</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Rendesr a ranking from best to worst of the decision actions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">principalScores</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computePrincipalScores</span><span class="p">(</span><span class="n">Colwise</span><span class="o">=</span><span class="n">Colwise</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">principalScores</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">: </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">principalRanking</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">principalScores</span><span class="p">]</span>
        <span class="n">corr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeRankingCorrelation</span><span class="p">(</span><span class="n">principalRanking</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">corr</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">corr</span><span class="p">[</span><span class="s1">&#39;correlation&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">principalRanking</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">([</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">principalScores</span><span class="p">]))</span></div>


<div class="viewcode-block" id="Digraph.computePrincipalOrder">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computePrincipalOrder">[docs]</a>
    <span class="k">def</span> <span class="nf">computePrincipalOrder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Colwise</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Rendesr an ordering from wrost to best of the decision actions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">principalScores</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computePrincipalScores</span><span class="p">(</span><span class="n">Colwise</span><span class="o">=</span><span class="n">Colwise</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">principalScores</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">: </span><span class="si">%.3f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">principalOrder</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">principalScores</span><span class="p">]</span>
        <span class="n">corr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeOrderCorrelation</span><span class="p">(</span><span class="n">principalOrder</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">corr</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">corr</span><span class="p">[</span><span class="s1">&#39;correlation&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">principalOrder</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">([</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">principalScores</span><span class="p">]))</span></div>


<div class="viewcode-block" id="Digraph.computeSlaterRanking">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeSlaterRanking">[docs]</a>
    <span class="k">def</span> <span class="nf">computeSlaterRanking</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">isProbabilistic</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sampleSize</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders a ranking of the actions with minimal Slater index.</span>
<span class="sd">        Return a tuple: slaterOrder, slaterIndex</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">seed</span><span class="p">,</span> <span class="n">shuffle</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">copysign</span>
            <span class="n">CopySign</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">CopySign</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="kn">from</span> <span class="nn">digraphsTools</span> <span class="kn">import</span> <span class="n">all_perms</span>


        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">relationOrig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">minOrig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">maxOrig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>

        <span class="c1">## Monte Carlo computation of a Slater order</span>
        <span class="k">if</span> <span class="n">isProbabilistic</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">seed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">seed</span> <span class="o">=</span> <span class="n">seed</span>
            <span class="n">a</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
            <span class="n">slaterIndex</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="n">n</span><span class="o">*</span><span class="n">n</span><span class="p">)</span>
            <span class="n">slaterRanking</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
            <span class="n">sampleSize</span> <span class="o">=</span> <span class="n">sampleSize</span>

            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">sampleSize</span><span class="p">):</span>
                <span class="n">shuffle</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
                <span class="n">kcurr</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">CopySign</span><span class="p">:</span>
                            <span class="n">kcurr</span> <span class="o">+=</span> <span class="n">copysign</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]])</span> <span class="o">-</span> <span class="n">copysign</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]][</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="n">kcurr</span> <span class="o">+=</span> <span class="mi">1</span>
                            <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="n">kcurr</span> <span class="o">-=</span> <span class="mi">1</span>
                            <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]][</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="n">kcurr</span> <span class="o">-=</span> <span class="mi">1</span>
                            <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]][</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="n">kcurr</span> <span class="o">+=</span> <span class="mi">1</span>

                <span class="k">if</span> <span class="n">kcurr</span> <span class="o">&gt;</span> <span class="n">slaterIndex</span><span class="p">:</span>
                    <span class="n">slaterIndex</span> <span class="o">=</span> <span class="n">kcurr</span>
                    <span class="n">slaterRanking</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">slaterIndex</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Probabilistic Slater Order = &#39;</span><span class="p">,</span> <span class="n">slaterRanking</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Probabilistic Slater Index = &#39;</span><span class="p">,</span> <span class="n">slaterIndex</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;with samplesize :            &#39;</span><span class="p">,</span> <span class="n">sampleSize</span><span class="p">)</span>


<span class="c1">## Exact computation of a Slater order</span>
<span class="c1">## respecting a maximum of marginal majority margins</span>
        <span class="k">else</span><span class="p">:</span>

            <span class="n">slaterIndex</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="n">n</span><span class="o">*</span><span class="n">n</span><span class="p">)</span>
            <span class="n">slaterOrder</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
            <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">all_perms</span><span class="p">(</span><span class="n">slaterOrder</span><span class="p">):</span>
                <span class="n">kcurr</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                    <span class="n">ai</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="n">rai</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
                    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
                        <span class="n">aj</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">CopySign</span><span class="p">:</span>
                            <span class="n">kcurr</span> <span class="o">+=</span> <span class="n">copysign</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">rai</span><span class="p">[</span><span class="n">aj</span><span class="p">])</span> <span class="o">-</span>\
                                     <span class="n">copysign</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">relation</span><span class="p">[</span><span class="n">aj</span><span class="p">][</span><span class="n">ai</span><span class="p">])</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">rai</span><span class="p">[</span><span class="n">aj</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="n">kcurr</span> <span class="o">+=</span> <span class="mi">1</span>
                            <span class="k">elif</span> <span class="n">rai</span><span class="p">[</span><span class="n">aj</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="n">kcurr</span> <span class="o">-=</span> <span class="mi">1</span>
                            <span class="k">if</span> <span class="n">relation</span><span class="p">[</span><span class="n">aj</span><span class="p">][</span><span class="n">ai</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="n">kcurr</span> <span class="o">-=</span> <span class="mi">1</span>
                            <span class="k">elif</span> <span class="n">relation</span><span class="p">[</span><span class="n">aj</span><span class="p">][</span><span class="n">ai</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="n">kcurr</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="c1">#kcurr += copysign(1,relation[a[i]][a[j]]) - copysign(1,relation[a[j]][a[i]])</span>
                <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">kcurr</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">kcurr</span> <span class="o">&gt;=</span> <span class="n">slaterIndex</span><span class="p">:</span>
                    <span class="n">slaterIndex</span> <span class="o">=</span> <span class="n">kcurr</span>
                    <span class="n">slaterRanking</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">slaterRanking</span><span class="p">,</span> <span class="n">slaterIndex</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Exact Slater Order = &#39;</span><span class="p">,</span> <span class="n">slaterRanking</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Exact Slater Index = &#39;</span><span class="p">,</span> <span class="n">slaterIndex</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;# of permutations  = &#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="n">minOrig</span><span class="p">,</span><span class="n">maxOrig</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">slaterRanking</span><span class="p">,</span> <span class="n">slaterIndex</span></div>


<div class="viewcode-block" id="Digraph.computeSlaterOrder">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeSlaterOrder">[docs]</a>
    <span class="k">def</span> <span class="nf">computeSlaterOrder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">isProbabilistic</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                           <span class="n">seed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">sampleSize</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reversed return from computeSlaterRanking method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">slaterOrder</span><span class="p">,</span><span class="n">slaterIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeSlaterRanking</span><span class="p">(</span><span class="n">isProbabilistic</span><span class="o">=</span><span class="n">isProbabilistic</span><span class="p">,</span>
                                                          <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">,</span> <span class="n">sampleSize</span><span class="o">=</span><span class="n">sampleSize</span><span class="p">,</span> <span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
        <span class="n">slaterOrder</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">slaterOrder</span><span class="p">,</span><span class="n">slaterIndex</span></div>


<div class="viewcode-block" id="Digraph.computeValuedRankingRelation">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computeValuedRankingRelation">[docs]</a>
    <span class="k">def</span> <span class="nf">computeValuedRankingRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ranking</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the valued relation characteristics compatible </span>
<span class="sd">        with the given linar ranking. Discordant charcateristics </span>
<span class="sd">        are set to the indeterminate value.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">valuedRankingRelation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">valuedRankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">vrrx</span> <span class="o">=</span> <span class="n">valuedRankingRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="n">xi</span> <span class="o">=</span> <span class="n">ranking</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="n">yj</span> <span class="o">=</span> <span class="n">ranking</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">xi</span> <span class="o">&lt;</span> <span class="n">yj</span><span class="p">:</span>
                    <span class="n">vrrx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">Med</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
                <span class="k">elif</span> <span class="n">xi</span> <span class="o">==</span> <span class="n">yj</span><span class="p">:</span>
                    <span class="n">vrrx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">vrrx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">Med</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">valuedRankingRelation</span></div>


<div class="viewcode-block" id="Digraph.computePairwiseClusterComparison">
<a class="viewcode-back" href="../techDoc.html#digraphs.Digraph.computePairwiseClusterComparison">[docs]</a>
    <span class="k">def</span> <span class="nf">computePairwiseClusterComparison</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">K1</span><span class="p">,</span> <span class="n">K2</span><span class="p">,</span> <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes the pairwise cluster comparison credibility vector</span>
<span class="sd">        from bipolar-valued digraph g. with K1 and K2 disjoint</span>
<span class="sd">        lists of action keys from g actions disctionary.</span>
<span class="sd">        Returns the dictionary</span>
<span class="sd">        {&#39;I&#39;: Decimal(),&#39;P+&#39;:Decimal(),&#39;P-&#39;:Decimal(),&#39;R&#39; :Decimal()}</span>
<span class="sd">        where one and only one item is strictly positive.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">K1</span><span class="p">)</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">K2</span><span class="p">)))</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;K1 = &#39;</span><span class="p">,</span> <span class="n">K1</span><span class="p">,</span> <span class="s1">&#39;, K2 = &#39;</span><span class="p">,</span> <span class="n">K2</span><span class="p">,</span> <span class="s1">&#39;, n = &#39;</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>

        <span class="n">rK1SK2</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="n">rK2SK1</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">K1</span><span class="p">:</span>
            <span class="n">rx</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">K2</span><span class="p">:</span>
                <span class="n">rK1SK2</span> <span class="o">+=</span> <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span>
                <span class="n">rK2SK1</span> <span class="o">+=</span> <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;r(K1 &gt;= K2) = &#39;</span><span class="p">,</span> <span class="n">rK1SK2</span><span class="o">/</span><span class="n">n</span><span class="p">,</span> <span class="s1">&#39; r(K2 &gt;= K1) = &#39;</span><span class="p">,</span> <span class="n">rK2SK1</span><span class="o">/</span><span class="n">n</span><span class="p">)</span>

        <span class="n">rK1IK2</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">rK1SK2</span><span class="p">,</span><span class="n">rK2SK1</span><span class="p">)</span><span class="o">/</span><span class="n">n</span>
        <span class="n">rK1PK2</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">rK1SK2</span><span class="p">,</span><span class="o">-</span><span class="n">rK2SK1</span><span class="p">)</span><span class="o">/</span><span class="n">n</span>
        <span class="n">rK2PK1</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="o">-</span><span class="n">rK1SK2</span><span class="p">,</span><span class="n">rK2SK1</span><span class="p">)</span><span class="o">/</span><span class="n">n</span>
        <span class="n">rK1RK2</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="o">-</span><span class="n">rK1SK2</span><span class="p">,</span><span class="o">-</span><span class="n">rK2SK1</span><span class="p">)</span><span class="o">/</span><span class="n">n</span>

        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;r(K1 = K2) = </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">rK1IK2</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;r(K1 &gt; K2) = </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">rK1PK2</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;r(K1 &lt; K2) = </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">rK2PK1</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;r(K1 ? K2) = </span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">rK1RK2</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;I&#39;</span><span class="p">:</span> <span class="n">rK1IK2</span><span class="p">,</span> <span class="s1">&#39;P+&#39;</span><span class="p">:</span> <span class="n">rK1PK2</span><span class="p">,</span> <span class="s1">&#39;P-&#39;</span> <span class="p">:</span><span class="n">rK2PK1</span><span class="p">,</span> <span class="s1">&#39;R&#39;</span> <span class="p">:</span>  <span class="n">rK1RK2</span> <span class="p">}</span>   </div>
</div>


<span class="c1"># ------ CoverDigraph construction</span>

<div class="viewcode-block" id="CoDualDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.CoDualDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">CoDualDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Instantiates the associated codual -converse of the negation- from a deep copy of</span>
<span class="sd">    a given Digraph instance called *other*.</span>

<span class="sd">    .. note::</span>

<span class="sd">         Instantiates *self* as other.__class__ !</span>
<span class="sd">         And, deepcopies, the case given, the other.description, the other.criteria</span>
<span class="sd">         and the other.evaluation dictionaries into self.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">other</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;codual-&#39;</span><span class="o">+</span><span class="n">other</span><span class="o">.</span><span class="n">name</span>
        <span class="n">att</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">]</span>
        <span class="n">att</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
        <span class="n">att</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;relation&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">att</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">a</span><span class="p">])</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">rx</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">+</span> <span class="n">Min</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span></div>



<span class="c1"># ------ Cover construction</span>

<div class="viewcode-block" id="CoverDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.CoverDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">CoverDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Instantiates the associated cover relation -immediate neighbours- from</span>
<span class="sd">    a deep copy of a given Digraph called *other*. The Hasse diagram for instance is the cover</span>
<span class="sd">    relation of a transitive digraph.</span>

<span class="sd">    .. note::</span>
<span class="sd">    </span>
<span class="sd">        Instantiates as other.__class__ !</span>
<span class="sd">        Copies the case given the other.description, the other.criteria</span>
<span class="sd">        and the other.evaluation dictionaries into self.</span>
<span class="sd">        </span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">other</span><span class="p">,</span> <span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;cover-&#39;</span><span class="o">+</span><span class="n">other</span><span class="o">.</span><span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;codual-&#39;</span><span class="o">+</span><span class="n">other</span><span class="o">.</span><span class="n">name</span>
        <span class="n">att</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">]</span>
        <span class="n">att</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
        <span class="n">att</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;relation&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">att</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">a</span><span class="p">])</span>
        <span class="c1"># try:</span>
        <span class="c1">#     self.description = deepcopy(other.description)</span>
        <span class="c1"># except AttributeError:</span>
        <span class="c1">#     pass</span>
        <span class="c1"># try:</span>
        <span class="c1">#     self.criteria = deepcopy(other.criteria)</span>
        <span class="c1"># except AttributeError:</span>
        <span class="c1">#     pass</span>
        <span class="c1"># try:</span>
        <span class="c1">#     self.evaluation = deepcopy(other.evaluation)</span>
        <span class="c1"># except AttributeError:</span>
        <span class="c1">#     pass</span>
        <span class="c1"># self.actions = deepcopy(other.actions)</span>
        <span class="c1"># self.order = len(self.actions)</span>
        <span class="c1"># self.valuationdomain = deepcopy(other.valuationdomain)</span>
        <span class="c1">#actionsList = list(self.actions)</span>
        <span class="c1">#Max = Decimal(&#39;2&#39;)*other.valuationdomain[&#39;max&#39;]</span>
        <span class="c1">#Med = Decimal(&#39;0&#39;)</span>
        <span class="c1">#Min = -Max</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">rx</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="n">orx</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="n">ory</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">y</span> <span class="o">==</span> <span class="n">x</span><span class="p">:</span>
                    <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">coverXY</span> <span class="o">=</span> <span class="n">Max</span>
                    <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">z</span> <span class="o">!=</span> <span class="n">x</span> <span class="ow">and</span> <span class="n">z</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                            <span class="n">coverz</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">orx</span><span class="p">[</span><span class="n">z</span><span class="p">],(</span><span class="n">Max</span><span class="o">-</span><span class="n">ory</span><span class="p">[</span><span class="n">z</span><span class="p">]</span><span class="o">+</span><span class="n">Min</span><span class="p">))</span>
                            <span class="n">coverXY</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">coverXY</span><span class="p">,</span><span class="n">coverz</span><span class="p">)</span>
<span class="c1">##                            if Debug:</span>
<span class="c1">##                                print(x,y,z,other.relation[x][z],(Max-other.relation[y][z]+Min),coverz,coverXY)</span>
                    <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">orx</span><span class="p">[</span><span class="n">y</span><span class="p">],</span><span class="n">coverXY</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
        <span class="c1">#self.recodeValuation(other.valuationdomain[&#39;min&#39;],other.valuationdomain[&#39;max&#39;])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span></div>


<span class="c1"># ------ Converse construction</span>

<div class="viewcode-block" id="ConverseDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.ConverseDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">ConverseDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Instantiates the associated converse or reciprocal version from</span>
<span class="sd">    a deep copy of a given Digraph called other.</span>

<span class="sd">    Instantiates as other.__class__ !</span>

<span class="sd">    Deep copies, the case given, the description, the criteria</span>
<span class="sd">    and the evaluation dictionaries into self.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">other</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span>
        <span class="n">att</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">]</span>
        <span class="n">att</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
        <span class="n">att</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;relation&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">att</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">a</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;converse-&#39;</span><span class="o">+</span><span class="n">other</span><span class="o">.</span><span class="n">name</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">rx</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span></div>


<div class="viewcode-block" id="BalancedRankingsDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.BalancedRankingsDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">BalancedRankingsDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Instantiates the majority margins digraph from balancing</span>
<span class="sd">    a list of rankings.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">other</span><span class="p">,</span><span class="n">rankings</span><span class="p">,</span><span class="n">weights</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;-balanced-rankings&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="c1">#self.valuationdomain = deepcopy(dg1.valuationdomain)</span>
        <span class="c1">#actionsList = list(self.actions)</span>
        <span class="c1">#max = self.valuationdomain[&#39;max&#39;]</span>
        <span class="c1">#Med = self.valuationdomain[&#39;med&#39;]</span>
        <span class="n">lr</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">rankings</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lr</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">lr</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;hasIntegerValuation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">balancedRelation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">actionsList</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>                 
            <span class="n">balancedRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>                          
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="n">mxy</span> <span class="o">=</span> <span class="mi">0</span>             
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">ranking</span> <span class="ow">in</span> <span class="n">rankings</span><span class="p">:</span>
                        <span class="c1">#print(ranking[1],x,y)</span>
                        <span class="n">ix</span> <span class="o">=</span> <span class="n">ranking</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                        <span class="n">iy</span> <span class="o">=</span> <span class="n">ranking</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                        <span class="c1">#print(ix,iy)</span>
                        <span class="k">if</span> <span class="n">ix</span> <span class="o">&lt;</span> <span class="n">iy</span><span class="p">:</span>
                            <span class="n">mxy</span> <span class="o">+=</span> <span class="mi">1</span>
                        <span class="k">elif</span> <span class="n">ix</span> <span class="o">&gt;</span> <span class="n">iy</span><span class="p">:</span>
                            <span class="n">mxy</span> <span class="o">-=</span> <span class="mi">1</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">mxy</span><span class="p">)</span>
                <span class="n">balancedRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">mxy</span>
                        
                    
<span class="c1">##                    if operator == &quot;o-max&quot;:</span>
<span class="c1">##                        fx[y] = omax(Med,(dg1x[y],dg2x[y]))</span>
<span class="c1">##                    elif operator == &quot;o-average&quot;:</span>
<span class="c1">##                        fx[y] = symmetricAverage(Med,(dg1x[y],dg2x[y]),weights)</span>
<span class="c1">##                    elif operator == &quot;o-min&quot;:</span>
<span class="c1">##                        fx[y] = omin(Med,(dg1x[y],dg2x[y]))</span>
<span class="c1">##                    else:</span>
<span class="c1">##                        print(&#39;!! Error: wrong fusion operator: %s&#39; % operator)</span>
<span class="c1">##                        print(&#39;operator := &quot;o-max (default)&quot; | &quot;o-min&quot; | &quot;o-average&quot;&#39;) </span>
<span class="c1">##                        return</span>
        <span class="nb">print</span>          
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">balancedRelation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span></div>


<div class="viewcode-block" id="FusionDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.FusionDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">FusionDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Instantiates the epistemic fusion of </span>
<span class="sd">    two given Digraph instances called dg1 and dg2.</span>

<span class="sd">    Parameter:</span>

<span class="sd">        * operator := &quot;o-max (default)&quot; | &quot;o-min | o-average&quot; :</span>
<span class="sd">          symmetrix disjunctive, resp. conjunctive, resp. avarage</span>
<span class="sd">          fusion operator.</span>
<span class="sd">        * weights := [a,b]: if None weights = [1,1]</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">dg1</span><span class="p">,</span><span class="n">dg2</span><span class="p">,</span><span class="n">operator</span><span class="o">=</span><span class="s2">&quot;o-max&quot;</span><span class="p">,</span><span class="n">weights</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">digraphsTools</span> <span class="kn">import</span> <span class="n">omin</span><span class="p">,</span> <span class="n">omax</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;fusion-&#39;</span><span class="o">+</span><span class="n">dg1</span><span class="o">.</span><span class="n">name</span><span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="n">dg2</span><span class="o">.</span><span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">dg1</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dg1</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">dg1</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
        <span class="c1">#actionsList = list(self.actions)</span>
        <span class="c1">#max = self.valuationdomain[&#39;max&#39;]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">fusionRelation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">fusionRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">fx</span> <span class="o">=</span> <span class="n">fusionRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="n">dg1x</span> <span class="o">=</span> <span class="n">dg1</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="n">dg2x</span> <span class="o">=</span> <span class="n">dg2</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">:</span>
                    <span class="n">fx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">operator</span> <span class="o">==</span> <span class="s2">&quot;o-max&quot;</span><span class="p">:</span>
                        <span class="n">fx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">omax</span><span class="p">(</span><span class="n">Med</span><span class="p">,(</span><span class="n">dg1x</span><span class="p">[</span><span class="n">y</span><span class="p">],</span><span class="n">dg2x</span><span class="p">[</span><span class="n">y</span><span class="p">]))</span>
                    <span class="k">elif</span> <span class="n">operator</span> <span class="o">==</span> <span class="s2">&quot;o-average&quot;</span><span class="p">:</span>
                        <span class="n">fx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">symmetricAverage</span><span class="p">(</span><span class="n">Med</span><span class="p">,(</span><span class="n">dg1x</span><span class="p">[</span><span class="n">y</span><span class="p">],</span><span class="n">dg2x</span><span class="p">[</span><span class="n">y</span><span class="p">]),</span><span class="n">weights</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">operator</span> <span class="o">==</span> <span class="s2">&quot;o-min&quot;</span><span class="p">:</span>
                        <span class="n">fx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">omin</span><span class="p">(</span><span class="n">Med</span><span class="p">,(</span><span class="n">dg1x</span><span class="p">[</span><span class="n">y</span><span class="p">],</span><span class="n">dg2x</span><span class="p">[</span><span class="n">y</span><span class="p">]))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;!! Error: wrong fusion operator: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">operator</span><span class="p">)</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;operator := &quot;o-max (default)&quot; | &quot;o-min&quot; | &quot;o-average&quot;&#39;</span><span class="p">)</span> 
                        <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">fusionRelation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span></div>


<div class="viewcode-block" id="FusionLDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.FusionLDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">FusionLDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Instantiates the epistemic fusion a list L of Digraph instances.</span>

<span class="sd">    Parameter:</span>

<span class="sd">        * operator := &quot;o-max&quot; (default) | &quot;o-min&quot; | &quot;o-average:</span>
<span class="sd">          epistemic disjunctive, conjunctive or symmetric average fusion.</span>
<span class="sd">        * weights := [a,b, ...]: len(weights) matching len(L).</span>
<span class="sd">          If None, weights = [1 for i in range(len(L))].</span>
<span class="sd">        </span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">L</span><span class="p">,</span><span class="n">operator</span><span class="o">=</span><span class="s2">&quot;o-max&quot;</span><span class="p">,</span><span class="n">weights</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;fusion-&#39;</span><span class="o">+</span><span class="n">L</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">L</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">L</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">L</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
        <span class="c1">#actionsList = list(self.actions)</span>
        <span class="c1">#Max = self.valuationdomain[&#39;max&#39;]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">fusionRelation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">fusionRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">fx</span> <span class="o">=</span> <span class="n">fusionRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="c1">#gx = g.relation[x]</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="n">g</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">L</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">operator</span> <span class="o">==</span> <span class="s2">&quot;o-min&quot;</span><span class="p">:</span>
                    <span class="n">fx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">omin</span><span class="p">(</span><span class="n">Med</span><span class="p">,</span><span class="n">args</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">operator</span> <span class="o">==</span> <span class="s2">&quot;o-max&quot;</span><span class="p">:</span>
                    <span class="n">fx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">omax</span><span class="p">(</span><span class="n">Med</span><span class="p">,</span><span class="n">args</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">operator</span> <span class="o">==</span> <span class="s2">&quot;o-average&quot;</span><span class="p">:</span>
                    <span class="n">fx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">symmetricAverage</span><span class="p">(</span><span class="n">Med</span><span class="p">,</span><span class="n">args</span><span class="p">,</span><span class="n">weights</span><span class="p">)</span>     
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: invalid epistemic fusion operator </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">operator</span><span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;operator := &quot;o-max (default)&quot; | &quot;o-min&quot; | &quot;o-average&quot;&#39;</span><span class="p">)</span> 
                    <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">fusionRelation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span></div>


<span class="c1"># -------- Graph Border and Inner</span>

<div class="viewcode-block" id="GraphBorder">
<a class="viewcode-back" href="../techDoc.html#digraphs.GraphBorder">[docs]</a>
<span class="k">class</span> <span class="nc">GraphBorder</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Instantiates the partial digraph induced by its border,</span>
<span class="sd">    i.e. be the union of its initial and terminal kernels.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">other</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="n">Digraph</span><span class="o">.</span><span class="n">exportGraphViz</span><span class="p">(</span><span class="n">other</span><span class="p">,</span><span class="n">other</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>
        
        <span class="n">other</span><span class="o">.</span><span class="n">computePreKernels</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;other.domprekernsls&#39;</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">dompreKernels</span><span class="p">)</span>
        <span class="n">domBorderActions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">dompreKernels</span><span class="p">:</span>    
            <span class="n">domBorderActions</span> <span class="o">|=</span> <span class="n">k</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;other.absprekernels&#39;</span><span class="p">,</span><span class="n">other</span><span class="o">.</span><span class="n">abspreKernels</span><span class="p">)</span>
        <span class="n">absBorderActions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">abspreKernels</span><span class="p">:</span>    
            <span class="n">absBorderActions</span> <span class="o">|=</span> <span class="n">k</span>

        <span class="n">borderActions</span> <span class="o">=</span> <span class="n">domBorderActions</span> <span class="o">|</span> <span class="n">absBorderActions</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;border actions&#39;</span><span class="p">,</span> <span class="n">borderActions</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;_border&#39;</span>

        <span class="n">borderRelation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">borderRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1">#innerRelation[x] = {}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">borderActions</span> <span class="ow">or</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">borderActions</span><span class="p">:</span>
                    <span class="n">borderRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">borderRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>                                                            

        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">borderRelation</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="n">Digraph</span><span class="o">.</span><span class="n">exportGraphViz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;border&#39;</span><span class="p">,</span><span class="n">bestChoice</span><span class="o">=</span><span class="n">domBorderActions</span><span class="p">,</span><span class="n">worstChoice</span><span class="o">=</span><span class="n">absBorderActions</span><span class="p">)</span></div>



<div class="viewcode-block" id="GraphInner">
<a class="viewcode-back" href="../techDoc.html#digraphs.GraphInner">[docs]</a>
<span class="k">class</span> <span class="nc">GraphInner</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Instantiates the partial digraph induced by the complement of its border,</span>
<span class="sd">    i.e. the nodes not included in the union of its initial and terminal kernels.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">other</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="n">Digraph</span><span class="o">.</span><span class="n">exportGraphViz</span><span class="p">(</span><span class="n">other</span><span class="p">,</span><span class="n">other</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>

        <span class="n">other</span><span class="o">.</span><span class="n">computePreKernels</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;other.domprekernsls&#39;</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">dompreKernels</span><span class="p">)</span>
        <span class="n">domBorderActions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">dompreKernels</span><span class="p">:</span>    
            <span class="n">domBorderActions</span> <span class="o">|=</span> <span class="n">k</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;other.absprekernels&#39;</span><span class="p">,</span><span class="n">other</span><span class="o">.</span><span class="n">abspreKernels</span><span class="p">)</span>
        <span class="n">absBorderActions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="n">abspreKernels</span><span class="p">:</span>    
            <span class="n">absBorderActions</span> <span class="o">|=</span> <span class="n">k</span>

        <span class="n">borderActions</span> <span class="o">=</span> <span class="n">domBorderActions</span> <span class="o">|</span> <span class="n">absBorderActions</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;border actions&#39;</span><span class="p">,</span> <span class="n">borderActions</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;_inner&#39;</span>
        <span class="n">innerRelation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">innerRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">borderActions</span> <span class="ow">or</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">borderActions</span><span class="p">:</span>
                    <span class="n">innerRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">innerRelation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>
                                                            

        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">innerRelation</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="n">Digraph</span><span class="o">.</span><span class="n">exportGraphViz</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s1">&#39;inner&#39;</span><span class="p">,</span><span class="n">bestChoice</span><span class="o">=</span><span class="n">domBorderActions</span><span class="p">,</span><span class="n">worstChoice</span><span class="o">=</span><span class="n">absBorderActions</span><span class="p">)</span></div>



<span class="c1"># ------ Preorder construction</span>

<span class="k">class</span> <span class="nc">_Preorder</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Instantiates the associated preorder from</span>
<span class="sd">    a given Digraph called other.</span>

<span class="sd">    Instantiates as other.__class__ !</span>

<span class="sd">    Copies the case given the description, the criteria</span>
<span class="sd">    and the evaluation dictionary into self.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">other</span><span class="p">,</span><span class="n">direction</span><span class="o">=</span><span class="s2">&quot;best&quot;</span><span class="p">,</span><span class="n">ranking</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;preorder-&#39;</span><span class="o">+</span><span class="n">other</span><span class="o">.</span><span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;codual-&#39;</span><span class="o">+</span><span class="n">other</span><span class="o">.</span><span class="n">name</span>
        <span class="n">att</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">]</span>
        <span class="n">att</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
        <span class="n">att</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;relation&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">att</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">a</span><span class="p">])</span>
        <span class="c1"># try:</span>
        <span class="c1">#     self.description = deepcopy(other.description)</span>
        <span class="c1"># except AttributeError:</span>
        <span class="c1">#     pass</span>
        <span class="c1"># try:</span>
        <span class="c1">#     self.criteria = deepcopy(other.criteria)</span>
        <span class="c1"># except AttributeError:</span>
        <span class="c1">#     pass</span>
        <span class="c1"># try:</span>
        <span class="c1">#     self.evaluation = deepcopy(other.evaluation)</span>
        <span class="c1"># except AttributeError:</span>
        <span class="c1">#     pass</span>
        <span class="c1"># self.actions = deepcopy(other.actions)</span>
        <span class="c1"># self.order = len(self.actions)</span>
        <span class="c1"># self.valuationdomain = deepcopy(other.valuationdomain)</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">rx</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="n">rx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        
        <span class="k">if</span> <span class="n">ranking</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s1">&#39;best&#39;</span><span class="p">:</span>
                <span class="n">rank</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">_bestRanks</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">rank</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">_worstRanks</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">rank</span> <span class="o">=</span> <span class="n">ranking</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">actionsList</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="p">):</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">actionsList</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">rank</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">rank</span><span class="p">[</span><span class="n">y</span><span class="p">]:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                <span class="k">elif</span> <span class="n">rank</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">rank</span><span class="p">[</span><span class="n">y</span><span class="p">]:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>

<span class="c1"># ------- XOR construction</span>

<div class="viewcode-block" id="XORDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.XORDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">XORDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Instantiates the XOR digraph of two bipolar</span>
<span class="sd">    digraphs d1 and d2 of same order.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">d1</span><span class="p">,</span><span class="n">d2</span><span class="p">,</span><span class="n">Debug</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;XORDigraph&#39;</span>
        <span class="k">if</span> <span class="n">d1</span><span class="o">.</span><span class="n">order</span> <span class="o">!=</span> <span class="n">d2</span><span class="o">.</span><span class="n">order</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;XORDigraph init ERROR:</span><span class="se">\n</span><span class="s2"> the input digraphs are not of the same order !&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="n">d1</span><span class="o">.</span><span class="n">order</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">d1</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="c1">#actions = [x for x in self.actions]</span>
        <span class="n">Mind1</span> <span class="o">=</span> <span class="n">d1</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Maxd1</span> <span class="o">=</span> <span class="n">d1</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Mind2</span> <span class="o">=</span> <span class="n">d2</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Maxd2</span> <span class="o">=</span> <span class="n">d2</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">Mind1</span> <span class="o">!=</span> <span class="n">Mind2</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">Maxd1</span> <span class="o">!=</span> <span class="n">Maxd2</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;!!! valuation recoding required !!!&#39;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">d1</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">d1</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">d2</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">d2</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
            <span class="n">d1</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>
            <span class="n">d2</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>
            <span class="n">Recoded</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Recoded</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">xorRelation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">xorRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">xorx</span> <span class="o">=</span> <span class="n">xorRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="n">d1x</span> <span class="o">=</span> <span class="n">d1</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="n">d2x</span> <span class="o">=</span> <span class="n">d2</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="n">xorx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span> <span class="nb">min</span><span class="p">(</span><span class="n">d1x</span><span class="p">[</span><span class="n">y</span><span class="p">],</span><span class="o">-</span><span class="n">d2x</span><span class="p">[</span><span class="n">y</span><span class="p">]),</span> <span class="nb">min</span><span class="p">(</span><span class="n">d2x</span><span class="p">[</span><span class="n">y</span><span class="p">],</span><span class="o">-</span><span class="n">d1x</span><span class="p">[</span><span class="n">y</span><span class="p">])</span> <span class="p">)</span>
<span class="c1">##                if Debug:</span>
<span class="c1">##                    print(x,y,d1.relation[x][y],d2.relation[x][y],xorRelation[x][y])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">xorRelation</span>
        <span class="k">if</span> <span class="n">Recoded</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;-1.0&quot;</span><span class="p">),</span>
                                    <span class="s1">&#39;med&#39;</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.0&quot;</span><span class="p">),</span>
                                    <span class="s1">&#39;max&#39;</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;1.0&quot;</span><span class="p">)}</span>
            <span class="n">d1</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="n">Mind1</span><span class="p">,</span><span class="n">Maxd1</span><span class="p">)</span>
            <span class="n">d2</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="n">Mind2</span><span class="p">,</span><span class="n">Maxd2</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">d1</span><span class="o">.</span><span class="n">valuationdomain</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span></div>


<div class="viewcode-block" id="EquivalenceDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.EquivalenceDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">EquivalenceDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Instantiates the logical equivalence digraph of two bipolar</span>
<span class="sd">    digraphs d1 and d2 of same order. Returns None if d1 and d2 are of different order</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">d1</span><span class="p">,</span><span class="n">d2</span><span class="p">,</span><span class="n">Debug</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;EquivDigraph&#39;</span>
        <span class="k">if</span> <span class="n">d1</span><span class="o">.</span><span class="n">order</span> <span class="o">!=</span> <span class="n">d2</span><span class="o">.</span><span class="n">order</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;EquivDigraph init ERROR:</span><span class="se">\n</span><span class="s2"> the input digraphs are not of the same order !&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="n">d1</span><span class="o">.</span><span class="n">order</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">d1</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="c1">#actions = [x for x in self.actions]</span>

        <span class="n">Mind1</span> <span class="o">=</span> <span class="n">d1</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Maxd1</span> <span class="o">=</span> <span class="n">d1</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Mind2</span> <span class="o">=</span> <span class="n">d2</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Maxd2</span> <span class="o">=</span> <span class="n">d2</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">Mind1</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;-1.0&quot;</span><span class="p">))</span> <span class="ow">or</span> <span class="p">(</span><span class="n">Maxd1</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;1.0&quot;</span><span class="p">)):</span>
<span class="c1">##            if Debug:</span>
<span class="c1">##                print(&#39;!!! d1 valuation recoding required !!!&#39;)</span>
<span class="c1">##                print(d1.name,d1.valuationdomain)</span>
            <span class="n">d1</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>
            <span class="n">RecodedD1</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">RecodedD1</span> <span class="o">=</span> <span class="kc">False</span>
         
        <span class="k">if</span> <span class="p">(</span><span class="n">Mind2</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;-1.0&quot;</span><span class="p">))</span> <span class="ow">or</span> <span class="p">(</span><span class="n">Maxd2</span> <span class="o">!=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;1.0&quot;</span><span class="p">)):</span>
<span class="c1">##            if Debug:</span>
<span class="c1">##                print(&#39;!!! d2 valuation recoding required !!!&#39;)</span>
<span class="c1">##                print(d2.name,d2.valuationdomain)</span>
            <span class="n">d2</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>
            <span class="n">RecodedD2</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">RecodedD2</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">equivRelation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="n">equivRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">eqvx</span> <span class="o">=</span> <span class="n">equivRelation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="n">d1x</span> <span class="o">=</span> <span class="n">d1</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="n">d2x</span> <span class="o">=</span> <span class="n">d2</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="n">eqvx</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span> <span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="n">d1x</span><span class="p">[</span><span class="n">y</span><span class="p">],</span><span class="n">d2x</span><span class="p">[</span><span class="n">y</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="n">d2x</span><span class="p">[</span><span class="n">y</span><span class="p">],</span><span class="n">d1x</span><span class="p">[</span><span class="n">y</span><span class="p">])</span> <span class="p">)</span>
<span class="c1">##                if Debug and x == y:</span>
<span class="c1">##                    print(x,y,d1.relation[x][y],d2.relation[x][y],equivRelation[x][y])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">equivRelation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;-1.0&quot;</span><span class="p">),</span>
                                <span class="s1">&#39;med&#39;</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.0&quot;</span><span class="p">),</span>
                                <span class="s1">&#39;max&#39;</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;1.0&quot;</span><span class="p">)}</span>

        <span class="k">if</span> <span class="n">RecodedD1</span><span class="p">:</span>
            <span class="n">d1</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="n">Mind1</span><span class="p">,</span><span class="n">Maxd1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">RecodedD2</span><span class="p">:</span>
            <span class="n">d2</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="n">Mind2</span><span class="p">,</span><span class="n">Maxd2</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">correlation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computeCorrelation</span><span class="p">()</span>      
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>

<div class="viewcode-block" id="EquivalenceDigraph.computeCorrelation">
<a class="viewcode-back" href="../techDoc.html#digraphs.EquivalenceDigraph.computeCorrelation">[docs]</a>
    <span class="k">def</span> <span class="nf">computeCorrelation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders a dictionary with slots: &#39;correlation&#39; (tau) and &#39;determination&#39; (d),</span>
<span class="sd">        representing the ordinal correlation</span>
<span class="sd">        between the two digraphs *d1* and *d2* given as arguments </span>
<span class="sd">        to the EquivalenceDigraph constructor. </span>

<span class="sd">        See the corresponding advanced topic in the Digraph3 documentation.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">corr</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="n">dterm</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
        <span class="c1">#actions = [x for x in self.actions]</span>
        <span class="c1">#actions = self.actions</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">rx</span> <span class="ow">in</span> <span class="n">relation</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">y</span><span class="p">,</span><span class="n">rxy</span> <span class="ow">in</span> <span class="n">rx</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">y</span><span class="p">:</span>
                    <span class="n">corr</span> <span class="o">+=</span> <span class="n">rxy</span>
                    <span class="n">dterm</span> <span class="o">+=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">rxy</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dterm</span> <span class="o">&gt;</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">):</span>
            <span class="n">tau</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">corr</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">dterm</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tau</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">d</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">dterm</span><span class="p">)</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">d</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;correlation&#39;</span><span class="p">:</span> <span class="n">tau</span><span class="p">,</span>
                <span class="s1">&#39;determination&#39;</span><span class="p">:</span> <span class="n">d</span><span class="p">}</span></div>
</div>


<span class="c1"># ------- Specialisations of the Digraph class -----------</span>


<span class="c1">#class RandomDigraph(randomDigraphs.RandomDigraph):</span>
<span class="c1">#    &quot;&quot;&quot;</span>
<span class="c1">#    dummy</span>
<span class="c1">#    &quot;&quot;&quot;</span>
<span class="c1"># class _RandomDigraph(Digraph):</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     .. warning::</span>

<span class="c1">#        *Obsolete version!* Will be removed in the future. Instead, use</span>
<span class="c1">#        the new :py:class:`randomDigraphs.RandomDigraph` constructor. </span>

<span class="c1">#      &quot;&quot;&quot;</span>

<span class="c1">#     def __init__(self,order=9,arcProbability=0.5,hasIntegerValuation=True, Bipolar=False):</span>
<span class="c1">#         arcProbability = Decimal(str(arcProbability))</span>
<span class="c1">#         if arcProbability &gt; Decimal(&quot;1.0&quot;):</span>
<span class="c1">#             print(&#39;Error: arc probability too high !!&#39;)</span>
<span class="c1">#         elif arcProbability &lt; Decimal(&quot;0.0&quot;):</span>
<span class="c1">#             print(&#39;Error: arc probability too low !!&#39;)</span>
<span class="c1">#         else:</span>
<span class="c1">#             import copy</span>
<span class="c1">#             from random import random</span>
<span class="c1">#             g = EmptyDigraph(order=order, valuationdomain=(0.0,1.0))</span>
<span class="c1">#             self.actions = copy.copy(g.actions)</span>
<span class="c1">#             self.valuationdomain = copy.copy(g.valuationdomain)</span>
<span class="c1">#             self.valuationdomain[&#39;hasIntegerValuation&#39;] = hasIntegerValuation</span>
<span class="c1">#             self.relation = {}</span>
<span class="c1">#             for x in g.actions:</span>
<span class="c1">#                 self.relation[x] = {}</span>
<span class="c1">#                 for y in g.actions:</span>
<span class="c1">#                     if x == y:</span>
<span class="c1">#                         self.relation[x][y] = self.valuationdomain[&#39;min&#39;]</span>
<span class="c1">#                     else:</span>
<span class="c1">#                         if random() &lt;= arcProbability:</span>
<span class="c1">#                             self.relation[x][y] = self.valuationdomain[&#39;max&#39;]</span>
<span class="c1">#                         else:</span>
<span class="c1">#                             self.relation[x][y] = self.valuationdomain[&#39;min&#39;]</span>
<span class="c1">#             self.order = order</span>
<span class="c1">#             self.name = &#39;randomDigraph&#39;</span>
<span class="c1">#             self.gamma = self.gammaSets()</span>
<span class="c1">#             self.notGamma = self.notGammaSets()</span>

<span class="c1"># #class RandomValuationDigraph(randomDigraphs.RandomValuationDigraph):</span>
<span class="c1"># #    &quot;&quot;&quot;</span>
<span class="c1"># #    dummy</span>
<span class="c1"># #    &quot;&quot;&quot;</span>
    
<span class="c1"># class _RandomValuationDigraph(Digraph):</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     .. warning::</span>
    
<span class="c1">#        *Obsolete version!* Will be removed in the future. Instead, use</span>
<span class="c1">#        the new :py:class:`randomDigraphs.RandomValuationDigraph` constructor. </span>

<span class="c1">#     &quot;&quot;&quot;</span>

<span class="c1">#     def __init__(self,order=9, ndigits=2, Normalized=False, hasIntegerValuation=False):</span>
<span class="c1">#         import random</span>
<span class="c1">#         self.name = &#39;randomValuationDigraph&#39;</span>
<span class="c1">#         self.order = order</span>
<span class="c1">#         actionlist = list(range(order+1))</span>
<span class="c1">#         actionlist.remove(0)</span>
<span class="c1">#         actions = []</span>
<span class="c1">#         for x in actionlist:</span>
<span class="c1">#             actions.append(str(x))</span>
<span class="c1">#         self.actions = actions</span>
<span class="c1">#         precision = pow(10,ndigits)</span>
<span class="c1">#         if hasIntegerValuation:</span>
<span class="c1">#             self.valuationdomain = {&#39;min&#39;:-precision, &#39;med&#39;:0, &#39;max&#39;:precision}</span>
<span class="c1">#         else:</span>
<span class="c1">#             if Normalized:</span>
<span class="c1">#                  self.valuationdomain = {&#39;min&#39;:Decimal(&#39;-1.0&#39;), &#39;med&#39;:Decimal(&#39;0.0&#39;), &#39;max&#39;:Decimal(&#39;1.0&#39;)}</span>
<span class="c1">#             else:</span>
<span class="c1">#                 self.valuationdomain = {&#39;min&#39;:Decimal(&#39;0&#39;), &#39;med&#39;:Decimal(&#39;0.5&#39;), &#39;max&#39;:Decimal(&#39;1.0&#39;)}</span>
<span class="c1">#         self.valuationdomain[&#39;hasIntegerValuation&#39;] = hasIntegerValuation</span>
<span class="c1">#         random.seed()</span>
<span class="c1">#         relation = {}</span>
<span class="c1">#         for x in actions:</span>
<span class="c1">#             relation[x] = {}</span>
<span class="c1">#             for y in actions:</span>
<span class="c1">#                 if x == y:</span>
<span class="c1">#                     relation[x][y] = self.valuationdomain[&#39;med&#39;]</span>
<span class="c1">#                 else:</span>
<span class="c1">#                     if hasIntegerValuation:</span>
<span class="c1">#                         relation[x][y] = (2*random.randrange(start=0,stop=precision)) - precision</span>
<span class="c1">#                     elif Normalized:</span>
<span class="c1">#                         relation[x][y] = (Decimal(str(round(float(random.randrange(start=0,stop=precision))/precision,ndigits))) * Decimal(&#39;2.0&#39;)) - Decimal(&#39;1.0&#39;)</span>
<span class="c1">#                     else:</span>
<span class="c1">#                         relation[x][y] = Decimal(str(round(float(random.randrange(start=0,stop=precision))/precision,ndigits)))</span>
<span class="c1">#         self.relation = relation</span>
<span class="c1">#         self.gamma = self.gammaSets()</span>
<span class="c1">#         self.notGamma = self.notGammaSets()</span>

<span class="c1"># class _RandomWeakTournament(Digraph):</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     .. warning::</span>

<span class="c1">#        *Obsolete version!* Will be removed in the future. Instead, use</span>
<span class="c1">#        the new :py:class:`randomDigraphs.RandomWeakTournament` constructor. </span>

<span class="c1">#     &quot;&quot;&quot;</span>

<span class="c1">#     def __init__(self,order=10,ndigits=2,hasIntegerValuation=False,weaknessDegree=0.25,Comments=False):</span>
<span class="c1">#         import random</span>
<span class="c1">#         from decimal import Decimal</span>

<span class="c1">#         self.name = &#39;randomWeakTournament&#39;</span>
<span class="c1">#         self.order = order</span>
<span class="c1">#         actionlist = list(range(order+1))</span>
<span class="c1">#         actionlist.remove(0)</span>
<span class="c1">#         actions = []</span>
<span class="c1">#         for x in actionlist:</span>
<span class="c1">#             actions.append(str(x))</span>
<span class="c1">#         self.actions = actions</span>
<span class="c1">#         random.seed()</span>
<span class="c1">#         Max = pow(10,ndigits)</span>
<span class="c1">#         Min = - Max</span>
<span class="c1">#         Med = 0</span>
<span class="c1">#         precision = Max</span>
<span class="c1">#         dPrecision = Decimal(str(precision))</span>
<span class="c1">#         if hasIntegerValuation:</span>
<span class="c1">#             self.valuationdomain = {&#39;hasIntegerValuation&#39;:True, &#39;min&#39;:Decimal(str(Min)), &#39;med&#39;:Decimal(&#39;0&#39;), &#39;max&#39;:Decimal(str(Max))}</span>
<span class="c1">#         else:</span>
<span class="c1">#             self.valuationdomain = {&#39;hasIntegerValuation&#39;:False, &#39;min&#39;:Decimal(&#39;-1.0&#39;), &#39;med&#39;:Decimal(&#39;0.0&#39;), &#39;max&#39;:Decimal(&#39;1.0&#39;)}</span>
<span class="c1">#         relation = {}</span>
<span class="c1">#         for x in actions:</span>
<span class="c1">#             relation[x] = {}</span>
<span class="c1">#             for y in actions:</span>
<span class="c1">#                 relation[x][y] = self.valuationdomain[&#39;med&#39;]</span>

<span class="c1">#         actionsList = [x for x in actions]</span>
<span class="c1">#         random.shuffle(actionsList)</span>
<span class="c1">#         weaknessDegree = Decimal(str(weaknessDegree))</span>
<span class="c1">#         forwardDegree = (Decimal(&#39;1.0&#39;) - weaknessDegree)/Decimal(&#39;2&#39;)</span>

<span class="c1">#         #print actionsList</span>
<span class="c1">#         n = len(actionsList)</span>
<span class="c1">#         for i in range(n):</span>
<span class="c1">#             for j in range(i,n):</span>
<span class="c1">#                 #print i,j</span>
<span class="c1">#                 if i == j:</span>
<span class="c1">#                     #print actionsList[i],actionsList[j]</span>
<span class="c1">#                     relation[actionsList[i]][actionsList[j]] = self.valuationdomain[&#39;med&#39;]</span>
<span class="c1">#                 else:</span>
<span class="c1">#                     u = Decimal(str(random.randint(0,precision)))/dPrecision</span>
<span class="c1">#                     u1 = Decimal(str(random.randint(0,precision)))</span>
<span class="c1">#                     u2 = Decimal(str(random.randint(0,precision)))</span>

<span class="c1">#                     if u &lt; weaknessDegree: # i = j</span>
<span class="c1">#                         if hasIntegerValuation:</span>
<span class="c1">#                             randeval1 = u1</span>
<span class="c1">#                             randeval2 = u2</span>
<span class="c1">#                         else:</span>
<span class="c1">#                             randeval1 = u1/dPrecision</span>
<span class="c1">#                             randeval2 = u2/dPrecision</span>

<span class="c1">#                     elif u &lt; forwardDegree: # i &gt; j</span>
<span class="c1">#                         if hasIntegerValuation:</span>
<span class="c1">#                             randeval1 = u1</span>
<span class="c1">#                             randeval2 = Min + u2</span>
<span class="c1">#                         else:</span>
<span class="c1">#                             randeval1 = u1/dPrecision</span>
<span class="c1">#                             randeval2 = (Min + u2)/dPrecision</span>

<span class="c1">#                     else: # j &gt; i</span>
<span class="c1">#                         if hasIntegerValuation:</span>
<span class="c1">#                             randeval1 = Min + u1</span>
<span class="c1">#                             randeval2 = u2</span>
<span class="c1">#                         else:</span>
<span class="c1">#                             randeval1 = (Min + u1)/dPrecision</span>
<span class="c1">#                             randeval2 = u2/dPrecision</span>

<span class="c1">#                     if hasIntegerValuation:</span>
<span class="c1">#                         relation[actionsList[i]][actionsList[j]] = Decimal(str(randeval1))</span>
<span class="c1">#                         relation[actionsList[j]][actionsList[i]] = Decimal(str(randeval2))</span>
<span class="c1">#                     else:</span>
<span class="c1">#                         relation[actionsList[i]][actionsList[j]] = Decimal(str(round(randeval1,ndigits)))</span>
<span class="c1">#                         relation[actionsList[j]][actionsList[i]] = Decimal(str(round(randeval2,ndigits)))</span>


<span class="c1">#         self.relation = relation</span>
<span class="c1">#         self.gamma = self.gammaSets()</span>
<span class="c1">#         self.notGamma = self.notGammaSets()</span>

<span class="c1">#         if Comments:</span>
<span class="c1">#              print(self.order*(self.order-1), self.computeRelationalStructure())</span>


<span class="c1"># class _RandomTournament(Digraph):</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#    .. warning::</span>

<span class="c1">#        *Obsolete version!* Will be removed in the future. Instead, use</span>
<span class="c1">#        the new :py:class:`randomDigraphs.RandomTournament` constructor. </span>

<span class="c1">#     &quot;&quot;&quot;</span>

<span class="c1">#     def __init__(self,order=10,ndigits=2,isCrisp=True,valuationDomain=None):</span>
<span class="c1">#         import random</span>
<span class="c1">#         from decimal import Decimal</span>

<span class="c1">#         self.name = &#39;randomTournament&#39;</span>
<span class="c1">#         self.order = order</span>
<span class="c1">#         actionlist = list(range(order+1))</span>
<span class="c1">#         actionlist.remove(0)</span>
<span class="c1">#         actions = []</span>
<span class="c1">#         for x in actionlist:</span>
<span class="c1">#             actions.append(str(x))</span>
<span class="c1">#         self.actions = actions</span>
<span class="c1">#         if valuationDomain is None:</span>
<span class="c1">#             self.valuationdomain = {&#39;min&#39;:Decimal(&#39;-1.0&#39;), &#39;med&#39;:Decimal(&#39;0.0&#39;), &#39;max&#39;:Decimal(&#39;1.0&#39;)}</span>
<span class="c1">#         else:</span>
<span class="c1">#             self.valuationdomain = valuationDomain</span>
<span class="c1">#         valuationRange = self.valuationdomain[&#39;max&#39;] - self.valuationdomain[&#39;min&#39;]</span>
<span class="c1">#         relation = {}</span>
<span class="c1">#         for x in actions:</span>
<span class="c1">#             relation[x] = {}</span>
<span class="c1">#             for y in actions:</span>
<span class="c1">#                 relation[x][y] = Decimal(&#39;0.0&#39;)</span>
<span class="c1">#         random.seed()</span>
<span class="c1">#         precision = pow(10,ndigits)</span>
<span class="c1">#         actionsList = [x for x in actions]</span>
<span class="c1">#         #print actionsList</span>
<span class="c1">#         n = len(actionsList)</span>
<span class="c1">#         for i in range(n):</span>
<span class="c1">#             for j in range(i,n):</span>
<span class="c1">#                 #print i,j</span>
<span class="c1">#                 if i == j:</span>
<span class="c1">#                     #print actionsList[i],actionsList[j]</span>
<span class="c1">#                     relation[actionsList[i]][actionsList[j]] = self.valuationdomain[&#39;med&#39;]</span>
<span class="c1">#                 else:</span>
<span class="c1">#                     u = random.randint(0,precision)</span>
<span class="c1">#                     if isCrisp:</span>
<span class="c1">#                         if u &lt; Decimal(str(precision))/Decimal(&#39;2&#39;):</span>
<span class="c1">#                             relation[actionsList[i]][actionsList[j]] = self.valuationdomain[&#39;min&#39;]</span>
<span class="c1">#                             relation[actionsList[j]][actionsList[i]] = self.valuationdomain[&#39;max&#39;]</span>
<span class="c1">#                         else:</span>
<span class="c1">#                             relation[actionsList[i]][actionsList[j]] = self.valuationdomain[&#39;max&#39;]</span>
<span class="c1">#                             relation[actionsList[j]][actionsList[i]] = self.valuationdomain[&#39;min&#39;]</span>
<span class="c1">#                     else:</span>
<span class="c1">#                         randeval = self.valuationdomain[&#39;min&#39;] + Decimal(str(u))/Decimal(str(precision))*valuationRange</span>
<span class="c1">#                         valuation = Decimal(str(round(randeval,ndigits)))</span>
<span class="c1">#                         relation[actionsList[i]][actionsList[j]] = valuation</span>
<span class="c1">#                         relation[actionsList[j]][actionsList[i]] = self.valuationdomain[&#39;max&#39;] - valuation + self.valuationdomain[&#39;min&#39;]</span>

<span class="c1">#         self.relation = relation</span>
<span class="c1">#         self.gamma = self.gammaSets()</span>
<span class="c1">#         self.notGamma = self.notGammaSets()</span>


<span class="c1"># class _RandomFixedSizeDigraph(Digraph):</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     .. warning::</span>

<span class="c1">#        *Obsolete version!* Will be removed in the future. Instead, use</span>
<span class="c1">#        the new :py:class:`randomDigraphs.RandomFixedSizeDigraph` constructor. </span>

<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     def __init__(self,order=7,size=14):</span>
<span class="c1">#         import random,copy</span>
<span class="c1">#         # check feasability</span>
<span class="c1">#         r = (order * order) - order</span>
<span class="c1">#         if size &gt; r :</span>
<span class="c1">#             print(&#39;Graph not feasable (1) !!&#39;)</span>
<span class="c1">#         else:</span>
<span class="c1">#             self.name = &#39;randomFixedSize&#39;</span>
<span class="c1">#             self.order = order</span>
<span class="c1">#             actionlist = list(range(order+1))</span>
<span class="c1">#             actionlist.remove(0)</span>
<span class="c1">#             actions = []</span>
<span class="c1">#             for x in actionlist:</span>
<span class="c1">#                 actions.append(str(x))</span>
<span class="c1">#             self.actions = actions</span>
<span class="c1">#             self.valuationdomain = {&#39;min&#39;:Decimal(&#39;-1.0&#39;), &#39;med&#39;:Decimal(&#39;0.0&#39;), &#39;max&#39;:Decimal(&#39;1.0&#39;)}</span>
<span class="c1">#             Min = self.valuationdomain[&#39;min&#39;]</span>
<span class="c1">#             Max = self.valuationdomain[&#39;max&#39;]</span>
<span class="c1">#             random.seed()</span>
<span class="c1">#             allarcs = []</span>
<span class="c1">#             relation = {}</span>
<span class="c1">#             for x in actions:</span>
<span class="c1">#                 relation[x] = {}</span>
<span class="c1">#                 for y in actions:</span>
<span class="c1">#                     relation[x][y] = Min</span>
<span class="c1">#                     if x != y:</span>
<span class="c1">#                         allarcs.append((x,y))</span>
<span class="c1">#             for i in range(size):</span>
<span class="c1">#                 arc = random.choice(allarcs)</span>
<span class="c1">#                 relation[arc[0]][arc[1]] = Max</span>
<span class="c1">#                 allarcs.remove(arc)</span>
<span class="c1">#             self.relation = relation.copy()</span>
<span class="c1">#             self.gamma = self.gammaSets()</span>
<span class="c1">#             self.notGamma = self.notGammaSets()</span>

<span class="c1"># class _RandomFixedDegreeSequenceDigraph(Digraph):</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     .. warning::</span>

<span class="c1">#        *Obsolete version!* Will be removed in the future. Instead, use</span>
<span class="c1">#        the new :py:class:`randomDigraphs.RandomFixedDegreeSequenceDigraph` constructor. </span>

<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     def __init__(self,order=7,degreeSequence=[3,3,2,2,1,1,0]):</span>
<span class="c1">#         import random,copy</span>
<span class="c1">#         # check feasability</span>
<span class="c1">#         degree = max(degreeSequence)</span>
<span class="c1">#         if degree &gt;= order:</span>
<span class="c1">#             print(&#39;!!! Graph not feasable (1) !!!&#39;)</span>
<span class="c1">#             print(&#39;Maximum degree &gt; order !!!&#39;)</span>
<span class="c1">#         else:</span>
<span class="c1">#             sumdegrees = 0</span>
<span class="c1">#             for i in range(order):</span>
<span class="c1">#                 sumdegrees += degreeSequence[i]</span>
<span class="c1">#             r = sumdegrees % 2</span>
<span class="c1">#             if r == 1:</span>
<span class="c1">#                 print(&#39;!!! Graph not feasable (1) !!!&#39;)</span>
<span class="c1">#                 print(&#39;Odd sum of degrees : &#39;,sumdegrees,&#39;!!&#39;)</span>
<span class="c1">#             else:</span>
<span class="c1">#                 self.name = &#39;randomFixedDegreeSequence&#39;</span>
<span class="c1">#                 self.order = order</span>
<span class="c1">#                 actionlist = list(range(order+1))</span>
<span class="c1">#                 actionlist.remove(0)</span>
<span class="c1">#                 actions = []</span>
<span class="c1">#                 for x in actionlist:</span>
<span class="c1">#                     actions.append(str(x))</span>
<span class="c1">#                 self.actions = actions</span>
<span class="c1">#                 self.valuationdomain = {&#39;min&#39;:Decimal(&#39;-1.0&#39;), &#39;med&#39;:Decimal(&#39;0.0&#39;), &#39;max&#39;:Decimal(&#39;1.0&#39;)}</span>
<span class="c1">#                 Min = self.valuationdomain[&#39;min&#39;]</span>
<span class="c1">#                 Max = self.valuationdomain[&#39;max&#39;]</span>
<span class="c1">#                 relation = {}</span>
<span class="c1">#                 for x in actions:</span>
<span class="c1">#                     relation[x] = {}</span>
<span class="c1">#                     for y in actions:</span>
<span class="c1">#                         relation[x][y] = Min</span>
<span class="c1">#                 random.seed()</span>
<span class="c1">#                 # create a random pairing</span>
<span class="c1">#                 feasable = 0</span>
<span class="c1">#                 s = 0</span>
<span class="c1">#                 while feasable == 0 and s &lt; 100:</span>
<span class="c1">#                     s += 1</span>
<span class="c1">#                     edges = []</span>
<span class="c1">#                     cells = []</span>
<span class="c1">#                     degreeseq = {}</span>
<span class="c1">#                     i = 0</span>
<span class="c1">#                     for x in actions:</span>
<span class="c1">#                         degreeseq[x] = degreeSequence[i]</span>
<span class="c1">#                         cells.append((x,degree))</span>
<span class="c1">#                         i += 1</span>
<span class="c1">#                     while len(cells) &gt; 1:</span>
<span class="c1">#                         cell = random.choice(cells)</span>
<span class="c1">#                         cells.remove(cell)</span>
<span class="c1">#                         xc = cell[0]</span>
<span class="c1">#                         edgescur = []</span>
<span class="c1">#                         copycells = copy.copy(cells)</span>
<span class="c1">#                         while degreeseq[xc] &gt; 0 and len(copycells) &gt; 0:</span>
<span class="c1">#                             other = random.choice(copycells)</span>
<span class="c1">#                             copycells.remove(other)</span>
<span class="c1">#                             edgescur.append((xc,other[0]))</span>
<span class="c1">#                             degreeseq[other[0]] -= 1</span>
<span class="c1">#                             degreeseq[xc] -= 1</span>
<span class="c1">#                         edges += edgescur</span>
<span class="c1">#                         for c in cells:</span>
<span class="c1">#                             if degreeseq[c[0]] == 0:</span>
<span class="c1">#                                 cells.remove(c)</span>
<span class="c1">#                     feasable = 1</span>
<span class="c1">#                     for x in actions:</span>
<span class="c1">#                         if degreeseq[x] != 0:</span>
<span class="c1">#                             feasable = 0</span>
<span class="c1">#                             break</span>
<span class="c1">#                 if feasable == 0:</span>
<span class="c1">#                     print(&#39;Graph not feasable (2) !!&#39;)</span>
<span class="c1">#                 else:</span>
<span class="c1">#                     for edge in edges:</span>
<span class="c1">#                         relation[edge[0]][edge[1]] = Max</span>
<span class="c1">#                         relation[edge[1]][edge[0]] = Max</span>
<span class="c1">#                     self.relation = relation.copy()</span>
<span class="c1">#                     self.gamma = self.gammaSets()</span>

<span class="c1"># class RandomTree(Digraph):</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     .. warning::</span>

<span class="c1">#        *Obsolete version!* Will be removed in the future. Instead, use</span>
<span class="c1">#        the new :py:class:`graphs.RandomTree` constructor. </span>

<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     def __init__(self,numberOfNodes=5, ndigits=2, hasIntegerValuation=True):</span>
<span class="c1">#         from random import choice</span>
<span class="c1">#         from decimal import Decimal</span>
<span class="c1">#         self.name = &#39;randomTree&#39;</span>
<span class="c1">#         self.order = numberOfNodes</span>
<span class="c1">#         actions = {}</span>
<span class="c1">#         nodes = [str(x+1) for x in range(numberOfNodes)]</span>
<span class="c1">#         for x in nodes:</span>
<span class="c1">#             actions[x] = {&#39;name&#39;: &#39;node %s&#39; % x}</span>
<span class="c1">#         self.actions = actions</span>
<span class="c1">#         print(actions)</span>
<span class="c1">#         precision = pow(10,ndigits)</span>
<span class="c1">#         if hasIntegerValuation:</span>
<span class="c1">#             self.valuationdomain = {&#39;min&#39;:-precision, &#39;med&#39;:0, &#39;max&#39;:precision}</span>
<span class="c1">#         else:</span>
<span class="c1">#             self.valuationdomain = {&#39;min&#39;:Decimal(&#39;-1.0&#39;), &#39;med&#39;:Decimal(&#39;0.0&#39;), &#39;max&#39;:Decimal(&#39;1.0&#39;)}</span>
<span class="c1">#         self.valuationdomain[&#39;hasIntegerValuation&#39;] = hasIntegerValuation</span>
<span class="c1">#         # init relation dictionary</span>
<span class="c1">#         relation = {}</span>
<span class="c1">#         nodeKeys = [x for x in actions]</span>
<span class="c1">#         print(nodeKeys)</span>
<span class="c1">#         for x in nodeKeys:</span>
<span class="c1">#             relation[x] = {}</span>
<span class="c1">#             for y in nodeKeys:</span>
<span class="c1">#                 relation[x][y] = self.valuationdomain[&#39;min&#39;]</span>
<span class="c1">#         nodes = [x for x in range(len(nodeKeys))]</span>
<span class="c1">#         pruefer = []</span>
<span class="c1">#         for i in range(len(nodeKeys)-2):</span>
<span class="c1">#             pruefer.append(choice(nodes))</span>
<span class="c1">#         print(pruefer)</span>
<span class="c1">#         pairs = self.prufer_to_tree(pruefer)</span>
<span class="c1">#         for (i,j) in pairs:</span>
<span class="c1">#             relation[str(i+1)][str(j+1)] = Decimal(&#39;1.0&#39;)</span>
<span class="c1">#             relation[str(j+1)][str(i+1)] = Decimal(&#39;1.0&#39;)</span>
<span class="c1">#         self.relation = relation</span>
<span class="c1">#         self.gamma = self.gammaSets()</span>
<span class="c1">#         self.notGamma = self.notGammaSets()</span>

<span class="c1">#     def prufer_to_tree(self,a):</span>
<span class="c1">#         tree = []</span>
<span class="c1">#         T = list(range(0, len(a)+2))</span>
<span class="c1">#         print(T)</span>
<span class="c1">#         # the degree of each node is how many times it appears</span>
<span class="c1">#         # in the sequence</span>
<span class="c1">#         deg = [1]*len(T)</span>
<span class="c1">#         print(deg)</span>
<span class="c1">#         for i in a: deg[i] += 1</span>

<span class="c1">#         # for each node label i in a, find the first node j with degree 1 and add</span>
<span class="c1">#         # the edge (j, i) to the tree</span>
<span class="c1">#         for i in a:</span>
<span class="c1">#             for j in T:</span>
<span class="c1">#                 if deg[j] == 1:</span>
<span class="c1">#                     tree.append((i,j))</span>
<span class="c1">#                     # decrement the degrees of i and j</span>
<span class="c1">#                     deg[i] -= 1</span>
<span class="c1">#                     deg[j] -= 1</span>
<span class="c1">#                     break</span>

<span class="c1">#         last = [x for x in T if deg[x] == 1]</span>
<span class="c1">#         tree.append((last[0],last[1]))</span>

<span class="c1">#         return tree</span>


<span class="k">class</span> <span class="nc">_RandomRegularDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    .. warning::</span>

<span class="sd">       *Obsolete version!* Will be removed in the future. Instead, use</span>
<span class="sd">       the new :py:class:`randomDigraphs.RandomRegularDigraph` constructor. </span>


<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">order</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span><span class="n">degree</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">random</span><span class="o">,</span><span class="nn">copy</span>
        <span class="c1"># check feasability</span>
        <span class="n">r</span> <span class="o">=</span> <span class="p">(</span><span class="n">order</span> <span class="o">*</span> <span class="n">degree</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span>
        <span class="k">if</span> <span class="n">degree</span> <span class="o">&gt;=</span> <span class="n">order</span> <span class="ow">or</span> <span class="n">r</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Graph not feasable (1) !!&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;randomRegular&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="n">order</span>
            <span class="n">actionlist</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">order</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
            <span class="n">actionlist</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionlist</span><span class="p">:</span>
                <span class="n">actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">),</span> <span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">),</span> <span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)}</span>
            <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">()</span>
            <span class="c1"># create a random pairing</span>
            <span class="n">feasable</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">while</span> <span class="n">feasable</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">s</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">edges</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">cells</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">degreeseq</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                    <span class="n">degreeseq</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">degree</span>
                    <span class="n">cells</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">degree</span><span class="p">))</span>
                <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">cells</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">cell</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">cells</span><span class="p">)</span>
                    <span class="n">cells</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">cell</span><span class="p">)</span>
                    <span class="n">xc</span> <span class="o">=</span> <span class="n">cell</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">edgescur</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="n">copycells</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">cells</span><span class="p">)</span>
                    <span class="k">while</span> <span class="n">degreeseq</span><span class="p">[</span><span class="n">xc</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">copycells</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">other</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">copycells</span><span class="p">)</span>
                        <span class="n">copycells</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
                        <span class="n">edgescur</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">xc</span><span class="p">,</span><span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                        <span class="n">degreeseq</span><span class="p">[</span><span class="n">other</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">-=</span> <span class="mi">1</span>
                        <span class="n">degreeseq</span><span class="p">[</span><span class="n">xc</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
                    <span class="n">edges</span> <span class="o">+=</span> <span class="n">edgescur</span>
                    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cells</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">degreeseq</span><span class="p">[</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="n">cells</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
                <span class="n">feasable</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">degreeseq</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">feasable</span> <span class="o">=</span> <span class="mi">0</span>
                        <span class="k">break</span>
            <span class="k">if</span> <span class="n">feasable</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Graph not feasable (2) !!&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">edges</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">edge</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="n">edge</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">edge</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="n">edge</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">componentslist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="p">()</span>

<div class="viewcode-block" id="EmptyDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.EmptyDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">EmptyDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameters:</span>
<span class="sd">        order &gt; 0 (default=5); valuationdomain =(Min,Max).</span>

<span class="sd">    Specialization of the general Digraph class for generating</span>
<span class="sd">    temporary empty graphs of given order in {-1,0,1}.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">order</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)):</span>
        <span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span><span class="nn">array</span><span class="o">,</span><span class="nn">copy</span>
        <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;empty&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="n">order</span>
        <span class="n">actionlist</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">order</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">actionlist</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionlist</span><span class="p">:</span>
            <span class="n">actions</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">((</span><span class="n">valuationdomain</span><span class="p">[</span><span class="mi">0</span><span class="p">])))</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">((</span><span class="n">valuationdomain</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="p">(</span><span class="n">Max</span> <span class="o">+</span> <span class="n">Min</span><span class="p">)</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Min</span><span class="p">,</span><span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Med</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Max</span><span class="p">}</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span></div>


<div class="viewcode-block" id="IndeterminateDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.IndeterminateDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">IndeterminateDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameters: order &gt; 0; valuationdomain =(Min,Max).</span>
<span class="sd">    Specialization of the general Digraph class for generating</span>
<span class="sd">    temporary empty graphs of order 5 in {-1,0,1}.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">other</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">nodes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">order</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)):</span>
        <span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span><span class="nn">array</span><span class="o">,</span><span class="nn">copy</span>
        <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;indeterminate&#39;</span>

        <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">order</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">actions</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">valuationdomain</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
            <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
            

        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">nodes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">actions</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
                    <span class="n">actions</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)}</span>            
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="n">order</span>
                <span class="n">actionlist</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">order</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
                <span class="n">actionlist</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">actions</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionlist</span><span class="p">:</span>
                    <span class="n">actions</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)}</span>

            <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">valuationdomain</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
            <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">valuationdomain</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
            <span class="n">Med</span> <span class="o">=</span> <span class="p">(</span><span class="n">Max</span> <span class="o">+</span> <span class="n">Min</span><span class="p">)</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Min</span><span class="p">,</span><span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Med</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Max</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>

        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span></div>


<div class="viewcode-block" id="CirculantDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.CirculantDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">CirculantDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialization of the general Digraph class for generating</span>
<span class="sd">    temporary circulant digraphs.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        | order &gt; 0;</span>
<span class="sd">        | valuationdomain ={&#39;min&#39;:m, &#39;max&#39;:M};</span>
<span class="sd">        | circulant connections = list of positive</span>
<span class="sd">               and/or negative circular shifts of value 1 to n.</span>

<span class="sd">    Default instantiation C_7:</span>
<span class="sd">        | order = 7,</span>
<span class="sd">        | valuationdomain = {&#39;min&#39;:-1.0,&#39;max&#39;:1.0},</span>
<span class="sd">        | circulants = [-1,1].</span>

<span class="sd">    Example session::</span>

<span class="sd">        &gt;&gt;&gt; from digraphs import CirculantDigraph</span>
<span class="sd">        &gt;&gt;&gt; c8 = CirculantDigraph(order=8,circulants=[1,3])</span>
<span class="sd">        &gt;&gt;&gt; c8.exportGraphViz(&#39;c8&#39;)</span>
<span class="sd">        *---- exporting a dot file for GraphViz tools ---------*</span>
<span class="sd">        Exporting to c8.dot</span>
<span class="sd">        circo -Tpng c8.dot -o c8.png</span>
<span class="sd">        # see below the graphviz drawing</span>
<span class="sd">        &gt;&gt;&gt; c8.showChordlessCircuits()</span>
<span class="sd">        No circuits yet computed. Run computeChordlessCircuits()!</span>
<span class="sd">        &gt;&gt;&gt; c8.computeChordlessCircuits()</span>
<span class="sd">        ...</span>
<span class="sd">        &gt;&gt;&gt; c8.showChordlessCircuits()</span>
<span class="sd">        *---- Chordless circuits ----*</span>
<span class="sd">        [&#39;1&#39;, &#39;4&#39;, &#39;7&#39;, &#39;8&#39;] , credibility : 1.0</span>
<span class="sd">        [&#39;1&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;] , credibility : 1.0</span>
<span class="sd">        [&#39;1&#39;, &#39;4&#39;, &#39;5&#39;, &#39;8&#39;] , credibility : 1.0</span>
<span class="sd">        [&#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;6&#39;] , credibility : 1.0</span>
<span class="sd">        [&#39;1&#39;, &#39;2&#39;, &#39;5&#39;, &#39;6&#39;] , credibility : 1.0</span>
<span class="sd">        [&#39;1&#39;, &#39;2&#39;, &#39;5&#39;, &#39;8&#39;] , credibility : 1.0</span>
<span class="sd">        [&#39;2&#39;, &#39;3&#39;, &#39;6&#39;, &#39;7&#39;] , credibility : 1.0</span>
<span class="sd">        [&#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;7&#39;] , credibility : 1.0</span>
<span class="sd">        [&#39;2&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;] , credibility : 1.0</span>
<span class="sd">        [&#39;3&#39;, &#39;6&#39;, &#39;7&#39;, &#39;8&#39;] , credibility : 1.0</span>
<span class="sd">        [&#39;3&#39;, &#39;4&#39;, &#39;7&#39;, &#39;8&#39;] , credibility : 1.0</span>
<span class="sd">        [&#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;8&#39;] , credibility : 1.0</span>
<span class="sd">        12 circuits.</span>
<span class="sd">        &gt;&gt;&gt;</span>
<span class="sd">        </span>
<span class="sd">    .. image:: c8.png</span>
<span class="sd">        :alt: circulant [1,3] digraph</span>
<span class="sd">        :width: 300 px</span>
<span class="sd">        :align: center</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">order</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
                 <span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">),</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)},</span>
                 <span class="n">circulants</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="n">IndeterminateInnerPart</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span><span class="nn">array</span><span class="o">,</span><span class="nn">copy</span>
        <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;c&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="n">order</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">circulants</span> <span class="o">=</span> <span class="n">circulants</span>
        <span class="n">actionlist</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">order</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionlist</span><span class="p">:</span>
            <span class="n">actions</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]))</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]))</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="p">(</span><span class="n">Max</span> <span class="o">+</span> <span class="n">Min</span><span class="p">)</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Min</span><span class="p">,</span><span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Med</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Max</span><span class="p">}</span>
        <span class="n">arcs</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># circulant arcs</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionlist</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">circulants</span><span class="p">:</span>
                <span class="n">r</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span> <span class="o">%</span> <span class="n">order</span>
                <span class="k">if</span> <span class="n">r</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">arcs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">order</span><span class="p">)))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">arcs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">r</span><span class="p">)))</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1"># instantiate relation</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">IndeterminateInnerPart</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span> 
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="ow">in</span> <span class="n">arcs</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">arcs</span><span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>

<div class="viewcode-block" id="CirculantDigraph.showShort">
<a class="viewcode-back" href="../techDoc.html#digraphs.CirculantDigraph.showShort">[docs]</a>
    <span class="k">def</span> <span class="nf">showShort</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----- show short --------------*&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Circulant graph : &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Order           : &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Circulants      : &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">circulants</span><span class="p">)</span></div>
</div>




<div class="viewcode-block" id="KneserDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.KneserDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">KneserDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialization of the general Digraph class for generating</span>
<span class="sd">    temporary Kneser digraphs</span>

<span class="sd">    Parameters:</span>
<span class="sd">        | n &gt; 0; n &gt; j &gt; 0;</span>
<span class="sd">        | valuationdomain ={&#39;min&#39;:m, &#39;max&#39;:M}.</span>

<span class="sd">    Default instantiation as Petersen graph:</span>
<span class="sd">        n = 5, j = 2, valuationdomain = {&#39;min&#39;:-1.0,&#39;max&#39;:1.0}.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">n</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">j</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="mf">1.0</span><span class="p">}):</span>
        <span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span><span class="nn">array</span><span class="o">,</span><span class="nn">copy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;kneser-&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">n</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">j</span> <span class="o">=</span> <span class="n">j</span>
        <span class="n">na</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">na</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">ob</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">na</span><span class="p">:</span>
            <span class="n">ob</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
        <span class="n">obActions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kChoices</span><span class="p">(</span><span class="n">ob</span><span class="p">,</span><span class="n">j</span><span class="p">):</span>
            <span class="n">obActions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
        <span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">obActions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="n">order</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
            <span class="n">actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]))</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]))</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="p">(</span><span class="n">Max</span> <span class="o">+</span> <span class="n">Min</span><span class="p">)</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Min</span><span class="p">,</span><span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Med</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Max</span><span class="p">}</span>
        <span class="n">aindex</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
            <span class="n">aindex</span><span class="p">[</span><span class="n">actions</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span><span class="o">=</span><span class="n">obActions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1"># instantiate relation</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">aindex</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">aindex</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="nb">set</span><span class="p">():</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>

<div class="viewcode-block" id="KneserDigraph.showShort">
<a class="viewcode-back" href="../techDoc.html#digraphs.KneserDigraph.showShort">[docs]</a>
    <span class="k">def</span> <span class="nf">showShort</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----- show short --------------*&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Kneser graph    : &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;n               : &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;j               : &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">j</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;order           : &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="GridDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.GridDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">GridDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialization of the general Digraph class for generating</span>
<span class="sd">    temporary Grid digraphs of dimension n times m.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        n,m &gt; 0; valuationdomain ={&#39;min&#39;:m, &#39;max&#39;:M}.</span>

<span class="sd">    Default instantiation (5 times 5 Grid Digraph):</span>
<span class="sd">        n = 5, m=5, valuationdomain = {&#39;min&#39;:-1.0,&#39;max&#39;:1.0}.</span>

<span class="sd">    Randomly orientable with hasRandomOrientation=True (default=False).</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">n</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">m</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="mf">1.0</span><span class="p">},</span>
                 <span class="n">hasRandomOrientation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">hasMedianSplitOrientation</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span><span class="nn">array</span><span class="o">,</span><span class="nn">copy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;grid-&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">n</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">m</span> <span class="o">=</span> <span class="n">m</span>
        <span class="n">na</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">na</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">ma</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">m</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">ma</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">gridNodes</span><span class="o">=</span><span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">na</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ma</span><span class="p">:</span>
                <span class="n">action</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                <span class="n">gridNodes</span><span class="p">[</span><span class="n">action</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
                <span class="n">actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
        <span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="n">order</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gridNodes</span> <span class="o">=</span> <span class="n">gridNodes</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]))</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]))</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="p">(</span><span class="n">Max</span> <span class="o">+</span> <span class="n">Min</span><span class="p">)</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Min</span><span class="p">,</span><span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Med</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Max</span><span class="p">}</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1"># instantiate relation</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span> <span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                    <span class="k">elif</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                <span class="k">elif</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                    <span class="k">elif</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>

        <span class="k">if</span> <span class="n">hasRandomOrientation</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">random</span>
            <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                        <span class="k">if</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span> <span class="p">:</span>
                            <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                        <span class="k">elif</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                    <span class="k">elif</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
                        <span class="k">if</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                        <span class="k">elif</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>

        <span class="k">elif</span> <span class="n">hasMedianSplitOrientation</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
                        <span class="k">if</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span> <span class="p">:</span>
                            <span class="k">if</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                        <span class="k">elif</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>

                    <span class="k">elif</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
                        <span class="k">if</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                        <span class="k">elif</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">gridNodes</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                                <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>

<div class="viewcode-block" id="GridDigraph.showShort">
<a class="viewcode-back" href="../techDoc.html#digraphs.GridDigraph.showShort">[docs]</a>
    <span class="k">def</span> <span class="nf">showShort</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----- show short --------------*&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Grid graph    : &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;n             : &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;m             : &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">m</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;order         : &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="CompleteDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.CompleteDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">CompleteDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialization of the general Digraph class for generating</span>
<span class="sd">    temporary complete graphs of order 5 in {-1,0,1} by default.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        order &gt; 0; valuationdomain=(Min,Max).</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">order</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)):</span>
        <span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span><span class="nn">array</span><span class="o">,</span><span class="nn">copy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;complete&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="n">order</span>
        <span class="n">actionlist</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">order</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">actionlist</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionlist</span><span class="p">:</span>
            <span class="n">actions</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">((</span><span class="n">valuationdomain</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">((</span><span class="n">valuationdomain</span><span class="p">[</span><span class="mi">0</span><span class="p">])))</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="p">(</span><span class="n">Max</span> <span class="o">+</span> <span class="n">Min</span><span class="p">)</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Min</span><span class="p">,</span><span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Med</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Max</span><span class="p">}</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span></div>


<div class="viewcode-block" id="RedhefferDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.RedhefferDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">RedhefferDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialization of the general Digraph class for generating</span>
<span class="sd">    temporary Redheffer digraphs.</span>

<span class="sd">    https://en.wikipedia.org/wiki/Redheffer_matrix</span>

<span class="sd">    Parameters:</span>
<span class="sd">        order &gt; 0; valuationdomain=(Min,Max).</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">############### helper functions</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">order</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)):</span>
        <span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span><span class="nn">array</span><span class="o">,</span><span class="nn">copy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Redheffer&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="n">order</span>
        <span class="n">actionlist</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">order</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">actionlist</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionlist</span><span class="p">:</span>
            <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">((</span><span class="n">valuationdomain</span><span class="p">[</span><span class="mi">1</span><span class="p">])))</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">((</span><span class="n">valuationdomain</span><span class="p">[</span><span class="mi">0</span><span class="p">])))</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="p">(</span><span class="n">Max</span> <span class="o">+</span> <span class="n">Min</span><span class="p">)</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Min</span><span class="p">,</span><span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Med</span><span class="p">,</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Max</span><span class="p">}</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
<span class="c1">##                if x == y:</span>
<span class="c1">##                    relation[x][y] = Min</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                <span class="k">elif</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">y</span> <span class="ow">and</span> <span class="p">(</span><span class="n">y</span><span class="o">%</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span></div>



<div class="viewcode-block" id="PolarisedDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.PolarisedDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">PolarisedDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Renders the polarised valuation of a Digraph class instance:</span>

<span class="sd">    *Parameters*:</span>
<span class="sd">         * If level = None, a default strict 50% cut level (0 in a normalized [-1,+1] valuation domain) is used.</span>
<span class="sd">         * If KeepValues = False, the polarisation results in a crisp {-1,0,1}-valued result.</span>
<span class="sd">         * If AlphaCut = True a genuine one-sided True-oriented cut is operated.</span>
<span class="sd">         * If StrictCut = True, the cut level value is excluded resulting in an open polarised valuation domain.</span>
<span class="sd">           By default the polarised valuation domain is closed and the complementary indeterminate domain is open.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">digraph</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">level</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">KeepValues</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">AlphaCut</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">StrictCut</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="k">if</span> <span class="n">digraph</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">randomDigraphs</span> <span class="kn">import</span> <span class="n">RandomValuationDigraph</span>
            <span class="n">digraph</span> <span class="o">=</span> <span class="n">RandomValuationDigraph</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">level</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1">#level = Max - (Max - Med)*Decimal(&#39;0.5&#39;)</span>
            <span class="n">level</span> <span class="o">=</span> <span class="n">Med</span>
            <span class="n">StrictCut</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">KeepValues</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">level</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">level</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;cut_&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">level</span><span class="p">)</span><span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">AlphaCut</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructAlphaCutRelation</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">relation</span><span class="p">,</span>
                                                           <span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">,</span>
                                                           <span class="n">StrictCut</span><span class="o">=</span><span class="n">StrictCut</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructBetaCutRelation</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">relation</span><span class="p">,</span>
                                                          <span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">,</span>
                                                          <span class="n">KeepValues</span><span class="o">=</span><span class="n">KeepValues</span><span class="p">,</span>
                                                          <span class="n">StrictCut</span><span class="o">=</span><span class="n">StrictCut</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_constructBetaCutRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">relationin</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">KeepValues</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">AlphaCut</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">StrictCut</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters: relation and cut level.</span>
<span class="sd">        Flags: KeepValues (True), AlphaCut(False, unilateral cut), StrictCut (False)</span>
<span class="sd">        Renders the polarised relation.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Debug</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Level, KeepValues,AlphaCut&#39;</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">KeepValues</span><span class="p">,</span><span class="n">AlphaCut</span><span class="p">)</span>
        <span class="c1"># determine the cut level</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">level</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">level</span><span class="p">))</span>
        <span class="n">compLevel</span> <span class="o">=</span> <span class="n">Max</span> <span class="o">-</span> <span class="n">level</span> <span class="o">+</span> <span class="n">Min</span>
        <span class="k">if</span> <span class="n">level</span> <span class="o">&lt;</span> <span class="n">Med</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Cut Level :&#39;</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="s1">&#39;too low !!!&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Original relation not changed !!!&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">relationin</span>
        <span class="k">elif</span> <span class="n">level</span> <span class="o">&gt;</span> <span class="n">Max</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Cut Level :&#39;</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="s1">&#39;too high !!!&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Original relation not changed !!!&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">relationin</span>
        <span class="c1"># change to a normalized [-1,0,1] valuation domain</span>
        <span class="k">if</span> <span class="n">KeepValues</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1&#39;</span><span class="p">)</span>
            <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
            <span class="n">Med</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
        <span class="c1"># construct polarised relation</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">relationout</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relationout</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">StrictCut</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">relationin</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">level</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">KeepValues</span><span class="p">:</span>
                            <span class="n">relationout</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">relationin</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">relationout</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                    <span class="k">elif</span> <span class="n">relationin</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">compLevel</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">KeepValues</span><span class="p">:</span>
                            <span class="n">relationout</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">relationin</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">relationout</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">relationout</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">relationin</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">level</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">KeepValues</span><span class="p">:</span>
                            <span class="n">relationout</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">relationin</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">relationout</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                    <span class="k">elif</span> <span class="n">relationin</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">compLevel</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">KeepValues</span><span class="p">:</span>
                            <span class="n">relationout</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">relationin</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">relationout</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">relationout</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
        <span class="k">return</span> <span class="n">relationout</span>

    <span class="k">def</span> <span class="nf">_constructAlphaCutRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">relationin</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">KeepValues</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">AlphaCut</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">StrictCut</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters: relation and cut level.</span>
<span class="sd">        Renders the polarised relation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Debug</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Level, KeepValues,AlphaCut&#39;</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">KeepValues</span><span class="p">,</span><span class="n">AlphaCut</span><span class="p">)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">level</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">level</span><span class="p">))</span>
        <span class="n">relationout</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relationout</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">StrictCut</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">relationin</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">level</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">KeepValues</span><span class="p">:</span>
                            <span class="n">relationout</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">relationin</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">relationout</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">KeepValues</span><span class="p">:</span>
                            <span class="n">relationout</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span> <span class="o">-</span> <span class="n">relationin</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">+</span> <span class="n">Min</span>
                        <span class="k">else</span><span class="p">:</span>    
                            <span class="n">relationout</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">relationin</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">level</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">KeepValues</span><span class="p">:</span>
                            <span class="n">relationout</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">relationin</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">relationout</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">KeepValues</span><span class="p">:</span>
                            <span class="n">relationout</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span> <span class="o">-</span> <span class="n">relationin</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">+</span> <span class="n">Min</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">relationout</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
        <span class="k">return</span> <span class="n">relationout</span></div>



<span class="c1"># class _MedianExtendedDigraph(Digraph):</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     Parameters:</span>
<span class="c1">#         digraph + beta cut level between Med and Max.</span>

<span class="c1">#     .. warning::</span>

<span class="c1">#          The class is obsolete and is replaced by the genuine</span>
<span class="c1">#          PolarisedDigraph class flagged with KeepValues=True.</span>

<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     def __init__(self,digraph=None,Level=None):</span>
<span class="c1">#         from copy import copy,deepcopy</span>
<span class="c1">#         if digraph is None:</span>
<span class="c1">#             from randomDigraphs import RandomValuationDigraphs</span>
<span class="c1">#             digraph = RandomValuationDigraph()</span>
<span class="c1">#         self.valuationdomain = copy(digraph.valuationdomain)</span>
<span class="c1">#         Max = self.valuationdomain[&#39;max&#39;]</span>
<span class="c1">#         Med = self.valuationdomain[&#39;med&#39;]</span>
<span class="c1">#         if Level is None:</span>
<span class="c1">#             Level = Max - (Max - Med)*0.5</span>
<span class="c1">#         self.name = &#39;cut_&#39; + str(Level)+ &#39;_&#39; + str(digraph.name)</span>
<span class="c1">#         self.actions = copy(digraph.actions)</span>
<span class="c1">#         self.relation = self._constructRelation(digraph.relation, Level)</span>
<span class="c1">#         self.order = len(self.actions)</span>
<span class="c1">#         self.gamma = self.gammaSets()</span>
<span class="c1">#         self.notGamma = self.notGammaSets()</span>

<span class="c1">#     def _constructRelation(self,relationin, Level):</span>
<span class="c1">#         &quot;&quot;&quot;</span>
<span class="c1">#         Parameters: relation and cut level.</span>
<span class="c1">#         Renders the polarised relation.</span>
<span class="c1">#         &quot;&quot;&quot;</span>
<span class="c1">#         actions = self.actions</span>
<span class="c1">#         Min = self.valuationdomain[&#39;min&#39;]</span>
<span class="c1">#         Max = self.valuationdomain[&#39;max&#39;]</span>
<span class="c1">#         Med = self.valuationdomain[&#39;med&#39;]</span>
<span class="c1">#         CompLevel = Max - Level + Min</span>
<span class="c1">#         if Level &lt; Med:</span>
<span class="c1">#             print(&#39;Cut Level :&#39;, Level, &#39;too low !!!&#39;)</span>
<span class="c1">#             print(self.valuationdomain)</span>
<span class="c1">#             print(&#39;Original relation not changed !!!&#39;)</span>
<span class="c1">#             return relationin</span>
<span class="c1">#         else:</span>
<span class="c1">#             relationout = {}</span>
<span class="c1">#             for a in actions:</span>
<span class="c1">#                 relationout[a] = {}</span>
<span class="c1">#                 for b in actions:</span>
<span class="c1">#                     if relationin[a][b] &lt;= Level and relationin[a][b] &gt;= CompLevel:</span>
<span class="c1">#                         relationout[a][b] = Med</span>
<span class="c1">#                     else:</span>
<span class="c1">#                         relationout[a][b] = relationin[a][b]</span>
<span class="c1">#         return relationout</span>

<div class="viewcode-block" id="DualDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.DualDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">DualDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Instantiates the dual ( = negated valuation) Digraph object from a deep copy of a given other Digraph instance.</span>

<span class="sd">    The relation constructor returns the dual (negation) of</span>
<span class="sd">    self.relation with generic formula: </span>

<span class="sd">            relationOut[a][b] = Max - self.relation[a][b] + Min, where</span>
<span class="sd">            Max (resp. Min) equals valuation maximum (resp. minimum).</span>
<span class="sd">    </span>
<span class="sd">    .. note::</span>

<span class="sd">        In a bipolar valuation, the dual operator corresponds to a simple changing of signs.</span>



<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">other</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;dual-&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">att</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">other</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">]</span>
        <span class="n">att</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">att</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">a</span><span class="p">])</span>
        <span class="c1">#self.order = len(self.actions)</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">dualRelation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">dualRelation</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="n">dualRelation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">+</span> <span class="n">Min</span>                   
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">dualRelation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span></div>


<span class="k">class</span> <span class="nc">_PreferenceDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Obsolete constructor. Initiates the valued difference S(a,b) - S(b,a) of a Digraph instance.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">digraph</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">digraph</span><span class="o">.</span><span class="n">valuationdomain</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;dual_&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">digraph</span><span class="o">.</span><span class="n">actions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructRelation</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_constructRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">relationIn</span><span class="p">):</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">relationOut</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relationOut</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="n">relationOut</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">relationIn</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">-</span> <span class="n">relationIn</span><span class="p">[</span><span class="n">b</span><span class="p">][</span><span class="n">a</span><span class="p">])</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2.0&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">relationOut</span>

<div class="viewcode-block" id="AsymmetricPartialDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.AsymmetricPartialDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">AsymmetricPartialDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Renders the asymmetric part of a Digraph instance.</span>

<span class="sd">    .. note::</span>

<span class="sd">         - The non asymmetric and the reflexive links are all put to the median indeterminate characteristic value!</span>
<span class="sd">         - The constructor makes a deep copy of the given Digraph instance!</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">digraph</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;asymmetric_&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructRelation</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_constructRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">relationIn</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the asymmetric part of the relationIn</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">relationOut</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relationOut</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">b</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">relationIn</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">Med</span> <span class="ow">and</span> <span class="n">relationIn</span><span class="p">[</span><span class="n">b</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">relationOut</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">relationIn</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="n">relationIn</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">Med</span> <span class="ow">and</span> <span class="n">relationIn</span><span class="p">[</span><span class="n">b</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">relationOut</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">relationIn</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">relationOut</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># reflexive terms are ignored</span>
                    <span class="n">relationOut</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
        <span class="k">return</span> <span class="n">relationOut</span></div>


<div class="viewcode-block" id="BipartitePartialDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.BipartitePartialDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">BipartitePartialDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Renders the bipartite part of a Digraph instance.</span>

<span class="sd">    .. note::</span>

<span class="sd">         - *partA* and *partB* must be parts of the *actions* attribute of the given *Digraph* instance</span>
<span class="sd">         - The non-bipartite links are all put to the median indeterminate characteristic value</span>
<span class="sd">         - The constructor makes a deep copy of the given Digraph instance</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">digraph</span><span class="p">,</span><span class="n">partA</span><span class="p">,</span><span class="n">partB</span><span class="p">,</span><span class="n">Partial</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;bipartite_&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actionsA</span> <span class="o">=</span> <span class="n">partA</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actionsB</span> <span class="o">=</span> <span class="n">partB</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructRelation</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">relation</span><span class="p">,</span><span class="n">partA</span><span class="p">,</span><span class="n">partB</span><span class="p">,</span><span class="n">Partial</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_constructRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">relationIn</span><span class="p">,</span><span class="n">partA</span><span class="p">,</span><span class="n">partB</span><span class="p">,</span><span class="n">Partial</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the asymmetric part of the relationIn</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#actions = self.actions</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="c1"># initialize relationOut to all  Med characteristics</span>
        <span class="n">relationOut</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relationOut</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="n">relationOut</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">partA</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">partB</span><span class="p">:</span>
                <span class="n">relationOut</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">relationIn</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">partB</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">partA</span><span class="p">:</span>
                <span class="n">relationOut</span><span class="p">[</span><span class="n">b</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">relationIn</span><span class="p">[</span><span class="n">b</span><span class="p">][</span><span class="n">a</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">Partial</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">partA</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">partA</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">b</span><span class="p">:</span>
                        <span class="n">relationOut</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                        <span class="n">relationOut</span><span class="p">[</span><span class="n">b</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
            <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">partB</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">partB</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">b</span><span class="p">:</span>
                        <span class="n">relationOut</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                        <span class="n">relationOut</span><span class="p">[</span><span class="n">b</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>

        <span class="k">return</span> <span class="n">relationOut</span></div>

    

    
<div class="viewcode-block" id="SymmetricPartialDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.SymmetricPartialDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">SymmetricPartialDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Renders the symmetric part of a Digraph instance.</span>
<span class="sd">    </span>
<span class="sd">    .. note::</span>

<span class="sd">          - The not symmetric and the reflexive links are all put to the median indeterminate characteristics value!.</span>
<span class="sd">          - The constructor makes a deep copy of the given Digraph instance!</span>
<span class="sd">          </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">digraph</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;symmetric_&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructRelation</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_constructRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">relationIn</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the symmetric part of the relationIn.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">relationOut</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relationOut</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">b</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">relationIn</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">Med</span> <span class="ow">and</span> <span class="n">relationIn</span><span class="p">[</span><span class="n">b</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">relationOut</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">relationIn</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="n">relationIn</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">Med</span> <span class="ow">and</span> <span class="n">relationIn</span><span class="p">[</span><span class="n">b</span><span class="p">][</span><span class="n">a</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">Med</span><span class="p">:</span>
                        <span class="n">relationOut</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">relationIn</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">relationOut</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
                    <span class="c1">## relationOut[a][b] = min(relationIn[a][b],relationIn[b][a])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">relationOut</span><span class="p">[</span><span class="n">a</span><span class="p">][</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
        <span class="k">return</span> <span class="n">relationOut</span></div>


<div class="viewcode-block" id="kChoicesDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.kChoicesDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">kChoicesDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialization of general Digraph class for instantiation</span>
<span class="sd">    a digraph of all k-choices collapsed actions.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        | digraph := Stored or memory resident digraph instance</span>
<span class="sd">        | k := cardinality of the choices</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">digraph</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">k</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">random</span><span class="o">,</span><span class="nn">sys</span><span class="o">,</span><span class="nn">array</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
        <span class="kn">from</span> <span class="nn">outrankingDigraphs</span> <span class="kn">import</span> <span class="n">OutrankingDigraph</span><span class="p">,</span> <span class="n">RandomOutrankingDigraph</span><span class="p">,</span> <span class="n">BipolarOutrankingDigraph</span>
        <span class="k">if</span> <span class="n">digraph</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">randomDigraphs</span> <span class="kn">import</span> <span class="n">RandomValuationDigraph</span>
            <span class="n">digraph</span> <span class="o">=</span> <span class="n">RandomValuationDigraph</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">digraph</span><span class="p">,(</span><span class="n">Digraph</span><span class="p">,</span><span class="n">OutrankingDigraph</span><span class="p">,</span><span class="n">RandomOutrankingDigraph</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
        <span class="n">dactions</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">digraph</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">drelation</span> <span class="o">=</span> <span class="n">digraph</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">kChoice</span> <span class="ow">in</span> <span class="n">Digraph</span><span class="o">.</span><span class="n">kChoices</span><span class="p">(</span><span class="n">digraph</span><span class="p">,</span><span class="n">dactions</span><span class="p">,</span><span class="n">k</span><span class="p">):</span>
            <span class="n">cn</span> <span class="o">=</span> <span class="s1">&#39;_&#39;</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">kChoice</span><span class="p">:</span>
                <span class="n">cn</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span>
            <span class="n">commentString</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">-choice candidate&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">)</span>
            <span class="n">actions</span><span class="p">[</span><span class="nb">frozenset</span><span class="p">(</span><span class="n">kChoice</span><span class="p">)]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">cn</span><span class="p">,</span> <span class="s1">&#39;comment&#39;</span><span class="p">:</span> <span class="n">commentString</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_computeRelation</span><span class="p">(</span><span class="n">drelation</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">_computeRelation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">relation</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        computing the relation on kChoices</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">kChoices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">krelation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">xch</span> <span class="ow">in</span> <span class="n">kChoices</span><span class="p">:</span>
            <span class="n">krelation</span><span class="p">[</span><span class="n">xch</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">ych</span> <span class="ow">in</span> <span class="n">kChoices</span><span class="p">:</span>
                <span class="n">krelation</span><span class="p">[</span><span class="n">xch</span><span class="p">][</span><span class="n">ych</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="n">xch</span><span class="o">-</span><span class="n">ych</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="p">(</span><span class="n">ych</span><span class="o">-</span><span class="n">xch</span><span class="p">):</span>
                        <span class="n">krelation</span><span class="p">[</span><span class="n">xch</span><span class="p">][</span><span class="n">ych</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">krelation</span><span class="p">[</span><span class="n">xch</span><span class="p">][</span><span class="n">ych</span><span class="p">],</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">krelation</span></div>


<span class="c1">#########</span>

<span class="k">class</span> <span class="nc">_WeakCocaDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameters:</span>
<span class="sd">        Stored or memory resident digraph instance.</span>

<span class="sd">    Specialization of general Digraph class for instantiation</span>
<span class="sd">    of weak chordless odd circuits augmented digraphs.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">digraph</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">comment</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">random</span><span class="o">,</span><span class="nn">sys</span><span class="o">,</span><span class="nn">array</span><span class="o">,</span><span class="nn">copy</span>
        <span class="kn">from</span> <span class="nn">outrankingDigraphs</span> <span class="kn">import</span> <span class="n">OutrankingDigraph</span><span class="p">,</span> <span class="n">RandomOutrankingDigraph</span><span class="p">,</span> <span class="n">BipolarOutrankingDigraph</span>

        <span class="k">if</span> <span class="n">comment</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">silent</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">silent</span> <span class="o">=</span> <span class="ow">not</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span>
        <span class="c1">#print &#39;weakcocosilent =&#39;, silent</span>
        <span class="k">if</span> <span class="n">digraph</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">randomDigraphs</span> <span class="kn">import</span> <span class="n">RandomValuationDigraph</span>
            <span class="n">g</span> <span class="o">=</span> <span class="n">RandomValuationDigraph</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">digraph</span><span class="p">,(</span><span class="n">Digraph</span><span class="p">,</span><span class="n">OutrankingDigraph</span><span class="p">,</span><span class="n">RandomOutrankingDigraph</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="n">digraph</span> <span class="o">+</span> <span class="s1">&#39;py&#39;</span>
            <span class="n">argDict</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">fi</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span>
            <span class="n">fileText</span> <span class="o">=</span> <span class="n">fi</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="n">fi</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">exec</span><span class="p">(</span><span class="nb">compile</span><span class="p">(</span><span class="n">fileText</span><span class="p">,</span> <span class="n">fileName</span><span class="p">,</span> <span class="s1">&#39;exec&#39;</span><span class="p">),</span><span class="n">argDict</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">digraph</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;actionset&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;valuationdomain&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;relation&#39;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weakGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weakGammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weakCircuits</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">closureWeakChordlessOddCircuits</span><span class="p">(</span><span class="n">comment</span><span class="o">=</span><span class="n">silent</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">closureWeakChordlessOddCircuits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">comment</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Closure of cdordless odd circuits extraction.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">newCircuits</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">comment</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">silent</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">silent</span> <span class="o">=</span> <span class="ow">not</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span>
        <span class="c1">#print &#39;closuresilent=&#39;, silent</span>
        <span class="k">while</span> <span class="n">newCircuits</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
            <span class="n">coc</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">weakCircuits</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">weakChordlessOddCircuits</span><span class="p">(</span><span class="n">comment</span><span class="o">=</span><span class="n">silent</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addWeakCircuits</span><span class="p">(</span><span class="n">comment</span><span class="o">=</span><span class="n">silent</span><span class="p">)</span>
            <span class="n">newCircuits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weakCircuits</span> <span class="o">-</span> <span class="n">coc</span>

    <span class="k">def</span> <span class="nf">addWeakCircuits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">comment</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Augmenting self with self.weakCircuits.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">copy</span><span class="o">,</span><span class="nn">time</span>
        <span class="k">if</span> <span class="n">comment</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">silent</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">silent</span> <span class="o">=</span> <span class="ow">not</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span>
        <span class="c1">#print &#39;addweaksilent = &#39;, silent</span>
        <span class="n">order0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="n">weakCircuits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weakCircuits</span>
        <span class="n">valuationdomain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span>
        <span class="n">weakGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weakGamma</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="k">for</span> <span class="n">cycle</span> <span class="ow">in</span> <span class="n">weakCircuits</span><span class="p">:</span>
            <span class="n">cn</span> <span class="o">=</span> <span class="s1">&#39;_&#39;</span>
            <span class="n">dcycle</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="n">acycle</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">cycle</span><span class="p">:</span>
                <span class="n">cn</span> <span class="o">=</span> <span class="n">cn</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span>
                <span class="n">dcycle</span> <span class="o">=</span> <span class="n">dcycle</span> <span class="o">|</span> <span class="n">weakGamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">dcycle</span> <span class="o">=</span> <span class="n">dcycle</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span><span class="p">])</span>
                <span class="n">acycle</span> <span class="o">=</span> <span class="n">acycle</span> <span class="o">|</span> <span class="n">weakGamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">acycle</span> <span class="o">=</span> <span class="n">acycle</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span><span class="p">])</span>
            <span class="n">weakGamma</span><span class="p">[</span><span class="n">cn</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="n">dcycle</span><span class="p">,</span><span class="n">acycle</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">cycle</span><span class="p">:</span>
                    <span class="n">dx0</span> <span class="o">=</span> <span class="n">weakGamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">cn</span><span class="p">])</span>
                    <span class="n">dx1</span> <span class="o">=</span> <span class="n">weakGamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">cn</span><span class="p">])</span>
                    <span class="n">weakGamma</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">dx0</span><span class="p">,</span><span class="n">dx1</span><span class="p">)</span>
                    <span class="n">relxcn</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
                    <span class="n">relxcn</span><span class="p">[</span><span class="n">cn</span><span class="p">]</span> <span class="o">=</span> <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">relxcn</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">relxy</span> <span class="o">=</span> <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">cycle</span><span class="p">:</span>
                        <span class="n">relxy</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">relxy</span><span class="p">,</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
                        <span class="n">relxcn</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
                        <span class="n">relxcn</span><span class="p">[</span><span class="n">cn</span><span class="p">]</span> <span class="o">=</span> <span class="n">relxy</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">relxcn</span>
            <span class="n">relcycle</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">cycle</span><span class="p">:</span>
                    <span class="n">relcycle</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">relxy</span> <span class="o">=</span> <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">cycle</span><span class="p">:</span>
                        <span class="n">relxy</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">relxy</span><span class="p">,</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                    <span class="n">relcycle</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">relxy</span>
            <span class="n">relcycle</span><span class="p">[</span><span class="n">cn</span><span class="p">]</span> <span class="o">=</span> <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">cn</span><span class="p">]</span> <span class="o">=</span> <span class="n">relcycle</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">cn</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weakGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weakGammaSets</span><span class="p">()</span>
        <span class="n">new</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">-</span> <span class="n">order0</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">silent</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">==</span> <span class="n">order0</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  No weak circuits added !&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span><span class="n">new</span><span class="p">,</span><span class="s1">&#39; weak circuit(s) added!&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">showCircuits</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        show methods for chordless odd circuits in CocaGraph</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---- Chordless odd circuits ----*&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">circ</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">weakCircuits</span><span class="p">:</span>
            <span class="n">deg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitMinCredibility</span><span class="p">(</span><span class="n">circ</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">circ</span><span class="p">),</span> <span class="s1">&#39;, credibility :&#39;</span><span class="p">,</span> <span class="n">deg</span><span class="p">)</span>

<span class="c1">#--------------------</span>
<span class="k">class</span> <span class="nc">_CoceDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialization of general Digraph class for instantiation of digraphs where</span>
<span class="sd">    all chordless odd circuits are eliminated by appropriate cuts of the valuation of the arcs.</span>

<span class="sd">    .. note::</span>

<span class="sd">        The method is only experimental and may easily lead to very sparse outranking digraphs with loads of undeterminate arcs.</span>
<span class="sd">        It is recommended to use instead the :py:class:`digraphs.BrokenCocsDigraph` class.</span>
<span class="sd">        </span>
<span class="sd">    Parameters:</span>

<span class="sd">        - digraph: Stored or memory resident digraph instance.</span>
<span class="sd">        - Piping: using OS pipes for data in- and output between Python and C++.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">digraph</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">Piping</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">random</span><span class="o">,</span><span class="nn">sys</span><span class="o">,</span><span class="nn">array</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">outrankingDigraphs</span> <span class="kn">import</span> <span class="n">OutrankingDigraph</span><span class="p">,</span> <span class="n">RandomOutrankingDigraph</span><span class="p">,</span> <span class="n">BipolarOutrankingDigraph</span>

        <span class="c1">## if comment is None:</span>
        <span class="c1">##     silent = True</span>
        <span class="c1">## else:</span>
        <span class="c1">##     silent = not(comment)</span>
        <span class="k">if</span> <span class="n">digraph</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">randomDigraphs</span> <span class="kn">import</span> <span class="n">RandomValuationDigraph</span>
            <span class="n">g</span> <span class="o">=</span> <span class="n">RandomValuationDigraph</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">actions</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">relation</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">digraph</span><span class="p">,(</span><span class="n">Digraph</span><span class="p">,</span><span class="n">OutrankingDigraph</span><span class="p">,</span><span class="n">RandomOutrankingDigraph</span><span class="p">,</span><span class="n">BipolarOutrankingDigraph</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="n">digraph</span> <span class="o">+</span> <span class="s1">&#39;py&#39;</span>
            <span class="n">argDict</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">fi</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
            <span class="n">fileText</span> <span class="o">=</span> <span class="n">fi</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="n">fi</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">exec</span><span class="p">(</span><span class="nb">compile</span><span class="p">(</span><span class="n">fileText</span><span class="p">,</span> <span class="n">fileName</span><span class="p">,</span> <span class="s1">&#39;exec&#39;</span><span class="p">),</span><span class="n">argDict</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">digraph</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;actionset&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;valuationdomain&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;relation&#39;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weakGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weakGammaSets</span><span class="p">()</span>
        <span class="n">level</span><span class="p">,</span><span class="n">pg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iterateCocElimination</span><span class="p">(</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">,</span> <span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">pg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">_pol_</span><span class="si">%.2f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">level</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">relation</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">weakGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weakGammaSets</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">iterateCocElimination</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Eliminates all chordless odd circuits with rising valuation cut levels.</span>
<span class="sd">        Renders a tuple (level,polarisedDigraph) where level is the</span>
<span class="sd">        necessary bipolar cut level for eliminating all chordless odd circuits,</span>
<span class="sd">        and polarisedDigraph is the resulting digraph instance.</span>
<span class="sd">        Renders (None,None) if no chordless odd circuit is detected.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">time</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="n">Comments</span><span class="o">=</span><span class="kc">True</span>
        <span class="n">gcd</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="n">qualmaj0</span> <span class="o">=</span> <span class="n">gcd</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Chorless odd circuits elimination&#39;</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">qualmaj</span> <span class="o">=</span> <span class="n">gcd</span><span class="o">.</span><span class="n">minimalValuationLevelForCircuitsElimination</span><span class="p">(</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">qualmaj</span> <span class="o">&gt;</span> <span class="n">qualmaj0</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--&gt; Iteration </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">))</span>
                <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">qualmaj</span> <span class="o">&lt;</span> <span class="n">gcd</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]:</span>
                <span class="n">pg</span> <span class="o">=</span> <span class="n">PolarisedDigraph</span><span class="p">(</span><span class="n">gcd</span><span class="p">,</span><span class="n">qualmaj</span><span class="p">,</span>
                                      <span class="n">StrictCut</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                      <span class="n">KeepValues</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">pg</span> <span class="o">=</span> <span class="n">PolarisedDigraph</span><span class="p">(</span><span class="n">gcd</span><span class="p">,</span><span class="n">qualmaj</span><span class="p">,</span>
                                      <span class="n">StrictCut</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                      <span class="n">KeepValues</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">qualmaj0</span> <span class="o">=</span> <span class="n">qualmaj</span>
            <span class="n">qualmaj</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">minimalValuationLevelForCircuitsElimination</span><span class="p">(</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">qualmaj0</span><span class="p">,</span><span class="n">pg</span><span class="p">)</span>

<span class="c1">#--------------------</span>
<div class="viewcode-block" id="BrokenCocsDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.BrokenCocsDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">BrokenCocsDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialization of general Digraph class for instantiation</span>
<span class="sd">    of chordless odd circuits broken digraphs.</span>

<span class="sd">    Parameters:</span>

<span class="sd">        - digraph: stored or memory resident digraph instance.</span>

<span class="sd">    All chordless odd circuits are broken at the weakest asymmetric link,</span>
<span class="sd">    i.e. a link :math:`(x, y)` with minimal difference between :math:`r(x S y)` and :math:`r(y S x)`.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">digraph</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="c1">#Piping=False,</span>
                 <span class="c1">#Threading=False,nbrOfCPUs=1,</span>
                 <span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">random</span><span class="o">,</span><span class="nn">sys</span><span class="o">,</span><span class="nn">array</span><span class="o">,</span><span class="nn">copy</span>
        <span class="kn">from</span> <span class="nn">outrankingDigraphs</span> <span class="kn">import</span> <span class="n">OutrankingDigraph</span><span class="p">,</span>\
             <span class="n">RandomOutrankingDigraph</span><span class="p">,</span> <span class="n">BipolarOutrankingDigraph</span><span class="p">,</span> <span class="n">ConfidentBipolarOutrankingDigraph</span>
        <span class="c1">## if comment is None:</span>
        <span class="c1">##     silent = True</span>
        <span class="c1">## else:</span>
        <span class="c1">##     silent = not(comment)</span>
        <span class="k">if</span> <span class="n">digraph</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Erreur: A valid Digraph instance is required!&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">digraph</span><span class="p">,(</span><span class="n">Digraph</span><span class="p">,</span><span class="n">OutrankingDigraph</span><span class="p">,</span>
                                 <span class="n">RandomOutrankingDigraph</span><span class="p">,</span><span class="n">BipolarOutrankingDigraph</span><span class="p">,</span>                               <span class="n">ConfidentBipolarOutrankingDigraph</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;precision&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">digraph</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;precision&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;precision&#39;</span><span class="p">]</span>  <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="n">digraph</span> <span class="o">+</span> <span class="s1">&#39;py&#39;</span>
            <span class="n">argDict</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">fi</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
            <span class="n">exec</span><span class="p">(</span><span class="nb">compile</span><span class="p">(</span><span class="n">fi</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="n">fileName</span><span class="p">,</span> <span class="s1">&#39;exec&#39;</span><span class="p">),</span><span class="n">argDict</span><span class="p">)</span>
            <span class="n">fi</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">digraph</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;actionset&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;valuationdomain&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;relation&#39;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weakGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weakGammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">breakChordlessOddCircuits</span><span class="p">(</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
            <span class="c1">#Piping=Piping,</span>
            <span class="c1">#Threading=Threading,nbrOfCPUs=nbrOfCPUs)</span>

<div class="viewcode-block" id="BrokenCocsDigraph.breakChordlessOddCircuits">
<a class="viewcode-back" href="../techDoc.html#digraphs.BrokenCocsDigraph.breakChordlessOddCircuits">[docs]</a>
    <span class="k">def</span> <span class="nf">breakChordlessOddCircuits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                  <span class="c1">#Piping=False,</span>
                                  <span class="c1">#Threading=False,nbrOfCPUs=1,</span>
                                  <span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Breaking of chordless odd circuits extraction.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">newCircuits</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">brokenLinks</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">oldBreakings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">breakings</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">breakings</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">newBreakings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span>
        <span class="c1">#while newCircuits != set() or self.newBreakings != 0:</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">newCircuits</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">initialCircuits</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">cl</span><span class="p">,</span><span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">breakCircuits</span><span class="p">(</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
            <span class="c1"># if Cpp:</span>
            <span class="c1">#     if Piping:</span>
            <span class="c1">#         self.computeCppInOutPipingChordlessCircuits(Odd=True,</span>
            <span class="c1">#                                                     Debug=Debug)</span>
            <span class="c1">#     else:</span>
            <span class="c1">#         self.computeCppChordlessCircuits(Odd=True,Debug=Debug)</span>
            <span class="c1">#if Threading:</span>
            <span class="c1">#    self.computeChordlessCircuitsMP(Odd=True,Comments=Debug,</span>
            <span class="c1">#                        Threading=Threading,nbrOfCPUs=nbrOfCPUs)</span>
            <span class="c1">#else:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">computeChordlessCircuits</span><span class="p">(</span><span class="n">Odd</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
            <span class="n">newCircuits</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">cl</span><span class="p">,</span><span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;---&gt;&gt; iteration </span><span class="si">%d</span><span class="s1">:&#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;newCircuits&#39;</span><span class="p">,</span> <span class="n">newCircuits</span><span class="p">)</span></div>



<div class="viewcode-block" id="BrokenCocsDigraph.breakCircuits">
<a class="viewcode-back" href="../techDoc.html#digraphs.BrokenCocsDigraph.breakCircuits">[docs]</a>
    <span class="k">def</span> <span class="nf">breakCircuits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Break all cricuits in self.circuits.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">time</span>
        <span class="kn">from</span> <span class="nn">digraphsTools</span> <span class="kn">import</span> <span class="n">flatten</span>
        
        <span class="n">newBreakings</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">,</span><span class="nb">dict</span><span class="p">)):</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="n">x</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>
        <span class="n">circuitsList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;list of circuits tp break : &#39;</span><span class="p">,</span> <span class="n">circuitsList</span><span class="p">)</span>
        <span class="n">valuationdomain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span>
<span class="c1">##        gamma = self.gamma</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">currentCircuits</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">circuitsList</span><span class="p">)</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">cycleList</span><span class="p">,</span><span class="n">cycle</span><span class="p">)</span> <span class="ow">in</span> <span class="n">circuitsList</span><span class="p">:</span>
            <span class="n">degP</span><span class="p">,</span><span class="n">degN</span><span class="p">,</span><span class="n">minLink</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitCredibilities</span><span class="p">(</span><span class="n">cycleList</span><span class="p">,</span>
                                                          <span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">cycleList</span><span class="p">,</span><span class="n">cycle</span><span class="p">,</span><span class="n">degP</span><span class="p">,</span><span class="n">degN</span><span class="p">,</span><span class="n">minLink</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Breaking:&#39;</span><span class="p">,</span><span class="n">cycleList</span><span class="p">,</span><span class="n">degP</span><span class="p">,</span><span class="n">degN</span><span class="p">)</span>
            <span class="n">actionsSubset</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">flatten</span><span class="p">(</span><span class="n">cycle</span><span class="p">)]</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">showRelationTable</span><span class="p">(</span><span class="n">actionsSubset</span><span class="o">=</span><span class="n">actionsSubset</span><span class="p">)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">minLink</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">minLink</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Minimal link put to doubt: &#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">brokenLinks</span><span class="p">:</span>
                <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
                <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">brokenLinks</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">))</span>
                <span class="n">newBreakings</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">currentCircuits</span><span class="o">.</span><span class="n">remove</span><span class="p">((</span><span class="n">cycleList</span><span class="p">,</span><span class="n">cycle</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span> <span class="o">=</span> <span class="n">currentCircuits</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weakGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weakGammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">breakings</span> <span class="o">+=</span> <span class="n">newBreakings</span></div>


<div class="viewcode-block" id="BrokenCocsDigraph.showComponents">
<a class="viewcode-back" href="../techDoc.html#digraphs.BrokenCocsDigraph.showComponents">[docs]</a>
    <span class="k">def</span> <span class="nf">showComponents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Shows the list of connected components of the digraph instance.&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*--- Connected Components ---*&#39;</span><span class="p">)</span>
        <span class="n">k</span><span class="o">=</span><span class="mi">1</span>
        <span class="k">for</span> <span class="n">Comp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="p">():</span>
            <span class="n">component</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">Comp</span><span class="p">)</span>
            <span class="c1">#component.sort()</span>
            <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">component</span><span class="p">))</span>
            <span class="n">xk</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">1</span></div>
</div>


<span class="c1">#--------------------</span>
<div class="viewcode-block" id="BrokenChordlessCircuitsDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.BrokenChordlessCircuitsDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">BrokenChordlessCircuitsDigraph</span><span class="p">(</span><span class="n">BrokenCocsDigraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Terminology requirement</span>
<span class="sd">    &quot;&quot;&quot;</span></div>



<span class="c1"># class _BrokenChordlessCircuitsDigraph(Digraph):</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     Specialization of general Digraph class for instantiation</span>
<span class="c1">#     of chordless circuits broken digraphs.</span>

<span class="c1">#     Parameters:</span>

<span class="c1">#         - digraph: stored or memory resident digraph instance.</span>
<span class="c1">#         - Piping: using OS pipes for data in- and output between Python and C++.</span>

<span class="c1">#     All chordless odd circuits are broken at the weakest asymmetric link,</span>
<span class="c1">#     i.e. a link :math:`(x, y)` with minimal difference between :math:`r(x S y)` and :math:`r(y S x)`.</span>

<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     def __init__(self,digraph=None,</span>
<span class="c1">#                  #Piping=False,</span>
<span class="c1">#                  Comments=False,</span>
<span class="c1">#                  #Threading=False,</span>
<span class="c1">#                  #nbrOfCPUs=1,</span>
<span class="c1">#                  ):</span>
<span class="c1">#         import random,sys,array,copy</span>
<span class="c1">#         from outrankingDigraphs import OutrankingDigraph,\</span>
<span class="c1">#              RandomOutrankingDigraph, BipolarOutrankingDigraph, ConfidentBipolarOutrankingDigraph</span>
<span class="c1">#         ## if comment is None:</span>
<span class="c1">#         ##     silent = True</span>
<span class="c1">#         ## else:</span>
<span class="c1">#         ##     silent = not(comment)</span>
<span class="c1">#         if digraph is None:</span>
<span class="c1">#             print(&#39;Erreur: A valid Digraph instance is required!&#39;)</span>
<span class="c1">#             return</span>
<span class="c1">#         elif isinstance(digraph,(Digraph,OutrankingDigraph,\</span>
<span class="c1">#                                  RandomOutrankingDigraph,BipolarOutrankingDigraph,\</span>
<span class="c1">#                                  ConfidentBipolarOutrankingDigraph)):</span>
<span class="c1">#             self.name = str(digraph.name)</span>
<span class="c1">#             self.actions = copy.deepcopy(digraph.actions)</span>
<span class="c1">#             self.valuationdomain = copy.deepcopy(digraph.valuationdomain)</span>
<span class="c1">#             try:</span>
<span class="c1">#                 self.valuationdomain[&#39;precision&#39;] = digraph.valuationdomain[&#39;precision&#39;]</span>
<span class="c1">#             except:</span>
<span class="c1">#                 self.valuationdomain[&#39;precision&#39;]  = Decimal(&#39;0&#39;)</span>
<span class="c1">#             self.relation = copy.deepcopy(digraph.relation)</span>
<span class="c1">#         else:</span>
<span class="c1">#             fileName = digraph + &#39;py&#39;</span>
<span class="c1">#             argDict = {}</span>
<span class="c1">#             fi = open(fileName,&#39;r&#39;)</span>
<span class="c1">#             fileText = fi.read()</span>
<span class="c1">#             fi.close()</span>
<span class="c1">#             exec(compile(fileText, fileName, &#39;exec&#39;),argDict)</span>
<span class="c1">#             self.name = digraph</span>
<span class="c1">#             self.actions = argDict[&#39;actionset&#39;]</span>
<span class="c1">#             self.valuationdomain = argDict[&#39;valuationdomain&#39;]</span>
<span class="c1">#             self.relation = argDict[&#39;relation&#39;]</span>

<span class="c1">#         self.order = len(self.actions)</span>
<span class="c1">#         self.gamma = self.gammaSets()</span>
<span class="c1">#         self.notGamma = self.notGammaSets()</span>
<span class="c1">#         self.weakGamma = self.weakGammaSets()</span>
<span class="c1">#         self.breakChordlessOddCircuits(</span>
<span class="c1">#             #Piping=Piping,</span>
<span class="c1">#                 Comments=Comments)</span>
<span class="c1">#                 # Threading=Threading,nbrOfCPUs=nbrOfCPUs)</span>

<span class="c1">#     def breakChordlessOddCircuits(self,</span>
<span class="c1">#                                   #Piping=False,</span>
<span class="c1">#                                   Comments=True,Debug=False,</span>
<span class="c1">#                                   #Threading=False,nbrOfCPUs=1,</span>
<span class="c1">#                                   ):</span>
<span class="c1">#         &quot;&quot;&quot;</span>
<span class="c1">#         Breaking of chordless odd circuits extraction.</span>
<span class="c1">#         &quot;&quot;&quot;</span>
<span class="c1">#         newCircuits = None</span>
<span class="c1">#         self.circuitsList = []</span>
<span class="c1">#         self.brokenLinks = set()</span>
<span class="c1">#         try:</span>
<span class="c1">#             oldBreakings = self.breakings</span>
<span class="c1">#         except:</span>
<span class="c1">#             self.breakings = 0</span>
<span class="c1">#         self.newBreakings = self.order</span>
<span class="c1">#         #while newCircuits != set() or self.newBreakings != 0:</span>
<span class="c1">#         i = 0</span>
<span class="c1">#         while newCircuits != set():</span>
<span class="c1">#             i += 1</span>
<span class="c1">#             initialCircuits = set([x for cl,x in self.circuitsList])</span>
<span class="c1">#             self.breakCircuits(Comments=Comments)</span>
<span class="c1">#             # if Cpp:</span>
<span class="c1">#             #     if Piping:</span>
<span class="c1">#             #         self.computeCppInOutPipingChordlessCircuits(Odd=True,Debug=Debug)</span>
<span class="c1">#             #     else:</span>
<span class="c1">#             #         self.computeCppChordlessCircuits(Odd=True,Debug=Debug)</span>
<span class="c1">#             if Threading:</span>
<span class="c1">#                 self.computeChordlessCircuitsMP(Odd=True,Comments=Debug,</span>
<span class="c1">#                                 Threading=Threading,nbrOfCPUs=nbrOfCPUs)</span>
<span class="c1">#             else:</span>
<span class="c1">#                 self.computeChordlessCircuits(Odd=False,Comments=Debug)</span>
<span class="c1">#             newCircuits = set([x for cl,x in self.circuitsList])</span>
<span class="c1">#             if Comments:</span>
<span class="c1">#                 print(&#39;---&gt;&gt; iteration %d:&#39;, i)</span>
<span class="c1">#                 print(&#39;newCircuits&#39;, newCircuits)</span>


<span class="c1">#     def breakCircuits(self,Comments=False):</span>
<span class="c1">#         &quot;&quot;&quot;</span>
<span class="c1">#         Break all cricuits in self.circuits.</span>
<span class="c1">#         &quot;&quot;&quot;</span>
<span class="c1">#         import time</span>
<span class="c1">#         from digraphsTools import flatten</span>
        
<span class="c1">#         newBreakings = 0</span>
<span class="c1">#         if not(isinstance(self.actions,dict)):</span>
<span class="c1">#             actions = {}</span>
<span class="c1">#             for x in self.actions:</span>
<span class="c1">#                 actions[x] = {&#39;name&#39;:x}</span>
<span class="c1">#         else:</span>
<span class="c1">#             actions = self.actions</span>
<span class="c1">#         circuitsList = self.circuitsList</span>
<span class="c1">#         if Comments:</span>
<span class="c1">#             print(&#39;list of circuits tp break : &#39;, circuitsList)</span>
<span class="c1">#         valuationdomain = self.valuationdomain</span>
<span class="c1"># ##        gamma = self.gamma</span>
<span class="c1">#         relation = self.relation</span>
<span class="c1">#         Med = valuationdomain[&#39;med&#39;]</span>
<span class="c1">#         currentCircuits = list(circuitsList)</span>
<span class="c1">#         for (cycleList,cycle) in circuitsList:</span>
<span class="c1">#             degP,degN,minLink = self.circuitCredibilities(cycleList,Debug=Comments)</span>
<span class="c1">#             if Comments:</span>
<span class="c1">#                 print(cycleList,cycle,degP,degN,minLink)</span>
<span class="c1">#             if Comments:</span>
<span class="c1">#                 print(&#39;Breaking:&#39;,cycleList,degP,degN)</span>
<span class="c1">#             actionsSubset = [x for x in flatten(cycle)]</span>
<span class="c1">#             if Comments:</span>
<span class="c1">#                 self.showRelationTable(actionsSubset=actionsSubset)</span>
<span class="c1">#             x = minLink[0]</span>
<span class="c1">#             y = minLink[1]</span>
<span class="c1">#             if Comments:</span>
<span class="c1">#                 print(&#39;Minimal link put to doubt: &#39;, x,y)</span>
<span class="c1">#             if (x,y) not in self.brokenLinks:</span>
<span class="c1">#                 relation[x][y] = Med</span>
<span class="c1">#                 relation[y][x] = Med</span>
<span class="c1">#                 self.brokenLinks.add((x,y))</span>
<span class="c1">#                 newBreakings += 1</span>
<span class="c1">#             currentCircuits.remove((cycleList,cycle))</span>

<span class="c1">#         self.actions = actions</span>
<span class="c1">#         self.order = len(actions)</span>
<span class="c1">#         self.relation = relation</span>
<span class="c1">#         self.circuitsList = currentCircuits</span>
<span class="c1">#         self.gamma = self.gammaSets()</span>
<span class="c1">#         self.notGamma = self.notGammaSets()</span>
<span class="c1">#         self.weakGamma = self.weakGammaSets()</span>
<span class="c1">#         self.breakings += newBreakings</span>

<span class="c1">#     def showComponents(self):</span>
<span class="c1">#         &quot;&quot;&quot;Shows the list of connected components of the digraph instance.&quot;&quot;&quot;</span>
<span class="c1">#         print(&#39;*--- Connected Components ---*&#39;)</span>
<span class="c1">#         k=1</span>
<span class="c1">#         for Comp in self.components():</span>
<span class="c1">#             component = list(Comp)</span>
<span class="c1">#             #component.sort()</span>
<span class="c1">#             print(str(k) + &#39;: &#39; + str(component))</span>
<span class="c1">#             xk = k + 1</span>


<span class="c1">#--------------------</span>
<div class="viewcode-block" id="BreakAddCocsDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.BreakAddCocsDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">BreakAddCocsDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialization of general Digraph class for instantiation</span>
<span class="sd">    of chordless odd circuits augmented digraphs.</span>

<span class="sd">    Parameters:</span>

<span class="sd">        - digraph: Stored or memory resident digraph instance.</span>
<span class="sd">        - Piping: using OS pipes for data in- and output between Python and C++.</span>

<span class="sd">    A chordless odd circuit is added if the cumulated credibility of the circuit supporting arcs is larger or</span>
<span class="sd">    equal to the cumulated credibility of the converse arcs. Otherwise, the circuit is broken at the weakest asymmetric link,</span>
<span class="sd">    i.e. a link (*x*, *y*) with minimal difference between r(*x* S *y*) - r(*y* S *x*).</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">digraph</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">Piping</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                 <span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">nbrOfCPUs</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">random</span><span class="o">,</span><span class="nn">sys</span><span class="o">,</span><span class="nn">array</span><span class="o">,</span><span class="nn">copy</span>
        <span class="kn">from</span> <span class="nn">outrankingDigraphs</span> <span class="kn">import</span> <span class="n">OutrankingDigraph</span><span class="p">,</span> <span class="n">RandomOutrankingDigraph</span><span class="p">,</span> <span class="n">BipolarOutrankingDigraph</span>
        <span class="c1">## if comment is None:</span>
        <span class="c1">##     silent = True</span>
        <span class="c1">## else:</span>
        <span class="c1">##     silent = not(comment)</span>
        <span class="k">if</span> <span class="n">digraph</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">randomDigraphs</span> <span class="kn">import</span> <span class="n">RandomValuationDigraph</span>
            <span class="n">g</span> <span class="o">=</span> <span class="n">RandomValuationDigraph</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">actions</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">valuationdomain</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">relation</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">digraph</span><span class="p">,(</span><span class="n">Digraph</span><span class="p">,</span><span class="n">OutrankingDigraph</span><span class="p">,</span><span class="n">RandomOutrankingDigraph</span><span class="p">,</span><span class="n">BipolarOutrankingDigraph</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;precision&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">digraph</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;precision&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;precision&#39;</span><span class="p">]</span>  <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="n">digraph</span> <span class="o">+</span> <span class="s1">&#39;py&#39;</span>
            <span class="n">argDict</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">fi</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
            <span class="n">fileText</span> <span class="o">=</span> <span class="n">fi</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="n">fi</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">exec</span><span class="p">(</span><span class="nb">compile</span><span class="p">(</span><span class="n">fileText</span><span class="p">,</span> <span class="n">fileName</span><span class="p">,</span> <span class="s1">&#39;exec&#39;</span><span class="p">),</span><span class="n">argDict</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">digraph</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;actionset&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;valuationdomain&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;relation&#39;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weakGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weakGammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">closureChordlessOddCircuits</span><span class="p">(</span><span class="n">Piping</span><span class="o">=</span><span class="n">Piping</span><span class="p">,</span>
                <span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">,</span><span class="n">Threading</span><span class="o">=</span><span class="n">Threading</span><span class="p">,</span><span class="n">nbrOfCPUs</span><span class="o">=</span><span class="n">nbrOfCPUs</span><span class="p">)</span>

<div class="viewcode-block" id="BreakAddCocsDigraph.closureChordlessOddCircuits">
<a class="viewcode-back" href="../techDoc.html#digraphs.BreakAddCocsDigraph.closureChordlessOddCircuits">[docs]</a>
    <span class="k">def</span> <span class="nf">closureChordlessOddCircuits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Piping</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">nbrOfCPUs</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Closure of chordless odd circuits extraction.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">newCircuits</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">oldBreakings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">breakings</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">breakings</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">newBreakings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span>
        <span class="c1">#while newCircuits != set() or self.newBrakings != 0:</span>
        <span class="k">while</span> <span class="n">newCircuits</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
            <span class="n">initialCircuits</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">cl</span><span class="p">,</span><span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addCircuits</span><span class="p">(</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
            <span class="c1"># if Cpp:</span>
            <span class="c1">#     if Piping:</span>
            <span class="c1">#         self.computeCppInOutPipingChordlessCircuits(Odd=True,Debug=Debug)</span>
            <span class="c1">#     else:</span>
            <span class="c1">#         self.computeCppChordlessCircuits(Odd=True,Debug=Debug)</span>
            <span class="k">if</span> <span class="n">Threading</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">computeChordlessCircuitsMP</span><span class="p">(</span><span class="n">Odd</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="n">Debug</span><span class="p">,</span>
                                <span class="n">Threading</span><span class="o">=</span><span class="n">Threading</span><span class="p">,</span><span class="n">nbrOfCPUs</span><span class="o">=</span><span class="n">nbrOfCPUs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">computeChordlessCircuits</span><span class="p">(</span><span class="n">Odd</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
            <span class="n">currentCircuits</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">cl</span><span class="p">,</span><span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;initialCircuits, currentCircuits&#39;</span><span class="p">,</span> <span class="n">initialCircuits</span><span class="p">,</span> <span class="n">currentCircuits</span><span class="p">)</span>
            <span class="n">newCircuits</span> <span class="o">=</span> <span class="n">currentCircuits</span> <span class="o">-</span> <span class="n">initialCircuits</span></div>


<div class="viewcode-block" id="BreakAddCocsDigraph.addCircuits">
<a class="viewcode-back" href="../techDoc.html#digraphs.BreakAddCocsDigraph.addCircuits">[docs]</a>
    <span class="k">def</span> <span class="nf">addCircuits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Augmenting self with self.circuits.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">time</span>
        <span class="kn">from</span> <span class="nn">digraphsTools</span> <span class="kn">import</span> <span class="n">flatten</span>
        
        <span class="c1">#from copy import deepcopy</span>
        <span class="n">order0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span>
        <span class="n">newBreakings</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">,</span><span class="nb">dict</span><span class="p">)):</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="n">x</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>

        <span class="c1">#ListActions = [frozenset([x]) for x in actions]</span>
        <span class="n">circuitsList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;list of circuits: &#39;</span><span class="p">,</span> <span class="n">circuitsList</span><span class="p">)</span>
        <span class="n">valuationdomain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span>
        <span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">currentCircuits</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">circuitsList</span><span class="p">)</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">cycleList</span><span class="p">,</span><span class="n">cycle</span><span class="p">)</span> <span class="ow">in</span> <span class="n">circuitsList</span><span class="p">:</span>
            <span class="n">degP</span><span class="p">,</span><span class="n">degN</span><span class="p">,</span><span class="n">minLink</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitCredibilities</span><span class="p">(</span><span class="n">cycleList</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">cycleList</span><span class="p">,</span><span class="n">cycle</span><span class="p">,</span><span class="n">degP</span><span class="p">,</span><span class="n">degN</span><span class="p">,</span><span class="n">minLink</span><span class="p">)</span>
            <span class="c1">#if degP+degN &gt; Med:</span>
            
            <span class="k">if</span> <span class="p">(</span><span class="n">degP</span> <span class="o">+</span> <span class="n">degN</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;precision&#39;</span><span class="p">]:</span>
<span class="c1">#           if (degP + degN) &gt;= valuationdomain[&#39;med&#39;]:   # adds potentially more circuits </span>
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Adding cycle:&#39;</span><span class="p">,</span> <span class="n">cycle</span><span class="p">,</span> <span class="s1">&#39; with Pdegree=&#39;</span><span class="p">,</span><span class="n">degP</span><span class="p">,</span><span class="s1">&#39; and Ndegree=&#39;</span><span class="p">,</span><span class="n">degN</span> <span class="p">)</span>
                <span class="n">cn</span> <span class="o">=</span> <span class="s1">&#39;_&#39;</span>
                <span class="n">dcycle</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                <span class="n">acycle</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">cycleList</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="nb">frozenset</span><span class="p">):</span>
                        <span class="n">cn</span> <span class="o">+=</span> <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">cn</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span>
                    <span class="n">dcycle</span> <span class="o">=</span> <span class="n">dcycle</span> <span class="o">|</span> <span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">dcycle</span> <span class="o">=</span> <span class="n">dcycle</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span><span class="p">])</span>
                    <span class="n">acycle</span> <span class="o">=</span> <span class="n">acycle</span> <span class="o">|</span> <span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">acycle</span> <span class="o">=</span> <span class="n">acycle</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span><span class="p">])</span>
                <span class="n">gamma</span><span class="p">[</span><span class="n">cycle</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="n">dcycle</span><span class="p">,</span><span class="n">acycle</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">cycle</span><span class="p">:</span>
                        <span class="n">dx0</span> <span class="o">=</span> <span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">cycle</span><span class="p">])</span>
                        <span class="n">dx1</span> <span class="o">=</span> <span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">cycle</span><span class="p">])</span>
                        <span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">dx0</span><span class="p">,</span><span class="n">dx1</span><span class="p">)</span>
                        <span class="n">relxcn</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
                        <span class="c1">#relxcn[cycle] = valuationdomain[&#39;max&#39;]</span>
                        <span class="n">relxcn</span><span class="p">[</span><span class="n">cycle</span><span class="p">]</span> <span class="o">=</span> <span class="n">degP</span> <span class="o">+</span> <span class="n">degN</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">relxcn</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">relxy</span> <span class="o">=</span> <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
                        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">cycle</span><span class="p">:</span>
                            <span class="n">relxy</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">relxy</span><span class="p">,</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
                            <span class="n">relxcn</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
                            <span class="n">relxcn</span><span class="p">[</span><span class="n">cycle</span><span class="p">]</span> <span class="o">=</span> <span class="n">relxy</span>
                            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">relxcn</span>
                <span class="n">relcycle</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">cycle</span><span class="p">:</span>
                        <span class="c1">#relcycle[x] = valuationdomain[&#39;max&#39;]</span>
                        <span class="n">relcycle</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">degP</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">relxy</span> <span class="o">=</span> <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
                        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">cycle</span><span class="p">:</span>
                            <span class="n">relxy</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">relxy</span><span class="p">,</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                        <span class="n">relcycle</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">relxy</span>
                <span class="n">relcycle</span><span class="p">[</span><span class="n">cycle</span><span class="p">]</span> <span class="o">=</span> <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
                <span class="n">relation</span><span class="p">[</span><span class="n">cycle</span><span class="p">]</span> <span class="o">=</span> <span class="n">relcycle</span>
                <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;chordless odd </span><span class="si">%d</span><span class="s1">-circuit&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cycle</span><span class="p">))</span>
                <span class="n">actions</span><span class="p">[</span><span class="n">cycle</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">cn</span><span class="p">,</span> <span class="s1">&#39;comment&#39;</span><span class="p">:</span> <span class="n">name</span><span class="p">}</span>
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">cycle</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Breaking:&#39;</span><span class="p">,</span><span class="n">cycleList</span><span class="p">,</span><span class="n">degP</span><span class="p">,</span><span class="n">degN</span><span class="p">)</span>
                <span class="n">actionsSubset</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">flatten</span><span class="p">(</span><span class="n">cycle</span><span class="p">)]</span>
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">showRelationTable</span><span class="p">(</span><span class="n">actionsSubset</span><span class="o">=</span><span class="n">actionsSubset</span><span class="p">)</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">minLink</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">minLink</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Minimal link put to doubt: &#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
                <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
                <span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
                <span class="n">currentCircuits</span><span class="o">.</span><span class="n">remove</span><span class="p">((</span><span class="n">cycleList</span><span class="p">,</span><span class="n">cycle</span><span class="p">))</span>
                <span class="n">newBreakings</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span> <span class="o">=</span> <span class="n">currentCircuits</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weakGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weakGammaSets</span><span class="p">()</span>
        <span class="n">new</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">-</span> <span class="n">order0</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">new</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  No circuits added !&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span><span class="n">new</span><span class="p">,</span><span class="s1">&#39; circuit(s) added!&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">newBreakings</span> <span class="o">=</span> <span class="n">newBreakings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">breakings</span> <span class="o">+=</span> <span class="n">newBreakings</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">newBreakings</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  No further circuit brakings !&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span><span class="n">newBreakings</span><span class="p">,</span><span class="s1">&#39; new circuit(s) were broken&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="BreakAddCocsDigraph.showCircuits">
<a class="viewcode-back" href="../techDoc.html#digraphs.BreakAddCocsDigraph.showCircuits">[docs]</a>
    <span class="k">def</span> <span class="nf">showCircuits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">credibility</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        show methods for chordless odd circuits in CocaGraph</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---- Chordless circuits ----*&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">circList</span><span class="p">,</span><span class="n">circSet</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">credibility</span> <span class="o">==</span> <span class="s1">&#39;maximal&#39;</span><span class="p">:</span>
                <span class="n">degM</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitMaxCredibility</span><span class="p">(</span><span class="n">circList</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">circList</span><span class="p">,</span> <span class="s1">&#39;, maximal credibility :&#39;</span><span class="p">,</span> <span class="n">degM</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">credibility</span> <span class="o">==</span> <span class="s1">&#39;minimal&#39;</span><span class="p">:</span>
                <span class="n">degm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitMinCredibility</span><span class="p">(</span><span class="n">circList</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">circList</span><span class="p">,</span> <span class="s1">&#39;, minimal credibility :&#39;</span><span class="p">,</span> <span class="n">degm</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">credibility</span> <span class="o">==</span> <span class="s1">&#39;average&#39;</span><span class="p">:</span>
                <span class="n">degm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitMinCredibility</span><span class="p">(</span><span class="n">circList</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">circList</span><span class="p">,</span> <span class="s1">&#39;, average credibility :&#39;</span><span class="p">,</span> <span class="n">degm</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">degP</span><span class="p">,</span><span class="n">degN</span><span class="p">,</span><span class="n">minLink</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitCredibilities</span><span class="p">(</span><span class="n">circList</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="n">Debug</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">circList</span><span class="p">,</span> <span class="s1">&#39;, marginal credibility :&#39;</span><span class="p">,</span> <span class="n">degP</span><span class="o">+</span><span class="n">degN</span><span class="p">)</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">minLink</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">minLink</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;minimal link: &#39;</span><span class="p">,</span> <span class="n">minLink</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])</span> 
            
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Coca graph of order </span><span class="si">%d</span><span class="s1"> with </span><span class="si">%d</span><span class="s1"> odd chordless circuits.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span><span class="p">)))</span></div>

        <span class="c1">#print len(aself.circuitsList),&#39; cirduits</span>

<div class="viewcode-block" id="BreakAddCocsDigraph.showComponents">
<a class="viewcode-back" href="../techDoc.html#digraphs.BreakAddCocsDigraph.showComponents">[docs]</a>
    <span class="k">def</span> <span class="nf">showComponents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Shows the list of connected components of the digraph instance.&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*--- Connected Components ---*&#39;</span><span class="p">)</span>
        <span class="n">k</span><span class="o">=</span><span class="mi">1</span>
        <span class="k">for</span> <span class="n">Comp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="p">():</span>
            <span class="n">component</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">Comp</span><span class="p">)</span>
            <span class="c1">#component.sort()</span>
            <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">component</span><span class="p">))</span>
            <span class="n">xk</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">1</span></div>
</div>


<span class="c1">#--------------------</span>
<div class="viewcode-block" id="CocaDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.CocaDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">CocaDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    Old CocaDigraph class without circuit breakings; all circuits and circuits of circuits are added as hyper-nodes.</span>

<span class="sd">    .. warning::</span>

<span class="sd">        May sometimes give inconsistent results when an autranking digraph shows loads of chordless cuircuits.</span>
<span class="sd">        It is recommended in this case to use instead either the BrokenCocsDigraph class (preferred option)</span>
<span class="sd">        or the  BreakAddCocsDigraph class.</span>
<span class="sd">    </span>
<span class="sd">    Parameters:</span>

<span class="sd">        - digraph: Stored or memory resident digraph instance.</span>
<span class="sd">        - Piping: using OS pipes for data in- and output between Python and C++.</span>

<span class="sd">    Specialization of general Digraph class for instantiation</span>
<span class="sd">    of chordless odd circuits augmented digraphs.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">digraph</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">Piping</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">random</span><span class="o">,</span><span class="nn">sys</span><span class="o">,</span><span class="nn">array</span><span class="o">,</span><span class="nn">copy</span>
        <span class="kn">from</span> <span class="nn">outrankingDigraphs</span> <span class="kn">import</span> <span class="n">OutrankingDigraph</span><span class="p">,</span> <span class="n">RandomOutrankingDigraph</span><span class="p">,</span> <span class="n">BipolarOutrankingDigraph</span>
        <span class="c1">## if comment is None:</span>
        <span class="c1">##     silent = True</span>
        <span class="c1">## else:</span>
        <span class="c1">##     silent = not(comment)</span>
        <span class="k">if</span> <span class="n">digraph</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<span class="c1">##            g = RandomValuationDigraph()</span>
<span class="c1">##            self.name = str(g.name)</span>
<span class="c1">##            self.actions = g.actions</span>
<span class="c1">##            self.valuationdomain = g.valuationdomain</span>
<span class="c1">##            self.relation = g.relation</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;!!! Error: no valid digraph argument provided&#39;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">digraph</span><span class="p">,(</span><span class="n">Digraph</span><span class="p">,</span><span class="n">OutrankingDigraph</span><span class="p">,</span><span class="n">RandomOutrankingDigraph</span><span class="p">,</span><span class="n">BipolarOutrankingDigraph</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">relation</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="n">digraph</span> <span class="o">+</span> <span class="s1">&#39;py&#39;</span>
            <span class="n">argDict</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">fi</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
            <span class="n">fileText</span> <span class="o">=</span> <span class="n">fi</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="n">fi</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">exec</span><span class="p">(</span><span class="nb">compile</span><span class="p">(</span><span class="n">fileText</span><span class="p">,</span> <span class="n">fileName</span><span class="p">,</span> <span class="s1">&#39;exec&#39;</span><span class="p">),</span><span class="n">argDict</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">digraph</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;actionset&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;valuationdomain&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">argDict</span><span class="p">[</span><span class="s1">&#39;relation&#39;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weakGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weakGammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">closureChordlessOddCircuits</span><span class="p">(</span><span class="n">Piping</span><span class="o">=</span><span class="n">Piping</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>

<div class="viewcode-block" id="CocaDigraph.closureChordlessOddCircuits">
<a class="viewcode-back" href="../techDoc.html#digraphs.CocaDigraph.closureChordlessOddCircuits">[docs]</a>
    <span class="k">def</span> <span class="nf">closureChordlessOddCircuits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Piping</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Closure of chordless odd circuits extraction.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">newCircuits</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">while</span> <span class="n">newCircuits</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">():</span>
            <span class="n">initialCircuits</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">cl</span><span class="p">,</span><span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span><span class="p">])</span>
            <span class="c1"># if Cpp:</span>
            <span class="c1">#     if Piping:</span>
            <span class="c1">#         self.computeCppInOutPipingChordlessCircuits(Odd=True,Debug=Comments)</span>
            <span class="c1">#     else:</span>
            <span class="c1">#         self.computeCppChordlessCircuits(Odd=True,Debug=Comments)</span>
            <span class="c1"># else:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">computeChordlessCircuits</span><span class="p">(</span><span class="n">Odd</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addCircuits</span><span class="p">(</span><span class="n">Comments</span><span class="o">=</span><span class="n">Comments</span><span class="p">)</span>
            <span class="n">currentCircuits</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span> <span class="k">for</span> <span class="n">cl</span><span class="p">,</span><span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;initialCircuits, currentCircuits&#39;</span><span class="p">,</span> <span class="n">initialCircuits</span><span class="p">,</span> <span class="n">currentCircuits</span><span class="p">)</span>
            <span class="n">newCircuits</span> <span class="o">=</span> <span class="n">currentCircuits</span> <span class="o">-</span> <span class="n">initialCircuits</span></div>


<div class="viewcode-block" id="CocaDigraph.addCircuits">
<a class="viewcode-back" href="../techDoc.html#digraphs.CocaDigraph.addCircuits">[docs]</a>
    <span class="k">def</span> <span class="nf">addCircuits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Augmenting self with self.circuits.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">copy</span><span class="o">,</span><span class="nn">time</span>
        <span class="n">order0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">,(</span><span class="nb">list</span><span class="p">,</span><span class="nb">set</span><span class="p">)):</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
                <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="n">x</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">actions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span>

        <span class="c1">#ListActions = [frozenset([x]) for x in actions]</span>
        <span class="n">circuitsList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;list of circuits: &#39;</span><span class="p">,</span> <span class="n">circuitsList</span><span class="p">)</span>
        <span class="n">valuationdomain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span>
        <span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">relation</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">cycleList</span><span class="p">,</span><span class="n">cycle</span><span class="p">)</span> <span class="ow">in</span> <span class="n">circuitsList</span><span class="p">:</span>
            <span class="n">cn</span> <span class="o">=</span> <span class="s1">&#39;_&#39;</span>
            <span class="n">dcycle</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="n">acycle</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">cycleList</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="nb">frozenset</span><span class="p">):</span>
                    <span class="n">cn</span> <span class="o">+=</span> <span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">cn</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span>
                <span class="n">dcycle</span> <span class="o">=</span> <span class="n">dcycle</span> <span class="o">|</span> <span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">dcycle</span> <span class="o">=</span> <span class="n">dcycle</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span><span class="p">])</span>
                <span class="n">acycle</span> <span class="o">=</span> <span class="n">acycle</span> <span class="o">|</span> <span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">acycle</span> <span class="o">=</span> <span class="n">acycle</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">x</span><span class="p">])</span>
            <span class="n">gamma</span><span class="p">[</span><span class="n">cycle</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="n">dcycle</span><span class="p">,</span><span class="n">acycle</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">cycle</span><span class="p">:</span>
                    <span class="n">dx0</span> <span class="o">=</span> <span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">cycle</span><span class="p">])</span>
                    <span class="n">dx1</span> <span class="o">=</span> <span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">|</span> <span class="nb">set</span><span class="p">([</span><span class="n">cycle</span><span class="p">])</span>
                    <span class="n">gamma</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">dx0</span><span class="p">,</span><span class="n">dx1</span><span class="p">)</span>
                    <span class="n">relxcn</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
                    <span class="n">relxcn</span><span class="p">[</span><span class="n">cycle</span><span class="p">]</span> <span class="o">=</span> <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
                    <span class="c1">#relxcn[cycle] = degP</span>
                    <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">relxcn</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">relxy</span> <span class="o">=</span> <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">cycle</span><span class="p">:</span>
                        <span class="n">relxy</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">relxy</span><span class="p">,</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">])</span>
                        <span class="n">relxcn</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
                        <span class="n">relxcn</span><span class="p">[</span><span class="n">cycle</span><span class="p">]</span> <span class="o">=</span> <span class="n">relxy</span>
                        <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">relxcn</span>
            <span class="n">relcycle</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">cycle</span><span class="p">:</span>
                    <span class="n">relcycle</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
                    <span class="c1">#relcycle[x] = degP</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">relxy</span> <span class="o">=</span> <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">cycle</span><span class="p">:</span>
                        <span class="n">relxy</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">relxy</span><span class="p">,</span><span class="n">relation</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])</span>
                    <span class="n">relcycle</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">relxy</span>
            <span class="n">relcycle</span><span class="p">[</span><span class="n">cycle</span><span class="p">]</span> <span class="o">=</span> <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">cycle</span><span class="p">]</span> <span class="o">=</span> <span class="n">relcycle</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;chordless odd </span><span class="si">%d</span><span class="s1">-circuit&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cycle</span><span class="p">))</span>
            <span class="n">actions</span><span class="p">[</span><span class="n">cycle</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">cn</span><span class="p">,</span> <span class="s1">&#39;comment&#39;</span><span class="p">:</span> <span class="n">name</span><span class="p">}</span>
            <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">actions</span><span class="p">[</span><span class="n">cycle</span><span class="p">])</span>
        <span class="c1">#self.actions = list(actions)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weakGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weakGammaSets</span><span class="p">()</span>
        <span class="n">new</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">-</span> <span class="n">order0</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">==</span> <span class="n">order0</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  No circuits added !&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span><span class="n">new</span><span class="p">,</span><span class="s1">&#39; circuit(s) added!&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="CocaDigraph.showCircuits">
<a class="viewcode-back" href="../techDoc.html#digraphs.CocaDigraph.showCircuits">[docs]</a>
    <span class="k">def</span> <span class="nf">showCircuits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">credibility</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        show methods for chordless odd circuits in CocaGraph</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*---- Chordless circuits ----*&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">circList</span><span class="p">,</span><span class="n">circSet</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">credibility</span> <span class="o">==</span> <span class="s1">&#39;maximal&#39;</span><span class="p">:</span>
                <span class="n">degM</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitMaxCredibility</span><span class="p">(</span><span class="n">circSet</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">circList</span><span class="p">,</span> <span class="s1">&#39;, maximal credibility :&#39;</span><span class="p">,</span> <span class="n">degM</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">credibility</span> <span class="o">==</span> <span class="s1">&#39;minimal&#39;</span><span class="p">:</span>
                <span class="n">degm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitMinCredibility</span><span class="p">(</span><span class="n">circSet</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">circList</span><span class="p">,</span> <span class="s1">&#39;, minimal credibility :&#39;</span><span class="p">,</span> <span class="n">degm</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">credibility</span> <span class="o">==</span> <span class="s1">&#39;average&#39;</span><span class="p">:</span>
                <span class="n">degm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitMinCredibility</span><span class="p">(</span><span class="n">circSet</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">circList</span><span class="p">,</span> <span class="s1">&#39;, average credibility :&#39;</span><span class="p">,</span> <span class="n">degm</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">degP</span><span class="p">,</span><span class="n">degN</span><span class="p">,</span><span class="n">minLink</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">circuitCredibilities</span><span class="p">(</span><span class="n">circSet</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">circList</span><span class="p">,</span> <span class="s1">&#39;, marginal credibility :&#39;</span><span class="p">,</span> <span class="n">degP</span><span class="o">+</span><span class="n">degN</span><span class="p">)</span>
            
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Coca graph of order </span><span class="si">%d</span><span class="s1"> with </span><span class="si">%d</span><span class="s1"> odd chordles circuits.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">circuitsList</span><span class="p">)))</span></div>

        <span class="c1">#print len(aself.circuitsList),&#39; cirduits</span>

<div class="viewcode-block" id="CocaDigraph.showComponents">
<a class="viewcode-back" href="../techDoc.html#digraphs.CocaDigraph.showComponents">[docs]</a>
    <span class="k">def</span> <span class="nf">showComponents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Shows the list of connected components of the digraph instance.&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*--- Connected Components ---*&#39;</span><span class="p">)</span>
        <span class="n">k</span><span class="o">=</span><span class="mi">1</span>
        <span class="k">for</span> <span class="n">Comp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="p">():</span>
            <span class="n">component</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">Comp</span><span class="p">)</span>
            <span class="c1">#component.sort()</span>
            <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">component</span><span class="p">))</span>
            <span class="n">xk</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">1</span></div>
</div>


<span class="c1">#---------------------</span>
<span class="c1">##class CocaDigraph(_CocaDigraph):</span>
<span class="c1">##    &quot;&quot;&quot;</span>
<span class="c1">##    CocaDigraph class wrapper for testing purposes only</span>
<span class="c1">##    &quot;&quot;&quot;</span>

<span class="c1">#------------------------------------------</span>

<div class="viewcode-block" id="StrongComponentsCollapsedDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.StrongComponentsCollapsedDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">StrongComponentsCollapsedDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reduction of Digraph object to its strong components.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">digraph</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span><span class="p">,</span><span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
        <span class="k">if</span> <span class="n">digraph</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
           <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: you must provide a valid digraph to the constructor!&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">digraph</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;_Scc&#39;</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">digraph</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">)</span>
           <span class="n">scc</span> <span class="o">=</span> <span class="n">digraph</span><span class="o">.</span><span class="n">strongComponents</span><span class="p">()</span>
           <span class="n">actions</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
           <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">strongComponent</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">scc</span><span class="p">):</span>
               <span class="n">actionShortName</span> <span class="o">=</span> <span class="s1">&#39;Scc_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
               <span class="n">actionKey</span> <span class="o">=</span> <span class="n">strongComponent</span>
               <span class="n">actionName</span> <span class="o">=</span> <span class="s1">&#39;_&#39;</span>
               <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">strongComponent</span><span class="p">:</span>
                   <span class="n">actionName</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;_&#39;</span>
               <span class="n">actions</span><span class="p">[</span><span class="n">actionKey</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">actionName</span><span class="p">,</span>
                                     <span class="s1">&#39;shortName&#39;</span><span class="p">:</span> <span class="n">actionShortName</span><span class="p">,</span>
                                     <span class="s1">&#39;comment&#39;</span><span class="p">:</span> <span class="s1">&#39;collapsed strong component&#39;</span><span class="p">}</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
           <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
           <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">]</span>
           <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
           <span class="k">for</span> <span class="n">xsc</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
               <span class="n">relation</span><span class="p">[</span><span class="n">xsc</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
               <span class="k">for</span> <span class="n">ysc</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                   <span class="n">relation</span><span class="p">[</span><span class="n">xsc</span><span class="p">][</span><span class="n">ysc</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
                   <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xsc</span><span class="p">:</span>
                       <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">ysc</span><span class="p">:</span>
                           <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">:</span>
                               <span class="n">relation</span><span class="p">[</span><span class="n">xsc</span><span class="p">][</span><span class="n">ysc</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
                           <span class="k">elif</span> <span class="n">digraph</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">relation</span><span class="p">[</span><span class="n">xsc</span><span class="p">][</span><span class="n">ysc</span><span class="p">]:</span>
                               <span class="n">relation</span><span class="p">[</span><span class="n">xsc</span><span class="p">][</span><span class="n">ysc</span><span class="p">]</span> <span class="o">=</span> <span class="n">digraph</span><span class="o">.</span><span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">)</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
           <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>

<div class="viewcode-block" id="StrongComponentsCollapsedDigraph.showComponents">
<a class="viewcode-back" href="../techDoc.html#digraphs.StrongComponentsCollapsedDigraph.showComponents">[docs]</a>
    <span class="k">def</span> <span class="nf">showComponents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Shows the list of connected components of the digraph instance.&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;short&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;content&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;shortName&#39;</span><span class="p">],</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">])</span></div>
</div>

<span class="c1">#-------------------------------------------------------</span>


<span class="c1"># ------------ XML encoded stored Digraph instances obsolete</span>

<span class="c1"># class _XMLDigraph24(Digraph):</span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#     Specialization of the general Digraph class for reading</span>
<span class="c1">#     stored XML formatted digraphs.</span>
<span class="c1">#     &quot;&quot;&quot;</span>

<span class="c1">#     def __init__(self,fileName=&#39;testsaveXML&#39;):</span>
<span class="c1">#         from xml.sax import make_parser</span>
<span class="c1">#         xmlDigraph = _XMLDigraphHandler()</span>
<span class="c1">#         saxParser = make_parser()</span>
<span class="c1">#         saxParser.setContentHandler(xmlDigraph)</span>
<span class="c1">#         fileNameExt = fileName + &#39;.xml&#39;</span>
<span class="c1">#         fo = open(fileNameExt,&#39;r&#39;)</span>
<span class="c1">#         saxParser.parse(fo)</span>
<span class="c1">#         self.name = xmlDigraph.name</span>
<span class="c1">#         self.category = xmlDigraph.category</span>
<span class="c1">#         self.subcategory = xmlDigraph.subcategory</span>
<span class="c1">#         self.actions = xmlDigraph.actions</span>
<span class="c1">#         self.valuationdomain = xmlDigraph.valuationdomain</span>
<span class="c1">#         Min = xmlDigraph.valuationdomain[&#39;min&#39;]</span>
<span class="c1">#         Max = xmlDigraph.valuationdomain[&#39;max&#39;]</span>
<span class="c1">#         Med = Min + ((Max - Min)/2.0)</span>
<span class="c1">#         self.valuationdomain[&#39;med&#39;] = Med</span>
<span class="c1">#         self.relation = xmlDigraph.relation</span>
<span class="c1">#         self.gamma = self.gammaSets()</span>
<span class="c1">#         self.notGamma = self.notGammaSets()</span>

<span class="c1">#     def showAll(self):</span>

<span class="c1">#         if self.category == &#39;outranking&#39;:</span>
<span class="c1">#             Digraph.showAll(self)</span>
<span class="c1">#             self.showPreKernels()</span>
<span class="c1">#             self.showGoodChoices()</span>
<span class="c1">#             self.showBadChoices()</span>

<span class="c1">#         else:</span>
<span class="c1">#             Digraph.showAll(self)</span>

<span class="c1">#---------------</span>

<div class="viewcode-block" id="CriteriaCorrelationDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.CriteriaCorrelationDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">CriteriaCorrelationDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Renders the ordinal criteria correlation digraph from the given outranking digraph.</span>

<span class="sd">    If ValuedCorrelation==True, the correlation indexes represent the bipolar-valued p</span>
<span class="sd">    airwise relational equivalence between the marginal criteria outranking relation:</span>
<span class="sd">    that is tau * determination</span>

<span class="sd">    Otherwise, the valuation represents the ordinal correlation index tau</span>

<span class="sd">    If WithMedian==True, the correlation of the marginal criteria outranking with</span>
<span class="sd">    the global outranking relation, denoted &#39;m&#39;, is included. </span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">outrankingDigraph</span><span class="p">,</span>
                 <span class="n">ValuedCorrelation</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                 <span class="n">WithMedian</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
        <span class="k">if</span> <span class="n">ValuedCorrelation</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">outrankingDigraph</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;valCorr&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">outrankingDigraph</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;corr&#39;</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">outrankingDigraph</span><span class="o">.</span><span class="n">criteria</span><span class="p">:</span>
            <span class="n">godg</span> <span class="o">=</span> <span class="n">outrankingDigraph</span><span class="o">.</span><span class="n">criteria</span><span class="p">[</span><span class="n">g</span><span class="p">]</span>
            <span class="n">actions</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">)]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;shortName&#39;</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">g</span><span class="p">),</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="n">godg</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]}</span>
        <span class="k">if</span> <span class="n">WithMedian</span><span class="p">:</span>
            <span class="n">actions</span><span class="p">[</span><span class="s1">&#39;m&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;shortName&#39;</span><span class="p">:</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;outranking relation&#39;</span><span class="p">}</span>
        <span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;min&#39;</span><span class="p">:</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;-1.0&#39;</span><span class="p">),</span><span class="s1">&#39;med&#39;</span><span class="p">:</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.0&#39;</span><span class="p">),</span><span class="s1">&#39;max&#39;</span><span class="p">:</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">)}</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="n">criteriaList</span> <span class="o">=</span> <span class="p">[</span><span class="n">g</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">outrankingDigraph</span><span class="o">.</span><span class="n">criteria</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">criteriaList</span><span class="p">)</span>
        <span class="n">corr</span><span class="p">,</span><span class="n">d</span> <span class="o">=</span> <span class="n">outrankingDigraph</span><span class="o">.</span><span class="n">computeCriteriaCorrelations</span><span class="p">(</span>\
            <span class="n">ValuedCorrelation</span><span class="o">=</span><span class="n">ValuedCorrelation</span><span class="p">)</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="n">relation</span><span class="p">[</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span> <span class="o">=</span>\
                                <span class="n">corr</span><span class="p">[</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">i</span><span class="p">]][</span><span class="n">criteriaList</span><span class="p">[</span><span class="n">j</span><span class="p">]]</span>
        <span class="k">if</span> <span class="n">WithMedian</span><span class="p">:</span>
            <span class="n">margCorr</span> <span class="o">=</span> <span class="n">outrankingDigraph</span><span class="o">.</span><span class="n">computeOutrankingConsensusQuality</span><span class="p">(</span>\
                <span class="n">ValuedCorrelation</span><span class="o">=</span><span class="n">ValuedCorrelation</span><span class="p">)</span>
            <span class="c1">#print(margCorr)</span>
            <span class="n">relation</span><span class="p">[</span><span class="s1">&#39;m&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">relation</span><span class="p">[</span><span class="s1">&#39;m&#39;</span><span class="p">][</span><span class="s1">&#39;m&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">outrankingDigraph</span><span class="o">.</span><span class="n">computeDeterminateness</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">margCorr</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">relation</span><span class="p">[</span><span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="s1">&#39;m&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">relation</span><span class="p">[</span><span class="s1">&#39;m&#39;</span><span class="p">][</span><span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">valuationdomain</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_saveCorrelationDistancesCSV</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;tempdigraph&#39;</span><span class="p">,</span><span class="n">Normalized</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">Dual</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Converse</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">Diagonal</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">Debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; file exchange with R for the principal image drawing&quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
        <span class="kn">import</span> <span class="nn">csv</span>
        <span class="n">com</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">Normalized</span><span class="p">:</span>
            <span class="n">com</span> <span class="o">+=</span> <span class="s1">&#39;normalized&#39;</span>
            <span class="k">if</span> <span class="n">Dual</span> <span class="ow">and</span> <span class="n">Converse</span><span class="p">:</span>
                <span class="n">com</span> <span class="o">+=</span> <span class="s1">&#39; and codual&#39;</span>
            <span class="k">elif</span> <span class="n">Dual</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">Converse</span><span class="p">:</span>
                <span class="n">com</span> <span class="o">+=</span> <span class="s1">&#39; and dual&#39;</span>
            <span class="k">elif</span> <span class="n">Converse</span><span class="p">:</span>
                <span class="n">com</span> <span class="o">+=</span> <span class="s1">&#39; and converse&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Dual</span> <span class="ow">and</span> <span class="n">Converse</span><span class="p">:</span>
                <span class="n">com</span> <span class="o">+=</span> <span class="s1">&#39;codual&#39;</span>
            <span class="k">elif</span> <span class="n">Dual</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">Converse</span><span class="p">:</span>
                <span class="n">com</span> <span class="o">+=</span> <span class="s1">&#39;dual&#39;</span>
            <span class="k">elif</span> <span class="n">Converse</span><span class="p">:</span>
                <span class="n">com</span> <span class="o">+=</span> <span class="s1">&#39;converse&#39;</span>
        
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*--- Saving </span><span class="si">%s</span><span class="s1"> digraph in file: </span><span class="si">%s</span><span class="s1">.csv&gt; ---*&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">com</span><span class="p">,</span><span class="n">fileName</span><span class="p">))</span>
        <span class="n">fileNameExt</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">fileName</span><span class="p">)</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="s1">&#39;.csv&#39;</span><span class="p">)</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileNameExt</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">csvfo</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">fo</span><span class="p">,</span><span class="n">quoting</span><span class="o">=</span><span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_NONNUMERIC</span><span class="p">)</span>
        <span class="n">actionsList</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">actions</span><span class="p">]</span>
        <span class="n">actionsList</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">headerText</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;d&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">actionsList</span>
        <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">headerText</span><span class="p">)</span>
        <span class="n">csvfo</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">headerText</span><span class="p">)</span>
        <span class="n">dg</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Normalized</span><span class="p">:</span>
            <span class="n">dg</span><span class="o">.</span><span class="n">recodeValuation</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">dg</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">dg</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">dg</span><span class="o">.</span><span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Dual</span><span class="p">:</span>
            <span class="n">dg</span> <span class="o">=</span> <span class="o">-</span><span class="n">dg</span>
        <span class="k">if</span> <span class="n">Converse</span><span class="p">:</span>
            <span class="n">dg</span> <span class="o">=</span> <span class="o">~</span><span class="n">dg</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="n">dg</span><span class="o">.</span><span class="n">relation</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
            <span class="n">rowText</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">actionsList</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">Diagonal</span><span class="p">:</span> <span class="c1"># minimal distance</span>
                        <span class="n">rowText</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">rowText</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">Max</span> <span class="o">-</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">rowText</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">Max</span> <span class="o">-</span> <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]))</span>
            <span class="k">if</span> <span class="n">Debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">rowText</span><span class="p">)</span>
            <span class="n">csvfo</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">rowText</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<div class="viewcode-block" id="CriteriaCorrelationDigraph.exportPrincipalImage">
<a class="viewcode-back" href="../techDoc.html#digraphs.CriteriaCorrelationDigraph.exportPrincipalImage">[docs]</a>
    <span class="k">def</span> <span class="nf">exportPrincipalImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plotFileName</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                             <span class="n">pictureFormat</span><span class="o">=</span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span>
                             <span class="n">bgcolor</span><span class="o">=</span><span class="s1">&#39;cornsilk&#39;</span><span class="p">,</span>
                             <span class="n">fontcolor</span><span class="o">=</span><span class="s1">&#39;red3&#39;</span><span class="p">,</span>
                             <span class="n">fontsize</span><span class="o">=</span><span class="s1">&#39;0.85&#39;</span><span class="p">,</span>
                             <span class="c1">#_Reduced=False,</span>
                             <span class="c1">#_Colwise=False,</span>
                             <span class="n">tempDir</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span>
                             <span class="n">Comments</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Export the principal projection of</span>
<span class="sd">        the absolute correlation distances</span>
<span class="sd">        using the three principal eigen vectors.</span>

<span class="sd">        Implemeted picture formats are: </span>
<span class="sd">        &#39;pdf&#39; (default), &#39;png&#39;, &#39;jpeg&#39; and &#39;xfig&#39;.</span>

<span class="sd">        The background, resp. font color is set by default to &#39;cornsilk&#39;, resp. &#39;red3&#39;.</span>

<span class="sd">        _Colwise and _Reduced parameters are deprecated.</span>

<span class="sd">        .. warning::</span>
<span class="sd">        </span>
<span class="sd">            The method, writing and reading temporary files: </span>
<span class="sd">            tempCol.r and rotationCol.csv, resp. tempRow.r and rotationRow.csv,</span>
<span class="sd">            by default in the working directory (./),</span>
<span class="sd">            is hence not safe for multiprocessing programs, unless a</span>
<span class="sd">            temporary directory *tempDir* is provided. </span>

<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*----  export 3dplot of format </span><span class="si">%s</span><span class="s1"> -----&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pictureFormat</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">tempDir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">tempDir</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span>
        <span class="kn">import</span> <span class="nn">os</span><span class="o">,</span><span class="nn">time</span>
        <span class="k">if</span> <span class="n">plotFileName</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">plotFileName</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">tempDir</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">plotFileName</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">tempDir</span><span class="p">,</span><span class="n">plotFileName</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_saveCorrelationDistancesCSV</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/exportTemp&#39;</span> <span class="o">%</span> <span class="n">tempDir</span><span class="p">,</span><span class="n">Diagonal</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="c1">#if _Colwise:</span>
        <span class="c1">#fo = open(&#39;%s/tempCol.r&#39; % tempDir,&#39;w&#39;)</span>
        <span class="c1">#else:</span>
        <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/tempRow.r&#39;</span> <span class="o">%</span> <span class="n">tempDir</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;x = read.csv(&#39;</span><span class="si">%s</span><span class="s2">/exportTemp.csv&#39;,row.names=1)</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">tempDir</span><span class="p">)</span>
        <span class="c1">#if _Colwise:</span>
        <span class="c1">#fo.write(&quot;x = t(x)\n&quot;)</span>
        <span class="c1">#if _Reduced:</span>
        <span class="c1">#    fo.write(&quot;x = (x-colMeans(x))/(sapply(x,sd)*sqrt(length(t(x))))\n&quot;)</span>
        <span class="c1">#else:</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;x = (x-colMeans(x))</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;X = as.matrix(x)</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;A = X </span><span class="si">%*%</span><span class="s2"> t(X)</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;E = eigen(A, symmetric=TRUE)</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;P = E$values * t(E$vectors)</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1">#if _Colwise:</span>
        <span class="c1">#    fo.write(&quot;write.csv(t(P),&#39;%s/rotationCol.csv&#39;,row.names=F)\n&quot; % tempDir)</span>
        <span class="c1">#else:</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;write.csv(t(P),&#39;</span><span class="si">%s</span><span class="s2">/rotationRow.csv&#39;,row.names=F)</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">tempDir</span><span class="p">)</span>           
        <span class="k">if</span> <span class="n">pictureFormat</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># no principal image is required</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;valprop = round(E$values/sum(E$values),digits=3)</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;pcaRes = list(x=X,eig=E,a=A,P=P,val=valprop)</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;val = pcaRes$val</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;nval = length(val)</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pictureFormat</span> <span class="o">==</span> <span class="s2">&quot;png&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">bgcolor</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;png(&quot;</span><span class="si">%s</span><span class="s1">.png&quot;,width=480,height=480</span><span class="se">\n</span><span class="s1">&#39;</span>\
                         <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">)</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;png(&quot;</span><span class="si">%s</span><span class="s1">.png&quot;,width=480,height=480,bg=&quot;</span><span class="si">%s</span><span class="s1">&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span>\
                         <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">,</span><span class="n">bgcolor</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">elif</span> <span class="n">pictureFormat</span> <span class="o">==</span> <span class="s2">&quot;jpeg&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">bgcolor</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;jpeg(&quot;</span><span class="si">%s</span><span class="s1">.jpg&quot;,width=480,height=480</span><span class="se">\n</span><span class="s1">&#39;</span>\
                         <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">)</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;jpeg(&quot;</span><span class="si">%s</span><span class="s1">.png&quot;,width=480,height=480,bg=&quot;</span><span class="si">%s</span><span class="s1">&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span>\
                         <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">,</span><span class="n">bgcolor</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">elif</span> <span class="n">pictureFormat</span> <span class="o">==</span> <span class="s2">&quot;xfig&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">bgcolor</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;xfig(&quot;</span><span class="si">%s</span><span class="s1">.fig&quot;,width=480,height=480</span><span class="se">\n</span><span class="s1">&#39;</span>\
                         <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">)</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;xfig(&quot;</span><span class="si">%s</span><span class="s1">.figg&quot;,width=480,height=480,bg=&quot;</span><span class="si">%s</span><span class="s1">&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span>\
                         <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">,</span><span class="n">bgcolor</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">elif</span> <span class="n">pictureFormat</span> <span class="o">==</span> <span class="s2">&quot;pdf&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">bgcolor</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;pdf(&quot;</span><span class="si">%s</span><span class="s1">.pdf&quot;,width=6,height=6,title=&quot;PCA of relation valuation&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">)</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;pdf(&quot;</span><span class="si">%s</span><span class="s1">.pdf&quot;,width=6,height=6,bg=&quot;</span><span class="si">%s</span><span class="s1">&quot;,title=&quot;PCA of relation valuation&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">,</span><span class="n">bgcolor</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error: Plotting device </span><span class="si">%s</span><span class="s1"> not defined !&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">pictureFormat</span><span class="p">))</span>
                <span class="k">return</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;par(mfrow=c(2,2))</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;a1 = 1</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;a2 = 2</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;a3 = 3</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;plot(pcaRes$P[a1,],pcaRes$P[a2,],&quot;n&quot;,xlab=paste(&quot;axis 1:&quot;,val[a1]*100,&quot;%&quot;),ylab=paste(&quot;axis 2:&quot;,val[a2]*100,&quot;%&quot;),asp=1)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;text(pcaRes$P[a1,],pcaRes$P[a2,],rownames(pcaRes$x),col=&quot;</span><span class="si">%s</span><span class="s1">&quot;,cex=</span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fontcolor</span><span class="p">,</span><span class="n">fontsize</span><span class="p">)</span> <span class="p">)</span> 
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;title(sub=paste(&quot;Total inertia:&quot;,(val[1]+val[2])*100,&quot;%&quot;),main=&quot;Factors 1 and 2&quot;,col.sub=&quot;black&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;abline(h=0,v=0,lty=2,col=&quot;gray&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;plot(pcaRes$P[a3,],pcaRes$P[a2,],&quot;n&quot;,xlab=paste(&quot;axis 3:&quot;,val[a3]*100,&quot;%&quot;),ylab=paste(&quot;axis 2:&quot;,val[a2]*100,&quot;%&quot;),asp=1)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;text(pcaRes$P[a3,],pcaRes$P[a2,],rownames(pcaRes$x),col=&quot;</span><span class="si">%s</span><span class="s1">&quot;,cex=</span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fontcolor</span><span class="p">,</span><span class="n">fontsize</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;title(sub=paste(&quot;Total inertia:&quot;,(val[3]+val[2])*100,&quot;%&quot;),main=&quot;Factors 3 and 2&quot;,col.sub=&quot;black&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>        
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;abline(h=0,v=0,lty=2,col=&quot;gray&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;plot(pcaRes$P[a1,],pcaRes$P[a3,],&quot;n&quot;,xlab=paste(&quot;axis 1:&quot;,val[a1]*100,&quot;%&quot;),ylab=paste(&quot;axis 3:&quot;,val[a3]*100,&quot;%&quot;),asp=1)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;text(pcaRes$P[a1,],pcaRes$P[a3,],rownames(pcaRes$x),col=&quot;</span><span class="si">%s</span><span class="s1">&quot;,cex=</span><span class="si">%s</span><span class="s1">)</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fontcolor</span><span class="p">,</span><span class="n">fontsize</span><span class="p">)</span> <span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;title(sub=paste(&quot;Total inertia:&quot;,(val[1]+val[3])*100,&quot;%&quot;),main=&quot;Factors 1 and 3&quot;,col.sub=&quot;black&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>        
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;abline(h=0,v=0,lty=2,col=&quot;gray&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;barplot(val[a1:nval]*100,names.arg=a1:nval,main=&quot;Axis inertia (in %)&quot;,col=&quot;orangered&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;dev.off()</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="c1">#if _Colwise:</span>
            <span class="c1">#    os.system(&#39;(cd %s;env R -q --vanilla --verbose &lt; tempCol.r 2&gt;&amp;1)&#39; % tempDir)</span>
            <span class="c1">#else:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;(cd </span><span class="si">%s</span><span class="s1">;env R -q --vanilla --verbose &lt; tempRow.r 2&gt;&amp;1)&#39;</span> <span class="o">%</span> <span class="n">tempDir</span> <span class="p">)</span>               
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#if _Colwise:</span>
            <span class="c1">#    os.system(&#39;(cd %s;env R -q --vanilla &lt; tempCol.r &gt; /dev/null 2&gt; /dev/null)&#39; % tempDir)</span>
            <span class="c1">#else:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;(cd </span><span class="si">%s</span><span class="s1">;env R -q --vanilla &lt; tempRow.r &gt; /dev/null 2&gt; /dev/null)&#39;</span> <span class="o">%</span> <span class="n">tempDir</span><span class="p">)</span>
                
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>     
        <span class="k">if</span> <span class="n">pictureFormat</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">Comments</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;See </span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1"> ! &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">plotFileName</span><span class="p">,</span><span class="n">pictureFormat</span><span class="p">))</span></div>
</div>

            
<span class="c1">#----------------</span>

<div class="viewcode-block" id="CSVDigraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.CSVDigraph">[docs]</a>
<span class="k">class</span> <span class="nc">CSVDigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialization of the general Digraph class for reading</span>
<span class="sd">    stored csv formatted digraphs. Using the inbuilt module csv.</span>

<span class="sd">    Param:</span>
<span class="sd">        fileName (without the extension .csv).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">,</span><span class="n">valuationMin</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span><span class="n">valuationMax</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">csv</span> <span class="kn">import</span> <span class="n">reader</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">fileNameExt</span> <span class="o">=</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span>
            <span class="n">fi</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileNameExt</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
            <span class="n">csvReader</span> <span class="o">=</span> <span class="n">reader</span><span class="p">(</span><span class="n">fi</span><span class="p">)</span>
            <span class="n">csvText</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">csvReader</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: File </span><span class="si">%s</span><span class="s2">.csv not found !!&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileName</span><span class="p">))</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">fileName</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">csvText</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reference</span> <span class="o">=</span> <span class="s1">&#39;CSV Digraph input method.&#39;</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">valuationMin</span><span class="p">)</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">valuationMax</span><span class="p">)</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">Min</span> <span class="o">+</span> <span class="p">((</span><span class="n">Max</span> <span class="o">-</span> <span class="n">Min</span><span class="p">)</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2.0&#39;</span><span class="p">))</span>
        <span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
        <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
        <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">valuationdomain</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">csvText</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span>
    
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">csvText</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">relation</span><span class="p">[</span><span class="n">csvText</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]][</span><span class="n">csvText</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">j</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">csvText</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">])</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>

<div class="viewcode-block" id="CSVDigraph.showAll">
<a class="viewcode-back" href="../techDoc.html#digraphs.CSVDigraph.showAll">[docs]</a>
    <span class="k">def</span> <span class="nf">showAll</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="s1">&#39;outranking&#39;</span><span class="p">:</span>
                <span class="n">Digraph</span><span class="o">.</span><span class="n">showAll</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">showPreKernels</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">showGoodChoices</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">showBadChoices</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">Digraph</span><span class="o">.</span><span class="n">showAll</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">Digraph</span><span class="o">.</span><span class="n">showAll</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>
</div>


<span class="c1">#--------</span>

<span class="k">class</span> <span class="nc">_XMCDADigraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialization of the general Digraph class for reading</span>
<span class="sd">    stored XMCDA formatted digraphs. Using the inbuilt module</span>
<span class="sd">    xml.etree (for Python 2.5+).</span>

<span class="sd">    Param:</span>
<span class="sd">        fileName (without the extension .xmcda). </span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">xml.etree</span> <span class="kn">import</span> <span class="n">ElementTree</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fileNameExt</span> <span class="o">=</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s1">&#39;.xmcda&#39;</span>
            <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileNameExt</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fileNameExt</span> <span class="o">=</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s1">&#39;.xml&#39;</span>
                <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileNameExt</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: file </span><span class="si">%s</span><span class="s2">{.xml|.xmcda}  not found&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileName</span><span class="p">))</span>
        <span class="n">XMCDA</span> <span class="o">=</span> <span class="n">ElementTree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">fo</span><span class="p">)</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span>
        <span class="n">description</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1">#for elem in [x for x in XMCDA.find(&#39;caseReference&#39;).getchildren()]:</span>
        <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;caseReference&#39;</span><span class="p">)]:</span>
            <span class="n">description</span><span class="p">[</span><span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">description</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span><span class="s1">&#39;temp&#39;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">description</span><span class="p">[</span><span class="s1">&#39;author&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="s1">&#39;digraphs module (RB)&#39;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reference</span> <span class="o">=</span> <span class="n">description</span><span class="p">[</span><span class="s1">&#39;comment&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reference</span> <span class="o">=</span> <span class="s1">&#39;XMCDA 1.0 Digraph input method.&#39;</span>        
        <span class="c1">#Min = Decimal(XMCDA.find(&#39;relationOnAlternatives&#39;).find(&#39;valuationDomain&#39;).find(&#39;minimum&#39;).getchildren().pop().text)</span>
        <span class="c1">#Max = Decimal(XMCDA.find(&#39;relationOnAlternatives&#39;).find(&#39;valuationDomain&#39;).find(&#39;maximum&#39;).getchildren().pop().text)</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;relationOnAlternatives&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;valuationDomain&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;minimum&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;relationOnAlternatives&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;valuationDomain&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;maximum&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">Min</span> <span class="o">+</span> <span class="p">((</span><span class="n">Max</span> <span class="o">-</span> <span class="n">Min</span><span class="p">)</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2.0&#39;</span><span class="p">))</span>
        <span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
        <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
        <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">valuationdomain</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">alternative</span> <span class="ow">in</span> <span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;alternatives&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;alternative&#39;</span><span class="p">):</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="n">alternative</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
            <span class="n">actions</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="c1">#for elem in [x for x in alternative.find(&#39;description&#39;).getchildren()]:</span>
            <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">alternative</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)]:</span>
                <span class="n">actions</span><span class="p">[</span><span class="nb">id</span><span class="p">][</span><span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span>    
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;relationOnAlternatives&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s1">&#39;outrankingDigraph&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="o">=</span> <span class="s1">&#39;outranking&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="o">=</span> <span class="s1">&#39;general&#39;</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">arc</span> <span class="ow">in</span> <span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;relationOnAlternatives&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;arcs&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;arc&#39;</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">relation</span><span class="p">[</span><span class="n">arc</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;from&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;alternativeID&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">][</span><span class="n">arc</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;to&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;alternativeID&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">arc</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;real&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">relation</span><span class="p">[</span><span class="n">arc</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;from&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;alternativeID&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">][</span><span class="n">arc</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;to&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;alternativeID&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">arc</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;integer&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        
    <span class="k">def</span> <span class="nf">showAll</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="s1">&#39;outranking&#39;</span><span class="p">:</span>
                <span class="n">Digraph</span><span class="o">.</span><span class="n">showAll</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">showPreKernels</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">showGoodChoices</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">showBadChoices</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">Digraph</span><span class="o">.</span><span class="n">showAll</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">Digraph</span><span class="o">.</span><span class="n">showAll</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<span class="c1">#------------</span>

<div class="viewcode-block" id="XMCDA2Digraph">
<a class="viewcode-back" href="../techDoc.html#digraphs.XMCDA2Digraph">[docs]</a>
<span class="k">class</span> <span class="nc">XMCDA2Digraph</span><span class="p">(</span><span class="n">Digraph</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialization of the general Digraph class for reading</span>
<span class="sd">    stored XMCDA-2.0 formatted digraphs. Using the inbuilt module</span>
<span class="sd">    xml.etree (for Python 2.5+).</span>

<span class="sd">    Param:</span>
<span class="sd">        fileName (without the extension .xmcda).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">xml.etree</span> <span class="kn">import</span> <span class="n">ElementTree</span>

        <span class="n">fileNameExt</span> <span class="o">=</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s1">&#39;.xml&#39;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileNameExt</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">fileNameExt</span> <span class="o">=</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s1">&#39;.xmcda&#39;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileNameExt</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">fileNameExt</span> <span class="o">=</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s1">&#39;.xmcda2&#39;</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">fo</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fileNameExt</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: file </span><span class="si">%s</span><span class="s2">  not found&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileNameExt</span><span class="p">))</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;file </span><span class="si">%s</span><span class="s2"> is being read:&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fileNameExt</span><span class="p">))</span>
        <span class="n">XMCDA</span> <span class="o">=</span> <span class="n">ElementTree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">fo</span><span class="p">)</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">XMCDA</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span><span class="s1">&#39;temp&#39;</span>

        <span class="n">description</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1">#for elem in [x for x in XMCDA.find(&#39;projectReference&#39;).getchildren()]:</span>
        <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;projectReference&#39;</span><span class="p">)]:</span>
            <span class="n">description</span><span class="p">[</span><span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">description</span><span class="p">[</span><span class="s1">&#39;author&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="s1">&#39;digraphs module (RB)&#39;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reference</span> <span class="o">=</span> <span class="n">description</span><span class="p">[</span><span class="s1">&#39;comment&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reference</span> <span class="o">=</span> <span class="s1">&#39;XMCDA 1.0 Digraph input method.&#39;</span>

        <span class="c1">#Min = Decimal(XMCDA.find(&#39;alternativesComparisons&#39;).find(&#39;valuation&#39;).find(&#39;quantitative&#39;).find(&#39;minimum&#39;).getchildren().pop().text)</span>
        <span class="c1">#Max = Decimal(XMCDA.find(&#39;alternativesComparisons&#39;).find(&#39;valuation&#39;).find(&#39;quantitative&#39;).find(&#39;maximum&#39;).getchildren().pop().text)</span>
        <span class="n">Min</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;alternativesComparisons&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;valuation&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;quantitative&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;minimum&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;real&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="n">Max</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;alternativesComparisons&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;valuation&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;quantitative&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;maximum&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;real&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="n">Med</span> <span class="o">=</span> <span class="n">Min</span> <span class="o">+</span> <span class="p">((</span><span class="n">Max</span> <span class="o">-</span> <span class="n">Min</span><span class="p">)</span><span class="o">/</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;2.0&#39;</span><span class="p">))</span>
        <span class="n">valuationdomain</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Min</span>
        <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;med&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Med</span>
        <span class="n">valuationdomain</span><span class="p">[</span><span class="s1">&#39;max&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Max</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valuationdomain</span> <span class="o">=</span> <span class="n">valuationdomain</span>


        <span class="n">actions</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">alternative</span> <span class="ow">in</span> <span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;alternatives&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;alternative&#39;</span><span class="p">):</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="n">alternative</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
            <span class="n">actions</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">actions</span><span class="p">[</span><span class="nb">id</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">alternative</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
            <span class="c1">#for elem in [x for x in alternative.find(&#39;description&#39;).getchildren()]:</span>
            <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">alternative</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)]:</span>
                <span class="n">actions</span><span class="p">[</span><span class="nb">id</span><span class="p">][</span><span class="n">elem</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actions</span> <span class="o">=</span> <span class="n">actions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>


        <span class="n">relation</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;alternativesComparisons&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">attribute</span><span class="p">[</span><span class="s1">&#39;mcdaConcept&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;outrankingDigraph&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="o">=</span> <span class="s1">&#39;outranking&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="o">=</span> <span class="s1">&#39;general&#39;</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actions</span><span class="p">:</span>
            <span class="n">relation</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">XMCDA</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;alternativesComparisons&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;pairs&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;pair&#39;</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">relation</span><span class="p">[</span><span class="n">pair</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;initial&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;alternativeID&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">][</span><span class="n">pair</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;terminal&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;alternativeID&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">pair</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;real&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">relation</span><span class="p">[</span><span class="n">pair</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;initial&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;alternativeID&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">][</span><span class="n">pair</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;terminal&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;alternativeID&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">]</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">pair</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;integer&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">relation</span> <span class="o">=</span> <span class="n">relation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gammaSets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notGamma</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">notGammaSets</span><span class="p">()</span>
        <span class="n">fo</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<div class="viewcode-block" id="XMCDA2Digraph.showAll">
<a class="viewcode-back" href="../techDoc.html#digraphs.XMCDA2Digraph.showAll">[docs]</a>
    <span class="k">def</span> <span class="nf">showAll</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="s1">&#39;outranking&#39;</span><span class="p">:</span>
                <span class="n">Digraph</span><span class="o">.</span><span class="n">showAll</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">showPreKernels</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">showGoodChoices</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">showBadChoices</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">Digraph</span><span class="o">.</span><span class="n">showAll</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">Digraph</span><span class="o">.</span><span class="n">showAll</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>
</div>


<span class="c1">###  replace the old outrankingDigraphs</span>
<span class="c1">#from outrankingDigraphs import *</span>
<span class="kn">from</span> <span class="nn">randomDigraphs</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1">#############################################</span>
<span class="c1"># scratch space for testing ongoing developments</span>
<span class="c1">#----------test Digraph class ----------------</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*****************************************************&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* Python digraphs module                            *&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* $Revision: Python3.13$                            *&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* Copyright (C) 2006-2025 Raymond Bisdorff          *&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* The module comes with ABSOLUTELY NO WARRANTY      *&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* to the extent permitted by the applicable law.    *&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* This is free software, and you are welcome to     *&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* redistribute it if it remains free software.      *&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*****************************************************&#39;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*-------- Testing classes and methods -------&#39;</span><span class="p">)</span>

    <span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">time</span>
    <span class="c1">#from digraphsTools import *</span>
    <span class="c1">#from randomPerfTabs import *</span>
    <span class="kn">from</span> <span class="nn">outrankingDigraphs</span> <span class="kn">import</span> <span class="o">*</span>
    <span class="kn">from</span> <span class="nn">randomDigraphs</span> <span class="kn">import</span> <span class="o">*</span>
    <span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span><span class="p">,</span> <span class="n">getcontext</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">RandomCBPerformanceTableau</span><span class="p">(</span><span class="n">weightDistribution</span><span class="o">=</span><span class="s2">&quot;equiobjectives&quot;</span><span class="p">,</span>
                                 <span class="n">numberOfActions</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">numberOfCriteria</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span>
                                             <span class="n">missingDataProbability</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span><span class="n">seed</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
                          
    <span class="c1">#t = CircularPerformanceTableau()</span>
    <span class="c1">#print(getcontext().prec)</span>
    <span class="n">g</span> <span class="o">=</span> <span class="n">BipolarOutrankingDigraph</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">Threading</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">startMethod</span><span class="o">=</span><span class="s1">&#39;spawn&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;polarised Bachet BCR&#39;</span><span class="p">)</span>
    <span class="n">g</span><span class="o">.</span><span class="n">showBachetChoiceRecommendation</span><span class="p">(</span><span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">seed</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;valued Bachet BCR&#39;</span><span class="p">)</span>
    <span class="n">g</span><span class="o">.</span><span class="n">showBachetChoiceRecommendation</span><span class="p">(</span><span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">seed</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">Polarised</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Rubis BCR&#39;</span><span class="p">)</span>
    <span class="n">g</span><span class="o">.</span><span class="n">showFirstChoiceRecommendation</span><span class="p">(</span><span class="n">Comments</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="kn">from</span> <span class="nn">transitiveDigraphs</span> <span class="kn">import</span> <span class="o">*</span>
    <span class="n">pbr</span> <span class="o">=</span> <span class="n">PartialBachetRanking</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
    <span class="n">rankings</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">pbr</span><span class="o">.</span><span class="n">bachetRankings</span><span class="p">]</span>
    <span class="n">br</span> <span class="o">=</span> <span class="n">BalancedRankingsDigraph</span><span class="p">(</span><span class="n">g</span><span class="p">,</span><span class="n">rankings</span><span class="p">)</span>
    <span class="n">rankings</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
    <span class="n">rankings</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
    <span class="c1">#rankings[2].reverse()</span>
    <span class="c1">#rankings[3].reverse()</span>
    <span class="c1">#rankings[4].reverse()</span>
    <span class="n">br1</span> <span class="o">=</span> <span class="n">BalancedRankingsDigraph</span><span class="p">(</span><span class="n">g</span><span class="p">,</span><span class="n">rankings</span><span class="p">)</span>
     

    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*------------------*&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;If you see this line all tests were passed successfully :-)&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Enjoy !&#39;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*************************************&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* R.B. Mar 2021                     *&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;* $Revision: Python3.9.2$           *&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;*************************************&#39;</span><span class="p">)</span>

<span class="c1">#############################</span>
<span class="c1"># Log record for changes:</span>
<span class="c1"># $Log: digraphs.py,v $</span>
<span class="c1">#</span>
<span class="c1">#############################</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2012-2025, Raymond Bisdorff.
      <span class="lastupdated">Last updated on Nov 15, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>